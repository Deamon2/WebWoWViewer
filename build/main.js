var main=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(12)},function(e,t,n){e.exports=n(2)},function(e,t,n){e.exports.css=n(3)},function(e,t,n){var r=n(4);"string"==typeof r&&(r=[[e.id,r,""]]);n(11)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(5)(),t.push([e.id,'/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}\n\n/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */@media print{*,:after,:before{background:transparent!important;color:#000!important;box-shadow:none!important;text-shadow:none!important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}blockquote,pre{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}img,tr{page-break-inside:avoid}img{max-width:100%!important}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}.navbar{display:none}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000!important}.label{border:1px solid #000}.table{border-collapse:collapse!important}.table td,.table th{background-color:#fff!important}.table-bordered td,.table-bordered th{border:1px solid #ddd!important}}@font-face{font-family:Glyphicons Halflings;src:url('+n(6)+");src:url("+n(6)+') format("embedded-opentype"),url('+n(7)+') format("woff2"),url('+n(8)+') format("woff"),url('+n(9)+') format("truetype"),url('+n(10)+') format("svg")}.glyphicon{position:relative;top:1px;display:inline-block;font-family:Glyphicons Halflings;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.glyphicon-asterisk:before{content:"*"}.glyphicon-plus:before{content:"+"}.glyphicon-eur:before,.glyphicon-euro:before{content:"\\20AC"}.glyphicon-minus:before{content:"\\2212"}.glyphicon-cloud:before{content:"\\2601"}.glyphicon-envelope:before{content:"\\2709"}.glyphicon-pencil:before{content:"\\270F"}.glyphicon-glass:before{content:"\\E001"}.glyphicon-music:before{content:"\\E002"}.glyphicon-search:before{content:"\\E003"}.glyphicon-heart:before{content:"\\E005"}.glyphicon-star:before{content:"\\E006"}.glyphicon-star-empty:before{content:"\\E007"}.glyphicon-user:before{content:"\\E008"}.glyphicon-film:before{content:"\\E009"}.glyphicon-th-large:before{content:"\\E010"}.glyphicon-th:before{content:"\\E011"}.glyphicon-th-list:before{content:"\\E012"}.glyphicon-ok:before{content:"\\E013"}.glyphicon-remove:before{content:"\\E014"}.glyphicon-zoom-in:before{content:"\\E015"}.glyphicon-zoom-out:before{content:"\\E016"}.glyphicon-off:before{content:"\\E017"}.glyphicon-signal:before{content:"\\E018"}.glyphicon-cog:before{content:"\\E019"}.glyphicon-trash:before{content:"\\E020"}.glyphicon-home:before{content:"\\E021"}.glyphicon-file:before{content:"\\E022"}.glyphicon-time:before{content:"\\E023"}.glyphicon-road:before{content:"\\E024"}.glyphicon-download-alt:before{content:"\\E025"}.glyphicon-download:before{content:"\\E026"}.glyphicon-upload:before{content:"\\E027"}.glyphicon-inbox:before{content:"\\E028"}.glyphicon-play-circle:before{content:"\\E029"}.glyphicon-repeat:before{content:"\\E030"}.glyphicon-refresh:before{content:"\\E031"}.glyphicon-list-alt:before{content:"\\E032"}.glyphicon-lock:before{content:"\\E033"}.glyphicon-flag:before{content:"\\E034"}.glyphicon-headphones:before{content:"\\E035"}.glyphicon-volume-off:before{content:"\\E036"}.glyphicon-volume-down:before{content:"\\E037"}.glyphicon-volume-up:before{content:"\\E038"}.glyphicon-qrcode:before{content:"\\E039"}.glyphicon-barcode:before{content:"\\E040"}.glyphicon-tag:before{content:"\\E041"}.glyphicon-tags:before{content:"\\E042"}.glyphicon-book:before{content:"\\E043"}.glyphicon-bookmark:before{content:"\\E044"}.glyphicon-print:before{content:"\\E045"}.glyphicon-camera:before{content:"\\E046"}.glyphicon-font:before{content:"\\E047"}.glyphicon-bold:before{content:"\\E048"}.glyphicon-italic:before{content:"\\E049"}.glyphicon-text-height:before{content:"\\E050"}.glyphicon-text-width:before{content:"\\E051"}.glyphicon-align-left:before{content:"\\E052"}.glyphicon-align-center:before{content:"\\E053"}.glyphicon-align-right:before{content:"\\E054"}.glyphicon-align-justify:before{content:"\\E055"}.glyphicon-list:before{content:"\\E056"}.glyphicon-indent-left:before{content:"\\E057"}.glyphicon-indent-right:before{content:"\\E058"}.glyphicon-facetime-video:before{content:"\\E059"}.glyphicon-picture:before{content:"\\E060"}.glyphicon-map-marker:before{content:"\\E062"}.glyphicon-adjust:before{content:"\\E063"}.glyphicon-tint:before{content:"\\E064"}.glyphicon-edit:before{content:"\\E065"}.glyphicon-share:before{content:"\\E066"}.glyphicon-check:before{content:"\\E067"}.glyphicon-move:before{content:"\\E068"}.glyphicon-step-backward:before{content:"\\E069"}.glyphicon-fast-backward:before{content:"\\E070"}.glyphicon-backward:before{content:"\\E071"}.glyphicon-play:before{content:"\\E072"}.glyphicon-pause:before{content:"\\E073"}.glyphicon-stop:before{content:"\\E074"}.glyphicon-forward:before{content:"\\E075"}.glyphicon-fast-forward:before{content:"\\E076"}.glyphicon-step-forward:before{content:"\\E077"}.glyphicon-eject:before{content:"\\E078"}.glyphicon-chevron-left:before{content:"\\E079"}.glyphicon-chevron-right:before{content:"\\E080"}.glyphicon-plus-sign:before{content:"\\E081"}.glyphicon-minus-sign:before{content:"\\E082"}.glyphicon-remove-sign:before{content:"\\E083"}.glyphicon-ok-sign:before{content:"\\E084"}.glyphicon-question-sign:before{content:"\\E085"}.glyphicon-info-sign:before{content:"\\E086"}.glyphicon-screenshot:before{content:"\\E087"}.glyphicon-remove-circle:before{content:"\\E088"}.glyphicon-ok-circle:before{content:"\\E089"}.glyphicon-ban-circle:before{content:"\\E090"}.glyphicon-arrow-left:before{content:"\\E091"}.glyphicon-arrow-right:before{content:"\\E092"}.glyphicon-arrow-up:before{content:"\\E093"}.glyphicon-arrow-down:before{content:"\\E094"}.glyphicon-share-alt:before{content:"\\E095"}.glyphicon-resize-full:before{content:"\\E096"}.glyphicon-resize-small:before{content:"\\E097"}.glyphicon-exclamation-sign:before{content:"\\E101"}.glyphicon-gift:before{content:"\\E102"}.glyphicon-leaf:before{content:"\\E103"}.glyphicon-fire:before{content:"\\E104"}.glyphicon-eye-open:before{content:"\\E105"}.glyphicon-eye-close:before{content:"\\E106"}.glyphicon-warning-sign:before{content:"\\E107"}.glyphicon-plane:before{content:"\\E108"}.glyphicon-calendar:before{content:"\\E109"}.glyphicon-random:before{content:"\\E110"}.glyphicon-comment:before{content:"\\E111"}.glyphicon-magnet:before{content:"\\E112"}.glyphicon-chevron-up:before{content:"\\E113"}.glyphicon-chevron-down:before{content:"\\E114"}.glyphicon-retweet:before{content:"\\E115"}.glyphicon-shopping-cart:before{content:"\\E116"}.glyphicon-folder-close:before{content:"\\E117"}.glyphicon-folder-open:before{content:"\\E118"}.glyphicon-resize-vertical:before{content:"\\E119"}.glyphicon-resize-horizontal:before{content:"\\E120"}.glyphicon-hdd:before{content:"\\E121"}.glyphicon-bullhorn:before{content:"\\E122"}.glyphicon-bell:before{content:"\\E123"}.glyphicon-certificate:before{content:"\\E124"}.glyphicon-thumbs-up:before{content:"\\E125"}.glyphicon-thumbs-down:before{content:"\\E126"}.glyphicon-hand-right:before{content:"\\E127"}.glyphicon-hand-left:before{content:"\\E128"}.glyphicon-hand-up:before{content:"\\E129"}.glyphicon-hand-down:before{content:"\\E130"}.glyphicon-circle-arrow-right:before{content:"\\E131"}.glyphicon-circle-arrow-left:before{content:"\\E132"}.glyphicon-circle-arrow-up:before{content:"\\E133"}.glyphicon-circle-arrow-down:before{content:"\\E134"}.glyphicon-globe:before{content:"\\E135"}.glyphicon-wrench:before{content:"\\E136"}.glyphicon-tasks:before{content:"\\E137"}.glyphicon-filter:before{content:"\\E138"}.glyphicon-briefcase:before{content:"\\E139"}.glyphicon-fullscreen:before{content:"\\E140"}.glyphicon-dashboard:before{content:"\\E141"}.glyphicon-paperclip:before{content:"\\E142"}.glyphicon-heart-empty:before{content:"\\E143"}.glyphicon-link:before{content:"\\E144"}.glyphicon-phone:before{content:"\\E145"}.glyphicon-pushpin:before{content:"\\E146"}.glyphicon-usd:before{content:"\\E148"}.glyphicon-gbp:before{content:"\\E149"}.glyphicon-sort:before{content:"\\E150"}.glyphicon-sort-by-alphabet:before{content:"\\E151"}.glyphicon-sort-by-alphabet-alt:before{content:"\\E152"}.glyphicon-sort-by-order:before{content:"\\E153"}.glyphicon-sort-by-order-alt:before{content:"\\E154"}.glyphicon-sort-by-attributes:before{content:"\\E155"}.glyphicon-sort-by-attributes-alt:before{content:"\\E156"}.glyphicon-unchecked:before{content:"\\E157"}.glyphicon-expand:before{content:"\\E158"}.glyphicon-collapse-down:before{content:"\\E159"}.glyphicon-collapse-up:before{content:"\\E160"}.glyphicon-log-in:before{content:"\\E161"}.glyphicon-flash:before{content:"\\E162"}.glyphicon-log-out:before{content:"\\E163"}.glyphicon-new-window:before{content:"\\E164"}.glyphicon-record:before{content:"\\E165"}.glyphicon-save:before{content:"\\E166"}.glyphicon-open:before{content:"\\E167"}.glyphicon-saved:before{content:"\\E168"}.glyphicon-import:before{content:"\\E169"}.glyphicon-export:before{content:"\\E170"}.glyphicon-send:before{content:"\\E171"}.glyphicon-floppy-disk:before{content:"\\E172"}.glyphicon-floppy-saved:before{content:"\\E173"}.glyphicon-floppy-remove:before{content:"\\E174"}.glyphicon-floppy-save:before{content:"\\E175"}.glyphicon-floppy-open:before{content:"\\E176"}.glyphicon-credit-card:before{content:"\\E177"}.glyphicon-transfer:before{content:"\\E178"}.glyphicon-cutlery:before{content:"\\E179"}.glyphicon-header:before{content:"\\E180"}.glyphicon-compressed:before{content:"\\E181"}.glyphicon-earphone:before{content:"\\E182"}.glyphicon-phone-alt:before{content:"\\E183"}.glyphicon-tower:before{content:"\\E184"}.glyphicon-stats:before{content:"\\E185"}.glyphicon-sd-video:before{content:"\\E186"}.glyphicon-hd-video:before{content:"\\E187"}.glyphicon-subtitles:before{content:"\\E188"}.glyphicon-sound-stereo:before{content:"\\E189"}.glyphicon-sound-dolby:before{content:"\\E190"}.glyphicon-sound-5-1:before{content:"\\E191"}.glyphicon-sound-6-1:before{content:"\\E192"}.glyphicon-sound-7-1:before{content:"\\E193"}.glyphicon-copyright-mark:before{content:"\\E194"}.glyphicon-registration-mark:before{content:"\\E195"}.glyphicon-cloud-download:before{content:"\\E197"}.glyphicon-cloud-upload:before{content:"\\E198"}.glyphicon-tree-conifer:before{content:"\\E199"}.glyphicon-tree-deciduous:before{content:"\\E200"}.glyphicon-cd:before{content:"\\E201"}.glyphicon-save-file:before{content:"\\E202"}.glyphicon-open-file:before{content:"\\E203"}.glyphicon-level-up:before{content:"\\E204"}.glyphicon-copy:before{content:"\\E205"}.glyphicon-paste:before{content:"\\E206"}.glyphicon-alert:before{content:"\\E209"}.glyphicon-equalizer:before{content:"\\E210"}.glyphicon-king:before{content:"\\E211"}.glyphicon-queen:before{content:"\\E212"}.glyphicon-pawn:before{content:"\\E213"}.glyphicon-bishop:before{content:"\\E214"}.glyphicon-knight:before{content:"\\E215"}.glyphicon-baby-formula:before{content:"\\E216"}.glyphicon-tent:before{content:"\\26FA"}.glyphicon-blackboard:before{content:"\\E218"}.glyphicon-bed:before{content:"\\E219"}.glyphicon-apple:before{content:"\\F8FF"}.glyphicon-erase:before{content:"\\E221"}.glyphicon-hourglass:before{content:"\\231B"}.glyphicon-lamp:before{content:"\\E223"}.glyphicon-duplicate:before{content:"\\E224"}.glyphicon-piggy-bank:before{content:"\\E225"}.glyphicon-scissors:before{content:"\\E226"}.glyphicon-bitcoin:before,.glyphicon-btc:before,.glyphicon-xbt:before{content:"\\E227"}.glyphicon-jpy:before,.glyphicon-yen:before{content:"\\A5"}.glyphicon-rub:before,.glyphicon-ruble:before{content:"\\20BD"}.glyphicon-scale:before{content:"\\E230"}.glyphicon-ice-lolly:before{content:"\\E231"}.glyphicon-ice-lolly-tasted:before{content:"\\E232"}.glyphicon-education:before{content:"\\E233"}.glyphicon-option-horizontal:before{content:"\\E234"}.glyphicon-option-vertical:before{content:"\\E235"}.glyphicon-menu-hamburger:before{content:"\\E236"}.glyphicon-modal-window:before{content:"\\E237"}.glyphicon-oil:before{content:"\\E238"}.glyphicon-grain:before{content:"\\E239"}.glyphicon-sunglasses:before{content:"\\E240"}.glyphicon-text-size:before{content:"\\E241"}.glyphicon-text-color:before{content:"\\E242"}.glyphicon-text-background:before{content:"\\E243"}.glyphicon-object-align-top:before{content:"\\E244"}.glyphicon-object-align-bottom:before{content:"\\E245"}.glyphicon-object-align-horizontal:before{content:"\\E246"}.glyphicon-object-align-left:before{content:"\\E247"}.glyphicon-object-align-vertical:before{content:"\\E248"}.glyphicon-object-align-right:before{content:"\\E249"}.glyphicon-triangle-right:before{content:"\\E250"}.glyphicon-triangle-left:before{content:"\\E251"}.glyphicon-triangle-bottom:before{content:"\\E252"}.glyphicon-triangle-top:before{content:"\\E253"}.glyphicon-console:before{content:"\\E254"}.glyphicon-superscript:before{content:"\\E255"}.glyphicon-subscript:before{content:"\\E256"}.glyphicon-menu-left:before{content:"\\E257"}.glyphicon-menu-right:before{content:"\\E258"}.glyphicon-menu-down:before{content:"\\E259"}.glyphicon-menu-up:before{content:"\\E260"}*,:after,:before{box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:transparent}body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857;color:#333;background-color:#fff}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}a:focus,a:hover{color:#23527c;text-decoration:underline}a:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.img-responsive{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{padding:4px;line-height:1.42857;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;display:inline-block;max-width:100%;height:auto}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role=button]{cursor:pointer}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-weight:400;line-height:1;color:#777}.h1,.h2,.h3,h1,h2,h3{margin-top:20px;margin-bottom:10px}.h1 .small,.h1 small,.h2 .small,.h2 small,.h3 .small,.h3 small,h1 .small,h1 small,h2 .small,h2 small,h3 .small,h3 small{font-size:65%}.h4,.h5,.h6,h4,h5,h6{margin-top:10px;margin-bottom:10px}.h4 .small,.h4 small,.h5 .small,.h5 small,.h6 .small,.h6 small,h4 .small,h4 small,h5 .small,h5 small,h6 .small,h6 small{font-size:75%}.h1,h1{font-size:36px}.h2,h2{font-size:30px}.h3,h3{font-size:24px}.h4,h4{font-size:18px}.h5,h5{font-size:14px}.h6,h6{font-size:12px}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:16px;font-weight:300;line-height:1.4}@media (min-width:768px){.lead{font-size:21px}}.small,small{font-size:85%}.mark,mark{background-color:#fcf8e3;padding:.2em}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.text-nowrap{white-space:nowrap}.text-lowercase{text-transform:lowercase}.initialism,.text-uppercase{text-transform:uppercase}.text-capitalize{text-transform:capitalize}.text-muted{color:#777}.text-primary{color:#337ab7}a.text-primary:focus,a.text-primary:hover{color:#286090}.text-success{color:#3c763d}a.text-success:focus,a.text-success:hover{color:#2b542c}.text-info{color:#31708f}a.text-info:focus,a.text-info:hover{color:#245269}.text-warning{color:#8a6d3b}a.text-warning:focus,a.text-warning:hover{color:#66512c}.text-danger{color:#a94442}a.text-danger:focus,a.text-danger:hover{color:#843534}.bg-primary{color:#fff;background-color:#337ab7}a.bg-primary:focus,a.bg-primary:hover{background-color:#286090}.bg-success{background-color:#dff0d8}a.bg-success:focus,a.bg-success:hover{background-color:#c1e2b3}.bg-info{background-color:#d9edf7}a.bg-info:focus,a.bg-info:hover{background-color:#afd9ee}.bg-warning{background-color:#fcf8e3}a.bg-warning:focus,a.bg-warning:hover{background-color:#f7ecb5}.bg-danger{background-color:#f2dede}a.bg-danger:focus,a.bg-danger:hover{background-color:#e4b9b9}.page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}ol,ul{margin-top:0;margin-bottom:10px}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}.list-inline,.list-unstyled{padding-left:0;list-style:none}.list-inline{margin-left:-5px}.list-inline>li{display:inline-block;padding-left:5px;padding-right:5px}dl{margin-top:0;margin-bottom:20px}dd,dt{line-height:1.42857}dt{font-weight:700}dd{margin-left:0}.dl-horizontal dd:after,.dl-horizontal dd:before{content:" ";display:table}.dl-horizontal dd:after{clear:both}@media (min-width:768px){.dl-horizontal dt{float:left;width:160px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}}abbr[data-original-title],abbr[title]{cursor:help;border-bottom:1px dotted #777}.initialism{font-size:90%}blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}blockquote ol:last-child,blockquote p:last-child,blockquote ul:last-child{margin-bottom:0}blockquote .small,blockquote footer,blockquote small{display:block;font-size:80%;line-height:1.42857;color:#777}blockquote .small:before,blockquote footer:before,blockquote small:before{content:\'\\2014   \\A0\'}.blockquote-reverse,blockquote.pull-right{padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0;text-align:right}.blockquote-reverse .small:before,.blockquote-reverse footer:before,.blockquote-reverse small:before,blockquote.pull-right .small:before,blockquote.pull-right footer:before,blockquote.pull-right small:before{content:\'\'}.blockquote-reverse .small:after,.blockquote-reverse footer:after,.blockquote-reverse small:after,blockquote.pull-right .small:after,blockquote.pull-right footer:after,blockquote.pull-right small:after{content:\'\\A0   \\2014\'}address{margin-bottom:20px;font-style:normal;line-height:1.42857}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Courier New,monospace}code{color:#c7254e;background-color:#f9f2f4;border-radius:4px}code,kbd{padding:2px 4px;font-size:90%}kbd{color:#fff;background-color:#333;border-radius:3px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}kbd kbd{padding:0;font-size:100%;font-weight:700;box-shadow:none}pre{display:block;padding:9.5px;margin:0 0 10px;font-size:13px;line-height:1.42857;word-break:break-all;word-wrap:break-word;color:#333;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px}pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0}.pre-scrollable{max-height:340px;overflow-y:scroll}.container{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.container:after,.container:before{content:" ";display:table}.container:after{clear:both}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}.container-fluid:after,.container-fluid:before{content:" ";display:table}.container-fluid:after{clear:both}.row{margin-left:-15px;margin-right:-15px}.row:after,.row:before{content:" ";display:table}.row:after{clear:both}.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12,.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12,.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12,.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{position:relative;min-height:1px;padding-left:15px;padding-right:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-1{width:8.33333%}.col-xs-2{width:16.66667%}.col-xs-3{width:25%}.col-xs-4{width:33.33333%}.col-xs-5{width:41.66667%}.col-xs-6{width:50%}.col-xs-7{width:58.33333%}.col-xs-8{width:66.66667%}.col-xs-9{width:75%}.col-xs-10{width:83.33333%}.col-xs-11{width:91.66667%}.col-xs-12{width:100%}.col-xs-pull-0{right:auto}.col-xs-pull-1{right:8.33333%}.col-xs-pull-2{right:16.66667%}.col-xs-pull-3{right:25%}.col-xs-pull-4{right:33.33333%}.col-xs-pull-5{right:41.66667%}.col-xs-pull-6{right:50%}.col-xs-pull-7{right:58.33333%}.col-xs-pull-8{right:66.66667%}.col-xs-pull-9{right:75%}.col-xs-pull-10{right:83.33333%}.col-xs-pull-11{right:91.66667%}.col-xs-pull-12{right:100%}.col-xs-push-0{left:auto}.col-xs-push-1{left:8.33333%}.col-xs-push-2{left:16.66667%}.col-xs-push-3{left:25%}.col-xs-push-4{left:33.33333%}.col-xs-push-5{left:41.66667%}.col-xs-push-6{left:50%}.col-xs-push-7{left:58.33333%}.col-xs-push-8{left:66.66667%}.col-xs-push-9{left:75%}.col-xs-push-10{left:83.33333%}.col-xs-push-11{left:91.66667%}.col-xs-push-12{left:100%}.col-xs-offset-0{margin-left:0}.col-xs-offset-1{margin-left:8.33333%}.col-xs-offset-2{margin-left:16.66667%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-4{margin-left:33.33333%}.col-xs-offset-5{margin-left:41.66667%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-7{margin-left:58.33333%}.col-xs-offset-8{margin-left:66.66667%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-10{margin-left:83.33333%}.col-xs-offset-11{margin-left:91.66667%}.col-xs-offset-12{margin-left:100%}@media (min-width:768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-1{width:8.33333%}.col-sm-2{width:16.66667%}.col-sm-3{width:25%}.col-sm-4{width:33.33333%}.col-sm-5{width:41.66667%}.col-sm-6{width:50%}.col-sm-7{width:58.33333%}.col-sm-8{width:66.66667%}.col-sm-9{width:75%}.col-sm-10{width:83.33333%}.col-sm-11{width:91.66667%}.col-sm-12{width:100%}.col-sm-pull-0{right:auto}.col-sm-pull-1{right:8.33333%}.col-sm-pull-2{right:16.66667%}.col-sm-pull-3{right:25%}.col-sm-pull-4{right:33.33333%}.col-sm-pull-5{right:41.66667%}.col-sm-pull-6{right:50%}.col-sm-pull-7{right:58.33333%}.col-sm-pull-8{right:66.66667%}.col-sm-pull-9{right:75%}.col-sm-pull-10{right:83.33333%}.col-sm-pull-11{right:91.66667%}.col-sm-pull-12{right:100%}.col-sm-push-0{left:auto}.col-sm-push-1{left:8.33333%}.col-sm-push-2{left:16.66667%}.col-sm-push-3{left:25%}.col-sm-push-4{left:33.33333%}.col-sm-push-5{left:41.66667%}.col-sm-push-6{left:50%}.col-sm-push-7{left:58.33333%}.col-sm-push-8{left:66.66667%}.col-sm-push-9{left:75%}.col-sm-push-10{left:83.33333%}.col-sm-push-11{left:91.66667%}.col-sm-push-12{left:100%}.col-sm-offset-0{margin-left:0}.col-sm-offset-1{margin-left:8.33333%}.col-sm-offset-2{margin-left:16.66667%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-4{margin-left:33.33333%}.col-sm-offset-5{margin-left:41.66667%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-7{margin-left:58.33333%}.col-sm-offset-8{margin-left:66.66667%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-10{margin-left:83.33333%}.col-sm-offset-11{margin-left:91.66667%}.col-sm-offset-12{margin-left:100%}}@media (min-width:992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-1{width:8.33333%}.col-md-2{width:16.66667%}.col-md-3{width:25%}.col-md-4{width:33.33333%}.col-md-5{width:41.66667%}.col-md-6{width:50%}.col-md-7{width:58.33333%}.col-md-8{width:66.66667%}.col-md-9{width:75%}.col-md-10{width:83.33333%}.col-md-11{width:91.66667%}.col-md-12{width:100%}.col-md-pull-0{right:auto}.col-md-pull-1{right:8.33333%}.col-md-pull-2{right:16.66667%}.col-md-pull-3{right:25%}.col-md-pull-4{right:33.33333%}.col-md-pull-5{right:41.66667%}.col-md-pull-6{right:50%}.col-md-pull-7{right:58.33333%}.col-md-pull-8{right:66.66667%}.col-md-pull-9{right:75%}.col-md-pull-10{right:83.33333%}.col-md-pull-11{right:91.66667%}.col-md-pull-12{right:100%}.col-md-push-0{left:auto}.col-md-push-1{left:8.33333%}.col-md-push-2{left:16.66667%}.col-md-push-3{left:25%}.col-md-push-4{left:33.33333%}.col-md-push-5{left:41.66667%}.col-md-push-6{left:50%}.col-md-push-7{left:58.33333%}.col-md-push-8{left:66.66667%}.col-md-push-9{left:75%}.col-md-push-10{left:83.33333%}.col-md-push-11{left:91.66667%}.col-md-push-12{left:100%}.col-md-offset-0{margin-left:0}.col-md-offset-1{margin-left:8.33333%}.col-md-offset-2{margin-left:16.66667%}.col-md-offset-3{margin-left:25%}.col-md-offset-4{margin-left:33.33333%}.col-md-offset-5{margin-left:41.66667%}.col-md-offset-6{margin-left:50%}.col-md-offset-7{margin-left:58.33333%}.col-md-offset-8{margin-left:66.66667%}.col-md-offset-9{margin-left:75%}.col-md-offset-10{margin-left:83.33333%}.col-md-offset-11{margin-left:91.66667%}.col-md-offset-12{margin-left:100%}}@media (min-width:1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-1{width:8.33333%}.col-lg-2{width:16.66667%}.col-lg-3{width:25%}.col-lg-4{width:33.33333%}.col-lg-5{width:41.66667%}.col-lg-6{width:50%}.col-lg-7{width:58.33333%}.col-lg-8{width:66.66667%}.col-lg-9{width:75%}.col-lg-10{width:83.33333%}.col-lg-11{width:91.66667%}.col-lg-12{width:100%}.col-lg-pull-0{right:auto}.col-lg-pull-1{right:8.33333%}.col-lg-pull-2{right:16.66667%}.col-lg-pull-3{right:25%}.col-lg-pull-4{right:33.33333%}.col-lg-pull-5{right:41.66667%}.col-lg-pull-6{right:50%}.col-lg-pull-7{right:58.33333%}.col-lg-pull-8{right:66.66667%}.col-lg-pull-9{right:75%}.col-lg-pull-10{right:83.33333%}.col-lg-pull-11{right:91.66667%}.col-lg-pull-12{right:100%}.col-lg-push-0{left:auto}.col-lg-push-1{left:8.33333%}.col-lg-push-2{left:16.66667%}.col-lg-push-3{left:25%}.col-lg-push-4{left:33.33333%}.col-lg-push-5{left:41.66667%}.col-lg-push-6{left:50%}.col-lg-push-7{left:58.33333%}.col-lg-push-8{left:66.66667%}.col-lg-push-9{left:75%}.col-lg-push-10{left:83.33333%}.col-lg-push-11{left:91.66667%}.col-lg-push-12{left:100%}.col-lg-offset-0{margin-left:0}.col-lg-offset-1{margin-left:8.33333%}.col-lg-offset-2{margin-left:16.66667%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-4{margin-left:33.33333%}.col-lg-offset-5{margin-left:41.66667%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-7{margin-left:58.33333%}.col-lg-offset-8{margin-left:66.66667%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-10{margin-left:83.33333%}.col-lg-offset-11{margin-left:91.66667%}.col-lg-offset-12{margin-left:100%}}table{background-color:transparent}caption{padding-top:8px;padding-bottom:8px;color:#777}caption,th{text-align:left}.table{width:100%;max-width:100%;margin-bottom:20px}.table>tbody>tr>td,.table>tbody>tr>th,.table>tfoot>tr>td,.table>tfoot>tr>th,.table>thead>tr>td,.table>thead>tr>th{padding:8px;line-height:1.42857;vertical-align:top;border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>td,.table>caption+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>thead:first-child>tr:first-child>td,.table>thead:first-child>tr:first-child>th{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>tbody>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tfoot>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>thead>tr>td,.table-condensed>thead>tr>th{padding:5px}.table-bordered,.table-bordered>tbody>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tfoot>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border:1px solid #ddd}.table-bordered>thead>tr>td,.table-bordered>thead>tr>th{border-bottom-width:2px}.table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.table-hover>tbody>tr:hover{background-color:#f5f5f5}table col[class*=col-]{position:static;float:none;display:table-column}table td[class*=col-],table th[class*=col-]{position:static;float:none;display:table-cell}.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>thead>tr>td.active,.table>thead>tr>th.active{background-color:#f5f5f5}.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr.active:hover>th,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover{background-color:#e8e8e8}.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>thead>tr>td.success,.table>thead>tr>th.success{background-color:#dff0d8}.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr.success:hover>th,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover{background-color:#d0e9c6}.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>thead>tr>td.info,.table>thead>tr>th.info{background-color:#d9edf7}.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr.info:hover>th,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover{background-color:#c4e3f3}.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>thead>tr>td.warning,.table>thead>tr>th.warning{background-color:#fcf8e3}.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr.warning:hover>th,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover{background-color:#faf2cc}.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>thead>tr>td.danger,.table>thead>tr>th.danger{background-color:#f2dede}.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr.danger:hover>th,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover{background-color:#ebcccc}.table-responsive{overflow-x:auto;min-height:.01%}@media screen and (max-width:767px){.table-responsive{width:100%;margin-bottom:15px;overflow-y:hidden;-ms-overflow-style:-ms-autohiding-scrollbar;border:1px solid #ddd}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tfoot>tr>td,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>thead>tr>th{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>th{border-bottom:0}}fieldset{margin:0;min-width:0}fieldset,legend{padding:0;border:0}legend{display:block;width:100%;margin-bottom:20px;font-size:21px;line-height:inherit;color:#333;border-bottom:1px solid #e5e5e5}label{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}input[type=search]{box-sizing:border-box}input[type=checkbox],input[type=radio]{margin:4px 0 0;margin-top:1px\\9;line-height:normal}input[type=file]{display:block}input[type=range]{display:block;width:100%}select[multiple],select[size]{height:auto}input[type=checkbox]:focus,input[type=file]:focus,input[type=radio]:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}output{padding-top:7px}.form-control,output{display:block;font-size:14px;line-height:1.42857;color:#555}.form-control{width:100%;height:34px;padding:6px 12px;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);-webkit-transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control:focus{border-color:#66afe9;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)}.form-control::-moz-placeholder{color:#999;opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control::-ms-expand{border:0;background-color:transparent}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eee;opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}input[type=search]{-webkit-appearance:none}@media screen and (-webkit-min-device-pixel-ratio:0){input[type=date].form-control,input[type=datetime-local].form-control,input[type=month].form-control,input[type=time].form-control{line-height:34px}.input-group-sm>.input-group-btn>input[type=date].btn,.input-group-sm>.input-group-btn>input[type=datetime-local].btn,.input-group-sm>.input-group-btn>input[type=month].btn,.input-group-sm>.input-group-btn>input[type=time].btn,.input-group-sm>input[type=date].form-control,.input-group-sm>input[type=date].input-group-addon,.input-group-sm>input[type=datetime-local].form-control,.input-group-sm>input[type=datetime-local].input-group-addon,.input-group-sm>input[type=month].form-control,.input-group-sm>input[type=month].input-group-addon,.input-group-sm>input[type=time].form-control,.input-group-sm>input[type=time].input-group-addon,.input-group-sm input[type=date],.input-group-sm input[type=datetime-local],.input-group-sm input[type=month],.input-group-sm input[type=time],input[type=date].input-sm,input[type=datetime-local].input-sm,input[type=month].input-sm,input[type=time].input-sm{line-height:30px}.input-group-lg>.input-group-btn>input[type=date].btn,.input-group-lg>.input-group-btn>input[type=datetime-local].btn,.input-group-lg>.input-group-btn>input[type=month].btn,.input-group-lg>.input-group-btn>input[type=time].btn,.input-group-lg>input[type=date].form-control,.input-group-lg>input[type=date].input-group-addon,.input-group-lg>input[type=datetime-local].form-control,.input-group-lg>input[type=datetime-local].input-group-addon,.input-group-lg>input[type=month].form-control,.input-group-lg>input[type=month].input-group-addon,.input-group-lg>input[type=time].form-control,.input-group-lg>input[type=time].input-group-addon,.input-group-lg input[type=date],.input-group-lg input[type=datetime-local],.input-group-lg input[type=month],.input-group-lg input[type=time],input[type=date].input-lg,input[type=datetime-local].input-lg,input[type=month].input-lg,input[type=time].input-lg{line-height:46px}}.form-group{margin-bottom:15px}.checkbox,.radio{position:relative;display:block;margin-top:10px;margin-bottom:10px}.checkbox label,.radio label{min-height:20px;padding-left:20px;margin-bottom:0;font-weight:400;cursor:pointer}.checkbox-inline input[type=checkbox],.checkbox input[type=checkbox],.radio-inline input[type=radio],.radio input[type=radio]{position:absolute;margin-left:-20px;margin-top:4px\\9}.checkbox+.checkbox,.radio+.radio{margin-top:-5px}.checkbox-inline,.radio-inline{position:relative;display:inline-block;padding-left:20px;margin-bottom:0;vertical-align:middle;font-weight:400;cursor:pointer}.checkbox-inline+.checkbox-inline,.radio-inline+.radio-inline{margin-top:0;margin-left:10px}.checkbox-inline.disabled,.checkbox.disabled label,.radio-inline.disabled,.radio.disabled label,fieldset[disabled] .checkbox-inline,fieldset[disabled] .checkbox label,fieldset[disabled] .radio-inline,fieldset[disabled] .radio label,fieldset[disabled] input[type=checkbox],fieldset[disabled] input[type=radio],input[type=checkbox].disabled,input[type=checkbox][disabled],input[type=radio].disabled,input[type=radio][disabled]{cursor:not-allowed}.form-control-static{padding-top:7px;padding-bottom:7px;margin-bottom:0;min-height:34px}.form-control-static.input-lg,.form-control-static.input-sm,.input-group-lg>.form-control-static.form-control,.input-group-lg>.form-control-static.input-group-addon,.input-group-lg>.input-group-btn>.form-control-static.btn,.input-group-sm>.form-control-static.form-control,.input-group-sm>.form-control-static.input-group-addon,.input-group-sm>.input-group-btn>.form-control-static.btn{padding-left:0;padding-right:0}.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn,.input-sm{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.input-group-sm>.input-group-btn>select.btn,.input-group-sm>select.form-control,.input-group-sm>select.input-group-addon,select.input-sm{height:30px;line-height:30px}.input-group-sm>.input-group-btn>select[multiple].btn,.input-group-sm>.input-group-btn>textarea.btn,.input-group-sm>select[multiple].form-control,.input-group-sm>select[multiple].input-group-addon,.input-group-sm>textarea.form-control,.input-group-sm>textarea.input-group-addon,select[multiple].input-sm,textarea.input-sm{height:auto}.form-group-sm .form-control{height:30px;padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.form-group-sm select.form-control{height:30px;line-height:30px}.form-group-sm select[multiple].form-control,.form-group-sm textarea.form-control{height:auto}.form-group-sm .form-control-static{height:30px;min-height:32px;padding:6px 10px;font-size:12px;line-height:1.5}.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn,.input-lg{height:46px;padding:10px 16px;font-size:18px;line-height:1.33333;border-radius:6px}.input-group-lg>.input-group-btn>select.btn,.input-group-lg>select.form-control,.input-group-lg>select.input-group-addon,select.input-lg{height:46px;line-height:46px}.input-group-lg>.input-group-btn>select[multiple].btn,.input-group-lg>.input-group-btn>textarea.btn,.input-group-lg>select[multiple].form-control,.input-group-lg>select[multiple].input-group-addon,.input-group-lg>textarea.form-control,.input-group-lg>textarea.input-group-addon,select[multiple].input-lg,textarea.input-lg{height:auto}.form-group-lg .form-control{height:46px;padding:10px 16px;font-size:18px;line-height:1.33333;border-radius:6px}.form-group-lg select.form-control{height:46px;line-height:46px}.form-group-lg select[multiple].form-control,.form-group-lg textarea.form-control{height:auto}.form-group-lg .form-control-static{height:46px;min-height:38px;padding:11px 16px;font-size:18px;line-height:1.33333}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;top:0;right:0;z-index:2;display:block;width:34px;height:34px;line-height:34px;text-align:center;pointer-events:none}.form-group-lg .form-control+.form-control-feedback,.input-group-lg+.form-control-feedback,.input-group-lg>.form-control+.form-control-feedback,.input-group-lg>.input-group-addon+.form-control-feedback,.input-group-lg>.input-group-btn>.btn+.form-control-feedback,.input-lg+.form-control-feedback{width:46px;height:46px;line-height:46px}.form-group-sm .form-control+.form-control-feedback,.input-group-sm+.form-control-feedback,.input-group-sm>.form-control+.form-control-feedback,.input-group-sm>.input-group-addon+.form-control-feedback,.input-group-sm>.input-group-btn>.btn+.form-control-feedback,.input-sm+.form-control-feedback{width:30px;height:30px;line-height:30px}.has-success .checkbox,.has-success .checkbox-inline,.has-success.checkbox-inline label,.has-success.checkbox label,.has-success .control-label,.has-success .help-block,.has-success .radio,.has-success .radio-inline,.has-success.radio-inline label,.has-success.radio label{color:#3c763d}.has-success .form-control{border-color:#3c763d;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-success .form-control:focus{border-color:#2b542c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;border-color:#3c763d;background-color:#dff0d8}.has-success .form-control-feedback{color:#3c763d}.has-warning .checkbox,.has-warning .checkbox-inline,.has-warning.checkbox-inline label,.has-warning.checkbox label,.has-warning .control-label,.has-warning .help-block,.has-warning .radio,.has-warning .radio-inline,.has-warning.radio-inline label,.has-warning.radio label{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-warning .form-control:focus{border-color:#66512c;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;border-color:#8a6d3b;background-color:#fcf8e3}.has-warning .form-control-feedback{color:#8a6d3b}.has-error .checkbox,.has-error .checkbox-inline,.has-error.checkbox-inline label,.has-error.checkbox label,.has-error .control-label,.has-error .help-block,.has-error .radio,.has-error .radio-inline,.has-error.radio-inline label,.has-error.radio label{color:#a94442}.has-error .form-control{border-color:#a94442;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.has-error .form-control:focus{border-color:#843534;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;border-color:#a94442;background-color:#f2dede}.has-error .form-control-feedback{color:#a94442}.has-feedback label~.form-control-feedback{top:25px}.has-feedback label.sr-only~.form-control-feedback{top:0}.help-block{display:block;margin-top:5px;margin-bottom:10px;color:#737373}@media (min-width:768px){.form-inline .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.form-inline .form-control{display:inline-block;width:auto;vertical-align:middle}.form-inline .form-control-static{display:inline-block}.form-inline .input-group{display:inline-table;vertical-align:middle}.form-inline .input-group .form-control,.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .control-label{margin-bottom:0;vertical-align:middle}.form-inline .checkbox,.form-inline .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.form-inline .checkbox label,.form-inline .radio label{padding-left:0}.form-inline .checkbox input[type=checkbox],.form-inline .radio input[type=radio]{position:relative;margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}}.form-horizontal .checkbox,.form-horizontal .checkbox-inline,.form-horizontal .radio,.form-horizontal .radio-inline{margin-top:0;margin-bottom:0;padding-top:7px}.form-horizontal .checkbox,.form-horizontal .radio{min-height:27px}.form-horizontal .form-group{margin-left:-15px;margin-right:-15px}.form-horizontal .form-group:after,.form-horizontal .form-group:before{content:" ";display:table}.form-horizontal .form-group:after{clear:both}@media (min-width:768px){.form-horizontal .control-label{text-align:right;margin-bottom:0;padding-top:7px}}.form-horizontal .has-feedback .form-control-feedback{right:15px}@media (min-width:768px){.form-horizontal .form-group-lg .control-label{padding-top:11px;font-size:18px}}@media (min-width:768px){.form-horizontal .form-group-sm .control-label{padding-top:6px;font-size:12px}}.btn{display:inline-block;margin-bottom:0;font-weight:400;text-align:center;vertical-align:middle;touch-action:manipulation;cursor:pointer;background-image:none;border:1px solid transparent;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.42857;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn.active.focus,.btn.active:focus,.btn.focus,.btn:active.focus,.btn:active:focus,.btn:focus{outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.btn.focus,.btn:focus,.btn:hover{color:#333;text-decoration:none}.btn.active,.btn:active{outline:0;background-image:none;box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;opacity:.65;filter:alpha(opacity=65);box-shadow:none}a.btn.disabled,fieldset[disabled] a.btn{pointer-events:none}.btn-default{color:#333;background-color:#fff;border-color:#ccc}.btn-default.focus,.btn-default:focus{color:#333;background-color:#e6e6e6;border-color:#8c8c8c}.btn-default.active,.btn-default:active,.btn-default:hover,.open>.btn-default.dropdown-toggle{color:#333;background-color:#e6e6e6;border-color:#adadad}.btn-default.active.focus,.btn-default.active:focus,.btn-default.active:hover,.btn-default:active.focus,.btn-default:active:focus,.btn-default:active:hover,.open>.btn-default.dropdown-toggle.focus,.open>.btn-default.dropdown-toggle:focus,.open>.btn-default.dropdown-toggle:hover{color:#333;background-color:#d4d4d4;border-color:#8c8c8c}.btn-default.active,.btn-default:active,.open>.btn-default.dropdown-toggle{background-image:none}.btn-default.disabled.focus,.btn-default.disabled:focus,.btn-default.disabled:hover,.btn-default[disabled].focus,.btn-default[disabled]:focus,.btn-default[disabled]:hover,fieldset[disabled] .btn-default.focus,fieldset[disabled] .btn-default:focus,fieldset[disabled] .btn-default:hover{background-color:#fff;border-color:#ccc}.btn-default .badge{color:#fff;background-color:#333}.btn-primary{color:#fff;background-color:#337ab7;border-color:#2e6da4}.btn-primary.focus,.btn-primary:focus{color:#fff;background-color:#286090;border-color:#122b40}.btn-primary.active,.btn-primary:active,.btn-primary:hover,.open>.btn-primary.dropdown-toggle{color:#fff;background-color:#286090;border-color:#204d74}.btn-primary.active.focus,.btn-primary.active:focus,.btn-primary.active:hover,.btn-primary:active.focus,.btn-primary:active:focus,.btn-primary:active:hover,.open>.btn-primary.dropdown-toggle.focus,.open>.btn-primary.dropdown-toggle:focus,.open>.btn-primary.dropdown-toggle:hover{color:#fff;background-color:#204d74;border-color:#122b40}.btn-primary.active,.btn-primary:active,.open>.btn-primary.dropdown-toggle{background-image:none}.btn-primary.disabled.focus,.btn-primary.disabled:focus,.btn-primary.disabled:hover,.btn-primary[disabled].focus,.btn-primary[disabled]:focus,.btn-primary[disabled]:hover,fieldset[disabled] .btn-primary.focus,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary:hover{background-color:#337ab7;border-color:#2e6da4}.btn-primary .badge{color:#337ab7;background-color:#fff}.btn-success{color:#fff;background-color:#5cb85c;border-color:#4cae4c}.btn-success.focus,.btn-success:focus{color:#fff;background-color:#449d44;border-color:#255625}.btn-success.active,.btn-success:active,.btn-success:hover,.open>.btn-success.dropdown-toggle{color:#fff;background-color:#449d44;border-color:#398439}.btn-success.active.focus,.btn-success.active:focus,.btn-success.active:hover,.btn-success:active.focus,.btn-success:active:focus,.btn-success:active:hover,.open>.btn-success.dropdown-toggle.focus,.open>.btn-success.dropdown-toggle:focus,.open>.btn-success.dropdown-toggle:hover{color:#fff;background-color:#398439;border-color:#255625}.btn-success.active,.btn-success:active,.open>.btn-success.dropdown-toggle{background-image:none}.btn-success.disabled.focus,.btn-success.disabled:focus,.btn-success.disabled:hover,.btn-success[disabled].focus,.btn-success[disabled]:focus,.btn-success[disabled]:hover,fieldset[disabled] .btn-success.focus,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success:hover{background-color:#5cb85c;border-color:#4cae4c}.btn-success .badge{color:#5cb85c;background-color:#fff}.btn-info{color:#fff;background-color:#5bc0de;border-color:#46b8da}.btn-info.focus,.btn-info:focus{color:#fff;background-color:#31b0d5;border-color:#1b6d85}.btn-info.active,.btn-info:active,.btn-info:hover,.open>.btn-info.dropdown-toggle{color:#fff;background-color:#31b0d5;border-color:#269abc}.btn-info.active.focus,.btn-info.active:focus,.btn-info.active:hover,.btn-info:active.focus,.btn-info:active:focus,.btn-info:active:hover,.open>.btn-info.dropdown-toggle.focus,.open>.btn-info.dropdown-toggle:focus,.open>.btn-info.dropdown-toggle:hover{color:#fff;background-color:#269abc;border-color:#1b6d85}.btn-info.active,.btn-info:active,.open>.btn-info.dropdown-toggle{background-image:none}.btn-info.disabled.focus,.btn-info.disabled:focus,.btn-info.disabled:hover,.btn-info[disabled].focus,.btn-info[disabled]:focus,.btn-info[disabled]:hover,fieldset[disabled] .btn-info.focus,fieldset[disabled] .btn-info:focus,fieldset[disabled] .btn-info:hover{background-color:#5bc0de;border-color:#46b8da}.btn-info .badge{color:#5bc0de;background-color:#fff}.btn-warning{color:#fff;background-color:#f0ad4e;border-color:#eea236}.btn-warning.focus,.btn-warning:focus{color:#fff;background-color:#ec971f;border-color:#985f0d}.btn-warning.active,.btn-warning:active,.btn-warning:hover,.open>.btn-warning.dropdown-toggle{color:#fff;background-color:#ec971f;border-color:#d58512}.btn-warning.active.focus,.btn-warning.active:focus,.btn-warning.active:hover,.btn-warning:active.focus,.btn-warning:active:focus,.btn-warning:active:hover,.open>.btn-warning.dropdown-toggle.focus,.open>.btn-warning.dropdown-toggle:focus,.open>.btn-warning.dropdown-toggle:hover{color:#fff;background-color:#d58512;border-color:#985f0d}.btn-warning.active,.btn-warning:active,.open>.btn-warning.dropdown-toggle{background-image:none}.btn-warning.disabled.focus,.btn-warning.disabled:focus,.btn-warning.disabled:hover,.btn-warning[disabled].focus,.btn-warning[disabled]:focus,.btn-warning[disabled]:hover,fieldset[disabled] .btn-warning.focus,fieldset[disabled] .btn-warning:focus,fieldset[disabled] .btn-warning:hover{background-color:#f0ad4e;border-color:#eea236}.btn-warning .badge{color:#f0ad4e;background-color:#fff}.btn-danger{color:#fff;background-color:#d9534f;border-color:#d43f3a}.btn-danger.focus,.btn-danger:focus{color:#fff;background-color:#c9302c;border-color:#761c19}.btn-danger.active,.btn-danger:active,.btn-danger:hover,.open>.btn-danger.dropdown-toggle{color:#fff;background-color:#c9302c;border-color:#ac2925}.btn-danger.active.focus,.btn-danger.active:focus,.btn-danger.active:hover,.btn-danger:active.focus,.btn-danger:active:focus,.btn-danger:active:hover,.open>.btn-danger.dropdown-toggle.focus,.open>.btn-danger.dropdown-toggle:focus,.open>.btn-danger.dropdown-toggle:hover{color:#fff;background-color:#ac2925;border-color:#761c19}.btn-danger.active,.btn-danger:active,.open>.btn-danger.dropdown-toggle{background-image:none}.btn-danger.disabled.focus,.btn-danger.disabled:focus,.btn-danger.disabled:hover,.btn-danger[disabled].focus,.btn-danger[disabled]:focus,.btn-danger[disabled]:hover,fieldset[disabled] .btn-danger.focus,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger:hover{background-color:#d9534f;border-color:#d43f3a}.btn-danger .badge{color:#d9534f;background-color:#fff}.btn-link{color:#337ab7;font-weight:400;border-radius:0}.btn-link,.btn-link.active,.btn-link:active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;box-shadow:none}.btn-link,.btn-link:active,.btn-link:focus,.btn-link:hover{border-color:transparent}.btn-link:focus,.btn-link:hover{color:#23527c;text-decoration:underline;background-color:transparent}.btn-link[disabled]:focus,.btn-link[disabled]:hover,fieldset[disabled] .btn-link:focus,fieldset[disabled] .btn-link:hover{color:#777;text-decoration:none}.btn-group-lg>.btn,.btn-lg{padding:10px 16px;font-size:18px;line-height:1.33333;border-radius:6px}.btn-group-sm>.btn,.btn-sm{padding:5px 10px;font-size:12px;line-height:1.5;border-radius:3px}.btn-group-xs>.btn,.btn-xs{padding:1px 5px;font-size:12px;line-height:1.5;border-radius:3px}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:5px}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.fade{opacity:0;-webkit-transition:opacity .15s linear;transition:opacity .15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}tr.collapse.in{display:table-row}tbody.collapse.in{display:table-row-group}.collapsing{position:relative;height:0;overflow:hidden;-webkit-transition-property:height,visibility;transition-property:height,visibility;-webkit-transition-duration:.35s;transition-duration:.35s;-webkit-transition-timing-function:ease;transition-timing-function:ease}.caret{display:inline-block;width:0;height:0;margin-left:2px;vertical-align:middle;border-top:4px dashed;border-top:4px solid\\9;border-right:4px solid transparent;border-left:4px solid transparent}.dropdown,.dropup{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;list-style:none;font-size:14px;text-align:left;background-color:#fff;border:1px solid #ccc;border:1px solid rgba(0,0,0,.15);border-radius:4px;box-shadow:0 6px 12px rgba(0,0,0,.175);background-clip:padding-box}.dropdown-menu.pull-right{right:0;left:auto}.dropdown-menu .divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.dropdown-menu>li>a{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.42857;color:#333;white-space:nowrap}.dropdown-menu>li>a:focus,.dropdown-menu>li>a:hover{text-decoration:none;color:#262626;background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:focus,.dropdown-menu>.active>a:hover{color:#fff;text-decoration:none;outline:0;background-color:#337ab7}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{color:#777}.dropdown-menu>.disabled>a:focus,.dropdown-menu>.disabled>a:hover{text-decoration:none;background-color:transparent;background-image:none;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);cursor:not-allowed}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-menu-right{left:auto;right:0}.dropdown-menu-left{left:0;right:auto}.dropdown-header{display:block;padding:3px 20px;font-size:12px;line-height:1.42857;color:#777;white-space:nowrap}.dropdown-backdrop{position:fixed;left:0;right:0;bottom:0;top:0;z-index:990}.pull-right>.dropdown-menu{right:0;left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;border-bottom:4px dashed;border-bottom:4px solid\\9;content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;bottom:100%;margin-bottom:2px}@media (min-width:768px){.navbar-right .dropdown-menu{right:0;left:auto}.navbar-right .dropdown-menu-left{left:0;right:auto}}.btn-group,.btn-group-vertical{position:relative;display:inline-block;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;float:left}.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:2}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar{margin-left:-5px}.btn-toolbar:after,.btn-toolbar:before{content:" ";display:table}.btn-toolbar:after{clear:both}.btn-toolbar .btn,.btn-toolbar .btn-group,.btn-toolbar .input-group{float:left}.btn-toolbar>.btn,.btn-toolbar>.btn-group,.btn-toolbar>.input-group{margin-left:5px}.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.btn-group>.btn:first-child{margin-left:0}.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-top-right-radius:0}.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0}.btn-group>.btn-group{float:left}.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-top-right-radius:0}.btn-group>.btn-group:last-child:not(:first-child)>.btn:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{padding-left:8px;padding-right:8px}.btn-group-lg.btn-group>.btn+.dropdown-toggle,.btn-group>.btn-lg+.dropdown-toggle{padding-left:12px;padding-right:12px}.btn-group.open .dropdown-toggle{box-shadow:inset 0 3px 5px rgba(0,0,0,.125)}.btn-group.open .dropdown-toggle.btn-link{box-shadow:none}.btn .caret{margin-left:0}.btn-group-lg>.btn .caret,.btn-lg .caret{border-width:5px 5px 0;border-bottom-width:0}.dropup .btn-group-lg>.btn .caret,.dropup .btn-lg .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group,.btn-group-vertical>.btn-group>.btn{display:block;float:none;width:100%;max-width:100%}.btn-group-vertical>.btn-group:after,.btn-group-vertical>.btn-group:before{content:" ";display:table}.btn-group-vertical>.btn-group:after{clear:both}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;margin-left:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child){border-radius:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn:last-child:not(:first-child){border-top-right-radius:0;border-top-left-radius:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group-vertical>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child:not(:first-child)>.btn:first-child{border-top-right-radius:0;border-top-left-radius:0}.btn-group-justified{display:table;width:100%;table-layout:fixed;border-collapse:separate}.btn-group-justified>.btn,.btn-group-justified>.btn-group{float:none;display:table-cell;width:1%}.btn-group-justified>.btn-group .btn{width:100%}.btn-group-justified>.btn-group .dropdown-menu{left:auto}[data-toggle=buttons]>.btn-group>.btn input[type=checkbox],[data-toggle=buttons]>.btn-group>.btn input[type=radio],[data-toggle=buttons]>.btn input[type=checkbox],[data-toggle=buttons]>.btn input[type=radio]{position:absolute;clip:rect(0,0,0,0);pointer-events:none}.input-group{position:relative;display:table;border-collapse:separate}.input-group[class*=col-]{float:none;padding-left:0;padding-right:0}.input-group .form-control{position:relative;z-index:2;float:left;width:100%;margin-bottom:0}.input-group .form-control:focus{z-index:3}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;white-space:nowrap;vertical-align:middle}.input-group-addon{padding:6px 12px;font-size:14px;font-weight:400;line-height:1;color:#555;text-align:center;background-color:#eee;border:1px solid #ccc;border-radius:4px}.input-group-addon.input-sm,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.input-group-addon.btn{padding:5px 10px;font-size:12px;border-radius:3px}.input-group-addon.input-lg,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.input-group-addon.btn{padding:10px 16px;font-size:18px;border-radius:6px}.input-group-addon input[type=checkbox],.input-group-addon input[type=radio]{margin-top:0}.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn-group:not(:last-child)>.btn,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group .form-control:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group-addon:last-child,.input-group-btn:first-child>.btn-group:not(:first-child)>.btn,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group .form-control:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{font-size:0;white-space:nowrap}.input-group-btn,.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:active,.input-group-btn>.btn:focus,.input-group-btn>.btn:hover{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{z-index:2;margin-left:-1px}.nav{margin-bottom:0;padding-left:0;list-style:none}.nav:after,.nav:before{content:" ";display:table}.nav:after{clear:both}.nav>li,.nav>li>a{position:relative;display:block}.nav>li>a{padding:10px 15px}.nav>li>a:focus,.nav>li>a:hover{text-decoration:none;background-color:#eee}.nav>li.disabled>a{color:#777}.nav>li.disabled>a:focus,.nav>li.disabled>a:hover{color:#777;text-decoration:none;background-color:transparent;cursor:not-allowed}.nav .open>a,.nav .open>a:focus,.nav .open>a:hover{background-color:#eee;border-color:#337ab7}.nav .nav-divider{height:1px;margin:9px 0;overflow:hidden;background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;line-height:1.42857;border:1px solid transparent;border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eee #eee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:focus,.nav-tabs>li.active>a:hover{color:#555;background-color:#fff;border:1px solid #ddd;border-bottom-color:transparent;cursor:default}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:focus,.nav-pills>li.active>a:hover{color:#fff;background-color:#337ab7}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;margin-left:0}.nav-justified,.nav-tabs.nav-justified{width:100%}.nav-justified>li,.nav-tabs.nav-justified>li{float:none}.nav-justified>li>a,.nav-tabs.nav-justified>li>a{text-align:center;margin-bottom:5px}.nav-justified>.dropdown .dropdown-menu{top:auto;left:auto}@media (min-width:768px){.nav-justified>li,.nav-tabs.nav-justified>li{display:table-cell;width:1%}.nav-justified>li>a,.nav-tabs.nav-justified>li>a{margin-bottom:0}}.nav-tabs-justified,.nav-tabs.nav-justified{border-bottom:0}.nav-tabs-justified>li>a,.nav-tabs.nav-justified>li>a{margin-right:0;border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border:1px solid #ddd}@media (min-width:768px){.nav-tabs-justified>li>a,.nav-tabs.nav-justified>li>a{border-bottom:1px solid #ddd;border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs-justified>.active>a:focus,.nav-tabs-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a,.nav-tabs.nav-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:hover{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-right-radius:0;border-top-left-radius:0}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}.navbar:after,.navbar:before{content:" ";display:table}.navbar:after{clear:both}@media (min-width:768px){.navbar{border-radius:4px}}.navbar-header:after,.navbar-header:before{content:" ";display:table}.navbar-header:after{clear:both}@media (min-width:768px){.navbar-header{float:left}}.navbar-collapse{overflow-x:visible;padding-right:15px;padding-left:15px;border-top:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1);-webkit-overflow-scrolling:touch}.navbar-collapse:after,.navbar-collapse:before{content:" ";display:table}.navbar-collapse:after{clear:both}.navbar-collapse.in{overflow-y:auto}@media (min-width:768px){.navbar-collapse{width:auto;border-top:0;box-shadow:none}.navbar-collapse.collapse{display:block!important;height:auto!important;padding-bottom:0;overflow:visible!important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse{padding-left:0;padding-right:0}}.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:340px}@media (max-device-width:480px) and (orientation:landscape){.navbar-fixed-bottom .navbar-collapse,.navbar-fixed-top .navbar-collapse{max-height:200px}}.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:-15px;margin-left:-15px}@media (min-width:768px){.container-fluid>.navbar-collapse,.container-fluid>.navbar-header,.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}}.navbar-static-top{z-index:1000;border-width:0 0 1px}@media (min-width:768px){.navbar-static-top{border-radius:0}}.navbar-fixed-bottom,.navbar-fixed-top{position:fixed;right:0;left:0;z-index:1030}@media (min-width:768px){.navbar-fixed-bottom,.navbar-fixed-top{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;margin-bottom:0;border-width:1px 0 0}.navbar-brand{float:left;padding:15px;font-size:18px;line-height:20px;height:50px}.navbar-brand:focus,.navbar-brand:hover{text-decoration:none}.navbar-brand>img{display:block}@media (min-width:768px){.navbar>.container-fluid .navbar-brand,.navbar>.container .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;margin-right:15px;padding:9px 10px;margin-top:8px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media (max-width:767px){.navbar-nav .open .dropdown-menu{position:static;float:none;width:auto;margin-top:0;background-color:transparent;border:0;box-shadow:none}.navbar-nav .open .dropdown-menu .dropdown-header,.navbar-nav .open .dropdown-menu>li>a{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:focus,.navbar-nav .open .dropdown-menu>li>a:hover{background-image:none}}@media (min-width:768px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}.navbar-form{margin:8px -15px;padding:10px 15px;border-top:1px solid transparent;border-bottom:1px solid transparent;box-shadow:inset 0 1px 0 hsla(0,0%,100%,.1),0 1px 0 hsla(0,0%,100%,.1)}@media (min-width:768px){.navbar-form .form-group{display:inline-block;margin-bottom:0;vertical-align:middle}.navbar-form .form-control{display:inline-block;width:auto;vertical-align:middle}.navbar-form .form-control-static{display:inline-block}.navbar-form .input-group{display:inline-table;vertical-align:middle}.navbar-form .input-group .form-control,.navbar-form .input-group .input-group-addon,.navbar-form .input-group .input-group-btn{width:auto}.navbar-form .input-group>.form-control{width:100%}.navbar-form .control-label{margin-bottom:0;vertical-align:middle}.navbar-form .checkbox,.navbar-form .radio{display:inline-block;margin-top:0;margin-bottom:0;vertical-align:middle}.navbar-form .checkbox label,.navbar-form .radio label{padding-left:0}.navbar-form .checkbox input[type=checkbox],.navbar-form .radio input[type=radio]{position:relative;margin-left:0}.navbar-form .has-feedback .form-control-feedback{top:0}}@media (max-width:767px){.navbar-form .form-group{margin-bottom:5px}.navbar-form .form-group:last-child{margin-bottom:0}}@media (min-width:768px){.navbar-form{width:auto;border:0;margin-left:0;margin-right:0;padding-top:0;padding-bottom:0;box-shadow:none}}.navbar-nav>li>.dropdown-menu{margin-top:0;border-top-right-radius:0;border-top-left-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;border-top-right-radius:4px;border-top-left-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.navbar-btn{margin-top:8px;margin-bottom:8px}.btn-group-sm>.navbar-btn.btn,.navbar-btn.btn-sm{margin-top:10px;margin-bottom:10px}.btn-group-xs>.navbar-btn.btn,.navbar-btn.btn-xs{margin-top:14px;margin-bottom:14px}.navbar-text{margin-top:15px;margin-bottom:15px}@media (min-width:768px){.navbar-text{float:left;margin-left:15px;margin-right:15px}}@media (min-width:768px){.navbar-left{float:left!important}.navbar-right{float:right!important;margin-right:-15px}.navbar-right~.navbar-right{margin-right:0}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:focus,.navbar-default .navbar-brand:hover{color:#5e5e5e;background-color:transparent}.navbar-default .navbar-nav>li>a,.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a:focus,.navbar-default .navbar-nav>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:focus,.navbar-default .navbar-nav>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:focus,.navbar-default .navbar-nav>.disabled>a:hover{color:#ccc;background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:focus,.navbar-default .navbar-toggle:hover{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:#e7e7e7}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:focus,.navbar-default .navbar-nav>.open>a:hover{background-color:#e7e7e7;color:#555}@media (max-width:767px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover{color:#333;background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover{color:#555;background-color:#e7e7e7}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#ccc;background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-default .btn-link{color:#777}.navbar-default .btn-link:focus,.navbar-default .btn-link:hover{color:#333}.navbar-default .btn-link[disabled]:focus,.navbar-default .btn-link[disabled]:hover,fieldset[disabled] .navbar-default .btn-link:focus,fieldset[disabled] .navbar-default .btn-link:hover{color:#ccc}.navbar-inverse{background-color:#222;border-color:#090909}.navbar-inverse .navbar-brand{color:#9d9d9d}.navbar-inverse .navbar-brand:focus,.navbar-inverse .navbar-brand:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>li>a,.navbar-inverse .navbar-text{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a:focus,.navbar-inverse .navbar-nav>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:focus,.navbar-inverse .navbar-nav>.active>a:hover{color:#fff;background-color:#090909}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:focus,.navbar-inverse .navbar-nav>.disabled>a:hover{color:#444;background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:focus,.navbar-inverse .navbar-toggle:hover{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:focus,.navbar-inverse .navbar-nav>.open>a:hover{background-color:#090909;color:#fff}@media (max-width:767px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover{color:#fff;background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover{color:#fff;background-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover{color:#444;background-color:transparent}}.navbar-inverse .navbar-link{color:#9d9d9d}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .btn-link{color:#9d9d9d}.navbar-inverse .btn-link:focus,.navbar-inverse .btn-link:hover{color:#fff}.navbar-inverse .btn-link[disabled]:focus,.navbar-inverse .btn-link[disabled]:hover,fieldset[disabled] .navbar-inverse .btn-link:focus,fieldset[disabled] .navbar-inverse .btn-link:hover{color:#444}.breadcrumb{padding:8px 15px;margin-bottom:20px;list-style:none;background-color:#f5f5f5;border-radius:4px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{content:"/\\A0";padding:0 5px;color:#ccc}.breadcrumb>.active{color:#777}.pagination{display:inline-block;padding-left:0;margin:20px 0;border-radius:4px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;float:left;padding:6px 12px;line-height:1.42857;text-decoration:none;color:#337ab7;background-color:#fff;border:1px solid #ddd;margin-left:-1px}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;border-bottom-left-radius:4px;border-top-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-bottom-right-radius:4px;border-top-right-radius:4px}.pagination>li>a:focus,.pagination>li>a:hover,.pagination>li>span:focus,.pagination>li>span:hover{z-index:2;color:#23527c;background-color:#eee;border-color:#ddd}.pagination>.active>a,.pagination>.active>a:focus,.pagination>.active>a:hover,.pagination>.active>span,.pagination>.active>span:focus,.pagination>.active>span:hover{z-index:3;color:#fff;background-color:#337ab7;border-color:#337ab7;cursor:default}.pagination>.disabled>a,.pagination>.disabled>a:focus,.pagination>.disabled>a:hover,.pagination>.disabled>span,.pagination>.disabled>span:focus,.pagination>.disabled>span:hover{color:#777;background-color:#fff;border-color:#ddd;cursor:not-allowed}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;font-size:18px;line-height:1.33333}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-bottom-left-radius:6px;border-top-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-bottom-right-radius:6px;border-top-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;font-size:12px;line-height:1.5}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-bottom-left-radius:3px;border-top-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-bottom-right-radius:3px;border-top-right-radius:3px}.pager{padding-left:0;margin:20px 0;list-style:none;text-align:center}.pager:after,.pager:before{content:" ";display:table}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;padding:5px 14px;background-color:#fff;border:1px solid #ddd;border-radius:15px}.pager li>a:focus,.pager li>a:hover{text-decoration:none;background-color:#eee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:focus,.pager .disabled>a:hover,.pager .disabled>span{color:#777;background-color:#fff;cursor:not-allowed}.label{display:inline;padding:.2em .6em .3em;font-size:75%;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em}.label:empty{display:none}.btn .label{position:relative;top:-1px}a.label:focus,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}.label-default{background-color:#777}.label-default[href]:focus,.label-default[href]:hover{background-color:#5e5e5e}.label-primary{background-color:#337ab7}.label-primary[href]:focus,.label-primary[href]:hover{background-color:#286090}.label-success{background-color:#5cb85c}.label-success[href]:focus,.label-success[href]:hover{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:focus,.label-info[href]:hover{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:focus,.label-warning[href]:hover{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:focus,.label-danger[href]:hover{background-color:#c9302c}.badge{display:inline-block;min-width:10px;padding:3px 7px;font-size:12px;font-weight:700;color:#fff;line-height:1;vertical-align:middle;white-space:nowrap;text-align:center;background-color:#777;border-radius:10px}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.btn-group-xs>.btn .badge,.btn-xs .badge{top:0;padding:1px 5px}.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#337ab7;background-color:#fff}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}.nav-pills>li>a>.badge{margin-left:3px}a.badge:focus,a.badge:hover{color:#fff;text-decoration:none;cursor:pointer}.jumbotron{padding-top:30px;padding-bottom:30px;margin-bottom:30px;background-color:#eee}.jumbotron,.jumbotron .h1,.jumbotron h1{color:inherit}.jumbotron p{margin-bottom:15px;font-size:21px;font-weight:200}.jumbotron>hr{border-top-color:#d5d5d5}.container-fluid .jumbotron,.container .jumbotron{border-radius:6px;padding-left:15px;padding-right:15px}.jumbotron .container{max-width:100%}@media screen and (min-width:768px){.jumbotron{padding-top:48px;padding-bottom:48px}.container-fluid .jumbotron,.container .jumbotron{padding-left:60px;padding-right:60px}.jumbotron .h1,.jumbotron h1{font-size:63px}}.thumbnail{display:block;padding:4px;margin-bottom:20px;line-height:1.42857;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:border .2s ease-in-out;transition:border .2s ease-in-out}.thumbnail>img,.thumbnail a>img{display:block;max-width:100%;height:auto;margin-left:auto;margin-right:auto}.thumbnail .caption{padding:9px;color:#333}a.thumbnail.active,a.thumbnail:focus,a.thumbnail:hover{border-color:#337ab7}.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert h4{margin-top:0;color:inherit}.alert .alert-link{font-weight:700}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;top:-2px;right:-21px;color:inherit}.alert-success{background-color:#dff0d8;border-color:#d6e9c6;color:#3c763d}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{background-color:#d9edf7;border-color:#bce8f1;color:#31708f}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{background-color:#fcf8e3;border-color:#faebcc;color:#8a6d3b}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{background-color:#f2dede;border-color:#ebccd1;color:#a94442}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}@-webkit-keyframes progress-bar-stripes{0%{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{0%{background-position:40px 0}to{background-position:0 0}}.progress{overflow:hidden;height:20px;margin-bottom:20px;background-color:#f5f5f5;border-radius:4px;box-shadow:inset 0 1px 2px rgba(0,0,0,.1)}.progress-bar{float:left;width:0;height:100%;font-size:12px;line-height:20px;color:#fff;text-align:center;background-color:#337ab7;box-shadow:inset 0 -1px 0 rgba(0,0,0,.15);-webkit-transition:width .6s ease;transition:width .6s ease}.progress-bar-striped,.progress-striped .progress-bar{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-size:40px 40px}.progress-bar.active,.progress.active .progress-bar{-webkit-animation:progress-bar-stripes 2s linear infinite;animation:progress-bar-stripes 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent);background-image:linear-gradient(45deg,hsla(0,0%,100%,.15) 25%,transparent 0,transparent 50%,hsla(0,0%,100%,.15) 0,hsla(0,0%,100%,.15) 75%,transparent 0,transparent)}.media{margin-top:15px}.media:first-child{margin-top:0}.media,.media-body{zoom:1;overflow:hidden}.media-body{width:10000px}.media-object{display:block}.media-object.img-thumbnail{max-width:none}.media-right,.media>.pull-right{padding-left:10px}.media-left,.media>.pull-left{padding-right:10px}.media-body,.media-left,.media-right{display:table-cell;vertical-align:top}.media-middle{vertical-align:middle}.media-bottom{vertical-align:bottom}.media-heading{margin-top:0;margin-bottom:5px}.media-list{padding-left:0;list-style:none}.list-group{margin-bottom:20px;padding-left:0}.list-group-item{position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd}.list-group-item:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.list-group-item:last-child{margin-bottom:0;border-bottom-right-radius:4px;border-bottom-left-radius:4px}a.list-group-item,button.list-group-item{color:#555}a.list-group-item .list-group-item-heading,button.list-group-item .list-group-item-heading{color:#333}a.list-group-item:focus,a.list-group-item:hover,button.list-group-item:focus,button.list-group-item:hover{text-decoration:none;color:#555;background-color:#f5f5f5}button.list-group-item{width:100%;text-align:left}.list-group-item.disabled,.list-group-item.disabled:focus,.list-group-item.disabled:hover{background-color:#eee;color:#777;cursor:not-allowed}.list-group-item.disabled .list-group-item-heading,.list-group-item.disabled:focus .list-group-item-heading,.list-group-item.disabled:hover .list-group-item-heading{color:inherit}.list-group-item.disabled .list-group-item-text,.list-group-item.disabled:focus .list-group-item-text,.list-group-item.disabled:hover .list-group-item-text{color:#777}.list-group-item.active,.list-group-item.active:focus,.list-group-item.active:hover{z-index:2;color:#fff;background-color:#337ab7;border-color:#337ab7}.list-group-item.active .list-group-item-heading,.list-group-item.active .list-group-item-heading>.small,.list-group-item.active .list-group-item-heading>small,.list-group-item.active:focus .list-group-item-heading,.list-group-item.active:focus .list-group-item-heading>.small,.list-group-item.active:focus .list-group-item-heading>small,.list-group-item.active:hover .list-group-item-heading,.list-group-item.active:hover .list-group-item-heading>.small,.list-group-item.active:hover .list-group-item-heading>small{color:inherit}.list-group-item.active .list-group-item-text,.list-group-item.active:focus .list-group-item-text,.list-group-item.active:hover .list-group-item-text{color:#c7ddef}.list-group-item-success{color:#3c763d;background-color:#dff0d8}a.list-group-item-success,button.list-group-item-success{color:#3c763d}a.list-group-item-success .list-group-item-heading,button.list-group-item-success .list-group-item-heading{color:inherit}a.list-group-item-success:focus,a.list-group-item-success:hover,button.list-group-item-success:focus,button.list-group-item-success:hover{color:#3c763d;background-color:#d0e9c6}a.list-group-item-success.active,a.list-group-item-success.active:focus,a.list-group-item-success.active:hover,button.list-group-item-success.active,button.list-group-item-success.active:focus,button.list-group-item-success.active:hover{color:#fff;background-color:#3c763d;border-color:#3c763d}.list-group-item-info{color:#31708f;background-color:#d9edf7}a.list-group-item-info,button.list-group-item-info{color:#31708f}a.list-group-item-info .list-group-item-heading,button.list-group-item-info .list-group-item-heading{color:inherit}a.list-group-item-info:focus,a.list-group-item-info:hover,button.list-group-item-info:focus,button.list-group-item-info:hover{color:#31708f;background-color:#c4e3f3}a.list-group-item-info.active,a.list-group-item-info.active:focus,a.list-group-item-info.active:hover,button.list-group-item-info.active,button.list-group-item-info.active:focus,button.list-group-item-info.active:hover{color:#fff;background-color:#31708f;border-color:#31708f}.list-group-item-warning{color:#8a6d3b;background-color:#fcf8e3}a.list-group-item-warning,button.list-group-item-warning{color:#8a6d3b}a.list-group-item-warning .list-group-item-heading,button.list-group-item-warning .list-group-item-heading{color:inherit}a.list-group-item-warning:focus,a.list-group-item-warning:hover,button.list-group-item-warning:focus,button.list-group-item-warning:hover{color:#8a6d3b;background-color:#faf2cc}a.list-group-item-warning.active,a.list-group-item-warning.active:focus,a.list-group-item-warning.active:hover,button.list-group-item-warning.active,button.list-group-item-warning.active:focus,button.list-group-item-warning.active:hover{color:#fff;background-color:#8a6d3b;border-color:#8a6d3b}.list-group-item-danger{color:#a94442;background-color:#f2dede}a.list-group-item-danger,button.list-group-item-danger{color:#a94442}a.list-group-item-danger .list-group-item-heading,button.list-group-item-danger .list-group-item-heading{color:inherit}a.list-group-item-danger:focus,a.list-group-item-danger:hover,button.list-group-item-danger:focus,button.list-group-item-danger:hover{color:#a94442;background-color:#ebcccc}a.list-group-item-danger.active,a.list-group-item-danger.active:focus,a.list-group-item-danger.active:hover,button.list-group-item-danger.active,button.list-group-item-danger.active:focus,button.list-group-item-danger.active:hover{color:#fff;background-color:#a94442;border-color:#a94442}.list-group-item-heading{margin-top:0;margin-bottom:5px}.list-group-item-text{margin-bottom:0;line-height:1.3}.panel{margin-bottom:20px;background-color:#fff;border:1px solid transparent;border-radius:4px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.panel-body{padding:15px}.panel-body:after,.panel-body:before{content:" ";display:table}.panel-body:after{clear:both}.panel-heading{padding:10px 15px;border-bottom:1px solid transparent;border-top-right-radius:3px;border-top-left-radius:3px}.panel-heading>.dropdown .dropdown-toggle,.panel-title{color:inherit}.panel-title{margin-top:0;margin-bottom:0;font-size:16px}.panel-title>.small,.panel-title>.small>a,.panel-title>a,.panel-title>small,.panel-title>small>a{color:inherit}.panel-footer{padding:10px 15px;background-color:#f5f5f5;border-top:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.list-group,.panel>.panel-collapse>.list-group{margin-bottom:0}.panel>.list-group .list-group-item,.panel>.panel-collapse>.list-group .list-group-item{border-width:1px 0;border-radius:0}.panel>.list-group:first-child .list-group-item:first-child,.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child{border-top:0;border-top-right-radius:3px;border-top-left-radius:3px}.panel>.list-group:last-child .list-group-item:last-child,.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child{border-bottom:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.panel-heading+.panel-collapse>.list-group .list-group-item:first-child{border-top-right-radius:0;border-top-left-radius:0}.list-group+.panel-footer,.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.panel>.panel-collapse>.table,.panel>.table,.panel>.table-responsive>.table{margin-bottom:0}.panel>.panel-collapse>.table caption,.panel>.table-responsive>.table caption,.panel>.table caption{padding-left:15px;padding-right:15px}.panel>.table-responsive:first-child>.table:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child,.panel>.table:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child,.panel>.table:first-child>thead:first-child>tr:first-child{border-top-right-radius:3px;border-top-left-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table:first-child>thead:first-child>tr:first-child th:first-child{border-top-left-radius:3px}.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table:first-child>thead:first-child>tr:first-child th:last-child{border-top-right-radius:3px}.panel>.table-responsive:last-child>.table:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child,.panel>.table:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child{border-bottom-right-radius:3px;border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:first-child{border-bottom-left-radius:3px}.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:last-child{border-bottom-right-radius:3px}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive,.panel>.table+.panel-body,.panel>.table-responsive+.panel-body{border-top:1px solid #ddd}.panel>.table>tbody:first-child>tr:first-child td,.panel>.table>tbody:first-child>tr:first-child th{border-top:0}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child{border-left:0}.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child{border-right:0}.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th{border-bottom:0}.panel>.table-responsive{border:0;margin-bottom:0}.panel-group{margin-bottom:20px}.panel-group .panel{margin-bottom:0;border-radius:4px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading{border-bottom:0}.panel-group .panel-heading+.panel-collapse>.list-group,.panel-group .panel-heading+.panel-collapse>.panel-body{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333;background-color:#f5f5f5;border-color:#ddd}.panel-default>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ddd}.panel-default>.panel-heading .badge{color:#f5f5f5;background-color:#333}.panel-default>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#337ab7}.panel-primary>.panel-heading{color:#fff;background-color:#337ab7;border-color:#337ab7}.panel-primary>.panel-heading+.panel-collapse>.panel-body{border-top-color:#337ab7}.panel-primary>.panel-heading .badge{color:#337ab7;background-color:#fff}.panel-primary>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#337ab7}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#3c763d;background-color:#dff0d8;border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse>.panel-body{border-top-color:#d6e9c6}.panel-success>.panel-heading .badge{color:#dff0d8;background-color:#3c763d}.panel-success>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#d6e9c6}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse>.panel-body{border-top-color:#bce8f1}.panel-info>.panel-heading .badge{color:#d9edf7;background-color:#31708f}.panel-info>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#bce8f1}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse>.panel-body{border-top-color:#faebcc}.panel-warning>.panel-heading .badge{color:#fcf8e3;background-color:#8a6d3b}.panel-warning>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#a94442;background-color:#f2dede;border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ebccd1}.panel-danger>.panel-heading .badge{color:#f2dede;background-color:#a94442}.panel-danger>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ebccd1}.well{min-height:20px;padding:19px;margin-bottom:20px;background-color:#f5f5f5;border:1px solid #e3e3e3;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.05)}.well blockquote{border-color:#ddd;border-color:rgba(0,0,0,.15)}.well-lg{padding:24px;border-radius:6px}.well-sm{padding:9px;border-radius:3px}.embed-responsive{position:relative;display:block;height:0;padding:0;overflow:hidden}.embed-responsive .embed-responsive-item,.embed-responsive embed,.embed-responsive iframe,.embed-responsive object,.embed-responsive video{position:absolute;top:0;left:0;bottom:0;height:100%;width:100%;border:0}.embed-responsive-16by9{padding-bottom:56.25%}.embed-responsive-4by3{padding-bottom:75%}.close{float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.2;filter:alpha(opacity=20)}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer;opacity:.5;filter:alpha(opacity=50)}button.close{padding:0;cursor:pointer;background:transparent;border:0;-webkit-appearance:none}.modal,.modal-open{overflow:hidden}.modal{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:1050;-webkit-overflow-scrolling:touch;outline:0}.modal.fade .modal-dialog{-webkit-transform:translateY(-25%);transform:translateY(-25%);-webkit-transition:-webkit-transform .3s ease-out;transition:transform .3s ease-out}.modal.in .modal-dialog{-webkit-transform:translate(0);transform:translate(0)}.modal-open .modal{overflow-x:hidden;overflow-y:auto}.modal-dialog{position:relative;width:auto;margin:10px}.modal-content{position:relative;background-color:#fff;border:1px solid #999;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 3px 9px rgba(0,0,0,.5);background-clip:padding-box;outline:0}.modal-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#000}.modal-backdrop.fade{opacity:0;filter:alpha(opacity=0)}.modal-backdrop.in{opacity:.5;filter:alpha(opacity=50)}.modal-header{padding:15px;border-bottom:1px solid #e5e5e5}.modal-header:after,.modal-header:before{content:" ";display:table}.modal-header:after{clear:both}.modal-header .close{margin-top:-2px}.modal-title{margin:0;line-height:1.42857}.modal-body{position:relative;padding:15px}.modal-footer{padding:15px;text-align:right;border-top:1px solid #e5e5e5}.modal-footer:after,.modal-footer:before{content:" ";display:table}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-left:5px;margin-bottom:0}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.modal-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}@media (min-width:768px){.modal-dialog{width:600px;margin:30px auto}.modal-content{box-shadow:0 5px 15px rgba(0,0,0,.5)}.modal-sm{width:300px}}@media (min-width:992px){.modal-lg{width:900px}}.tooltip{position:absolute;z-index:1070;display:block;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-style:normal;font-weight:400;letter-spacing:normal;line-break:auto;line-height:1.42857;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;font-size:12px;opacity:0;filter:alpha(opacity=0)}.tooltip.in{opacity:.9;filter:alpha(opacity=90)}.tooltip.top{margin-top:-3px;padding:5px 0}.tooltip.right{margin-left:3px;padding:0 5px}.tooltip.bottom{margin-top:3px;padding:5px 0}.tooltip.left{margin-left:-3px;padding:0 5px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;background-color:#000;border-radius:4px}.tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-left .tooltip-arrow{right:5px}.tooltip.top-left .tooltip-arrow,.tooltip.top-right .tooltip-arrow{bottom:0;margin-bottom:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.top-right .tooltip-arrow{left:5px}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-left .tooltip-arrow{top:0;right:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom-right .tooltip-arrow{top:0;left:5px;margin-top:-5px;border-width:0 5px 5px;border-bottom-color:#000}.popover{position:absolute;top:0;left:0;z-index:1060;display:none;max-width:276px;padding:1px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-style:normal;font-weight:400;letter-spacing:normal;line-break:auto;line-height:1.42857;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;white-space:normal;word-break:normal;word-spacing:normal;word-wrap:normal;font-size:14px;background-color:#fff;background-clip:padding-box;border:1px solid #ccc;border:1px solid rgba(0,0,0,.2);border-radius:6px;box-shadow:0 5px 10px rgba(0,0,0,.2)}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{margin:0;padding:8px 14px;font-size:14px;background-color:#f7f7f7;border-bottom:1px solid #ebebeb;border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover>.arrow,.popover>.arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.popover>.arrow{border-width:11px}.popover>.arrow:after{border-width:10px;content:""}.popover.top>.arrow{left:50%;margin-left:-11px;border-bottom-width:0;border-top-color:#999;border-top-color:rgba(0,0,0,.25);bottom:-11px}.popover.top>.arrow:after{content:" ";bottom:1px;margin-left:-10px;border-bottom-width:0;border-top-color:#fff}.popover.right>.arrow{top:50%;left:-11px;margin-top:-11px;border-left-width:0;border-right-color:#999;border-right-color:rgba(0,0,0,.25)}.popover.right>.arrow:after{content:" ";left:1px;bottom:-10px;border-left-width:0;border-right-color:#fff}.popover.bottom>.arrow{left:50%;margin-left:-11px;border-top-width:0;border-bottom-color:#999;border-bottom-color:rgba(0,0,0,.25);top:-11px}.popover.bottom>.arrow:after{content:" ";top:1px;margin-left:-10px;border-top-width:0;border-bottom-color:#fff}.popover.left>.arrow{top:50%;right:-11px;margin-top:-11px;border-right-width:0;border-left-color:#999;border-left-color:rgba(0,0,0,.25)}.popover.left>.arrow:after{content:" ";right:1px;border-right-width:0;border-left-color:#fff;bottom:-10px}.carousel,.carousel-inner{position:relative}.carousel-inner{overflow:hidden;width:100%}.carousel-inner>.item{display:none;position:relative;-webkit-transition:left .6s ease-in-out;transition:left .6s ease-in-out}.carousel-inner>.item>a>img,.carousel-inner>.item>img{display:block;max-width:100%;height:auto;line-height:1}@media (-webkit-transform-3d),all and (transform-3d){.carousel-inner>.item{-webkit-transition:-webkit-transform .6s ease-in-out;transition:transform .6s ease-in-out;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000px;perspective:1000px}.carousel-inner>.item.active.right,.carousel-inner>.item.next{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);left:0}.carousel-inner>.item.active.left,.carousel-inner>.item.prev{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);left:0}.carousel-inner>.item.active,.carousel-inner>.item.next.left,.carousel-inner>.item.prev.right{-webkit-transform:translateZ(0);transform:translateZ(0);left:0}}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;top:0;width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;top:0;left:0;bottom:0;width:15%;opacity:.5;filter:alpha(opacity=50);font-size:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6);background-color:transparent}.carousel-control.left{background-image:-webkit-linear-gradient(left,rgba(0,0,0,.5),rgba(0,0,0,.0001));background-image:linear-gradient(90deg,rgba(0,0,0,.5) 0,rgba(0,0,0,.0001));background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#80000000\',endColorstr=\'#00000000\',GradientType=1)}.carousel-control.right{left:auto;right:0;background-image:-webkit-linear-gradient(left,rgba(0,0,0,.0001),rgba(0,0,0,.5));background-image:linear-gradient(90deg,rgba(0,0,0,.0001) 0,rgba(0,0,0,.5));background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\'#00000000\',endColorstr=\'#80000000\',GradientType=1)}.carousel-control:focus,.carousel-control:hover{outline:0;color:#fff;text-decoration:none;opacity:.9;filter:alpha(opacity=90)}.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{position:absolute;top:50%;margin-top:-10px;z-index:5;display:inline-block}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{left:50%;margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{right:50%;margin-right:-10px}.carousel-control .icon-next,.carousel-control .icon-prev{width:20px;height:20px;line-height:1;font-family:serif}.carousel-control .icon-prev:before{content:\'\\2039\'}.carousel-control .icon-next:before{content:\'\\203A\'}.carousel-indicators{position:absolute;bottom:10px;left:50%;z-index:15;width:60%;margin-left:-30%;padding-left:0;list-style:none;text-align:center}.carousel-indicators li{display:inline-block;width:10px;height:10px;margin:1px;text-indent:-999px;border:1px solid #fff;border-radius:10px;cursor:pointer;background-color:#000\\9;background-color:transparent}.carousel-indicators .active{margin:0;width:12px;height:12px;background-color:#fff}.carousel-caption{position:absolute;left:15%;right:15%;bottom:20px;z-index:10;padding-top:20px;padding-bottom:20px;color:#fff;text-align:center;text-shadow:0 1px 2px rgba(0,0,0,.6)}.carousel-caption .btn{text-shadow:none}@media screen and (min-width:768px){.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next,.carousel-control .icon-prev{width:30px;height:30px;margin-top:-10px;font-size:30px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{margin-left:-10px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{margin-right:-10px}.carousel-caption{left:20%;right:20%;padding-bottom:30px}.carousel-indicators{bottom:20px}}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.center-block{display:block;margin-left:auto;margin-right:auto}.pull-right{float:right!important}.pull-left{float:left!important}.hide{display:none!important}.show{display:block!important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none!important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-lg,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block,.visible-md,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-sm,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-xs,.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block{display:none!important}@media (max-width:767px){.visible-xs{display:block!important}table.visible-xs{display:table!important}tr.visible-xs{display:table-row!important}td.visible-xs,th.visible-xs{display:table-cell!important}}@media (max-width:767px){.visible-xs-block{display:block!important}}@media (max-width:767px){.visible-xs-inline{display:inline!important}}@media (max-width:767px){.visible-xs-inline-block{display:inline-block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm{display:block!important}table.visible-sm{display:table!important}tr.visible-sm{display:table-row!important}td.visible-sm,th.visible-sm{display:table-cell!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-block{display:block!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline{display:inline!important}}@media (min-width:768px) and (max-width:991px){.visible-sm-inline-block{display:inline-block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md{display:block!important}table.visible-md{display:table!important}tr.visible-md{display:table-row!important}td.visible-md,th.visible-md{display:table-cell!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-block{display:block!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline{display:inline!important}}@media (min-width:992px) and (max-width:1199px){.visible-md-inline-block{display:inline-block!important}}@media (min-width:1200px){.visible-lg{display:block!important}table.visible-lg{display:table!important}tr.visible-lg{display:table-row!important}td.visible-lg,th.visible-lg{display:table-cell!important}}@media (min-width:1200px){.visible-lg-block{display:block!important}}@media (min-width:1200px){.visible-lg-inline{display:inline!important}}@media (min-width:1200px){.visible-lg-inline-block{display:inline-block!important}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}}@media (min-width:1200px){.hidden-lg{display:none!important}}.visible-print{display:none!important}@media print{.visible-print{display:block!important}table.visible-print{display:table!important}tr.visible-print{display:table-row!important}td.visible-print,th.visible-print{display:table-cell!important}}.visible-print-block{display:none!important}@media print{.visible-print-block{display:block!important}}.visible-print-inline{display:none!important}@media print{.visible-print-inline{display:inline!important}}.visible-print-inline-block{display:none!important}@media print{.visible-print-inline-block{display:inline-block!important}}@media print{.hidden-print{display:none!important}}',""]);
},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){e.exports=n.p+"f4769f9bdb7466be65088239c12046d1.eot"},function(e,t,n){e.exports=n.p+"448c34a56d699c29117adc64c43affeb.woff2"},function(e,t,n){e.exports=n.p+"fa2772327f55d8198301fdb8bcfc8158.woff"},function(e,t,n){e.exports=n.p+"e18bbf611f2a2e43afc071aa2f4e1512.ttf"},function(e,t,n){e.exports=n.p+"89889688147bd7575d6327160d64e760.svg"},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=p[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(u(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(u(r.parts[i],t));p[r.id]={id:r.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],s=o[2],l=o[3],u={css:a,media:s,sourceMap:l};n[i]?n[i].parts.push(u):t.push(n[i]={id:i,parts:[u]})}return t}function i(e,t){var n=v(),r=y[y.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),y.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=y.indexOf(e);t>=0&&y.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,o;if(t.singleton){var i=b++;n=g||(g=s(t)),r=c.bind(null,n,i,!1),o=c.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=d.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=f.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function c(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,b=0,y=[];e.exports=function(e,t){if("object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var s=n[a],l=p[s.id];l.refs--,i.push(l)}if(e){var u=o(e);r(u,t)}for(var a=0;a<i.length;a++){var l=i[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete p[l.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(13),i=r(o),a=n(15),s=r(a),l=n(22),u=r(l);n(23),n(116);var c=i["default"].module("main.app",["main.directives.wowJsRender","main.directives.fileDownloader",s["default"]]);c.controller("UrlChooserCtrl",["$scope",function(e){e.isReadyForStart=!1,e.isReadyForDownload=!1,e.params={},e.params.urlForLoading=u["default"].getUrlToLoadWoWFile(),e.params.zipFile=null,e.selectedModeName="Please select mode";var t={predefined:[{name:"Shattrath city (WotLK)",source:"zip",url:"http://deamon87.github.io/WoWFiles/shattrath.zip",sceneType:"map",mapId:530,mapName:"Expansion01",x:-1663,y:5098,z:27},{name:"Ironforge (WotLK)",source:"zip",url:"http://deamon87.github.io/WoWFiles/ironforge.zip",sceneType:"wmo",fileName:"World/wmo/KhazModan/Cities/Ironforge/ironforge.wmo"}],custom:[{name:"Raw coordinates",source:"http",sceneType:"customMap"},{name:"Azeroth adt 31-31",source:"http",sceneType:"map",mapId:0,mapName:"Azeroth",x:0,y:0,z:0},{name:"Caverns of Time",source:"http",sceneType:"map",mapId:0,mapName:"Kalimdor",x:-8181.35,y:-4596.92,z:-125.34},{name:"Attacked mob",source:"http",sceneType:"map",mapId:0,mapName:"test",x:-8966.7626953125,y:-78.48555755615234,z:88.66773223876953},{name:"ul_statue_02",source:"http",sceneType:"m2",modelName:"world\\expansion02\\doodads\\ulduar\\ul_statue_02.m2"},{name:"forsakencatapult",source:"http",sceneType:"m2",modelName:"creature\\forsakencatapult\\forsakencatapult.m2"},{name:"Sniff",source:"http",sceneType:"map",mapId:12,mapName:"Azeroth",x:-8949.9501953125,y:-132.4929962158203,z:83.53119659423828},{name:"Stormwind",source:"http",sceneType:"map",mapId:1,mapName:"Azeroth",x:-9008,y:482,z:137},{name:"Lava pots",source:"zip",url:"http://deamon87.github.io/WoWFiles/ironforge.zip",sceneType:"m2",modelName:"world\\khazmodan\\ironforge\\passivedoodads\\lavasteam\\lavapots.m2"},{name:"Ulduar Raid",source:"http",sceneType:"map",mapId:0,mapName:"UlduarRaid",x:2290,y:-9.475,z:470},{name:"Eye of Storm",source:"http",sceneType:"map",mapName:"NetherstormBG",x:2110,y:1489,z:1474},{name:"Halls Of Reflection",source:"http",sceneType:"map",mapName:"HallsOfReflection",x:5243.2461346537075,y:1938.6550422193939,z:717.0332923206179},{name:"Tree at dalaran zone (Halls Of Reflection)",source:"http",sceneType:"map",mapName:"HallsOfReflection",x:5551.2461346537075,y:993.6550422193939,z:267.0332923206179},{name:"Darkshire",source:"http",sceneType:"map",mapName:"Azeroth",x:-10559.7,y:-1189.02,z:29.0698},{name:"Forsaken start",source:"http",sceneType:"map",mapName:"Azeroth",x:2e3,y:1600,z:137},{name:"Deeprun Tram",source:"http",sceneType:"map",mapName:"DeeprunTram",x:17066.666666656,y:17066.666666656,z:0},{name:"Karazahn",source:"http",sceneType:"map",mapName:"Karazahn",x:-10666.666666656,y:-1600,z:170},{name:"Darkshire blacksmith",source:"http",sceneType:"wmo",fileName:"WORLD\\WMO\\AZEROTH\\BUILDINGS\\DUSKWOOD_BLACKSMITH\\DUSKWOOD_BLACKSMITH.WMO"},{name:"Gnome subway glass(Wotlk)",source:"http",sceneType:"m2",modelName:"WORLD\\GENERIC\\GNOME\\PASSIVE DOODADS\\GNOMEMACHINE\\GNOMESUBWAYGLASS.m2"},{name:"S4bway car",source:"http",sceneType:"m2",modelName:"world\\generic\\gnome\\passive doodads\\subway\\subwaycar.m2"},{name:"elwyn forest tree",source:"http",sceneType:"m2",modelName:"world\\azeroth\\elwynn\\passivedoodads\\trees\\elwynntreecanopy03.m2"},{name:"Ironforge garage machine",source:"http",sceneType:"m2",modelName:"WORLD\\KHAZMODAN\\IRONFORGE\\PASSIVEDOODADS\\GARAGEMACHINE\\GARAGEMACHINE.m2"},{name:"mainmenu_warlords",source:"http",sceneType:"m2",modelName:"interface/glues/models/ui_mainmenu_warlords/ui_mainmenu_warlords.m2"},{name:"KARAZAN CHANDELIER",source:"http",sceneType:"m2",modelName:"WORLD\\AZEROTH\\KARAZAHN\\PASSIVEDOODADS\\CHANDELIERS\\KARAZANCHANDELIER_02.m2"},{name:"Test runecircle",source:"http",sceneType:"m2",modelName:"WORLD\\EXPANSION02\\DOODADS\\CRYSTALSONGFOREST\\BUBBLE\\CAMOUFLAGEBUBBLE_CRYSTALSONG.m2"}]};e.selectionOptions=t,e.status={},e.status.isopen=!1,e.selectMode=function(t){e.selectedValue=t,e.selectedSource=t.source,e.selectedModeName=t.name,u["default"].setArchiveUrl(t.url),u["default"].setFileReadMethod(t.source)},e.startApplication=function(){u["default"].setUrlToLoadWoWFile(e.params.urlForLoading),e.params.zipUrl=u["default"].getArchiveUrl(),e.params.downLoadProgress=0,u["default"].setSceneParams(e.selectedValue),e.isReadyForDownload="zip"==u["default"].getFileReadMethod(),e.isReadyForStart="http"==u["default"].getFileReadMethod()},e.$watch("params.zipFile",function(t){t&&(u["default"].setArchiveFile(t),e.isReadyForDownload=!1,e.isReadyForStart=!0)})}]),c.config(["$provide","$httpProvider",function(e,t){e.factory("myHttpInterceptor",["$window","$q","$templateCache",function(e,t,n){return{request:function(e){if(e.url){var t=e.url.indexOf(".glsl"),r=t>-1;r?e.cache=n:e.params||(e.params={})}return e}}}]),t.interceptors.push("myHttpInterceptor")}]),c.run(["$log",function(e){}])},function(e,t,n){n(14),e.exports=angular},function(e,t){/**
	 * @license AngularJS v1.5.8
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
!function(e){"use strict";function t(e,t){return t=t||Error,function(){var n,r,o=2,i=arguments,a=i[0],s="["+(e?e+":":"")+a+"] ",l=i[1];for(s+=l.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+o;return n<i.length?be(i[n]):e}),s+="\nhttp://errors.angularjs.org/1.5.8/"+(e?e+"/":"")+a,r=o,n="?";r<i.length;r++,n="&")s+=n+"p"+(r-o)+"="+encodeURIComponent(be(i[r]));return new t(s)}}function n(e){if(null==e||A(e))return!1;if(Yr(e)||w(e)||Br&&e instanceof Br)return!0;var t="length"in Object(e)&&e.length;return _(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function r(e,t,o){var i,a;if(e)if(M(e))for(i in e)"prototype"==i||"length"==i||"name"==i||e.hasOwnProperty&&!e.hasOwnProperty(i)||t.call(o,e[i],i,e);else if(Yr(e)||n(e)){var s="object"!=typeof e;for(i=0,a=e.length;i<a;i++)(s||i in e)&&t.call(o,e[i],i,e)}else if(e.forEach&&e.forEach!==r)e.forEach(t,o,e);else if(x(e))for(i in e)t.call(o,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(o,e[i],i,e);else for(i in e)Fr.call(e,i)&&t.call(o,e[i],i,e);return e}function o(e,t,n){for(var r=Object.keys(e).sort(),o=0;o<r.length;o++)t.call(n,e[r[o]],r[o]);return r}function i(e){return function(t,n){e(n,t)}}function a(){return++Xr}function s(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function l(e,t,n){for(var r=e.$$hashKey,o=0,i=t.length;o<i;++o){var a=t[o];if(y(a)||M(a))for(var u=Object.keys(a),c=0,f=u.length;c<f;c++){var d=u[c],p=a[d];n&&y(p)?k(p)?e[d]=new Date(p.valueOf()):E(p)?e[d]=new RegExp(p):p.nodeName?e[d]=p.cloneNode(!0):R(p)?e[d]=p.clone():(y(e[d])||(e[d]=Yr(p)?[]:{}),l(e[d],[p],!0)):e[d]=p}}return s(e,r),e}function u(e){return l(e,Ur.call(arguments,1),!1)}function c(e){return l(e,Ur.call(arguments,1),!0)}function f(e){return parseInt(e,10)}function d(e,t){return u(Object.create(e),t)}function p(){}function h(e){return e}function m(e){return function(){return e}}function v(e){return M(e.toString)&&e.toString!==Gr}function g(e){return"undefined"==typeof e}function b(e){return"undefined"!=typeof e}function y(e){return null!==e&&"object"==typeof e}function x(e){return null!==e&&"object"==typeof e&&!qr(e)}function w(e){return"string"==typeof e}function _(e){return"number"==typeof e}function k(e){return"[object Date]"===Gr.call(e)}function M(e){return"function"==typeof e}function E(e){return"[object RegExp]"===Gr.call(e)}function A(e){return e&&e.window===e}function T(e){return e&&e.$evalAsync&&e.$watch}function C(e){return"[object File]"===Gr.call(e)}function S(e){return"[object FormData]"===Gr.call(e)}function $(e){return"[object Blob]"===Gr.call(e)}function I(e){return"boolean"==typeof e}function F(e){return e&&M(e.then)}function D(e){return e&&_(e.length)&&Zr.test(Gr.call(e))}function O(e){return"[object ArrayBuffer]"===Gr.call(e)}function R(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function P(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function j(e){return Dr(e.nodeName||e[0]&&e[0].nodeName)}function B(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function L(e,t){function n(e,t){var n,r=t.$$hashKey;if(Yr(e))for(var i=0,a=e.length;i<a;i++)t.push(o(e[i]));else if(x(e))for(n in e)t[n]=o(e[n]);else if(e&&"function"==typeof e.hasOwnProperty)for(n in e)e.hasOwnProperty(n)&&(t[n]=o(e[n]));else for(n in e)Fr.call(e,n)&&(t[n]=o(e[n]));return s(t,r),t}function o(e){if(!y(e))return e;var t=a.indexOf(e);if(t!==-1)return l[t];if(A(e)||T(e))throw Wr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,o=i(e);return void 0===o&&(o=Yr(e)?[]:Object.create(qr(e)),r=!0),a.push(e),l.push(o),r?n(e,o):o}function i(e){switch(Gr.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(o(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(M(e.cloneNode))return e.cloneNode(!0)}var a=[],l=[];if(t){if(D(t)||O(t))throw Wr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw Wr("cpi","Can't copy! Source and destination are identical.");return Yr(t)?t.length=0:r(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),a.push(e),l.push(t),n(e,t)}return o(e)}function N(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,o,i=typeof e,a=typeof t;if(i==a&&"object"==i){if(!Yr(e)){if(k(e))return!!k(t)&&N(e.getTime(),t.getTime());if(E(e))return!!E(t)&&e.toString()==t.toString();if(T(e)||T(t)||A(e)||A(t)||Yr(t)||k(t)||E(t))return!1;o=he();for(r in e)if("$"!==r.charAt(0)&&!M(e[r])){if(!N(e[r],t[r]))return!1;o[r]=!0}for(r in t)if(!(r in o)&&"$"!==r.charAt(0)&&b(t[r])&&!M(t[r]))return!1;return!0}if(!Yr(t))return!1;if((n=e.length)==t.length){for(r=0;r<n;r++)if(!N(e[r],t[r]))return!1;return!0}}return!1}function U(e,t,n){return e.concat(Ur.call(t,n))}function V(e,t){return Ur.call(e,t||0)}function z(e,t){var n=arguments.length>2?V(arguments,2):[];return!M(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,U(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function G(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:A(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":T(n)&&(r="$SCOPE"),r}function q(e,t){if(!g(e))return _(t)||(t=t?2:null),JSON.stringify(e,G,t)}function W(e){return w(e)?JSON.parse(e):e}function H(e,t){e=e.replace(to,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function X(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Y(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset(),o=H(t,r);return X(e,n*(o-r))}function Z(e){e=Br(e).clone();try{e.empty()}catch(t){}var n=Br("<div>").append(e).html();try{return e[0].nodeType===so?Dr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Dr(t)})}catch(t){return Dr(n)}}function K(e){try{return decodeURIComponent(e)}catch(t){}}function Q(e){var t={};return r((e||"").split("&"),function(e){var n,r,o;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),n!==-1&&(r=e.substring(0,n),o=e.substring(n+1)),r=K(r),b(r)&&(o=!b(o)||K(o),Fr.call(t,r)?Yr(t[r])?t[r].push(o):t[r]=[t[r],o]:t[r]=o))}),t}function J(e){var t=[];return r(e,function(e,n){Yr(e)?r(e,function(e){t.push(te(n,!0)+(e===!0?"":"="+te(e,!0)))}):t.push(te(n,!0)+(e===!0?"":"="+te(e,!0)))}),t.length?t.join("&"):""}function ee(e){return te(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function te(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ne(e,t){var n,r,o=no.length;for(r=0;r<o;++r)if(n=no[r]+t,w(n=e.getAttribute(n)))return n;return null}function re(e,t){var n,o,i={};r(no,function(t){var r=t+"app";!n&&e.hasAttribute&&e.hasAttribute(r)&&(n=e,o=e.getAttribute(r))}),r(no,function(t){var r,i=t+"app";!n&&(r=e.querySelector("["+i.replace(":","\\:")+"]"))&&(n=r,o=r.getAttribute(i))}),n&&(i.strictDi=null!==ne(n,"strict-di"),t(n,o?[o]:[],i))}function oe(t,n,o){y(o)||(o={});var i={strictDi:!1};o=u(i,o);var a=function(){if(t=Br(t),t.injector()){var r=t[0]===e.document?"document":Z(t);throw Wr("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),o.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var i=rt(n,o.strictDi);return i.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),i},s=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&s.test(e.name)&&(o.debugInfoEnabled=!0,e.name=e.name.replace(s,"")),e&&!l.test(e.name)?a():(e.name=e.name.replace(l,""),Hr.resumeBootstrap=function(e){return r(e,function(e){n.push(e)}),a()},void(M(Hr.resumeDeferredBootstrap)&&Hr.resumeDeferredBootstrap()))}function ie(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function ae(e){var t=Hr.element(e).injector();if(!t)throw Wr("test","no injector found for element argument to getTestability");return t.get("$$testability")}function se(e,t){return t=t||"_",e.replace(ro,function(e,n){return(n?t:"")+e.toLowerCase()})}function le(){var t;if(!oo){var n=eo();Lr=g(n)?e.jQuery:n?e[n]:void 0,Lr&&Lr.fn.on?(Br=Lr,u(Lr.fn,{scope:To.scope,isolateScope:To.isolateScope,controller:To.controller,injector:To.injector,inheritedData:To.inheritedData}),t=Lr.cleanData,Lr.cleanData=function(e){for(var n,r,o=0;null!=(r=e[o]);o++)n=Lr._data(r,"events"),n&&n.$destroy&&Lr(r).triggerHandler("$destroy");t(e)}):Br=Se,Hr.element=Br,oo=!0}}function ue(e,t,n){if(!e)throw Wr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function ce(e,t,n){return n&&Yr(e)&&(e=e[e.length-1]),ue(M(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function fe(e,t){if("hasOwnProperty"===e)throw Wr("badname","hasOwnProperty is not a valid {0} name",t)}function de(e,t,n){if(!t)return e;for(var r,o=t.split("."),i=e,a=o.length,s=0;s<a;s++)r=o[s],e&&(e=(i=e)[r]);return!n&&M(e)?z(i,e):e}function pe(e){for(var t,n=e[0],r=e[e.length-1],o=1;n!==r&&(n=n.nextSibling);o++)(t||e[o]!==n)&&(t||(t=Br(Ur.call(e,0,o))),t.push(n));return t||e}function he(){return Object.create(null)}function me(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),o=t("ng"),i=n(e,"angular",Object);return i.$$minErr=i.$$minErr||t,n(i,"module",function(){var e={};return function(t,i,a){var s=function(e,t){if("hasOwnProperty"===e)throw o("badname","hasOwnProperty is not a valid {0} name",t)};return s(t,"module"),i&&e.hasOwnProperty(t)&&(e[t]=null),n(e,t,function(){function e(e,t,n,r){return r||(r=o),function(){return r[n||"push"]([e,t,arguments]),c}}function n(e,n){return function(r,i){return i&&M(i)&&(i.$$moduleName=t),o.push([e,n,arguments]),c}}if(!i)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var o=[],s=[],l=[],u=e("$injector","invoke","push",s),c={_invokeQueue:o,_configBlocks:s,_runBlocks:l,requires:i,name:t,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:n("$provide","decorator"),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:u,run:function(e){return l.push(e),this}};return a&&u(a),c})}})}function ve(e,t){if(Yr(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(y(e)){t=t||{};for(var o in e)"$"===o.charAt(0)&&"$"===o.charAt(1)||(t[o]=e[o])}return t||e}function ge(e){var t=[];return JSON.stringify(e,function(e,n){if(n=G(e,n),y(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function be(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):g(e)?"undefined":"string"!=typeof e?ge(e):e}function ye(n){u(n,{bootstrap:oe,copy:L,extend:u,merge:c,equals:N,element:Br,forEach:r,injector:rt,noop:p,bind:z,toJson:q,fromJson:W,identity:h,isUndefined:g,isDefined:b,isString:w,isFunction:M,isObject:y,isNumber:_,isElement:R,isArray:Yr,version:fo,isDate:k,lowercase:Dr,uppercase:Or,callbacks:{$$counter:0},getTestability:ae,$$minErr:t,$$csp:Jr,reloadWithDebugInfo:ie}),(Nr=me(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:En}),e.provider("$compile",ht).directive({a:Ri,input:ea,textarea:ea,form:Ni,script:Ya,select:Qa,style:es,option:Ja,ngBind:ra,ngBindHtml:ia,ngBindTemplate:oa,ngClass:sa,ngClassEven:ua,ngClassOdd:la,ngCloak:ca,ngController:fa,ngForm:Ui,ngHide:Va,ngIf:ha,ngInclude:ma,ngInit:ga,ngNonBindable:Da,ngPluralize:ja,ngRepeat:Ba,ngShow:Ua,ngStyle:za,ngSwitch:Ga,ngSwitchWhen:qa,ngSwitchDefault:Wa,ngOptions:Pa,ngTransclude:Xa,ngModel:$a,ngList:ba,ngChange:aa,pattern:ns,ngPattern:ns,required:ts,ngRequired:ts,minlength:os,ngMinlength:os,maxlength:rs,ngMaxlength:rs,ngValue:na,ngModelOptions:Fa}).directive({ngInclude:va}).directive(Pi).directive(da),e.provider({$anchorScroll:ot,$animate:zo,$animateCss:Wo,$$animateJs:Uo,$$animateQueue:Vo,$$AnimateRunner:qo,$$animateAsyncRun:Go,$browser:ct,$cacheFactory:ft,$controller:xt,$document:wt,$exceptionHandler:_t,$filter:Ln,$$forceReflow:Qo,$interpolate:Pt,$interval:jt,$http:Ft,$httpParamSerializer:Mt,$httpParamSerializerJQLike:Et,$httpBackend:Ot,$xhrFactory:Dt,$jsonpCallbacks:si,$location:Qt,$log:Jt,$parse:yn,$rootScope:Mn,$q:xn,$$q:wn,$sce:Sn,$sceDelegate:Cn,$sniffer:$n,$templateCache:dt,$templateRequest:In,$$testability:Fn,$timeout:Dn,$window:Pn,$$rAF:kn,$$jqLite:Ze,$$HashMap:Io,$$cookieReader:Bn})}])}function xe(){return++ho}function we(e){return e.replace(go,function(e,t,n,r){return r?n.toUpperCase():n}).replace(bo,"Moz$1")}function _e(e){return!_o.test(e)}function ke(e){var t=e.nodeType;return t===io||!t||t===uo}function Me(e){for(var t in po[e.ng339])return!0;return!1}function Ee(e){for(var t=0,n=e.length;t<n;t++)De(e[t])}function Ae(e,t){var n,o,i,a,s=t.createDocumentFragment(),l=[];if(_e(e))l.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),o=(ko.exec(e)||["",""])[1].toLowerCase(),i=Eo[o]||Eo._default,n.innerHTML=i[1]+e.replace(Mo,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;l=U(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",r(l,function(e){s.appendChild(e)}),s}function Te(t,n){n=n||e.document;var r;return(r=wo.exec(t))?[n.createElement(r[1])]:(r=Ae(t,n))?r.childNodes:[]}function Ce(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Se(e){if(e instanceof Se)return e;var t;if(w(e)&&(e=Kr(e),t=!0),!(this instanceof Se)){if(t&&"<"!=e.charAt(0))throw xo("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Se(e)}t?Le(this,Te(e)):Le(this,e)}function $e(e){return e.cloneNode(!0)}function Ie(e,t){if(t||De(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,o=n.length;r<o;r++)De(n[r])}function Fe(e,t,n,o){if(b(o))throw xo("offargs","jqLite#off() does not support the `selector` argument");var i=Oe(e),a=i&&i.events,s=i&&i.handle;if(s)if(t){var l=function(t){var r=a[t];b(n)&&B(r||[],n),b(n)&&r&&r.length>0||(vo(e,t,s),delete a[t])};r(t.split(" "),function(e){l(e),yo[e]&&l(yo[e])})}else for(t in a)"$destroy"!==t&&vo(e,t,s),delete a[t]}function De(e,t){var n=e.ng339,r=n&&po[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Fe(e)),delete po[n],e.ng339=void 0}}function Oe(e,t){var n=e.ng339,r=n&&po[n];return t&&!r&&(e.ng339=n=xe(),r=po[n]={events:{},data:{},handle:void 0}),r}function Re(e,t,n){if(ke(e)){var r=b(n),o=!r&&t&&!y(t),i=!t,a=Oe(e,!o),s=a&&a.data;if(r)s[t]=n;else{if(i)return s;if(o)return s&&s[t];u(s,t)}}}function Pe(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function je(e,t){t&&e.setAttribute&&r(t.split(" "),function(t){e.setAttribute("class",Kr((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Kr(t)+" "," ")))})}function Be(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");r(t.split(" "),function(e){e=Kr(e),n.indexOf(" "+e+" ")===-1&&(n+=e+" ")}),e.setAttribute("class",Kr(n))}}function Le(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Ne(e,t){return Ue(e,"$"+(t||"ngController")+"Controller")}function Ue(e,t,n){e.nodeType==uo&&(e=e.documentElement);for(var r=Yr(t)?t:[t];e;){for(var o=0,i=r.length;o<i;o++)if(b(n=Br.data(e,r[o])))return n;e=e.parentNode||e.nodeType===co&&e.host}}function Ve(e){for(Ie(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function ze(e,t){t||Ie(e);var n=e.parentNode;n&&n.removeChild(e)}function Ge(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Br(n).on("load",t)}function qe(e,t){var n=Co[t.toLowerCase()];return n&&So[j(e)]&&n}function We(e){return $o[e]}function He(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var o=t[r||n.type],i=o?o.length:0;if(i){if(g(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0};var s=o.specialHandlerWrapper||Xe;i>1&&(o=ve(o));for(var l=0;l<i;l++)n.isImmediatePropagationStopped()||s(e,n,o[l])}};return n.elem=e,n}function Xe(e,t,n){n.call(e,t)}function Ye(e,t,n){var r=t.relatedTarget;r&&(r===e||Ao.call(e,r))||n.call(e,t)}function Ze(){this.$get=function(){return u(Se,{hasClass:function(e,t){return e.attr&&(e=e[0]),Pe(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Be(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),je(e,t)}})}}function Ke(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||a)():r+":"+e}function Qe(e,t){if(t){var n=0;this.nextUid=function(){return++n}}r(e,this.put,this)}function Je(e){return Function.prototype.toString.call(e)+" "}function et(e){var t=Je(e).replace(Po,""),n=t.match(Fo)||t.match(Do);return n}function tt(e){var t=et(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function nt(e,t,n){var o,i,a;if("function"==typeof e){if(!(o=e.$inject)){if(o=[],e.length){if(t)throw w(n)&&n||(n=e.name||tt(e)),jo("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=et(e),r(i[1].split(Oo),function(e){e.replace(Ro,function(e,t,n){o.push(n)})})}e.$inject=o}}else Yr(e)?(a=e.length-1,ce(e[a],"fn"),o=e.slice(0,a)):ce(e,"fn",!0);return o}function rt(e,t){function n(e){return function(t,n){return y(t)?void r(t,i(e)):e(t,n)}}function o(e,t){if(fe(e,"service"),(M(t)||Yr(t))&&(t=k.instantiate(t)),!t.$get)throw jo("pget","Provider '{0}' must define $get factory method.",e);return _[e+v]=t}function a(e,t){return function(){var n=T.invoke(t,this);if(g(n))throw jo("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return o(e,{$get:n!==!1?a(e,t):t})}function l(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return s(e,m(t),!1)}function c(e,t){fe(e,"constant"),_[e]=t,E[e]=t}function f(e,t){var n=k.get(e+v),r=n.$get;n.$get=function(){var e=T.invoke(r,n);return T.invoke(t,null,{$delegate:e})}}function d(e){ue(g(e)||Yr(e),"modulesToLoad","not an array");var t,n=[];return r(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],o=k.get(r[0]);o[r[1]].apply(o,r[2])}}if(!x.get(e)){x.put(e,!0);try{w(e)?(t=Nr(e),n=n.concat(d(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):M(e)?n.push(k.invoke(e)):Yr(e)?n.push(k.invoke(e)):ce(e,"module")}catch(o){throw Yr(e)&&(e=e[e.length-1]),o.message&&o.stack&&o.stack.indexOf(o.message)==-1&&(o=o.message+"\n"+o.stack),jo("modulerr","Failed to instantiate module {0} due to:\n{1}",e,o.stack||o.message||o)}}}),n}function p(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===h)throw jo("cdep","Circular dependency found: {0}",t+" <- "+b.join(" <- "));return e[t]}try{return b.unshift(t),e[t]=h,e[t]=n(t,r)}catch(o){throw e[t]===h&&delete e[t],o}finally{b.shift()}}function o(e,n,o){for(var i=[],a=rt.$$annotate(e,t,o),s=0,l=a.length;s<l;s++){var u=a[s];if("string"!=typeof u)throw jo("itkn","Incorrect injection token! Expected service name as string, got {0}",u);i.push(n&&n.hasOwnProperty(u)?n[u]:r(u,o))}return i}function i(e){return!(jr<=11)&&("function"==typeof e&&/^(?:class\b|constructor\()/.test(Je(e)))}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=o(e,n,r);return Yr(e)&&(e=e[e.length-1]),i(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=Yr(e)?e[e.length-1]:e,i=o(e,t,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))}return{invoke:a,instantiate:s,get:r,annotate:rt.$$annotate,has:function(t){return _.hasOwnProperty(t+v)||e.hasOwnProperty(t)}}}t=t===!0;var h={},v="Provider",b=[],x=new Qe([],(!0)),_={$provide:{provider:n(o),factory:n(s),service:n(l),value:n(u),constant:n(c),decorator:f}},k=_.$injector=p(_,function(e,t){throw Hr.isString(t)&&b.push(t),jo("unpr","Unknown provider: {0}",b.join(" <- "))}),E={},A=p(E,function(e,t){var n=k.get(e+v,t);return T.invoke(n.$get,n,void 0,e)}),T=A;_["$injector"+v]={$get:m(A)};var C=d(e);return T=A.get("$injector"),T.strictDi=t,r(C,function(e){e&&T.invoke(e)}),T}function ot(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function o(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===j(e))return t=e,!0}),t}function i(){var e=s.yOffset;if(M(e))e=e();else if(R(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else _(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=i();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=w(e)?e:n.hash();var t;e?(t=l.getElementById(e))?a(t):(t=o(l.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var l=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||Ge(function(){r.$evalAsync(s)})}),s}]}function it(e,t){return e||t?e?t?(Yr(e)&&(e=e.join(" ")),Yr(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function at(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Lo)return n}}function st(e){w(e)&&(e=e.split(" "));var t=he();return r(e,function(e){e.length&&(t[e]=!0)}),t}function lt(e){return y(e)?e:{}}function ut(e,t,n,o){function i(e){try{e.apply(null,V(arguments,1))}finally{if(b--,0===b)for(;y.length;)try{y.pop()()}catch(t){n.error(t)}}}function a(e){var t=e.indexOf("#");return t===-1?"":e.substr(t)}function s(){M=null,l(),u()}function l(){x=E(),x=g(x)?null:x,N(x,C)&&(x=C),C=x}function u(){_===c.url()&&w===x||(_=c.url(),w=x,r(A,function(e){e(c.url(),x)}))}var c=this,f=e.location,d=e.history,h=e.setTimeout,m=e.clearTimeout,v={};c.isMock=!1;var b=0,y=[];c.$$completeOutstandingRequest=i,c.$$incOutstandingRequestCount=function(){b++},c.notifyWhenNoOutstandingRequests=function(e){0===b?e():y.push(e)};var x,w,_=f.href,k=t.find("base"),M=null,E=o.history?function(){try{return d.state}catch(e){}}:p;l(),w=x,c.url=function(t,n,r){if(g(r)&&(r=null),f!==e.location&&(f=e.location),d!==e.history&&(d=e.history),t){var i=w===r;if(_===t&&(!o.history||i))return c;var s=_&&zt(_)===zt(t);return _=t,w=r,!o.history||s&&i?(s||(M=t),n?f.replace(t):s?f.hash=a(t):f.href=t,f.href!==t&&(M=t)):(d[n?"replaceState":"pushState"](r,"",t),l(),w=x),M&&(M=t),c}return M||f.href.replace(/%27/g,"'")},c.state=function(){return x};var A=[],T=!1,C=null;c.onUrlChange=function(t){return T||(o.history&&Br(e).on("popstate",s),Br(e).on("hashchange",s),T=!0),A.push(t),t},c.$$applicationDestroyed=function(){Br(e).off("hashchange popstate",s)},c.$$checkUrlChange=u,c.baseHref=function(){var e=k.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},c.defer=function(e,t){var n;return b++,n=h(function(){delete v[n],i(e)},t||0),v[n]=!0,n},c.defer.cancel=function(e){return!!v[e]&&(delete v[e],m(e),i(p),!0)}}function ct(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new ut(e,r,t,n)}]}function ft(){this.$get=function(){function e(e,r){function o(e){e!=d&&(p?p==e&&(p=e.n):p=e,i(e.n,e.p),i(e,d),d=e,d.n=null)}function i(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=u({},r,{id:e}),l=he(),c=r&&r.capacity||Number.MAX_VALUE,f=he(),d=null,p=null;return n[e]={put:function(e,t){if(!g(t)){if(c<Number.MAX_VALUE){var n=f[e]||(f[e]={key:e});o(n)}return e in l||a++,l[e]=t,a>c&&this.remove(p.key),t}},get:function(e){if(c<Number.MAX_VALUE){var t=f[e];if(!t)return;o(t)}return l[e]},remove:function(e){if(c<Number.MAX_VALUE){var t=f[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),i(t.n,t.p),delete f[e]}e in l&&(delete l[e],a--)},removeAll:function(){l=he(),a=0,f=he(),d=p=null},destroy:function(){l=null,s=null,f=null,delete n[e]},info:function(){return u({},s,{size:a})}}}var n={};return e.info=function(){var e={};return r(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function dt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function pt(){}function ht(t,n){function o(e,t,n){var o=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,i=he();return r(e,function(e,r){if(e in A)return void(i[r]=A[e]);var a=e.match(o);if(!a)throw Ho("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,r,e,n?"controller bindings definition":"isolate scope definition");i[r]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||r},a[4]&&(A[e]=i[r])}),i}function a(e,t){var n={isolateScope:null,bindToController:null};if(y(e.scope)&&(e.bindToController===!0?(n.bindToController=o(e.scope,t,!0),n.isolateScope={}):n.isolateScope=o(e.scope,t,!1)),y(e.bindToController)&&(n.bindToController=o(e.bindToController,t,!0)),y(n.bindToController)){var r=e.controller,i=e.controllerAs;if(!r)throw Ho("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!yt(r,i))throw Ho("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function s(e){var t=e.charAt(0);if(!t||t!==Dr(t))throw Ho("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw Ho("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function l(e){var t=e.require||e.controller&&e.name;return!Yr(t)&&y(t)&&r(t,function(e,n){var r=e.match(k),o=e.substring(r[0].length);o||(t[n]=r[0]+n)}),t}var c={},f="Directive",v=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,x=/(([\w\-]+)(?:\:([^;]+))?;?)/,_=P("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,E=/^(on[a-z]+|formaction)$/,A=he();this.directive=function $(e,n){return fe(e,"directive"),w(e)?(s(e),ue(n,"directiveFactory"),c.hasOwnProperty(e)||(c[e]=[],t.factory(e+f,["$injector","$exceptionHandler",function(t,n){var o=[];return r(c[e],function(r,i){try{var a=t.invoke(r);M(a)?a={compile:m(a)}:!a.compile&&a.link&&(a.compile=m(a.link)),a.priority=a.priority||0,a.index=i,a.name=a.name||e,a.require=l(a),a.restrict=a.restrict||"EA",a.$$moduleName=r.$$moduleName,o.push(a)}catch(s){n(s)}}),o}])),c[e].push(n)):r(e,i($)),this},this.component=function(e,t){function n(e){function n(t){return M(t)||Yr(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var i=t.template||t.templateUrl?t.template:"",a={controller:o,controllerAs:yt(t.controller)||t.controllerAs||"$ctrl",template:n(i),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return r(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var o=t.controller||function(){};return r(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,M(o)&&(o[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return b(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var C=!0;this.debugInfoEnabled=function(e){return b(e)?(C=e,this):C};var S=10;this.onChangesTtl=function(e){return arguments.length?(S=e,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,o,i,s,l,m,A,$,F){function D(){try{if(!--ke)throw ye=void 0,Ho("infchng","{0} $onChanges() iterations reached. Aborting!\n",S);m.$apply(function(){for(var e=[],t=0,n=ye.length;t<n;++t)try{ye[t]()}catch(r){e.push(r)}if(ye=void 0,e.length)throw e})}finally{ke++}}function O(e,t){if(t){var n,r,o,i=Object.keys(t);for(n=0,r=i.length;n<r;n++)o=i[n],this[o]=t[o]}else this.$attr={};this.$$element=e}function R(e,t,n){we.innerHTML="<span "+t+">";var r=we.firstChild.attributes,o=r[0];r.removeNamedItem(o.name),o.value=n,e.attributes.setNamedItem(o)}function P(e,t){try{e.addClass(t)}catch(n){}}function L(t,n,r,o,i){t instanceof Br||(t=Br(t));for(var a=/\S+/,s=0,l=t.length;s<l;s++){var u=t[s];u.nodeType===so&&u.nodeValue.match(a)&&Ce(u,t[s]=e.document.createElement("span"))}var c=G(t,n,t,r,o,i);L.$$addScopeClass(t);var f=null;return function(e,n,r){ue(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new()),r=r||{};var o=r.parentBoundTranscludeFn,a=r.transcludeControllers,s=r.futureParentElement;o&&o.$$boundTransclude&&(o=o.$$boundTransclude),f||(f=U(s));var l;if(l="html"!==f?Br(fe(f,Br("<div>").append(t).html())):n?To.clone.call(t):t,a)for(var u in a)l.data("$"+u+"Controller",a[u].instance);return L.$$addScopeInfo(l,e),n&&n(l,e),c&&c(e,l,l,o),l}}function U(e){var t=e&&e[0];return t&&"foreignobject"!==j(t)&&Gr.call(t).match(/SVG/)?"svg":"html"}function G(e,t,n,r,o,i){function a(e,n,r,o){var i,a,s,l,u,c,f,d,m;if(p){var v=n.length;for(m=new Array(v),u=0;u<h.length;u+=3)f=h[u],m[f]=n[f]}else m=n;for(u=0,c=h.length;u<c;)s=m[h[u++]],i=h[u++],a=h[u++],i?(i.scope?(l=e.$new(),L.$$addScopeInfo(Br(s),l)):l=e,d=i.transcludeOnThisElement?q(e,i.transclude,o):!i.templateOnThisElement&&o?o:!o&&t?q(e,t):null,i(a,l,s,r,d)):a&&a(e,s.childNodes,void 0,o)}for(var s,l,u,c,f,d,p,h=[],m=0;m<e.length;m++)s=new O,l=W(e[m],[],s,0===m?r:void 0,o),u=l.length?Q(l,e[m],s,t,n,null,[],[],i):null,u&&u.scope&&L.$$addScopeClass(s.$$element),f=u&&u.terminal||!(c=e[m].childNodes)||!c.length?null:G(c,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||f)&&(h.push(m,u,f),d=!0,p=p||u),i=null;return d?a:null}function q(e,t,n){function r(r,o,i,a,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,o,{parentBoundTranscludeFn:n,transcludeControllers:i,futureParentElement:a})}var o=r.$$slots=he();for(var i in t.$$slots)t.$$slots[i]?o[i]=q(e,t.$$slots[i],n):o[i]=null;return r}function W(e,t,n,r,o){var i,a,s=e.nodeType,l=n.$attr;switch(s){case io:ne(t,vt(j(e)),"E",r,o);for(var u,c,f,d,p,h,m=e.attributes,v=0,g=m&&m.length;v<g;v++){var b=!1,_=!1;u=m[v],c=u.name,p=Kr(u.value),d=vt(c),(h=Te.test(d))&&(c=c.replace(Yo,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var k=d.match(Se);k&&re(k[1])&&(b=c,_=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),f=vt(c.toLowerCase()),l[f]=c,!h&&n.hasOwnProperty(f)||(n[f]=p,qe(e,f)&&(n[f]=!0)),pe(e,t,p,f,h),ne(t,f,"A",r,o,b,_)}if(a=e.className,y(a)&&(a=a.animVal),w(a)&&""!==a)for(;i=x.exec(a);)f=vt(i[2]),ne(t,f,"C",r,o)&&(n[f]=Kr(i[3])),a=a.substr(i.index+i[0].length);break;case so:if(11===jr)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===so;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);ce(t,e.nodeValue);break;case lo:H(e,t,n,r,o)}return t.sort(ae),t}function H(e,t,n,r,o){try{var i=v.exec(e.nodeValue);if(i){var a=vt(i[1]);
ne(t,a,"M",r,o)&&(n[a]=Kr(i[2]))}}catch(s){}}function X(e,t,n){var r=[],o=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Ho("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==io&&(e.hasAttribute(t)&&o++,e.hasAttribute(n)&&o--),r.push(e),e=e.nextSibling}while(o>0)}else r.push(e);return Br(r)}function Y(e,t,n){return function(r,o,i,a,s){return o=X(o[0],t,n),e(r,o,i,a,s)}}function K(e,t,n,r,o,i){var a;return e?L(t,n,r,o,i):function(){return a||(a=L(t,n,r,o,i),t=n=i=null),a.apply(this,arguments)}}function Q(e,t,n,i,a,s,l,c,f){function d(e,t,n,r){e&&(n&&(e=Y(e,n,r)),e.require=h.require,e.directiveName=m,(E===h||h.$$isolateScope)&&(e=ve(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=Y(t,n,r)),t.require=h.require,t.directiveName=m,(E===h||h.$$isolateScope)&&(t=ve(t,{isolateScope:!0})),c.push(t))}function p(e,i,a,s,f){function d(e,t,n,r){var o;if(T(e)||(r=n,n=t,t=e,e=void 0),I&&(o=x),n||(n=I?C.parent():C),!r)return f(e,t,o,n,B);var i=f.$$slots[r];if(i)return i(e,t,o,n,B);if(g(i))throw Ho("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,Z(C))}var p,h,m,v,b,x,w,C,S,$;t===a?(S=n,C=n.$$element):(C=Br(a),S=new O(C,n)),b=i,E?v=i.$new(!0):_&&(b=i.$parent),f&&(w=d,w.$$boundTransclude=f,w.isSlotFilled=function(e){return!!f.$$slots[e]}),k&&(x=ee(C,S,w,k,v,i,E)),E&&(L.$$addScopeInfo(C,v,!0,!(A&&(A===E||A===E.$$originalDirective))),L.$$addScopeClass(C,!0),v.$$isolateBindings=E.$$isolateBindings,$=be(i,S,v,v.$$isolateBindings,E),$.removeWatches&&v.$on("$destroy",$.removeWatches));for(var F in x){var D=k[F],R=x[F],P=D.$$bindings.bindToController;R.identifier&&P?R.bindingInfo=be(b,S,R.instance,P,D):R.bindingInfo={};var j=R();j!==R.instance&&(R.instance=j,C.data("$"+D.name+"Controller",j),R.bindingInfo.removeWatches&&R.bindingInfo.removeWatches(),R.bindingInfo=be(b,S,R.instance,P,D))}for(r(k,function(e,t){var n=e.require;e.bindToController&&!Yr(n)&&y(n)&&u(x[t].instance,J(t,n,C,x))}),r(x,function(e){var t=e.instance;if(M(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(n){o(n)}if(M(t.$onInit))try{t.$onInit()}catch(n){o(n)}M(t.$doCheck)&&(b.$watch(function(){t.$doCheck()}),t.$doCheck()),M(t.$onDestroy)&&b.$on("$destroy",function(){t.$onDestroy()})}),p=0,h=l.length;p<h;p++)m=l[p],ge(m,m.isolateScope?v:i,C,S,m.require&&J(m.directiveName,m.require,C,x),w);var B=i;for(E&&(E.template||null===E.templateUrl)&&(B=v),e&&e(B,a.childNodes,void 0,f),p=c.length-1;p>=0;p--)m=c[p],ge(m,m.isolateScope?v:i,C,S,m.require&&J(m.directiveName,m.require,C,x),w);r(x,function(e){var t=e.instance;M(t.$postLink)&&t.$postLink()})}f=f||{};for(var h,m,v,b,x,w=-Number.MAX_VALUE,_=f.newScopeDirective,k=f.controllerDirectives,E=f.newIsolateScopeDirective,A=f.templateDirective,C=f.nonTlbTranscludeDirective,S=!1,$=!1,I=f.hasElementTranscludeDirective,F=n.$$element=Br(t),D=s,R=i,P=!1,B=!1,N=0,U=e.length;N<U;N++){h=e[N];var G=h.$$start,q=h.$$end;if(G&&(F=X(t,G,q)),v=void 0,w>h.priority)break;if((x=h.scope)&&(h.templateUrl||(y(x)?(le("new/isolated scope",E||_,h,F),E=h):le("new/isolated scope",E,h,F)),_=_||h),m=h.name,!P&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var H,Q=N+1;H=e[Q++];)if(H.transclude&&!H.$$tlb||H.replace&&(H.templateUrl||H.template)){B=!0;break}P=!0}if(!h.templateUrl&&h.controller&&(x=h.controller,k=k||he(),le("'"+m+"' controller",k[m],h,F),k[m]=h),x=h.transclude)if(S=!0,h.$$tlb||(le("transclusion",C,h,F),C=h),"element"==x)I=!0,w=h.priority,v=F,F=n.$$element=Br(L.$$createComment(m,n[m])),t=F[0],me(a,V(v),t),v[0].$$parentNode=v[0].parentNode,R=K(B,v,i,w,D&&D.name,{nonTlbTranscludeDirective:C});else{var ne=he();if(v=Br($e(t)).contents(),y(x)){v=[];var re=he(),ae=he();r(x,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,re[e]=t,ne[t]=null,ae[t]=n}),r(F.contents(),function(e){var t=re[vt(j(e))];t?(ae[t]=!0,ne[t]=ne[t]||[],ne[t].push(e)):v.push(e)}),r(ae,function(e,t){if(!e)throw Ho("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var se in ne)ne[se]&&(ne[se]=K(B,ne[se],i))}F.empty(),R=K(B,v,i,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope}),R.$$slots=ne}if(h.template)if($=!0,le("template",A,h,F),A=h,x=M(h.template)?h.template(F,n):h.template,x=Ae(x),h.replace){if(D=h,v=_e(x)?[]:bt(fe(h.templateNamespace,Kr(x))),t=v[0],1!=v.length||t.nodeType!==io)throw Ho("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m,"");me(a,F,t);var ue={$attr:{}},ce=W(t,[],ue),de=e.splice(N+1,e.length-(N+1));(E||_)&&te(ce,E,_),e=e.concat(ce).concat(de),oe(n,ue),U=e.length}else F.html(x);if(h.templateUrl)$=!0,le("template",A,h,F),A=h,h.replace&&(D=h),p=ie(e.splice(N,e.length-N),F,n,a,S&&R,l,c,{controllerDirectives:k,newScopeDirective:_!==h&&_,newIsolateScopeDirective:E,templateDirective:A,nonTlbTranscludeDirective:C}),U=e.length;else if(h.compile)try{b=h.compile(F,n,R);var pe=h.$$originalDirective||h;M(b)?d(null,z(pe,b),G,q):b&&d(z(pe,b.pre),z(pe,b.post),G,q)}catch(ye){o(ye,Z(F))}h.terminal&&(p.terminal=!0,w=Math.max(w,h.priority))}return p.scope=_&&_.scope===!0,p.transcludeOnThisElement=S,p.templateOnThisElement=$,p.transclude=R,f.hasElementTranscludeDirective=I,p}function J(e,t,n,o){var i;if(w(t)){var a=t.match(k),s=t.substring(a[0].length),l=a[1]||a[3],u="?"===a[2];if("^^"===l?n=n.parent():(i=o&&o[s],i=i&&i.instance),!i){var c="$"+s+"Controller";i=l?n.inheritedData(c):n.data(c)}if(!i&&!u)throw Ho("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(Yr(t)){i=[];for(var f=0,d=t.length;f<d;f++)i[f]=J(e,t[f],n,o)}else y(t)&&(i={},r(t,function(t,r){i[r]=J(e,t,n,o)}));return i||null}function ee(e,t,n,r,o,i,a){var s=he();for(var u in r){var c=r[u],f={$scope:c===a||c.$$isolateScope?o:i,$element:e,$attrs:t,$transclude:n},d=c.controller;"@"==d&&(d=t[c.name]);var p=l(d,f,!0,c.controllerAs);s[c.name]=p,e.data("$"+c.name+"Controller",p.instance)}return s}function te(e,t,n){for(var r=0,o=e.length;r<o;r++)e[r]=d(e[r],{$$isolateScope:t,$$newScope:n})}function ne(e,n,r,i,s,l,u){if(n===s)return null;var p=null;if(c.hasOwnProperty(n))for(var h,m=t.get(n+f),v=0,b=m.length;v<b;v++)try{if(h=m[v],(g(i)||i>h.priority)&&h.restrict.indexOf(r)!=-1){if(l&&(h=d(h,{$$start:l,$$end:u})),!h.$$bindings){var x=h.$$bindings=a(h,h.name);y(x.isolateScope)&&(h.$$isolateBindings=x.isolateScope)}e.push(h),p=h}}catch(w){o(w)}return p}function re(e){if(c.hasOwnProperty(e))for(var n,r=t.get(e+f),o=0,i=r.length;o<i;o++)if(n=r[o],n.multiElement)return!0;return!1}function oe(e,t){var n=t.$attr,o=e.$attr;e.$$element;r(e,function(r,o){"$"!=o.charAt(0)&&(t[o]&&t[o]!==r&&(r+=("style"===o?";":" ")+t[o]),e.$set(o,r,!0,n[o]))}),r(t,function(t,r){e.hasOwnProperty(r)||"$"===r.charAt(0)||(e[r]=t,"class"!==r&&"style"!==r&&(o[r]=n[r]))})}function ie(e,t,n,o,a,s,l,u){var c,f,p=[],h=t[0],m=e.shift(),v=d(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),g=M(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,b=m.templateNamespace;return t.empty(),i(g).then(function(i){var d,x,w,_;if(i=Ae(i),m.replace){if(w=_e(i)?[]:bt(fe(b,Kr(i))),d=w[0],1!=w.length||d.nodeType!==io)throw Ho("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,g);x={$attr:{}},me(o,t,d);var k=W(d,[],x);y(m.scope)&&te(k,!0),e=k.concat(e),oe(n,x)}else d=h,t.html(i);for(e.unshift(v),c=Q(e,d,n,a,t,m,s,l,u),r(o,function(e,n){e==d&&(o[n]=t[0])}),f=G(t[0].childNodes,a);p.length;){var M=p.shift(),E=p.shift(),A=p.shift(),T=p.shift(),C=t[0];if(!M.$$destroyed){if(E!==h){var S=E.className;u.hasElementTranscludeDirective&&m.replace||(C=$e(d)),me(A,Br(E),C),P(Br(C),S)}_=c.transcludeOnThisElement?q(M,c.transclude,T):T,c(f,M,C,o,_)}}p=null}),function(e,t,n,r,o){var i=o;t.$$destroyed||(p?p.push(t,n,r,i):(c.transcludeOnThisElement&&(i=q(t,c.transclude,o)),c(f,t,n,r,i)))}}function ae(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function le(e,t,n,r){function o(e){return e?" (module: "+e+")":""}if(t)throw Ho("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,o(t.$$moduleName),n.name,o(n.$$moduleName),e,Z(r))}function ce(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&L.$$addBindingClass(t),function(e,t){var o=t.parent();n||L.$$addBindingClass(o),L.$$addBindingInfo(o,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function fe(t,n){switch(t=Dr(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function de(e,t){if("srcdoc"==t)return A.HTML;var n=j(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?A.RESOURCE_URL:void 0}function pe(e,t,r,o,i){var a=de(e,o);i=_[o]||i;var s=n(r,!0,a,i);if(s){if("multiple"===o&&"select"===j(e))throw Ho("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(e));t.push({priority:100,compile:function(){return{pre:function(e,t,l){var u=l.$$observers||(l.$$observers=he());if(E.test(o))throw Ho("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=l[o];c!==r&&(s=c&&n(c,!0,a,i),r=c),s&&(l[o]=s(e),(u[o]||(u[o]=[])).$$inter=!0,(l.$$observers&&l.$$observers[o].$$scope||e).$watch(s,function(e,t){"class"===o&&e!=t?l.$updateClass(e,t):l.$set(o,e)}))}}}})}}function me(t,n,r){var o,i,a=n[0],s=n.length,l=a.parentNode;if(t)for(o=0,i=t.length;o<i;o++)if(t[o]==a){t[o++]=r;for(var u=o,c=u+s-1,f=t.length;u<f;u++,c++)c<f?t[u]=t[c]:delete t[u];t.length-=s-1,t.context===a&&(t.context=r);break}l&&l.replaceChild(r,a);var d=e.document.createDocumentFragment();for(o=0;o<s;o++)d.appendChild(n[o]);for(Br.hasData(a)&&(Br.data(r,Br.data(a)),Br(a).off("$destroy")),Br.cleanData(d.querySelectorAll("*")),o=1;o<s;o++)delete n[o];n[0]=r,n.length=1}function ve(e,t){return u(function(){return e.apply(null,arguments)},e,t)}function ge(e,t,n,r,i,a){try{e(t,n,r,i,a)}catch(s){o(s,Z(n))}}function be(e,t,o,i,a){function l(t,n,r){M(o.$onChanges)&&n!==r&&(ye||(e.$$postDigest(D),ye=[]),c||(c={},ye.push(u)),c[t]&&(r=c[t].previousValue),c[t]=new mt(r,n))}function u(){o.$onChanges(c),c=void 0}var c,f=[],d={};return r(i,function(r,i){var u,c,h,m,v,g=r.attrName,b=r.optional,y=r.mode;switch(y){case"@":b||Fr.call(t,g)||(o[i]=t[g]=void 0),t.$observe(g,function(e){if(w(e)||I(e)){var t=o[i];l(i,e,t),o[i]=e}}),t.$$observers[g].$$scope=e,u=t[g],w(u)?o[i]=n(u)(e):I(u)&&(o[i]=u),d[i]=new mt(Xo,o[i]);break;case"=":if(!Fr.call(t,g)){if(b)break;t[g]=void 0}if(b&&!t[g])break;c=s(t[g]),m=c.literal?N:function(e,t){return e===t||e!==e&&t!==t},h=c.assign||function(){throw u=o[i]=c(e),Ho("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[g],g,a.name)},u=o[i]=c(e);var x=function(t){return m(t,o[i])||(m(t,u)?h(e,t=o[i]):o[i]=t),u=t};x.$stateful=!0,v=r.collection?e.$watchCollection(t[g],x):e.$watch(s(t[g],x),null,c.literal),f.push(v);break;case"<":if(!Fr.call(t,g)){if(b)break;t[g]=void 0}if(b&&!t[g])break;c=s(t[g]);var _=o[i]=c(e);d[i]=new mt(Xo,o[i]),v=e.$watch(c,function(e,t){if(t===e){if(t===_)return;t=_}l(i,e,t),o[i]=e},c.literal),f.push(v);break;case"&":if(c=t.hasOwnProperty(g)?s(t[g]):p,c===p&&b)break;o[i]=function(t){return c(e,t)}}}),{initialChanges:d,removeWatches:f.length&&function(){for(var e=0,t=f.length;e<t;++e)f[e]()}}}var ye,xe=/^\w/,we=e.document.createElement("div"),ke=S;O.prototype={$normalize:vt,$addClass:function(e){e&&e.length>0&&$.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&$.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=gt(e,t);n&&n.length&&$.addClass(this.$$element,n);var r=gt(t,e);r&&r.length&&$.removeClass(this.$$element,r)},$set:function(e,t,n,i){var a,s=this.$$element[0],l=qe(s,e),u=We(e),c=e;if(l?(this.$$element.prop(e,t),i=l):u&&(this[u]=t,c=u),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e],i||(this.$attr[e]=i=se(e,"-"))),a=j(this.$$element),"a"===a&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=F(t,"src"===e);else if("img"===a&&"srcset"===e&&b(t)){for(var f="",d=Kr(t),p=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,h=/\s/.test(d)?p:/(,)/,m=d.split(h),v=Math.floor(m.length/2),y=0;y<v;y++){var x=2*y;f+=F(Kr(m[x]),!0),f+=" "+Kr(m[x+1])}var w=Kr(m[2*y]).split(/\s/);f+=F(Kr(w[0]),!0),2===w.length&&(f+=" "+Kr(w[1])),this[e]=t=f}n!==!1&&(null===t||g(t)?this.$$element.removeAttr(i):xe.test(i)?this.$$element.attr(i,t):R(this.$$element[0],i,t));var _=this.$$observers;_&&r(_[c],function(e){try{e(t)}catch(n){o(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=he()),o=r[e]||(r[e]=[]);return o.push(t),m.$evalAsync(function(){o.$$inter||!n.hasOwnProperty(e)||g(n[e])||t(n[e])}),function(){B(o,t)}}};var Me=n.startSymbol(),Ee=n.endSymbol(),Ae="{{"==Me&&"}}"==Ee?h:function(e){return e.replace(/\{\{/g,Me).replace(/}}/g,Ee)},Te=/^ngAttr[A-Z]/,Se=/^(.+)Start$/;return L.$$addBindingInfo=C?function(e,t){var n=e.data("$binding")||[];Yr(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:p,L.$$addBindingClass=C?function(e){P(e,"ng-binding")}:p,L.$$addScopeInfo=C?function(e,t,n,r){var o=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(o,t)}:p,L.$$addScopeClass=C?function(e,t){P(e,t?"ng-isolate-scope":"ng-scope")}:p,L.$$createComment=function(t,n){var r="";return C&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},L}]}function mt(e,t){this.previousValue=e,this.currentValue=t}function vt(e){return we(e.replace(Yo,""))}function gt(e,t){var n="",r=e.split(/\s+/),o=t.split(/\s+/);e:for(var i=0;i<r.length;i++){for(var a=r[i],s=0;s<o.length;s++)if(a==o[s])continue e;n+=(n.length>0?" ":"")+a}return n}function bt(e){e=Br(e);var t=e.length;if(t<=1)return e;for(;t--;){var n=e[t];n.nodeType===lo&&Vr.call(e,t,1)}return e}function yt(e,t){if(t&&w(t))return t;if(w(e)){var n=Ko.exec(e);if(n)return n[3]}}function xt(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){fe(t,"controller"),y(t)?u(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,o){function i(e,n,r,o){if(!e||!y(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",o,n);e.$scope[n]=r}return function(t,a,s,l){var c,f,d,p;if(s=s===!0,l&&w(l)&&(p=l),w(t)){if(f=t.match(Ko),!f)throw Zo("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);d=f[1],p=p||f[3],t=e.hasOwnProperty(d)?e[d]:de(a.$scope,d,!0)||(n?de(o,d,!0):void 0),ce(t,d,!0)}if(s){var h=(Yr(t)?t[t.length-1]:t).prototype;c=Object.create(h||null),p&&i(a,p,c,d||t.name);var m;return m=u(function(){var e=r.invoke(t,c,a,d);return e!==c&&(y(e)||M(e))&&(c=e,p&&i(a,p,c,d||t.name)),c},{instance:c,identifier:p})}return c=r.instantiate(t,a,d),p&&i(a,p,c,d||t.name),c}}]}function wt(){this.$get=["$window",function(e){return Br(e.document)}]}function _t(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function kt(e){return y(e)?k(e)?e.toISOString():q(e):e}function Mt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return o(e,function(e,n){null===e||g(e)||(Yr(e)?r(e,function(e){t.push(te(n)+"="+te(kt(e)))}):t.push(te(n)+"="+te(kt(e))))}),t.join("&")}}}function Et(){this.$get=function(){return function(e){function t(e,i,a){null===e||g(e)||(Yr(e)?r(e,function(e,n){t(e,i+"["+(y(e)?n:"")+"]")}):y(e)&&!k(e)?o(e,function(e,n){t(e,i+(a?"":"[")+n+(a?"":"]"))}):n.push(te(i)+"="+te(kt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function At(e,t){if(w(e)){var n=e.replace(ri,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(Jo)||Tt(n))&&(e=W(n))}}return e}function Tt(e){var t=e.match(ti);return t&&ni[t[0]].test(e)}function Ct(e){function t(e,t){e&&(o[e]=o[e]?o[e]+", "+t:t)}var n,o=he();return w(e)?r(e.split("\n"),function(e){n=e.indexOf(":"),t(Dr(Kr(e.substr(0,n))),Kr(e.substr(n+1)))}):y(e)&&r(e,function(e,n){t(Dr(n),Kr(e))}),o}function St(e){var t;return function(n){if(t||(t=Ct(e)),n){var r=t[Dr(n)];return void 0===r&&(r=null),r}return t}}function $t(e,t,n,o){return M(o)?o(e,t,n):(r(o,function(r){e=r(e,t,n)}),e)}function It(e){return 200<=e&&e<300}function Ft(){var e=this.defaults={transformResponse:[At],transformRequest:[function(e){return!y(e)||C(e)||$(e)||S(e)?e:q(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ve(ei),put:ve(ei),patch:ve(ei)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},n=!1;this.useApplyAsync=function(e){return b(e)?(n=!!e,this):n};var o=!0;this.useLegacyPromiseExtensions=function(e){return b(e)?(o=!!e,this):o};var i=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,s,l,c,f,d){function p(n){function i(e,t){for(var n=0,r=t.length;n<r;){var o=t[n++],i=t[n++];e=e.then(o,i)}return t.length=0,e}function a(e,t){var n,o={};return r(e,function(e,r){M(e)?(n=e(t),null!=n&&(o[r]=n)):o[r]=e}),o}function s(t){var n,r,o,i=e.headers,s=u({},t.headers);i=u({},i.common,i[Dr(t.method)]);e:for(n in i){r=Dr(n);for(o in s)if(Dr(o)===r)continue e;s[n]=i[n]}return a(s,ve(t))}function l(t){var n=t.headers,o=$t(t.data,St(n),void 0,t.transformRequest);return g(o)&&r(n,function(e,t){"content-type"===Dr(t)&&delete n[t]}),g(t.withCredentials)&&!g(e.withCredentials)&&(t.withCredentials=e.withCredentials),v(t,o).then(c,c)}function c(e){var t=u({},e);return t.data=$t(e.data,e.headers,e.status,p.transformResponse),It(e.status)?t:f.reject(t)}if(!y(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!w(n.url))throw t("$http")("badreq","Http request configuration url must be a string.  Received: {0}",n.url);var p=u({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},n);p.headers=s(n),p.method=Or(p.method),p.paramSerializer=w(p.paramSerializer)?d.get(p.paramSerializer):p.paramSerializer;var h=[],m=[],b=f.when(p);return r(k,function(e){(e.request||e.requestError)&&h.unshift(e.request,e.requestError),(e.response||e.responseError)&&m.push(e.response,e.responseError)}),b=i(b,h),b=b.then(l),b=i(b,m),o?(b.success=function(e){return ce(e,"fn"),b.then(function(t){e(t.data,t.status,t.headers,p)}),b},b.error=function(e){return ce(e,"fn"),b.then(null,function(t){e(t.data,t.status,t.headers,p)}),b}):(b.success=ii("success"),b.error=ii("error")),b}function h(e){r(arguments,function(e){p[e]=function(t,n){return p(u({},n||{},{method:e,url:t}))}})}function m(e){r(arguments,function(e){p[e]=function(t,n,r){return p(u({},r||{},{method:e,url:t,data:n}))}})}function v(t,o){function i(e){if(e){var t={};return r(e,function(e,r){t[r]=function(t){function r(){e(t)}n?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),t}}function l(e,t,r,o){function i(){u(t,e,r,o)}m&&(It(e)?m.put(E,[e,t,Ct(r),o]):m.remove(E)),n?c.$applyAsync(i):(i(),c.$$phase||c.$apply())}function u(e,n,r,o){n=n>=-1?n:0,(It(n)?w.resolve:w.reject)({data:e,status:n,headers:St(r),config:t,statusText:o})}function d(e){u(e.data,e.status,ve(e.headers()),e.statusText)}function h(){var e=p.pendingRequests.indexOf(t);e!==-1&&p.pendingRequests.splice(e,1)}var m,v,w=f.defer(),k=w.promise,M=t.headers,E=x(t.url,t.paramSerializer(t.params));if(p.pendingRequests.push(t),k.then(h,h),!t.cache&&!e.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(m=y(t.cache)?t.cache:y(e.cache)?e.cache:_),m&&(v=m.get(E),b(v)?F(v)?v.then(d,d):Yr(v)?u(v[1],v[0],ve(v[2]),v[3]):u(v,200,{},"OK"):m.put(E,k)),g(v)){var A=Rn(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;A&&(M[t.xsrfHeaderName||e.xsrfHeaderName]=A),a(t.method,E,o,l,M,t.timeout,t.withCredentials,t.responseType,i(t.eventHandlers),i(t.uploadEventHandlers))}return k}function x(e,t){return t.length>0&&(e+=(e.indexOf("?")==-1?"?":"&")+t),e}var _=l("$http");e.paramSerializer=w(e.paramSerializer)?d.get(e.paramSerializer):e.paramSerializer;var k=[];return r(i,function(e){k.unshift(w(e)?d.get(e):d.invoke(e))}),p.pendingRequests=[],h("get","delete","head","jsonp"),m("post","put","patch"),p.defaults=e,p}]}function Dt(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Ot(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return Rt(e,r,e.defer,t,n[0])}]}function Rt(e,t,n,o,i){function a(e,t,n){e=e.replace("JSON_CALLBACK",t);var r=i.createElement("script"),a=null;return r.type="text/javascript",r.src=e,r.async=!0,a=function(e){vo(r,"load",a),vo(r,"error",a),i.body.removeChild(r),r=null;var s=-1,l="unknown";e&&("load"!==e.type||o.wasCalled(t)||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},mo(r,"load",a),mo(r,"error",a),i.body.appendChild(r),a}return function(i,s,l,u,c,f,d,h,m,v){function y(){_&&_(),k&&k.abort()}function x(t,r,o,i,a){b(A)&&n.cancel(A),_=k=null,t(r,o,i,a),e.$$completeOutstandingRequest(p)}if(e.$$incOutstandingRequestCount(),s=s||e.url(),"jsonp"===Dr(i))var w=o.createCallback(s),_=a(s,w,function(e,t){var n=200===e&&o.getResponse(w);x(u,e,n,"",t),o.removeCallback(w)});else{var k=t(i,s);k.open(i,s,!0),r(c,function(e,t){b(e)&&k.setRequestHeader(t,e)}),k.onload=function(){var e=k.statusText||"",t="response"in k?k.response:k.responseText,n=1223===k.status?204:k.status;0===n&&(n=t?200:"file"==On(s).protocol?404:0),x(u,n,t,k.getAllResponseHeaders(),e)};var M=function(){x(u,-1,null,null,"")};if(k.onerror=M,k.onabort=M,r(m,function(e,t){k.addEventListener(t,e)}),r(v,function(e,t){k.upload.addEventListener(t,e)}),d&&(k.withCredentials=!0),h)try{k.responseType=h}catch(E){if("json"!==h)throw E}k.send(g(l)?null:l)}if(f>0)var A=n(y,f);else F(f)&&f.then(y)}}function Pt(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,o){function i(e){return"\\\\\\"+e}function a(n){return n.replace(p,e).replace(h,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=q(e)}return e}function l(e,t,n,r){var o;return o=e.$watch(function(e){return o(),r(e)},t,n)}function c(i,c,p,h){function v(e){try{return e=F(e),h&&!b(e)?e:s(e)}catch(t){r(ai.interr(i,t))}}if(!i.length||i.indexOf(e)===-1){var y;if(!c){var x=a(i);y=m(x),y.exp=i,y.expressions=[],y.$$watchDelegate=l}return y}h=!!h;for(var w,_,k,E=0,A=[],T=[],C=i.length,S=[],$=[];E<C;){if((w=i.indexOf(e,E))==-1||(_=i.indexOf(t,w+f))==-1){E!==C&&S.push(a(i.substring(E)));break}E!==w&&S.push(a(i.substring(E,w))),k=i.substring(w+f,_),A.push(k),T.push(n(k,v)),E=_+d,$.push(S.length),S.push("")}if(p&&S.length>1&&ai.throwNoconcat(i),!c||A.length){var I=function(e){for(var t=0,n=A.length;t<n;t++){if(h&&g(e[t]))return;S[$[t]]=e[t]}return S.join("")},F=function(e){return p?o.getTrusted(p,e):o.valueOf(e)};return u(function(e){var t=0,n=A.length,o=new Array(n);try{for(;t<n;t++)o[t]=T[t](e);return I(o)}catch(a){r(ai.interr(i,a))}},{exp:i,expressions:A,$$watchDelegate:function(e,t){var n;return e.$watchGroup(T,function(r,o){var i=I(r);M(t)&&t.call(this,i,r!==o?n:i,e),n=i})}})}}var f=e.length,d=t.length,p=new RegExp(e.replace(/./g,i),"g"),h=new RegExp(t.replace(/./g,i),"g");return c.startSymbol=function(){return e},c.endSymbol=function(){return t},c}]}function jt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,o){function i(i,s,l,u){function c(){f?i.apply(null,d):i(m)}var f=arguments.length>4,d=f?V(arguments,4):[],p=t.setInterval,h=t.clearInterval,m=0,v=b(u)&&!u,g=(v?r:n).defer(),y=g.promise;return l=b(l)?l:0,y.$$intervalId=p(function(){v?o.defer(c):e.$evalAsync(c),g.notify(m++),l>0&&m>=l&&(g.resolve(m),h(y.$$intervalId),delete a[y.$$intervalId]),v||e.$apply()},s),a[y.$$intervalId]=g,y}var a={};return i.cancel=function(e){return!!(e&&e.$$intervalId in a)&&(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0)},i}]}function Bt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ee(t[n]);return t.join("/")}function Lt(e,t){var n=On(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=f(n.port)||ui[n.protocol]||null}function Nt(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=On(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=Q(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Ut(e,t){return 0===e.lastIndexOf(t,0)}function Vt(e,t){if(Ut(t,e))return t.substr(e.length)}function zt(e){var t=e.indexOf("#");return t==-1?e:e.substr(0,t)}function Gt(e){return e.replace(/(#.+)|#$/,"$1")}function qt(e){return e.substr(0,zt(e).lastIndexOf("/")+1)}function Wt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Ht(e,t,n){this.$$html5=!0,n=n||"",Lt(e,this),this.$$parse=function(e){var n=Vt(t,e);if(!w(n))throw ci("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Nt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=J(this.$$search),n=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Bt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var i,a,s;return b(i=Vt(e,r))?(a=i,s=b(i=Vt(n,i))?t+(Vt("/",i)||i):e+a):b(i=Vt(t,r))?s=t+i:t==r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function Xt(e,t,n){Lt(e,this),this.$$parse=function(r){function o(e,t,n){var r,o=/^\/[A-Z]:(\/.*)/;return Ut(t,n)&&(t=t.replace(n,"")),o.exec(t)?e:(r=o.exec(e),r?r[1]:e)}var i,a=Vt(e,r)||Vt(t,r);g(a)||"#"!==a.charAt(0)?this.$$html5?i=a:(i="",g(a)&&(e=r,this.replace())):(i=Vt(n,a),g(i)&&(i=a)),Nt(i,this),this.$$path=o(this.$$path,i,e),this.$$compose()},this.$$compose=function(){var t=J(this.$$search),r=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Bt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return zt(e)==zt(t)&&(this.$$parse(t),!0)}}function Yt(e,t,n){this.$$html5=!0,Xt.apply(this,arguments),this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var i,a;return e==zt(r)?i=r:(a=Vt(t,r))?i=e+n+a:t===r+"/"&&(i=t),i&&this.$$parse(i),!!i},this.$$compose=function(){var t=J(this.$$search),r=this.$$hash?"#"+ee(this.$$hash):"";this.$$url=Bt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function Zt(e){return function(){return this[e]}}function Kt(e,t){return function(n){return g(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Qt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return b(t)?(e=t,this):e},this.html5Mode=function(e){return I(e)?(t.enabled=e,this):y(e)?(I(e.enabled)&&(t.enabled=e.enabled),I(e.requireBase)&&(t.requireBase=e.requireBase),I(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,o,i,a){function s(e,t,n){var o=u.url(),i=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(a){throw u.url(o),u.$$state=i,a}}function l(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,c,f,d=r.baseHref(),p=r.url();if(t.enabled){if(!d&&t.requireBase)throw ci("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=Wt(p)+(d||"/"),c=o.history?Ht:Yt}else f=zt(p),c=Xt;var h=qt(f);u=new c(f,h,"#"+e),u.$$parseLinkUrl(p,p),u.$$state=r.state();var m=/^\s*(javascript|mailto):/i;i.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var o=Br(e.target);"a"!==j(o[0]);)if(o[0]===i[0]||!(o=o.parent())[0])return;var s=o.prop("href"),l=o.attr("href")||o.attr("xlink:href");y(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=On(s.animVal).href),m.test(s)||!s||o.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(s,l)&&(e.preventDefault(),u.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),Gt(u.absUrl())!=Gt(p)&&r.url(u.absUrl(),!0);var v=!0;return r.onUrlChange(function(e,t){return g(Vt(h,e))?void(a.location.href=e):(n.$evalAsync(function(){var r,o=u.absUrl(),i=u.$$state;e=Gt(e),u.$$parse(e),u.$$state=t,r=n.$broadcast("$locationChangeStart",e,o,t,i).defaultPrevented,u.absUrl()===e&&(r?(u.$$parse(o),u.$$state=i,s(o,!1,i)):(v=!1,l(o,i)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=Gt(r.url()),t=Gt(u.absUrl()),i=r.state(),a=u.$$replace,c=e!==t||u.$$html5&&o.history&&i!==u.$$state;(v||c)&&(v=!1,n.$evalAsync(function(){var t=u.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,u.$$state,i).defaultPrevented;u.absUrl()===t&&(r?(u.$$parse(e),u.$$state=i):(c&&s(t,a,i===u.$$state?null:u.$$state),l(e,i)))})),u.$$replace=!1}),u}]}function Jt(){var e=!0,t=this;this.debugEnabled=function(t){return b(t)?(e=t,this):e},this.$get=["$window",function(n){function o(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||p,a=!1;try{a=!!i.apply}catch(s){}return a?function(){var e=[];return r(arguments,function(t){e.push(o(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function en(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw di("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function tn(e){return e+""}function nn(e,t){if(e){if(e.constructor===e)throw di("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw di("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw di("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw di("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function rn(e,t){if(e){if(e.constructor===e)throw di("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===pi||e===hi||e===mi)throw di("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function on(e,t){if(e&&(e===(0).constructor||e===(!1).constructor||e==="".constructor||e==={}.constructor||e===[].constructor||e===Function.constructor))throw di("isecaf","Assigning to a constructor is disallowed! Expression: {0}",t)}function an(e,t){return"undefined"!=typeof e?e:t}function sn(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function ln(e,t){var n=e(t);return!n.$stateful}function un(e,t){var n,o;switch(e.type){case yi.Program:n=!0,r(e.body,function(e){un(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case yi.Literal:e.constant=!0,e.toWatch=[];break;case yi.UnaryExpression:un(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case yi.BinaryExpression:un(e.left,t),un(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case yi.LogicalExpression:un(e.left,t),un(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case yi.ConditionalExpression:un(e.test,t),un(e.alternate,t),un(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case yi.Identifier:e.constant=!1,e.toWatch=[e];break;case yi.MemberExpression:un(e.object,t),e.computed&&un(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case yi.CallExpression:
n=!!e.filter&&ln(t,e.callee.name),o=[],r(e.arguments,function(e){un(e,t),n=n&&e.constant,e.constant||o.push.apply(o,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&ln(t,e.callee.name)?o:[e];break;case yi.AssignmentExpression:un(e.left,t),un(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case yi.ArrayExpression:n=!0,o=[],r(e.elements,function(e){un(e,t),n=n&&e.constant,e.constant||o.push.apply(o,e.toWatch)}),e.constant=n,e.toWatch=o;break;case yi.ObjectExpression:n=!0,o=[],r(e.properties,function(e){un(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||o.push.apply(o,e.value.toWatch)}),e.constant=n,e.toWatch=o;break;case yi.ThisExpression:e.constant=!1,e.toWatch=[];break;case yi.LocalsExpression:e.constant=!1,e.toWatch=[]}}function cn(e){if(1==e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function fn(e){return e.type===yi.Identifier||e.type===yi.MemberExpression}function dn(e){if(1===e.body.length&&fn(e.body[0].expression))return{type:yi.AssignmentExpression,left:e.body[0].expression,right:{type:yi.NGValueParameter},operator:"="}}function pn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===yi.Literal||e.body[0].expression.type===yi.ArrayExpression||e.body[0].expression.type===yi.ObjectExpression)}function hn(e){return e.constant}function mn(e,t){this.astBuilder=e,this.$filter=t}function vn(e,t){this.astBuilder=e,this.$filter=t}function gn(e){return"constructor"==e}function bn(e){return M(e.valueOf)?e.valueOf():wi.call(e)}function yn(){var e,t,n=he(),o=he(),i={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(e,t){i[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(a){function s(e,t,r){var i,s,u;switch(r=r||x,typeof e){case"string":e=e.trim(),u=e;var v=r?o:n;if(i=v[u],!i){":"===e.charAt(0)&&":"===e.charAt(1)&&(s=!0,e=e.substring(2));var b=r?y:g,w=new bi(b),_=new xi(w,a,b);i=_.parse(e),i.constant?i.$$watchDelegate=h:s?i.$$watchDelegate=i.literal?d:f:i.inputs&&(i.$$watchDelegate=c),r&&(i=l(i)),v[u]=i}return m(i,t);case"function":return m(e,t);default:return m(p,t)}}function l(e){function t(t,n,r,o){var i=x;x=!0;try{return e(t,n,r,o)}finally{x=i}}if(!e)return e;t.$$watchDelegate=e.$$watchDelegate,t.assign=l(e.assign),t.constant=e.constant,t.literal=e.literal;for(var n=0;e.inputs&&n<e.inputs.length;++n)e.inputs[n]=l(e.inputs[n]);return t.inputs=e.inputs,t}function u(e,t){return null==e||null==t?e===t:("object"!=typeof e||(e=bn(e),"object"!=typeof e))&&(e===t||e!==e&&t!==t)}function c(e,t,n,r,o){var i,a=r.inputs;if(1===a.length){var s=u;return a=a[0],e.$watch(function(e){var t=a(e);return u(t,s)||(i=r(e,void 0,void 0,[t]),s=t&&bn(t)),i},t,n,o)}for(var l=[],c=[],f=0,d=a.length;f<d;f++)l[f]=u,c[f]=null;return e.$watch(function(e){for(var t=!1,n=0,o=a.length;n<o;n++){var s=a[n](e);(t||(t=!u(s,l[n])))&&(c[n]=s,l[n]=s&&bn(s))}return t&&(i=r(e,void 0,void 0,c)),i},t,n,o)}function f(e,t,n,r){var o,i;return o=e.$watch(function(e){return r(e)},function(e,n,r){i=e,M(t)&&t.apply(this,arguments),b(e)&&r.$$postDigest(function(){b(i)&&o()})},n)}function d(e,t,n,o){function i(e){var t=!0;return r(e,function(e){b(e)||(t=!1)}),t}var a,s;return a=e.$watch(function(e){return o(e)},function(e,n,r){s=e,M(t)&&t.call(this,e,n,r),i(e)&&r.$$postDigest(function(){i(s)&&a()})},n)}function h(e,t,n,r){var o;return o=e.$watch(function(e){return o(),r(e)},t,n)}function m(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,o=n!==d&&n!==f,i=o?function(n,o,i,a){var s=r&&a?a[0]:e(n,o,i,a);return t(s,n,o)}:function(n,r,o,i){var a=e(n,r,o,i),s=t(a,n,r);return b(a)?s:a};return e.$$watchDelegate&&e.$$watchDelegate!==c?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=c,r=!e.inputs,i.inputs=e.inputs?e.inputs:[e]),i}var v=Jr().noUnsafeEval,g={csp:v,expensiveChecks:!1,literals:L(i),isIdentifierStart:M(e)&&e,isIdentifierContinue:M(t)&&t},y={csp:v,expensiveChecks:!0,literals:L(i),isIdentifierStart:M(e)&&e,isIdentifierContinue:M(t)&&t},x=!1;return s.$$runningExpensiveChecks=function(){return x},s}]}function xn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return _n(function(t){e.$evalAsync(t)},t)}]}function wn(){this.$get=["$browser","$exceptionHandler",function(e,t){return _n(function(t){e.defer(t)},t)}]}function _n(e,n){function o(){this.$$state={status:0}}function i(e,t){return function(n){t.call(e,n)}}function a(e){var t,r,o;o=e.pending,e.processScheduled=!1,e.pending=void 0;for(var i=0,a=o.length;i<a;++i){r=o[i][0],t=o[i][e.status];try{M(t)?r.resolve(t(e.value)):1===e.status?r.resolve(e.value):r.reject(e.value)}catch(s){r.reject(s),n(s)}}}function s(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){a(t)}))}function l(){this.promise=new o}function c(e){var t=new l,n=0,o=Yr(e)?[]:{};return r(e,function(e,r){n++,b(e).then(function(e){o.hasOwnProperty(r)||(o[r]=e,--n||t.resolve(o))},function(e){o.hasOwnProperty(r)||t.reject(e)})}),0===n&&t.resolve(o),t.promise}function f(e){var t=p();return r(e,function(e){b(e).then(t.resolve,t.reject)}),t.promise}var d=t("$q",TypeError),p=function(){var e=new l;return e.resolve=i(e,e.resolve),e.reject=i(e,e.reject),e.notify=i(e,e.notify),e};u(o.prototype,{then:function(e,t,n){if(g(e)&&g(t)&&g(n))return this;var r=new l;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&s(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return v(t,!0,e)},function(t){return v(t,!1,e)},t)}}),u(l.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(d("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){function t(e){l||(l=!0,a.$$resolve(e))}function r(e){l||(l=!0,a.$$reject(e))}var o,a=this,l=!1;try{(y(e)||M(e))&&(o=e&&e.then),M(o)?(this.promise.$$state.status=-1,o.call(e,t,r,i(this,this.notify))):(this.promise.$$state.value=e,this.promise.$$state.status=1,s(this.promise.$$state))}catch(u){r(u),n(u)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,s(this.promise.$$state)},notify:function(t){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,o,i=0,a=r.length;i<a;i++){o=r[i][0],e=r[i][3];try{o.notify(M(e)?e(t):t)}catch(s){n(s)}}})}});var h=function(e){var t=new l;return t.reject(e),t.promise},m=function(e,t){var n=new l;return t?n.resolve(e):n.reject(e),n.promise},v=function(e,t,n){var r=null;try{M(n)&&(r=n())}catch(o){return m(o,!1)}return F(r)?r.then(function(){return m(e,t)},function(e){return m(e,!1)}):m(e,t)},b=function(e,t,n,r){var o=new l;return o.resolve(e),o.promise.then(t,n,r)},x=b,w=function(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!M(e))throw d("norslvr","Expected resolverFn, got '{0}'",e);var r=new l;return e(t,n),r.promise};return w.prototype=o.prototype,w.defer=p,w.reject=h,w.when=b,w.resolve=x,w.all=c,w.race=f,w}function kn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,o=!!n,i=o?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return i.supported=o,i}]}function Mn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=a(),this.$$ChildScope=null}return t.prototype=e,t}var o=10,i=t("$rootScope"),s=null,l=null;this.digestTtl=function(e){return arguments.length&&(o=e),o},this.$get=["$exceptionHandler","$parse","$browser",function(t,u,c){function f(e){e.currentScope.$$destroyed=!0}function d(e){9===jr&&(e.$$childHead&&d(e.$$childHead),e.$$nextSibling&&d(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function h(){this.$id=a(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(e){if(E.$$phase)throw i("inprog","{0} already in progress",E.$$phase);E.$$phase=e}function v(){E.$$phase=null}function b(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function x(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function w(){}function _(){for(;C.length;)try{C.shift()()}catch(e){t(e)}l=null}function k(){null===l&&(l=c.defer(function(){E.$apply(_)}))}h.prototype={constructor:h,$new:function(t,n){var r;return n=n||this,t?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!=this)&&r.$on("$destroy",f),r},$watch:function(e,t,n,r){var o=u(e);if(o.$$watchDelegate)return o.$$watchDelegate(this,t,n,o,e);var i=this,a=i.$$watchers,l={fn:t,last:w,get:o,exp:r||e,eq:!!n};return s=null,M(t)||(l.fn=p),a||(a=i.$$watchers=[]),a.unshift(l),b(this,1),function(){B(a,l)>=0&&b(i,-1),s=null}},$watchGroup:function(e,t){function n(){l=!1,u?(u=!1,t(i,i,s)):t(i,o,s)}var o=new Array(e.length),i=new Array(e.length),a=[],s=this,l=!1,u=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(i,i,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,r){i[0]=e,o[0]=n,t(i,e===n?i:o,r)}):(r(e,function(e,t){var r=s.$watch(e,function(e,r){i[t]=e,o[t]=r,l||(l=!0,s.$evalAsync(n))});a.push(r)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function r(e){i=e;var t,r,o,s,l;if(!g(i)){if(y(i))if(n(i)){a!==p&&(a=p,v=a.length=0,f++),t=i.length,v!==t&&(f++,a.length=v=t);for(var u=0;u<t;u++)l=a[u],s=i[u],o=l!==l&&s!==s,o||l===s||(f++,a[u]=s)}else{a!==h&&(a=h={},v=0,f++),t=0;for(r in i)Fr.call(i,r)&&(t++,s=i[r],l=a[r],r in a?(o=l!==l&&s!==s,o||l===s||(f++,a[r]=s)):(v++,a[r]=s,f++));if(v>t){f++;for(r in a)Fr.call(i,r)||(v--,delete a[r])}}else a!==i&&(a=i,f++);return f}}function o(){if(m?(m=!1,t(i,i,l)):t(i,s,l),c)if(y(i))if(n(i)){s=new Array(i.length);for(var e=0;e<i.length;e++)s[e]=i[e]}else{s={};for(var r in i)Fr.call(i,r)&&(s[r]=i[r])}else s=i}r.$stateful=!0;var i,a,s,l=this,c=t.length>1,f=0,d=u(e,r),p=[],h={},m=!0,v=0;return this.$watch(d,o)},$digest:function(){var e,n,r,a,u,f,d,p,h,g,b,y,x=o,k=this,C=[];m("$digest"),c.$$checkUrlChange(),this===E&&null!==l&&(c.defer.cancel(l),_()),s=null;do{p=!1,g=k;for(var $=0;$<A.length;$++){try{y=A[$],y.scope.$eval(y.expression,y.locals)}catch(I){t(I)}s=null}A.length=0;e:do{if(f=g.$$watchers)for(d=f.length;d--;)try{if(e=f[d])if(u=e.get,(n=u(g))===(r=e.last)||(e.eq?N(n,r):"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))){if(e===s){p=!1;break e}}else p=!0,s=e,e.last=e.eq?L(n,null):n,a=e.fn,a(n,r===w?n:r,g),x<5&&(b=4-x,C[b]||(C[b]=[]),C[b].push({msg:M(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:n,oldVal:r}))}catch(I){t(I)}if(!(h=g.$$watchersCount&&g.$$childHead||g!==k&&g.$$nextSibling))for(;g!==k&&!(h=g.$$nextSibling);)g=g.$parent}while(g=h);if((p||A.length)&&!x--)throw v(),i("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",o,C)}while(p||A.length);for(v();S<T.length;)try{T[S++]()}catch(I){t(I)}T.length=S=0},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===E&&c.$$applicationDestroyed(),b(this,-this.$$watchersCount);for(var t in this.$$listenerCount)x(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$$nextSibling=null,d(this)}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e,t){E.$$phase||A.length||c.defer(function(){A.length&&E.$digest()}),A.push({scope:this,expression:u(e),locals:t})},$$postDigest:function(e){T.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{v()}}catch(n){t(n)}finally{try{E.$digest()}catch(n){throw t(n),n}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&C.push(t),e=u(e),k()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var o=this;return function(){var r=n.indexOf(t);r!==-1&&(n[r]=null,x(o,1,e))}},$emit:function(e,n){var r,o,i,a=[],s=this,l=!1,u={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=U([u],arguments,1);do{for(r=s.$$listeners[e]||a,u.currentScope=s,o=0,i=r.length;o<i;o++)if(r[o])try{r[o].apply(null,c)}catch(f){t(f)}else r.splice(o,1),o--,i--;if(l)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,n){var r=this,o=r,i=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return a;for(var s,l,u,c=U([a],arguments,1);o=i;){for(a.currentScope=o,s=o.$$listeners[e]||[],l=0,u=s.length;l<u;l++)if(s[l])try{s[l].apply(null,c)}catch(f){t(f)}else s.splice(l,1),l--,u--;if(!(i=o.$$listenerCount[e]&&o.$$childHead||o!==r&&o.$$nextSibling))for(;o!==r&&!(i=o.$$nextSibling);)o=o.$parent}return a.currentScope=null,a}};var E=new h,A=E.$$asyncQueue=[],T=E.$$postDigestQueue=[],C=E.$$applyAsyncQueue=[],S=0;return E}]}function En(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return b(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return b(e)?(t=e,this):t},this.$get=function(){return function(n,r){var o,i=r?t:e;return o=On(n).href,""===o||o.match(i)?n:"unsafe:"+o}}}function An(e){if("self"===e)return e;if(w(e)){if(e.indexOf("***")>-1)throw _i("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Qr(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(E(e))return new RegExp("^"+e.source+"$");throw _i("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Tn(e){var t=[];return b(e)&&r(e,function(e){t.push(An(e))}),t}function Cn(){this.SCE_CONTEXTS=ki;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Tn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Tn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Rn(t):!!e.exec(t.href)}function o(n){var o,i,a=On(n.toString()),s=!1;for(o=0,i=e.length;o<i;o++)if(r(e[o],a)){s=!0;break}if(s)for(o=0,i=t.length;o<i;o++)if(r(t[o],a)){s=!1;break}return s}function i(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=f.hasOwnProperty(e)?f[e]:null;if(!n)throw _i("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||g(t)||""===t)return t;if("string"!=typeof t)throw _i("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof c?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||g(t)||""===t)return t;var n=f.hasOwnProperty(e)?f[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===ki.RESOURCE_URL){if(o(t))return t;throw _i("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===ki.HTML)return u(t);throw _i("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw _i("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var c=i(),f={};return f[ki.HTML]=i(c),f[ki.CSS]=i(c),f[ki.URL]=i(c),f[ki.JS]=i(c),f[ki.RESOURCE_URL]=i(f[ki.URL]),{trustAs:a,getTrusted:l,valueOf:s}}]}function Sn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&jr<8)throw _i("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var o=ve(ki);o.isEnabled=function(){return e},o.trustAs=n.trustAs,o.getTrusted=n.getTrusted,o.valueOf=n.valueOf,e||(o.trustAs=o.getTrusted=function(e,t){return t},o.valueOf=h),o.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return o.getTrusted(e,t)})};var i=o.parseAs,a=o.getTrusted,s=o.trustAs;return r(ki,function(e,t){var n=Dr(t);o[we("parse_as_"+n)]=function(t){return i(e,t)},o[we("get_trusted_"+n)]=function(t){return a(e,t)},o[we("trust_as_"+n)]=function(t){return s(e,t)}}),o}]}function $n(){this.$get=["$window","$document",function(e,t){var n,r,o={},i=e.chrome&&e.chrome.app&&e.chrome.app.runtime,a=!i&&e.history&&e.history.pushState,s=f((/android (\d+)/.exec(Dr((e.navigator||{}).userAgent))||[])[1]),l=/Boxee/i.test((e.navigator||{}).userAgent),u=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,d=u.body&&u.body.style,p=!1,h=!1;if(d){for(var m in d)if(r=c.exec(m)){n=r[0],n=n[0].toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in d&&"webkit"),p=!!("transition"in d||n+"Transition"in d),h=!!("animation"in d||n+"Animation"in d),!s||p&&h||(p=w(d.webkitTransition),h=w(d.webkitAnimation))}return{history:!(!a||s<4||l),hasEvent:function(e){if("input"===e&&jr<=11)return!1;if(g(o[e])){var t=u.createElement("div");o[e]="on"+e in t}return o[e]},csp:Jr(),vendorPrefix:n,transitions:p,animations:h,android:s}}]}function In(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$templateCache","$http","$q","$sce",function(t,n,r,o){function i(a,s){function l(e){if(!s)throw Mi("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,e.status,e.statusText);return r.reject(e)}i.totalPendingRequests++,w(a)&&!g(t.get(a))||(a=o.getTrustedResourceUrl(a));var c=n.defaults&&n.defaults.transformResponse;return Yr(c)?c=c.filter(function(e){return e!==At}):c===At&&(c=null),n.get(a,u({cache:t,transformResponse:c},e))["finally"](function(){i.totalPendingRequests--}).then(function(e){return t.put(a,e.data),e.data},l)}return i.totalPendingRequests=0,i}]}function Fn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var o={};return o.findBindings=function(e,t,n){var o=e.getElementsByClassName("ng-binding"),i=[];return r(o,function(e){var o=Hr.element(e).data("$binding");o&&r(o,function(r){if(n){var o=new RegExp("(^|\\s)"+Qr(t)+"(\\s|\\||$)");o.test(r)&&i.push(e)}else r.indexOf(t)!=-1&&i.push(e)})}),i},o.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],o=0;o<r.length;++o){var i=n?"=":"*=",a="["+r[o]+"model"+i+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},o.getLocation=function(){return n.url()},o.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},o.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},o}]}function Dn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,o){function i(i,s,l){M(i)||(l=s,s=i,i=p);var u,c=V(arguments,3),f=b(l)&&!l,d=(f?r:n).defer(),h=d.promise;return u=t.defer(function(){try{d.resolve(i.apply(null,c))}catch(t){d.reject(t),o(t)}finally{delete a[h.$$timeoutId]}f||e.$apply()},s),h.$$timeoutId=u,a[u]=d,h}var a={};return i.cancel=function(e){return!!(e&&e.$$timeoutId in a)&&(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},i}]}function On(e){var t=e;return jr&&(Ei.setAttribute("href",t),t=Ei.href),Ei.setAttribute("href",t),{href:Ei.href,protocol:Ei.protocol?Ei.protocol.replace(/:$/,""):"",host:Ei.host,search:Ei.search?Ei.search.replace(/^\?/,""):"",hash:Ei.hash?Ei.hash.replace(/^#/,""):"",hostname:Ei.hostname,port:Ei.port,pathname:"/"===Ei.pathname.charAt(0)?Ei.pathname:"/"+Ei.pathname}}function Rn(e){var t=w(e)?On(e):e;return t.protocol===Ai.protocol&&t.host===Ai.host}function Pn(){this.$get=m(e)}function jn(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var n=e[0]||{},r={},o="";return function(){var e,i,a,s,l,u=n.cookie||"";if(u!==o)for(o=u,e=o.split("; "),r={},a=0;a<e.length;a++)i=e[a],s=i.indexOf("="),s>0&&(l=t(i.substring(0,s)),g(r[l])&&(r[l]=t(i.substring(s+1))));return r}}function Bn(){this.$get=jn}function Ln(e){function t(o,i){if(y(o)){var a={};return r(o,function(e,n){a[n]=t(n,e)}),a}return e.factory(o+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Gn),t("date",ir),t("filter",Nn),t("json",ar),t("limitTo",sr),t("lowercase",Di),t("number",qn),t("orderBy",ur),t("uppercase",Oi)}function Nn(){return function(e,r,o,i){if(!n(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}i=i||"$";var a,s,l=zn(r);switch(l){case"function":a=r;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=Un(r,o,i,s);break;default:return e}return Array.prototype.filter.call(e,a)}}function Un(e,t,n,r){var o,i=y(e)&&n in e;return t===!0?t=N:M(t)||(t=function(e,t){return!g(e)&&(null===e||null===t?e===t:!(y(t)||y(e)&&!v(e))&&(e=Dr(""+e),t=Dr(""+t),e.indexOf(t)!==-1))}),o=function(o){return i&&!y(o)?Vn(o,e[n],t,n,!1):Vn(o,e,t,n,r)}}function Vn(e,t,n,r,o,i){var a=zn(e),s=zn(t);if("string"===s&&"!"===t.charAt(0))return!Vn(e,t.substring(1),n,r,o);if(Yr(e))return e.some(function(e){return Vn(e,t,n,r,o)});switch(a){case"object":var l;if(o){for(l in e)if("$"!==l.charAt(0)&&Vn(e[l],t,n,r,!0))return!0;return!i&&Vn(e,t,n,r,!1)}if("object"===s){for(l in t){var u=t[l];if(!M(u)&&!g(u)){var c=l===r,f=c?e:e[l];if(!Vn(f,u,n,r,c,c))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function zn(e){return null===e?"null":typeof e}function Gn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return g(n)&&(n=t.CURRENCY_SYM),g(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Xn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function qn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Xn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Wn(e){var t,n,r,o,i,a=0;for((n=e.indexOf(Ci))>-1&&(e=e.replace(Ci,"")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)==Si;r++);if(r==(i=e.length))t=[0],n=1;else{for(i--;e.charAt(i)==Si;)i--;for(n-=r,t=[],o=0;r<=i;r++,o++)t[o]=+e.charAt(r)}return n>Ti&&(t=t.splice(0,Ti-1),a=n-1,n=1),{d:t,e:a,i:n}}function Hn(e,t,n,r){var o=e.d,i=o.length-e.i;t=g(t)?Math.min(Math.max(n,i),r):+t;var a=t+e.i,s=o[a];if(a>0){o.splice(Math.max(e.i,a));for(var l=a;l<o.length;l++)o[l]=0}else{i=Math.max(0,i),e.i=1,o.length=Math.max(1,a=t+1),o[0]=0;for(var u=1;u<a;u++)o[u]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)o.unshift(0),e.i++;o.unshift(1),e.i++}else o[a-1]++;for(;i<Math.max(0,t);i++)o.push(0);var f=o.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);f&&(o.unshift(f),e.i++)}function Xn(e,t,n,r,o){if(!w(e)&&!_(e)||isNaN(e))return"";var i,a=!isFinite(e),s=!1,l=Math.abs(e)+"",u="";if(a)u="∞";else{i=Wn(l),Hn(i,o,t.minFrac,t.maxFrac);var c=i.d,f=i.i,d=i.e,p=[];for(s=c.reduce(function(e,t){return e&&!t},!0);f<0;)c.unshift(0),f++;f>0?p=c.splice(f,c.length):(p=c,c=[0]);var h=[];for(c.length>=t.lgSize&&h.unshift(c.splice(-t.lgSize,c.length).join(""));c.length>t.gSize;)h.unshift(c.splice(-t.gSize,c.length).join(""));c.length&&h.unshift(c.join("")),u=h.join(n),p.length&&(u+=r+p.join("")),d&&(u+="e+"+d)}return e<0&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function Yn(e,t,n,r){var o="";for((e<0||r&&e<=0)&&(r?e=-e+1:(e=-e,o="-")),e=""+e;e.length<t;)e=Si+e;return n&&(e=e.substr(e.length-t)),o+e}function Zn(e,t,n,r,o){return n=n||0,function(i){var a=i["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&n==-12&&(a=12),Yn(a,t,r,o)}}function Kn(e,t,n){return function(r,o){var i=r["get"+e](),a=(n?"STANDALONE":"")+(t?"SHORT":""),s=Or(a+e);return o[s][i]}}function Qn(e,t,n){var r=-1*n,o=r>=0?"+":"";return o+=Yn(Math[r>0?"floor":"ceil"](r/60),2)+Yn(Math.abs(r%60),2)}function Jn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function er(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function tr(e){return function(t){var n=Jn(t.getFullYear()),r=er(t),o=+r-+n,i=1+Math.round(o/6048e5);return Yn(i,e)}}function nr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function rr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function or(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function ir(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),o=0,i=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(o=f(t[9]+t[10]),i=f(t[9]+t[11])),a.call(r,f(t[1]),f(t[2])-1,f(t[3]));var l=f(t[4]||0)-o,u=f(t[5]||0)-i,c=f(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,l,u,c,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,o,i){var a,s,l="",u=[];if(o=o||"mediumDate",o=e.DATETIME_FORMATS[o]||o,w(n)&&(n=Fi.test(n)?f(n):t(n)),_(n)&&(n=new Date(n)),!k(n)||!isFinite(n.getTime()))return n;for(;o;)s=Ii.exec(o),s?(u=U(u,s,1),o=u.pop()):(u.push(o),o=null);var c=n.getTimezoneOffset();return i&&(c=H(i,c),n=Y(n,i,!0)),r(u,function(t){a=$i[t],l+=a?a(n,e.DATETIME_FORMATS,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function ar(){return function(e,t){return g(t)&&(t=2),q(e,t)}}function sr(){return function(e,t,r){return t=Math.abs(Number(t))===1/0?Number(t):f(t),isNaN(t)?e:(_(e)&&(e=e.toString()),n(e)?(r=!r||isNaN(r)?0:f(r),r=r<0?Math.max(0,e.length+r):r,t>=0?lr(e,r,r+t):0===r?lr(e,t,e.length):lr(e,Math.max(0,r+t),r)):e)}}function lr(e,t,n){return w(e)?e.slice(t,n):Ur.call(e,t,n)}function ur(e){function r(t){return t.map(function(t){var n=1,r=h;if(M(t))r=t;else if(w(t)&&("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(n="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t),r.constant))){var o=r();r=function(e){return e[o]}}return{get:r,descending:n}})}function o(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function i(e){return M(e.valueOf)&&(e=e.valueOf(),o(e))?e:v(e)&&(e=e.toString(),o(e))?e:e}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=i(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,o=t.type;if(r===o){var i=e.value,a=t.value;"string"===r?(i=i.toLowerCase(),a=a.toLowerCase()):"object"===r&&(y(i)&&(i=e.index),y(a)&&(a=t.index)),i!==a&&(n=i<a?-1:1)}else n=r<o?-1:1;return n}return function(e,o,i,l){function u(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:f.map(function(n){return a(n.get(e),t)})}}function c(e,t){for(var n=0,r=f.length;n<r;n++){var o=p(e.predicateValues[n],t.predicateValues[n]);if(o)return o*f[n].descending*d}return p(e.tieBreaker,t.tieBreaker)*d}if(null==e)return e;if(!n(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);Yr(o)||(o=[o]),0===o.length&&(o=["+"]);var f=r(o),d=i?-1:1,p=M(l)?l:s,h=Array.prototype.map.call(e,u);return h.sort(c),e=h.map(function(e){return e.value})}}function cr(e){return M(e)&&(e={link:e}),e.restrict=e.restrict||"AC",m(e)}function fr(e,t){e.$name=t}function dr(e,t,n,o,i){var a=this,s=[];a.$error={},a.$$success={},a.$pending=void 0,a.$name=i(t.name||t.ngForm||"")(n),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,a.$$parentForm=ji,a.$rollbackViewValue=function(){r(s,function(e){e.$rollbackViewValue()})},a.$commitViewValue=function(){r(s,function(e){e.$commitViewValue()})},a.$addControl=function(e){fe(e.$name,"input"),s.push(e),e.$name&&(a[e.$name]=e),e.$$parentForm=a},a.$$renameControl=function(e,t){var n=e.$name;a[n]===e&&delete a[n],a[t]=e,e.$name=t},a.$removeControl=function(e){e.$name&&a[e.$name]===e&&delete a[e.$name],r(a.$pending,function(t,n){a.$setValidity(n,null,e)}),r(a.$error,function(t,n){a.$setValidity(n,null,e)}),r(a.$$success,function(t,n){a.$setValidity(n,null,e)}),B(s,e),e.$$parentForm=ji},Tr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var o=r.indexOf(n);o===-1&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(B(r,n),0===r.length&&delete e[t])},$animate:o}),a.$setDirty=function(){o.removeClass(e,wa),o.addClass(e,_a),a.$dirty=!0,a.$pristine=!1,a.$$parentForm.$setDirty()},a.$setPristine=function(){o.setClass(e,wa,_a+" "+Bi),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,r(s,function(e){e.$setPristine()})},a.$setUntouched=function(){r(s,function(e){e.$setUntouched()})},a.$setSubmitted=function(){o.addClass(e,Bi),a.$submitted=!0,a.$$parentForm.$setSubmitted()}}function pr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function hr(e,t,n,r,o,i){mr(e,t,n,r,o,i),pr(r)}function mr(e,t,n,r,o,i){var a=Dr(t[0].type);if(!o.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,u()})}var l,u=function(e){if(l&&(i.defer.cancel(l),l=null),!s){var o=t.val(),u=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(o=Kr(o)),(r.$viewValue!==o||""===o&&r.$$hasNativeValidators)&&r.$setViewValue(o,u)}};if(o.hasEvent("input"))t.on("input",u);else{var c=function(e,t,n){l||(l=i.defer(function(){l=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||c(e,this,this.value)}),o.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",u),Qi[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(Ki,function(e){if(!l){var t=this[Ir],n=t.badInput,r=t.typeMismatch;l=i.defer(function(){l=null,t.badInput===n&&t.typeMismatch===r||u(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function vr(e,t){if(k(e))return e;if(w(e)){Xi.lastIndex=0;var n=Xi.exec(e);if(n){var r=+n[1],o=+n[2],i=0,a=0,s=0,l=0,u=Jn(r),c=7*(o-1);return t&&(i=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(r,0,u.getDate()+c,i,a,s,l)}}return NaN}function gr(e,t){return function(n,o){var i,a;if(k(n))return n;if(w(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Vi.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),a=o?{yyyy:o.getFullYear(),MM:o.getMonth()+1,dd:o.getDate(),HH:o.getHours(),mm:o.getMinutes(),ss:o.getSeconds(),sss:o.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(i,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function br(e,t,n,r){return function(o,i,a,s,l,u,c){function f(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function d(e){return b(e)&&!k(e)?n(e)||void 0:e}yr(o,i,a,s),mr(o,i,a,s,l,u);var p,h=s&&s.$options&&s.$options.timezone;if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,p);return h&&(r=Y(r,h)),r}}),s.$formatters.push(function(e){if(e&&!k(e))throw Ca("datefmt","Expected `{0}` to be a date",e);return f(e)?(p=e,p&&h&&(p=Y(p,h,!0)),c("date")(e,r,h)):(p=null,"")}),b(a.min)||a.ngMin){var m;s.$validators.min=function(e){return!f(e)||g(m)||n(e)>=m},a.$observe("min",function(e){
m=d(e),s.$validate()})}if(b(a.max)||a.ngMax){var v;s.$validators.max=function(e){return!f(e)||g(v)||n(e)<=v},a.$observe("max",function(e){v=d(e),s.$validate()})}}}function yr(e,t,n,r){var o=t[0],i=r.$$hasNativeValidators=y(o.validity);i&&r.$parsers.push(function(e){var n=t.prop(Ir)||{};return n.badInput||n.typeMismatch?void 0:e})}function xr(e,t,n,r,o,i){if(yr(e,t,n,r),mr(e,t,n,r,o,i),r.$$parserName="number",r.$parsers.push(function(e){return r.$isEmpty(e)?null:qi.test(e)?parseFloat(e):void 0}),r.$formatters.push(function(e){if(!r.$isEmpty(e)){if(!_(e))throw Ca("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),b(n.min)||n.ngMin){var a;r.$validators.min=function(e){return r.$isEmpty(e)||g(a)||e>=a},n.$observe("min",function(e){b(e)&&!_(e)&&(e=parseFloat(e)),a=_(e)&&!isNaN(e)?e:void 0,r.$validate()})}if(b(n.max)||n.ngMax){var s;r.$validators.max=function(e){return r.$isEmpty(e)||g(s)||e<=s},n.$observe("max",function(e){b(e)&&!_(e)&&(e=parseFloat(e)),s=_(e)&&!isNaN(e)?e:void 0,r.$validate()})}}function wr(e,t,n,r,o,i){mr(e,t,n,r,o,i),pr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||zi.test(n)}}function _r(e,t,n,r,o,i){mr(e,t,n,r,o,i),pr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Gi.test(n)}}function kr(e,t,n,r){g(n.name)&&t.attr("name",a());var o=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",o),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function Mr(e,t,n,r,o){var i;if(b(r)){if(i=e(r),!i.constant)throw Ca("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return i(t)}return o}function Er(e,t,n,r,o,i,a,s){var l=Mr(s,e,"ngTrueValue",n.ngTrueValue,!0),u=Mr(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return N(e,l)}),r.$parsers.push(function(e){return e?l:u})}function Ar(e,t){return e="ngClass"+e,["$animate",function(n){function o(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var o=e[r],i=0;i<t.length;i++)if(o==t[i])continue e;n.push(o)}return n}function i(e){var t=[];return Yr(e)?(r(e,function(e){t=t.concat(i(e))}),t):w(e)?e.split(" "):y(e)?(r(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(a,s,l){function u(e){var t=f(e,1);l.$addClass(t)}function c(e){var t=f(e,-1);l.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||he(),o=[];return r(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&o.push(e))}),s.data("$classCounts",n),o.join(" ")}function d(e,t){var r=o(t,e),i=o(e,t);r=f(r,1),i=f(i,-1),r&&r.length&&n.addClass(s,r),i&&i.length&&n.removeClass(s,i)}function p(e){if(t===!0||(1&a.$index)===t){var n=i(e||[]);if(h){if(!N(e,h)){var r=i(h);d(r,n)}}else u(n)}h=Yr(e)?e.map(function(e){return ve(e)}):ve(e)}var h;a.$watch(l[e],p,!0),l.$observe("class",function(t){p(a.$eval(l[e]))}),"ngClass"!==e&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(l[e]));o===t?u(s):c(s)}})}}}]}function Tr(e){function t(e,t,s){g(t)?n("$pending",e,s):r("$pending",e,s),I(t)?t?(c(a.$error,e,s),u(a.$$success,e,s)):(u(a.$error,e,s),c(a.$$success,e,s)):(c(a.$error,e,s),c(a.$$success,e,s)),a.$pending?(o(Ea,!0),a.$valid=a.$invalid=void 0,i("",null)):(o(Ea,!1),a.$valid=Cr(a.$error),a.$invalid=!a.$valid,i("",a.$valid));var l;l=a.$pending&&a.$pending[e]?void 0:!a.$error[e]&&(!!a.$$success[e]||null),i(e,l),a.$$parentForm.$setValidity(e,l,a)}function n(e,t,n){a[e]||(a[e]={}),u(a[e],t,n)}function r(e,t,n){a[e]&&c(a[e],t,n),Cr(a[e])&&(a[e]=void 0)}function o(e,t){t&&!l[e]?(f.addClass(s,e),l[e]=!0):!t&&l[e]&&(f.removeClass(s,e),l[e]=!1)}function i(e,t){e=e?"-"+se(e,"-"):"",o(ya+e,t===!0),o(xa+e,t===!1)}var a=e.ctrl,s=e.$element,l={},u=e.set,c=e.unset,f=e.$animate;l[xa]=!(l[ya]=s.hasClass(ya)),a.$setValidity=t}function Cr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Sr(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}var $r=/^\/(.+)\/([a-z]*)$/,Ir="validity",Fr=Object.prototype.hasOwnProperty,Dr=function(e){return w(e)?e.toLowerCase():e},Or=function(e){return w(e)?e.toUpperCase():e},Rr=function(e){return w(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Pr=function(e){return w(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(Dr=Rr,Or=Pr);var jr,Br,Lr,Nr,Ur=[].slice,Vr=[].splice,zr=[].push,Gr=Object.prototype.toString,qr=Object.getPrototypeOf,Wr=t("ng"),Hr=e.angular||(e.angular={}),Xr=0;jr=e.document.documentMode,p.$inject=[],h.$inject=[];var Yr=Array.isArray,Zr=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Kr=function(e){return w(e)?e.trim():e},Qr=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Jr=function(){function t(){try{return new Function(""),!1}catch(e){return!0}}if(!b(Jr.rules)){var n=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");Jr.rules={noUnsafeEval:!r||r.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!r||r.indexOf("no-inline-style")!==-1}}else Jr.rules={noUnsafeEval:t(),noInlineStyle:!1}}return Jr.rules},eo=function(){if(b(eo.name_))return eo.name_;var t,n,r,o,i=no.length;for(n=0;n<i;++n)if(r=no[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){o=t.getAttribute(r+"jq");break}return eo.name_=o},to=/:/g,no=["ng-","data-ng-","ng:","x-ng-"],ro=/[A-Z]/g,oo=!1,io=1,ao=2,so=3,lo=8,uo=9,co=11,fo={full:"1.5.8",major:1,minor:5,dot:8,codeName:"arbitrary-fallbacks"};Se.expando="ng339";var po=Se.cache={},ho=1,mo=function(e,t,n){e.addEventListener(t,n,!1)},vo=function(e,t,n){e.removeEventListener(t,n,!1)};Se._data=function(e){return this.cache[e[this.expando]]||{}};var go=/([\:\-\_]+(.))/g,bo=/^moz([A-Z])/,yo={mouseleave:"mouseout",mouseenter:"mouseover"},xo=t("jqLite"),wo=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,_o=/<|&#?\w+;/,ko=/<([\w:-]+)/,Mo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Eo={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Eo.optgroup=Eo.option,Eo.tbody=Eo.tfoot=Eo.colgroup=Eo.caption=Eo.thead,Eo.th=Eo.td;var Ao=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},To=Se.prototype={ready:function(t){function n(){r||(r=!0,t())}var r=!1;"complete"===e.document.readyState?e.setTimeout(n):(this.on("DOMContentLoaded",n),Se(e).on("load",n))},toString:function(){var e=[];return r(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Br(e>=0?this[e]:this[this.length+e])},length:0,push:zr,sort:[].sort,splice:[].splice},Co={};r("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Co[Dr(e)]=e});var So={};r("input,select,option,textarea,button,form,details".split(","),function(e){So[e]=!0});var $o={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};r({data:Re,removeData:De,hasData:Me,cleanData:Ee},function(e,t){Se[t]=e}),r({data:Re,inheritedData:Ue,scope:function(e){return Br.data(e,"$scope")||Ue(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Br.data(e,"$isolateScope")||Br.data(e,"$isolateScopeNoTemplate")},controller:Ne,injector:function(e){return Ue(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Pe,css:function(e,t,n){return t=we(t),b(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,n){var r=e.nodeType;if(r!==so&&r!==ao&&r!==lo){var o=Dr(t);if(Co[o]){if(!b(n))return e[t]||(e.attributes.getNamedItem(t)||p).specified?o:void 0;n?(e[t]=!0,e.setAttribute(t,o)):(e[t]=!1,e.removeAttribute(o))}else if(b(n))e.setAttribute(t,n);else if(e.getAttribute){var i=e.getAttribute(t,2);return null===i?void 0:i}}},prop:function(e,t,n){return b(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(g(t)){var n=e.nodeType;return n===io||n===so?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(g(t)){if(e.multiple&&"select"===j(e)){var n=[];return r(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return g(t)?e.innerHTML:(Ie(e,!0),void(e.innerHTML=t))},empty:Ve},function(e,t){Se.prototype[t]=function(t,n){var r,o,i=this.length;if(e!==Ve&&g(2==e.length&&e!==Pe&&e!==Ne?t:n)){if(y(t)){for(r=0;r<i;r++)if(e===Re)e(this[r],t);else for(o in t)e(this[r],o,t[o]);return this}for(var a=e.$dv,s=g(a)?Math.min(i,1):i,l=0;l<s;l++){var u=e(this[l],t,n);a=a?a+u:u}return a}for(r=0;r<i;r++)e(this[r],t,n);return this}}),r({removeData:De,on:function(e,t,n,r){if(b(r))throw xo("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ke(e)){var o=Oe(e,!0),i=o.events,a=o.handle;a||(a=o.handle=He(e,i));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length,u=function(t,r,o){var s=i[t];s||(s=i[t]=[],s.specialHandlerWrapper=r,"$destroy"===t||o||mo(e,t,a)),s.push(n)};l--;)t=s[l],yo[t]?(u(yo[t],Ye),u(t,void 0,!0)):u(t)}},off:Fe,one:function(e,t,n){e=Br(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,o=e.parentNode;Ie(e),r(new Se(t),function(t){n?o.insertBefore(t,n.nextSibling):o.replaceChild(t,e),n=t})},children:function(e){var t=[];return r(e.childNodes,function(e){e.nodeType===io&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===io||n===co){t=new Se(t);for(var r=0,o=t.length;r<o;r++){var i=t[r];e.appendChild(i)}}},prepend:function(e,t){if(e.nodeType===io){var n=e.firstChild;r(new Se(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Ce(e,Br(t).eq(0).clone()[0])},remove:ze,detach:function(e){ze(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new Se(t);for(var o=0,i=t.length;o<i;o++){var a=t[o];r.insertBefore(a,n.nextSibling),n=a}},addClass:Be,removeClass:je,toggleClass:function(e,t,n){t&&r(t.split(" "),function(t){var r=n;g(r)&&(r=!Pe(e,t)),(r?Be:je)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==co?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:$e,triggerHandler:function(e,t,n){var o,i,a,s=t.type||t,l=Oe(e),c=l&&l.events,f=c&&c[s];f&&(o={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:s,target:e},t.type&&(o=u(o,t)),i=ve(f),a=n?[o].concat(n):[o],r(i,function(t){o.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Se.prototype[t]=function(t,n,r){for(var o,i=0,a=this.length;i<a;i++)g(o)?(o=e(this[i],t,n,r),b(o)&&(o=Br(o))):Le(o,e(this[i],t,n,r));return b(o)?o:this},Se.prototype.bind=Se.prototype.on,Se.prototype.unbind=Se.prototype.off}),Qe.prototype={put:function(e,t){this[Ke(e,this.nextUid)]=t},get:function(e){return this[Ke(e,this.nextUid)]},remove:function(e){var t=this[e=Ke(e,this.nextUid)];return delete this[e],t}};var Io=[function(){this.$get=[function(){return Qe}]}],Fo=/^([^\(]+?)=>/,Do=/^[^\(]*\(\s*([^\)]*)\)/m,Oo=/,/,Ro=/^\s*(_?)(\S+?)\1\s*$/,Po=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,jo=t("$injector");rt.$$annotate=nt;var Bo=t("$animate"),Lo=1,No="ng-animate",Uo=function(){this.$get=p},Vo=function(){var e=new Qe,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,o){function i(e,t,n){var o=!1;return t&&(t=w(t)?t.split(" "):Yr(t)?t:[],r(t,function(t){t&&(o=!0,e[t]=n)})),o}function a(){r(t,function(t){var n=e.get(t);if(n){var o=st(t.attr("class")),i="",a="";r(n,function(e,t){var n=!!o[t];e!==n&&(e?i+=(i.length?" ":"")+t:a+=(a.length?" ":"")+t)}),r(t,function(e){i&&Be(e,i),a&&je(e,a)}),e.remove(t)}}),t.length=0}function s(n,r,s){var l=e.get(n)||{},u=i(l,r,!0),c=i(l,s,!1);(u||c)&&(e.put(n,l),t.push(n),1===t.length&&o.$$postDigest(a))}return{enabled:p,on:p,off:p,pin:p,push:function(e,t,r,o){o&&o(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var i=new n;return i.complete(),i}}}]},zo=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Bo("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var o=n+"-animation";t.$$registeredAnimations[n.substr(1)]=o,e.factory(o,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+No+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw Bo("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',No)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=at(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,o,i){return r=r&&Br(r),o=o&&Br(o),r=r||o.parent(),t(n,r,o),e.push(n,"enter",lt(i))},move:function(n,r,o,i){return r=r&&Br(r),o=o&&Br(o),r=r||o.parent(),t(n,r,o),e.push(n,"move",lt(i))},leave:function(t,n){return e.push(t,"leave",lt(n),function(){t.remove()})},addClass:function(t,n,r){return r=lt(r),r.addClass=it(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=lt(r),r.removeClass=it(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,o){return o=lt(o),o.addClass=it(o.addClass,n),o.removeClass=it(o.removeClass,r),e.push(t,"setClass",o)},animate:function(t,n,r,o,i){return i=lt(i),i.from=i.from?u(i.from,n):n,i.to=i.to?u(i.to,r):r,o=o||"ng-inline-animate",i.tempClasses=it(i.tempClasses,o),e.push(t,"animate",i)}}}]}],Go=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},qo=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,n,o,i){function a(e){this.setHost(e);var t=n(),r=function(e){i(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){var n=o[0];n&&n.hidden?r(e):t(e)},this._state=0}var s=0,l=1,u=2;return a.chain=function(e,t){function n(){return r===e.length?void t(!0):void e[r](function(e){return e===!1?void t(!1):(r++,void n())})}var r=0;n()},a.all=function(e,t){function n(n){i=i&&n,++o===e.length&&t(i)}var o=0,i=!0;r(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){this._state===u?e():this._doneCallbacks.push(e)},progress:p,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){t===!1?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;t._state===s&&(t._state=l,t._tick(function(){t._resolve(e)}))},_resolve:function(e){this._state!==u&&(r(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=u)}},a}]},Wo=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function o(){return e(function(){i(),s||l.complete(),s=!0}),l}function i(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=L(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,l=new n;return{start:o,end:o}}}]},Ho=t("$compile"),Xo=new pt;ht.$inject=["$provide","$$sanitizeUriProvider"],mt.prototype.isFirstChange=function(){return this.previousValue===Xo};var Yo=/^((?:x|data)[\:\-_])/i,Zo=t("$controller"),Ko=/^(\S+)(\s+as\s+([\w$]+))?$/,Qo=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Br&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Jo="application/json",ei={"Content-Type":Jo+";charset=utf-8"},ti=/^\[|^\{(?!\{)/,ni={"[":/]$/,"{":/}$/},ri=/^\)\]\}',?\n/,oi=t("$http"),ii=function(e){return function(){throw oi("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},ai=Hr.$interpolateMinErr=t("$interpolate");ai.throwNoconcat=function(e){throw ai("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},ai.interr=function(e,t){return ai("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var si=function(){this.$get=["$window",function(e){function t(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var n=e.angular.callbacks,r={};return{createCallback:function(e){var o="_"+(n.$$counter++).toString(36),i="angular.callbacks."+o,a=t(o);return r[i]=n[o]=a,i},wasCalled:function(e){return r[e].called},getResponse:function(e){return r[e].data},removeCallback:function(e){var t=r[e];delete n[t.id],delete r[e]}}}]},li=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ui={http:80,https:443,ftp:21},ci=t("$location"),fi={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Zt("$$absUrl"),url:function(e){if(g(e))return this.$$url;var t=li.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Zt("$$protocol"),host:Zt("$$host"),port:Zt("$$port"),path:Kt("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(w(e)||_(e))e=e.toString(),this.$$search=Q(e);else{if(!y(e))throw ci("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=L(e,{}),r(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:g(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Kt("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};r([Yt,Xt,Ht],function(e){e.prototype=Object.create(fi),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Ht||!this.$$html5)throw ci("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=g(t)?null:t,this}});var di=t("$parse"),pi=Function.prototype.call,hi=Function.prototype.apply,mi=Function.prototype.bind,vi=he();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){vi[e]=!0});var gi={n:"\n",f:"\f",r:"\r",t:"\t",v:"\x0B","'":"'",'"':'"'},bi=function(e){this.options=e};bi.prototype={constructor:bi,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),o=vi[t],i=vi[n],a=vi[r];if(o||i||a){var s=a?r:i?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\x0B"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=b(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw di("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Dr(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,o=!1;this.index<this.text.length;){var i=this.text.charAt(this.index);if(r+=i,o){if("u"===i){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{var s=gi[i];n+=s||i}o=!1}else if("\\"===i)o=!0;else{if(i===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=i}this.index++}this.throwError("Unterminated quote",t)}};var yi=function(e,t){this.lexer=e,this.options=t};yi.Program="Program",yi.ExpressionStatement="ExpressionStatement",yi.AssignmentExpression="AssignmentExpression",yi.ConditionalExpression="ConditionalExpression",yi.LogicalExpression="LogicalExpression",yi.BinaryExpression="BinaryExpression",yi.UnaryExpression="UnaryExpression",yi.CallExpression="CallExpression",yi.MemberExpression="MemberExpression",yi.Identifier="Identifier",yi.Literal="Literal",yi.ArrayExpression="ArrayExpression",yi.Property="Property",yi.ObjectExpression="ObjectExpression",yi.ThisExpression="ThisExpression",yi.LocalsExpression="LocalsExpression",yi.NGValueParameter="NGValueParameter",yi.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:yi.Program,body:e}},expressionStatement:function(){return{type:yi.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:yi.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:yi.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:yi.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:yi.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:yi.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:yi.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:yi.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:yi.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:yi.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=L(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:yi.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:yi.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:yi.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:yi.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:yi.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.filterChain());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:yi.Identifier,name:e.text}},constant:function(){return{type:yi.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:yi.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:yi.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:yi.ObjectExpression,properties:t}},throwError:function(e,t){throw di("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw di("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw di("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,o){if(this.tokens.length>e){var i=this.tokens[e],a=i.text;if(a===t||a===n||a===r||a===o||!t&&!n&&!r&&!o)return i}return!1},expect:function(e,t,n,r){var o=this.peek(e,t,n,r);return!!o&&(this.tokens.shift(),o)},selfReferential:{"this":{type:yi.ThisExpression},$locals:{type:yi.LocalsExpression}}},mn.prototype={compile:function(e,t){var n=this,o=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},un(o,n.$filter);var i,a="";if(this.stage="assign",i=dn(o)){this.state.computing="assign";var s=this.nextId();this.recurse(i,s),this.return_(s),a="fn.assign="+this.generateFunction("assign","s,v,l")}var l=cn(o.body);n.stage="inputs",r(l,function(e,t){var r="fn"+t;n.state[r]={vars:[],body:[],own:{}},n.state.computing=r;var o=n.nextId();n.recurse(e,o),n.return_(o),n.state.inputs.push(r),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(o);var u='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+a+this.watchFns()+"return fn;",c=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",u)(this.$filter,en,nn,rn,tn,on,an,sn,e);return this.state=this.stage=void 0,c.literal=pn(o),c.constant=hn(o),c},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return r(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return r(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,o,i,a){var s,l,u,c,f,d=this;if(o=o||p,!a&&b(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,o,i,!0));switch(e.type){case yi.Program:r(e.body,function(t,n){d.recurse(t.expression,void 0,void 0,function(e){l=e}),n!==e.body.length-1?d.current().body.push(l,";"):d.return_(l)});break;case yi.Literal:c=this.escape(e.value),this.assign(t,c),o(c);break;case yi.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){l=e}),c=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,c),o(c);break;case yi.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){l=e}),c="+"===e.operator?this.plus(s,l):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(l,0):"("+s+")"+e.operator+"("+l+")",this.assign(t,c),o(c);break;case yi.LogicalExpression:t=t||this.nextId(),d.recurse(e.left,t),d.if_("&&"===e.operator?t:d.not(t),d.lazyRecurse(e.right,t)),o(t);break;case yi.ConditionalExpression:t=t||this.nextId(),d.recurse(e.test,t),d.if_(t,d.lazyRecurse(e.alternate,t),d.lazyRecurse(e.consequent,t)),o(t);break;case yi.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),en(e.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",e.name)),function(){
d.if_("inputs"===d.stage||"s",function(){i&&1!==i&&d.if_(d.not(d.nonComputedMember("s",e.name)),d.lazyAssign(d.nonComputedMember("s",e.name),"{}")),d.assign(t,d.nonComputedMember("s",e.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",e.name))),(d.state.expensiveChecks||gn(e.name))&&d.addEnsureSafeObject(t),o(t);break;case yi.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(e.object,s,void 0,function(){d.if_(d.notNull(s),function(){i&&1!==i&&d.addEnsureSafeAssignContext(s),e.computed?(l=d.nextId(),d.recurse(e.property,l),d.getStringValue(l),d.addEnsureSafeMemberName(l),i&&1!==i&&d.if_(d.not(d.computedMember(s,l)),d.lazyAssign(d.computedMember(s,l),"{}")),c=d.ensureSafeObject(d.computedMember(s,l)),d.assign(t,c),n&&(n.computed=!0,n.name=l)):(en(e.property.name),i&&1!==i&&d.if_(d.not(d.nonComputedMember(s,e.property.name)),d.lazyAssign(d.nonComputedMember(s,e.property.name),"{}")),c=d.nonComputedMember(s,e.property.name),(d.state.expensiveChecks||gn(e.property.name))&&(c=d.ensureSafeObject(c)),d.assign(t,c),n&&(n.computed=!1,n.name=e.property.name))},function(){d.assign(t,"undefined")}),o(t)},!!i);break;case yi.CallExpression:t=t||this.nextId(),e.filter?(l=d.filter(e.callee.name),u=[],r(e.arguments,function(e){var t=d.nextId();d.recurse(e,t),u.push(t)}),c=l+"("+u.join(",")+")",d.assign(t,c),o(t)):(l=d.nextId(),s={},u=[],d.recurse(e.callee,l,s,function(){d.if_(d.notNull(l),function(){d.addEnsureSafeFunction(l),r(e.arguments,function(e){d.recurse(e,d.nextId(),void 0,function(e){u.push(d.ensureSafeObject(e))})}),s.name?(d.state.expensiveChecks||d.addEnsureSafeObject(s.context),c=d.member(s.context,s.name,s.computed)+"("+u.join(",")+")"):c=l+"("+u.join(",")+")",c=d.ensureSafeObject(c),d.assign(t,c)},function(){d.assign(t,"undefined")}),o(t)}));break;case yi.AssignmentExpression:if(l=this.nextId(),s={},!fn(e.left))throw di("lval","Trying to assign a value to a non l-value");this.recurse(e.left,void 0,s,function(){d.if_(d.notNull(s.context),function(){d.recurse(e.right,l),d.addEnsureSafeObject(d.member(s.context,s.name,s.computed)),d.addEnsureSafeAssignContext(s.context),c=d.member(s.context,s.name,s.computed)+e.operator+l,d.assign(t,c),o(t||c)})},1);break;case yi.ArrayExpression:u=[],r(e.elements,function(e){d.recurse(e,d.nextId(),void 0,function(e){u.push(e)})}),c="["+u.join(",")+"]",this.assign(t,c),o(c);break;case yi.ObjectExpression:u=[],f=!1,r(e.properties,function(e){e.computed&&(f=!0)}),f?(t=t||this.nextId(),this.assign(t,"{}"),r(e.properties,function(e){e.computed?(s=d.nextId(),d.recurse(e.key,s)):s=e.key.type===yi.Identifier?e.key.name:""+e.key.value,l=d.nextId(),d.recurse(e.value,l),d.assign(d.member(t,s,e.computed),l)})):(r(e.properties,function(t){d.recurse(t.value,e.constant?void 0:d.nextId(),void 0,function(e){u.push(d.escape(t.key.type===yi.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+u.join(",")+"}",this.assign(t,c)),o(t||c);break;case yi.ThisExpression:this.assign(t,"s"),o("s");break;case yi.LocalsExpression:this.assign(t,"l"),o("l");break;case yi.NGValueParameter:this.assign(t,"v"),o("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/[$_a-zA-Z][$_a-zA-Z0-9]*/,r=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(r,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,o,i){var a=this;return function(){a.recurse(e,t,n,r,o,i)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(w(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(_(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw di("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},vn.prototype={compile:function(e,t){var n=this,o=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,un(o,n.$filter);var i,a;(i=dn(o))&&(a=this.recurse(i));var s,l=cn(o.body);l&&(s=[],r(l,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var u=[];r(o.body,function(e){u.push(n.recurse(e.expression))});var c=0===o.body.length?p:1===o.body.length?u[0]:function(e,t){var n;return r(u,function(r){n=r(e,t)}),n};return a&&(c.assign=function(e,t,n){return a(e,n,t)}),s&&(c.inputs=s),c.literal=pn(o),c.constant=hn(o),c},recurse:function(e,t,n){var o,i,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case yi.Literal:return this.value(e.value,t);case yi.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case yi.BinaryExpression:return o=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](o,i,t);case yi.LogicalExpression:return o=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](o,i,t);case yi.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case yi.Identifier:return en(e.name,s.expression),s.identifier(e.name,s.expensiveChecks||gn(e.name),t,n,s.expression);case yi.MemberExpression:return o=this.recurse(e.object,!1,!!n),e.computed||(en(e.property.name,s.expression),i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(o,i,t,n,s.expression):this.nonComputedMember(o,i,s.expensiveChecks,t,n,s.expression);case yi.CallExpression:return a=[],r(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(e,n,r,o){for(var s=[],l=0;l<a.length;++l)s.push(a[l](e,n,r,o));var u=i.apply(void 0,s,o);return t?{context:void 0,name:void 0,value:u}:u}:function(e,n,r,o){var l,u=i(e,n,r,o);if(null!=u.value){nn(u.context,s.expression),rn(u.value,s.expression);for(var c=[],f=0;f<a.length;++f)c.push(nn(a[f](e,n,r,o),s.expression));l=nn(u.value.apply(u.context,c),s.expression)}return t?{value:l}:l};case yi.AssignmentExpression:return o=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(e,n,r,a){var l=o(e,n,r,a),u=i(e,n,r,a);return nn(l.value,s.expression),on(l.context),l.context[l.name]=u,t?{value:u}:u};case yi.ArrayExpression:return a=[],r(e.elements,function(e){a.push(s.recurse(e))}),function(e,n,r,o){for(var i=[],s=0;s<a.length;++s)i.push(a[s](e,n,r,o));return t?{value:i}:i};case yi.ObjectExpression:return a=[],r(e.properties,function(e){e.computed?a.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):a.push({key:e.key.type===yi.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,o){for(var i={},s=0;s<a.length;++s)a[s].computed?i[a[s].key(e,n,r,o)]=a[s].value(e,n,r,o):i[a[s].key]=a[s].value(e,n,r,o);return t?{value:i}:i};case yi.ThisExpression:return function(e){return t?{value:e}:e};case yi.LocalsExpression:return function(e,n){return t?{value:n}:n};case yi.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,o,i){var a=e(n,r,o,i);return a=b(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,o,i){var a=e(n,r,o,i);return a=b(a)?-a:0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,o,i){var a=!e(n,r,o,i);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a),l=t(r,o,i,a),u=sn(s,l);return n?{value:u}:u}},"binary-":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a),l=t(r,o,i,a),u=(b(s)?s:0)-(b(l)?l:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)*t(r,o,i,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)/t(r,o,i,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)%t(r,o,i,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)===t(r,o,i,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)!==t(r,o,i,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)==t(r,o,i,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)!=t(r,o,i,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)<t(r,o,i,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)>t(r,o,i,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)<=t(r,o,i,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)>=t(r,o,i,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)&&t(r,o,i,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,o,i,a){var s=e(r,o,i,a)||t(r,o,i,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(o,i,a,s){var l=e(o,i,a,s)?t(o,i,a,s):n(o,i,a,s);return r?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n,r,o){return function(i,a,s,l){var u=a&&e in a?a:i;r&&1!==r&&u&&!u[e]&&(u[e]={});var c=u?u[e]:void 0;return t&&nn(c,o),n?{context:u,name:e,value:c}:c}},computedMember:function(e,t,n,r,o){return function(i,a,s,l){var u,c,f=e(i,a,s,l);return null!=f&&(u=t(i,a,s,l),u=tn(u),en(u,o),r&&1!==r&&(on(f),f&&!f[u]&&(f[u]={})),c=f[u],nn(c,o)),n?{context:f,name:u,value:c}:c}},nonComputedMember:function(e,t,n,r,o,i){return function(a,s,l,u){var c=e(a,s,l,u);o&&1!==o&&(on(c),c&&!c[t]&&(c[t]={}));var f=null!=c?c[t]:void 0;return(n||gn(t))&&nn(f,i),r?{context:c,name:t,value:f}:f}},inputs:function(e,t){return function(n,r,o,i){return i?i[t]:e(n,r,o)}}};var xi=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new yi(e,n),this.astCompiler=n.csp?new vn(this.ast,t):new mn(this.ast,t)};xi.prototype={constructor:xi,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var wi=Object.prototype.valueOf,_i=t("$sce"),ki={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Mi=t("$compile"),Ei=e.document.createElement("a"),Ai=On(e.location.href);jn.$inject=["$document"],Ln.$inject=["$provide"];var Ti=22,Ci=".",Si="0";Gn.$inject=["$locale"],qn.$inject=["$locale"];var $i={yyyy:Zn("FullYear",4,0,!1,!0),yy:Zn("FullYear",2,0,!0,!0),y:Zn("FullYear",1,0,!1,!0),MMMM:Kn("Month"),MMM:Kn("Month",!0),MM:Zn("Month",2,1),M:Zn("Month",1,1),LLLL:Kn("Month",!1,!0),dd:Zn("Date",2),d:Zn("Date",1),HH:Zn("Hours",2),H:Zn("Hours",1),hh:Zn("Hours",2,-12),h:Zn("Hours",1,-12),mm:Zn("Minutes",2),m:Zn("Minutes",1),ss:Zn("Seconds",2),s:Zn("Seconds",1),sss:Zn("Milliseconds",3),EEEE:Kn("Day"),EEE:Kn("Day",!0),a:nr,Z:Qn,ww:tr(2),w:tr(1),G:rr,GG:rr,GGG:rr,GGGG:or},Ii=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Fi=/^\-?\d+$/;ir.$inject=["$locale"];var Di=m(Dr),Oi=m(Or);ur.$inject=["$parse"];var Ri=m({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Gr.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Pi={};r(Co,function(e,t){function n(e,n,o){e.$watch(o[r],function(e){o.$set(t,!!e)})}if("multiple"!=e){var r=vt("ng-"+t),o=n;"checked"===e&&(o=function(e,t,o){o.ngModel!==o[r]&&n(e,t,o)}),Pi[r]=function(){return{restrict:"A",priority:100,link:o}}}}),r($o,function(e,t){Pi[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var o=r.ngPattern.match($r);if(o)return void r.$set("ngPattern",new RegExp(o[1],o[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),r(["src","srcset","href"],function(e){var t=vt("ng-"+e);Pi[t]=function(){return{priority:99,link:function(n,r,o){var i=e,a=e;"href"===e&&"[object SVGAnimatedString]"===Gr.call(r.prop("href"))&&(a="xlinkHref",o.$attr[a]="xlink:href",i=null),o.$observe(t,function(t){return t?(o.$set(a,t),void(jr&&i&&r.prop(i,o[a]))):void("href"===e&&o.$set(a,null))})}}}});var ji={$addControl:p,$$renameControl:fr,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},Bi="ng-submitted";dr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Li=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||p}var o={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:dr,compile:function(n,o){n.addClass(wa).addClass(ya);var i=o.name?"name":!(!e||!o.ngForm)&&"ngForm";return{pre:function(e,n,o,a){var s=a[0];if(!("action"in o)){var l=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};mo(n[0],"submit",l),n.on("$destroy",function(){t(function(){vo(n[0],"submit",l)},0,!1)})}var c=a[1]||s.$$parentForm;c.$addControl(s);var f=i?r(s.$name):p;i&&(f(e,s),o.$observe(i,function(t){s.$name!==t&&(f(e,void 0),s.$$parentForm.$$renameControl(s,t),(f=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),f(e,void 0),u(s,ji)})}}}};return o}]},Ni=Li(),Ui=Li(!0),Vi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,zi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Gi=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,qi=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Wi=/^(\d{4,})-(\d{2})-(\d{2})$/,Hi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Xi=/^(\d{4,})-W(\d\d)$/,Yi=/^(\d{4,})-(\d\d)$/,Zi=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ki="keydown wheel mousedown",Qi=he();r("date,datetime-local,month,time,week".split(","),function(e){Qi[e]=!0});var Ji={text:hr,date:br("date",Wi,gr(Wi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":br("datetimelocal",Hi,gr(Hi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:br("time",Zi,gr(Zi,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:br("week",Xi,vr,"yyyy-Www"),month:br("month",Yi,gr(Yi,["yyyy","MM"]),"yyyy-MM"),number:xr,url:wr,email:_r,radio:kr,checkbox:Er,hidden:p,button:p,submit:p,reset:p,file:p},ea=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(o,i,a,s){s[0]&&(Ji[Dr(a.type)]||Ji.text)(o,i,a,s[0],t,e,n,r)}}}}],ta=/^(true|false|\d+)$/,na=function(){return{restrict:"A",priority:100,compile:function(e,t){return ta.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},ra=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=g(e)?"":e})}}}}],oa=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,o){var i=e(r.attr(o.$attr.ngBindTemplate));t.$$addBindingInfo(r,i.expressions),r=r[0],o.$observe("ngBindTemplate",function(e){r.textContent=g(e)?"":e})}}}}],ia=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,o){var i=t(o.ngBindHtml),a=t(o.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,o){n.$$addBindingInfo(r,o.ngBindHtml),t.$watch(a,function(){var n=i(t);r.html(e.getTrustedHtml(n)||"")})}}}}],aa=m({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),sa=Ar("",!0),la=Ar("Odd",0),ua=Ar("Even",1),ca=cr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),fa=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],da={},pa={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=vt("ng-"+e);da[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(o,i){var a=n(i[t],null,!0);return function(t,n){n.on(e,function(n){var o=function(){a(t,{$event:n})};pa[e]&&r.$$phase?t.$evalAsync(o):t.$apply(o)})}}}}]});var ha=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,o,i,a){var s,l,u;n.$watch(o.ngIf,function(n){n?l||a(function(n,i){l=i,n[n.length++]=t.$$createComment("end ngIf",o.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=pe(s.clone),e.leave(u).then(function(){u=null}),s=null))})}}}],ma=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Hr.noop,compile:function(r,o){var i=o.ngInclude||o.src,a=o.onload||"",s=o.autoscroll;return function(r,o,l,u,c){var f,d,p,h=0,m=function(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),p&&(n.leave(p).then(function(){d=null}),d=p,p=null)};r.$watch(i,function(i){var l=function(){!b(s)||s&&!r.$eval(s)||t()},d=++h;i?(e(i,!0).then(function(e){if(!r.$$destroyed&&d===h){var t=r.$new();u.template=e;var s=c(t,function(e){m(),n.enter(e,null,o).then(l)});f=t,p=s,f.$emit("$includeContentLoaded",i),r.$eval(a)}},function(){r.$$destroyed||d===h&&(m(),r.$emit("$includeContentError",i))}),r.$emit("$includeContentRequested",i)):(m(),u.template=null)})}}}}],va=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,o,i){return Gr.call(r[0]).match(/SVG/)?(r.empty(),void t(Ae(i.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(i.template),void t(r.contents())(n))}}}],ga=cr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ba=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,o){var i=t.attr(n.$attr.ngList)||", ",a="false"!==n.ngTrim,s=a?Kr(i):i,l=function(e){if(!g(e)){var t=[];return e&&r(e.split(s),function(e){e&&t.push(a?Kr(e):e)}),t}};o.$parsers.push(l),o.$formatters.push(function(e){if(Yr(e))return e.join(i)}),o.$isEmpty=function(e){return!e||!e.length}}}},ya="ng-valid",xa="ng-invalid",wa="ng-pristine",_a="ng-dirty",ka="ng-untouched",Ma="ng-touched",Ea="ng-pending",Aa="ng-empty",Ta="ng-not-empty",Ca=t("ngModel"),Sa=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,n,o,i,a,s,l,u,c){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=c(n.name||"",!1)(e),this.$$parentForm=ji;var f,d=i(n.ngModel),h=d.assign,m=d,v=h,y=null,x=this;this.$$setOptions=function(e){if(x.$options=e,e&&e.getterSetter){var t=i(n.ngModel+"()"),r=i(n.ngModel+"($$$p)");m=function(e){var n=d(e);return M(n)&&(n=t(e)),n},v=function(e,t){M(d(e))?r(e,{$$$p:t}):h(e,t)}}else if(!d.assign)throw Ca("nonassign","Expression '{0}' is non-assignable. Element: {1}",n.ngModel,Z(o))},this.$render=p,this.$isEmpty=function(e){return g(e)||""===e||null===e||e!==e},this.$$updateEmptyClasses=function(e){x.$isEmpty(e)?(a.removeClass(o,Ta),a.addClass(o,Aa)):(a.removeClass(o,Aa),a.addClass(o,Ta))};var w=0;Tr({ctrl:this,$element:o,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:a}),this.$setPristine=function(){x.$dirty=!1,x.$pristine=!0,a.removeClass(o,_a),a.addClass(o,wa)},this.$setDirty=function(){x.$dirty=!0,x.$pristine=!1,a.removeClass(o,wa),a.addClass(o,_a),x.$$parentForm.$setDirty()},this.$setUntouched=function(){x.$touched=!1,x.$untouched=!0,a.setClass(o,ka,Ma)},this.$setTouched=function(){x.$touched=!0,x.$untouched=!1,a.setClass(o,Ma,ka)},this.$rollbackViewValue=function(){s.cancel(y),x.$viewValue=x.$$lastCommittedViewValue,x.$render()},this.$validate=function(){if(!_(x.$modelValue)||!isNaN(x.$modelValue)){var e=x.$$lastCommittedViewValue,t=x.$$rawModelValue,n=x.$valid,r=x.$modelValue,o=x.$options&&x.$options.allowInvalid;x.$$runValidators(t,e,function(e){o||n===e||(x.$modelValue=e?t:void 0,x.$modelValue!==r&&x.$$writeModelToScope())})}},this.$$runValidators=function(e,t,n){function o(){var e=x.$$parserName||"parse";return g(f)?(s(e,null),!0):(f||(r(x.$validators,function(e,t){s(t,null)}),r(x.$asyncValidators,function(e,t){s(t,null)})),s(e,f),f)}function i(){var n=!0;return r(x.$validators,function(r,o){var i=r(e,t);n=n&&i,s(o,i)}),!!n||(r(x.$asyncValidators,function(e,t){s(t,null)}),!1)}function a(){var n=[],o=!0;r(x.$asyncValidators,function(r,i){var a=r(e,t);if(!F(a))throw Ca("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);s(i,void 0),n.push(a.then(function(){s(i,!0)},function(){o=!1,s(i,!1)}))}),n.length?u.all(n).then(function(){l(o)},p):l(!0)}function s(e,t){c===w&&x.$setValidity(e,t)}function l(e){c===w&&n(e)}w++;var c=w;return o()&&i()?void a():void l(!1)},this.$commitViewValue=function(){var e=x.$viewValue;s.cancel(y),(x.$$lastCommittedViewValue!==e||""===e&&x.$$hasNativeValidators)&&(x.$$updateEmptyClasses(e),x.$$lastCommittedViewValue=e,x.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){x.$modelValue!==i&&x.$$writeModelToScope()}var n=x.$$lastCommittedViewValue,r=n;if(f=!g(r)||void 0)for(var o=0;o<x.$parsers.length;o++)if(r=x.$parsers[o](r),g(r)){f=!1;break}_(x.$modelValue)&&isNaN(x.$modelValue)&&(x.$modelValue=m(e));var i=x.$modelValue,a=x.$options&&x.$options.allowInvalid;x.$$rawModelValue=r,a&&(x.$modelValue=r,t()),x.$$runValidators(r,x.$$lastCommittedViewValue,function(e){a||(x.$modelValue=e?r:void 0,t())})},this.$$writeModelToScope=function(){v(e,x.$modelValue),r(x.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){x.$viewValue=e,x.$options&&!x.$options.updateOnDefault||x.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,o=x.$options;o&&b(o.debounce)&&(n=o.debounce,_(n)?r=n:_(n[t])?r=n[t]:_(n["default"])&&(r=n["default"])),s.cancel(y),r?y=s(function(){x.$commitViewValue()},r):l.$$phase?x.$commitViewValue():e.$apply(function(){x.$commitViewValue()})},e.$watch(function(){var t=m(e);if(t!==x.$modelValue&&(x.$modelValue===x.$modelValue||t===t)){x.$modelValue=x.$$rawModelValue=t,f=void 0;for(var n=x.$formatters,r=n.length,o=t;r--;)o=n[r](o);x.$viewValue!==o&&(x.$$updateEmptyClasses(o),x.$viewValue=x.$$lastCommittedViewValue=o,x.$render(),x.$$runValidators(t,o,p))}return t})}],$a=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Sa,priority:1,compile:function(t){return t.addClass(wa).addClass(ka).addClass(ya),{pre:function(e,t,n,r){var o=r[0],i=r[1]||o.$$parentForm;o.$$setOptions(r[2]&&r[2].$options),i.$addControl(o),n.$observe("name",function(e){o.$name!==e&&o.$$parentForm.$$renameControl(o,e)}),e.$on("$destroy",function(){o.$$parentForm.$removeControl(o)})},post:function(t,n,r,o){var i=o[0];i.$options&&i.$options.updateOn&&n.on(i.$options.updateOn,function(e){i.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){i.$touched||(e.$$phase?t.$evalAsync(i.$setTouched):t.$apply(i.$setTouched))})}}}}}],Ia=/(\s+|^)default(\s+|$)/,Fa=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=L(e.$eval(t.ngModelOptions)),b(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Kr(this.$options.updateOn.replace(Ia,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Da=cr({terminal:!0,priority:1e3}),Oa=t("ngOptions"),Ra=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Pa=["$compile","$document","$parse",function(t,o,i){function a(e,t,r){function o(e,t,n,r,o){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=o}function a(e){var t;if(!u&&n(e))t=e;else{t=[];for(var r in e)e.hasOwnProperty(r)&&"$"!==r.charAt(0)&&t.push(r)}return t}var s=e.match(Ra);if(!s)throw Oa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Z(t));var l=s[5]||s[7],u=s[6],c=/ as /.test(s[0])&&s[1],f=s[9],d=i(s[2]?s[1]:l),p=c&&i(c),h=p||d,m=f&&i(f),v=f?function(e,t){return m(r,t)}:function(e){return Ke(e)},g=function(e,t){return v(e,k(e,t))},b=i(s[2]||s[1]),y=i(s[3]||""),x=i(s[4]||""),w=i(s[8]),_={},k=u?function(e,t){return _[u]=t,_[l]=e,_}:function(e){return _[l]=e,_};return{trackBy:f,getTrackByValue:g,getWatchables:i(w,function(e){var t=[];e=e||[];for(var n=a(e),o=n.length,i=0;i<o;i++){var l=e===n?i:n[i],u=e[l],c=k(u,l),f=v(u,c);if(t.push(f),s[2]||s[1]){var d=b(r,c);t.push(d)}if(s[4]){var p=x(r,c);t.push(p)}}return t}),getOptions:function(){for(var e=[],t={},n=w(r)||[],i=a(n),s=i.length,l=0;l<s;l++){var u=n===i?l:i[l],c=n[u],d=k(c,u),p=h(r,d),m=v(p,d),_=b(r,d),M=y(r,d),E=x(r,d),A=new o(m,p,_,M,E);e.push(A),t[m]=A}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[g(e)]},getViewValueFromOption:function(e){return f?Hr.copy(e.viewValue):e.viewValue}}}}}function s(e,n,i,s){function c(e,t){var n=l.cloneNode(!1);t.appendChild(n),f(e,n)}function f(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),e.value!==t.value&&(t.value=e.selectValue)}function d(){var e=k&&h.readValue();if(k)for(var t=k.items.length-1;t>=0;t--){var r=k.items[t];ze(b(r.group)?r.element.parentNode:r.element)}k=M.getOptions();var o={};if(w&&n.prepend(p),k.items.forEach(function(e){var t;b(e.group)?(t=o[e.group],t||(t=u.cloneNode(!1),E.appendChild(t),t.label=null===e.group?"null":e.group,o[e.group]=t),c(e,t)):c(e,E)}),n[0].appendChild(E),m.$render(),!m.$isEmpty(e)){var i=h.readValue(),a=M.trackBy||v;(a?N(e,i):e===i)||(m.$setViewValue(i),m.$render())}}for(var p,h=s[0],m=s[1],v=i.multiple,g=0,y=n.children(),x=y.length;g<x;g++)if(""===y[g].value){p=y.eq(g);break}var w=!!p,_=Br(l.cloneNode(!1));_.val("?");var k,M=a(i.ngOptions,n,e),E=o[0].createDocumentFragment(),A=function(){w||n.prepend(p),n.val(""),p.prop("selected",!0),p.attr("selected",!0)},T=function(){w||p.remove()},C=function(){n.prepend(_),n.val("?"),_.prop("selected",!0),_.attr("selected",!0)},S=function(){_.remove()};v?(m.$isEmpty=function(e){return!e||0===e.length},h.writeValue=function(e){k.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=k.getOptionFromViewValue(e);t&&(t.element.selected=!0)})},h.readValue=function(){var e=n.val()||[],t=[];return r(e,function(e){var n=k.selectValueMap[e];n&&!n.disabled&&t.push(k.getViewValueFromOption(n))}),t},M.trackBy&&e.$watchCollection(function(){if(Yr(m.$viewValue))return m.$viewValue.map(function(e){return M.getTrackByValue(e)})},function(){m.$render()})):(h.writeValue=function(e){var t=k.getOptionFromViewValue(e);t?(n[0].value!==t.selectValue&&(S(),T(),n[0].value=t.selectValue,t.element.selected=!0),t.element.setAttribute("selected","selected")):null===e||w?(S(),A()):(T(),C())},h.readValue=function(){var e=k.selectValueMap[n.val()];return e&&!e.disabled?(T(),S(),k.getViewValueFromOption(e)):null},M.trackBy&&e.$watch(function(){return M.getTrackByValue(m.$viewValue)},function(){m.$render()})),w?(p.remove(),t(p)(e),p.removeClass("ng-scope")):p=Br(l.cloneNode(!1)),n.empty(),d(),e.$watchCollection(M.getWatchables,d)}var l=e.document.createElement("option"),u=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=p},post:s}}}],ja=["$locale","$interpolate","$log",function(e,t,n){var o=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function u(e){s.text(e||"")}var c,f=l.count,d=l.$attr.when&&s.attr(l.$attr.when),h=l.offset||0,m=a.$eval(d)||{},v={},b=t.startSymbol(),y=t.endSymbol(),x=b+f+"-"+h+y,w=Hr.noop;r(l,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+Dr(n[2]);m[r]=s.attr(l.$attr[t])}}),r(m,function(e,n){v[n]=t(e.replace(o,x))}),a.$watch(f,function(t){var r=parseFloat(t),o=isNaN(r);if(o||r in m||(r=e.pluralCat(r-h)),r!==c&&!(o&&_(c)&&isNaN(c))){w();var i=v[r];g(i)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),w=p,u()):w=a.$watch(i,u),c=r}})}}}],Ba=["$parse","$animate","$compile",function(e,o,i){var a="$$NG_REMOVED",s=t("ngRepeat"),l=function(e,t,n,r,o,i,a){e[n]=r,o&&(e[o]=i),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},u=function(e){return e.clone[0]},c=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,f){var d=f.ngRepeat,p=i.$$createComment("end ngRepeat",d),h=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw s("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",d);var m=h[1],v=h[2],g=h[3],b=h[4];if(h=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!h)throw s("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var y=h[3]||h[1],x=h[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw s("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",g);var w,_,k,M,E={$id:Ke};return b?w=e(b):(k=function(e,t){return Ke(t)},M=function(e){return e}),function(e,t,i,f,h){w&&(_=function(t,n,r){return x&&(E[x]=t),E[y]=n,E.$index=r,w(e,E)});var m=he();e.$watchCollection(v,function(i){var f,v,b,w,E,A,T,C,S,$,I,F,D=t[0],O=he();if(g&&(e[g]=i),n(i))S=i,
C=_||k;else{C=_||M,S=[];for(var R in i)Fr.call(i,R)&&"$"!==R.charAt(0)&&S.push(R)}for(w=S.length,I=new Array(w),f=0;f<w;f++)if(E=i===S?f:S[f],A=i[E],T=C(E,A,f),m[T])$=m[T],delete m[T],O[T]=$,I[f]=$;else{if(O[T])throw r(I,function(e){e&&e.scope&&(m[e.id]=e)}),s("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",d,T,A);I[f]={id:T,scope:void 0,clone:void 0},O[T]=!0}for(var P in m){if($=m[P],F=pe($.clone),o.leave(F),F[0].parentNode)for(f=0,v=F.length;f<v;f++)F[f][a]=!0;$.scope.$destroy()}for(f=0;f<w;f++)if(E=i===S?f:S[f],A=i[E],$=I[f],$.scope){b=D;do b=b.nextSibling;while(b&&b[a]);u($)!=b&&o.move(pe($.clone),null,D),D=c($),l($.scope,f,y,A,x,E,w)}else h(function(e,t){$.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,o.enter(e,null,D),D=n,$.clone=e,O[$.id]=$,l($.scope,f,y,A,x,E,w)});m=O})}}}}],La="ng-hide",Na="ng-hide-animate",Ua=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,La,{tempClasses:Na})})}}}],Va=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,La,{tempClasses:Na})})}}}],za=cr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&r(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),Ga=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,o,i,a){var s=i.ngSwitch||i.on,l=[],u=[],c=[],f=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var o,i;for(o=0,i=c.length;o<i;++o)e.cancel(c[o]);for(c.length=0,o=0,i=f.length;o<i;++o){var s=pe(u[o].clone);f[o].$destroy();var p=c[o]=e.leave(s);p.then(d(c,o))}u.length=0,f.length=0,(l=a.cases["!"+n]||a.cases["?"])&&r(l,function(n){n.transclude(function(r,o){f.push(o);var i=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};u.push(a),e.enter(r,i.parent(),i)})})})}}}],qa=cr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,o){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:o,element:t})}}),Wa=cr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,o){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:o,element:t})}}),Ha=t("ngTransclude"),Xa=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,o,i){function a(e,n){e.length?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}if(!i)throw Ha("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var l=r.ngTransclude||r.ngTranscludeSlot;i(a,null,l),l&&!i.isSlotFilled(l)&&s()}}}}],Ya=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,o=t[0].text;e.put(r,o)}}}}],Za={$setViewValue:p,$render:p},Ka=["$element","$scope",function(t,n){var r=this,o=new Qe;r.ngModelCtrl=Za,r.unknownOption=Br(e.document.createElement("option")),r.renderUnknownOption=function(e){var n="? "+Ke(e)+" ?";r.unknownOption.val(n),t.prepend(r.unknownOption),t.val(n)},n.$on("$destroy",function(){r.renderUnknownOption=p}),r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.readValue=function(){return r.removeUnknownOption(),t.val()},r.writeValue=function(e){r.hasOption(e)?(r.removeUnknownOption(),t.val(e),""===e&&r.emptyOption.prop("selected",!0)):null==e&&r.emptyOption?(r.removeUnknownOption(),t.val("")):r.renderUnknownOption(e)},r.addOption=function(e,t){if(t[0].nodeType!==lo){fe(e,'"option value"'),""===e&&(r.emptyOption=t);var n=o.get(e)||0;o.put(e,n+1),r.ngModelCtrl.$render(),Sr(t)}},r.removeOption=function(e){var t=o.get(e);t&&(1===t?(o.remove(e),""===e&&(r.emptyOption=void 0)):o.put(e,t-1))},r.hasOption=function(e){return!!o.get(e)},r.registerOption=function(e,t,n,o,i){if(o){var a;n.$observe("value",function(e){b(a)&&r.removeOption(a),a=e,r.addOption(e,t)})}else i?e.$watch(i,function(e,o){n.$set("value",e),o!==e&&r.removeOption(o),r.addOption(e,t)}):r.addOption(n.value,t);t.on("$destroy",function(){r.removeOption(n.value),r.ngModelCtrl.$render()})}}],Qa=function(){function e(e,t,n,o){var i=o[1];if(i){var a=o[0];if(a.ngModelCtrl=i,t.on("change",function(){e.$apply(function(){i.$setViewValue(a.readValue())})}),n.multiple){a.readValue=function(){var e=[];return r(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},a.writeValue=function(e){var n=new Qe(e);r(t.find("option"),function(e){e.selected=b(n.get(e.value))})};var s,l=NaN;e.$watch(function(){l!==i.$viewValue||N(s,i.$viewValue)||(s=ve(i.$viewValue),i.$render()),l=i.$viewValue}),i.$isEmpty=function(e){return!e||0===e.length}}}}function t(e,t,n,r){var o=r[1];if(o){var i=r[0];o.$render=function(){i.writeValue(o.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Ka,priority:1,link:{pre:e,post:t}}},Ja=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){if(b(n.value))var r=e(n.value,!0);else{var o=e(t.text(),!0);o||n.$set("value",t.text())}return function(e,t,n){var i="$selectController",a=t.parent(),s=a.data(i)||a.parent().data(i);s&&s.registerOption(e,t,n,r,o)}}}}],es=m({restrict:"E",terminal:!1}),ts=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},ns=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,o){if(o){var i,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(w(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,Z(n));i=e||void 0,o.$validate()}),o.$validators.pattern=function(e,t){return o.$isEmpty(t)||g(i)||i.test(t)}}}}},rs=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var o=-1;n.$observe("maxlength",function(e){var t=f(e);o=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return o<0||r.$isEmpty(t)||t.length<=o}}}}},os=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var o=0;n.$observe("minlength",function(e){o=f(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=o}}}}};return e.angular.bootstrap?void(e.console&&console.log("WARNING: Tried to load angular more than once.")):(le(),ye(Hr),Hr.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return t==-1?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var o=Math.pow(10,r),i=(e*o|0)%o;return{v:r,f:i}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var o=0|e,i=n(e,t);return 1==o&&0==i.v?r.ONE:r.OTHER}})}]),void Br(e.document).ready(function(){re(e.document,oe)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(e,t,n){n(16),e.exports=n(18)},function(e,t,n){var r=n(17);"string"==typeof r&&(r=[[e.id,r,""]]);n(11)(r,{});r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(5)(),t.push([e.id,".uib-position-measure{display:block!important;visibility:hidden!important;position:absolute!important;top:-9999px!important;left:-9999px!important}.uib-position-scrollbar-measure{position:absolute!important;top:-9999px!important;width:50px!important;height:50px!important;overflow:scroll!important}.uib-position-body-scrollbar-measure{overflow:scroll!important}",""])},function(e,t,n){n(19),n(21);var r="ui.bootstrap.module.dropdown";angular.module(r,["ui.bootstrap.dropdown"]),e.exports=r},function(e,t,n){n(20);var r="ui.bootstrap.module.position";angular.module(r,["ui.bootstrap.position"]),e.exports=r},function(e,t){angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){var n,r,o={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},i={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},a=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(n){function r(e){return"static"===(t.getComputedStyle(e).position||"static")}n=this.getRawNode(n);for(var o=n.offsetParent||e[0].documentElement;o&&o!==e[0].documentElement&&r(o);)o=o.offsetParent;return o||e[0].documentElement},scrollbarWidth:function(o){if(o){if(angular.isUndefined(r)){var i=e.find("body");i.addClass("uib-position-body-scrollbar-measure"),r=t.innerWidth-i[0].clientWidth,r=isFinite(r)?r:0,i.removeClass("uib-position-body-scrollbar-measure")}return r}if(angular.isUndefined(n)){var a=angular.element('<div class="uib-position-scrollbar-measure"></div>');e.find("body").append(a),n=a[0].offsetWidth-a[0].clientWidth,n=isFinite(n)?n:0,a.remove()}return n},scrollbarPadding:function(e){e=this.getRawNode(e);var n=t.getComputedStyle(e),r=this.parseStyle(n.paddingRight),o=this.parseStyle(n.paddingBottom),i=this.scrollParent(e,!1,!0),s=this.scrollbarWidth(i,a.test(i.tagName));return{scrollbarWidth:s,widthOverflow:i.scrollWidth>i.clientWidth,right:r+s,originalRight:r,heightOverflow:i.scrollHeight>i.clientHeight,bottom:o+s,originalBottom:o}},isScrollable:function(e,n){e=this.getRawNode(e);var r=n?o.hidden:o.normal,i=t.getComputedStyle(e);return r.test(i.overflow+i.overflowY+i.overflowX)},scrollParent:function(n,r,i){n=this.getRawNode(n);var a=r?o.hidden:o.normal,s=e[0].documentElement,l=t.getComputedStyle(n);if(i&&a.test(l.overflow+l.overflowY+l.overflowX))return n;var u="absolute"===l.position,c=n.parentElement||s;if(c===s||"fixed"===l.position)return s;for(;c.parentElement&&c!==s;){var f=t.getComputedStyle(c);if(u&&"static"!==f.position&&(u=!1),!u&&a.test(f.overflow+f.overflowY+f.overflowX))break;c=c.parentElement}return c},position:function(n,r){n=this.getRawNode(n);var o=this.offset(n);if(r){var i=t.getComputedStyle(n);o.top-=this.parseStyle(i.marginTop),o.left-=this.parseStyle(i.marginLeft)}var a=this.offsetParent(n),s={top:0,left:0};return a!==e[0].documentElement&&(s=this.offset(a),s.top+=a.clientTop-a.scrollTop,s.left+=a.clientLeft-a.scrollLeft),{width:Math.round(angular.isNumber(o.width)?o.width:n.offsetWidth),height:Math.round(angular.isNumber(o.height)?o.height:n.offsetHeight),top:Math.round(o.top-s.top),left:Math.round(o.left-s.left)}},offset:function(n){n=this.getRawNode(n);var r=n.getBoundingClientRect();return{width:Math.round(angular.isNumber(r.width)?r.width:n.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:n.offsetHeight),top:Math.round(r.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(r.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(n,r,o){n=this.getRawNode(n),o=o!==!1;var i=n.getBoundingClientRect(),a={top:0,left:0,bottom:0,right:0},s=r?e[0].documentElement:this.scrollParent(n),l=s.getBoundingClientRect();if(a.top=l.top+s.clientTop,a.left=l.left+s.clientLeft,s===e[0].documentElement&&(a.top+=t.pageYOffset,a.left+=t.pageXOffset),a.bottom=a.top+s.clientHeight,a.right=a.left+s.clientWidth,o){var u=t.getComputedStyle(s);a.top+=this.parseStyle(u.paddingTop),a.bottom-=this.parseStyle(u.paddingBottom),a.left+=this.parseStyle(u.paddingLeft),a.right-=this.parseStyle(u.paddingRight)}return{top:Math.round(i.top-a.top),bottom:Math.round(a.bottom-i.bottom),left:Math.round(i.left-a.left),right:Math.round(a.right-i.right)}},parsePlacement:function(e){var t=i.auto.test(e);return t&&(e=e.replace(i.auto,"")),e=e.split("-"),e[0]=e[0]||"top",i.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",i.secondary.test(e[1])||(e[1]="center"),t?e[2]=!0:e[2]=!1,e},positionElements:function(e,n,r,o){e=this.getRawNode(e),n=this.getRawNode(n);var a=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),s=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");r=this.parsePlacement(r);var l=o?this.offset(e):this.position(e),u={top:0,left:0,placement:""};if(r[2]){var c=this.viewportOffset(e,o),f=t.getComputedStyle(n),d={width:a+Math.round(Math.abs(this.parseStyle(f.marginLeft)+this.parseStyle(f.marginRight))),height:s+Math.round(Math.abs(this.parseStyle(f.marginTop)+this.parseStyle(f.marginBottom)))};if(r[0]="top"===r[0]&&d.height>c.top&&d.height<=c.bottom?"bottom":"bottom"===r[0]&&d.height>c.bottom&&d.height<=c.top?"top":"left"===r[0]&&d.width>c.left&&d.width<=c.right?"right":"right"===r[0]&&d.width>c.right&&d.width<=c.left?"left":r[0],r[1]="top"===r[1]&&d.height-l.height>c.bottom&&d.height-l.height<=c.top?"bottom":"bottom"===r[1]&&d.height-l.height>c.top&&d.height-l.height<=c.bottom?"top":"left"===r[1]&&d.width-l.width>c.right&&d.width-l.width<=c.left?"right":"right"===r[1]&&d.width-l.width>c.left&&d.width-l.width<=c.right?"left":r[1],"center"===r[1])if(i.vertical.test(r[0])){var p=l.width/2-a/2;c.left+p<0&&d.width-l.width<=c.right?r[1]="left":c.right+p<0&&d.width-l.width<=c.left&&(r[1]="right")}else{var h=l.height/2-d.height/2;c.top+h<0&&d.height-l.height<=c.bottom?r[1]="top":c.bottom+h<0&&d.height-l.height<=c.top&&(r[1]="bottom")}}switch(r[0]){case"top":u.top=l.top-s;break;case"bottom":u.top=l.top+l.height;break;case"left":u.left=l.left-a;break;case"right":u.left=l.left+l.width}switch(r[1]){case"top":u.top=l.top;break;case"bottom":u.top=l.top+l.height-s;break;case"left":u.left=l.left;break;case"right":u.left=l.left+l.width-a;break;case"center":i.vertical.test(r[0])?u.left=l.left+l.width/2-a/2:u.top=l.top+l.height/2-s/2}return u.top=Math.round(u.top),u.left=Math.round(u.left),u.placement="center"===r[1]?r[0]:r[0]+"-"+r[1],u},positionArrow:function(e,n){e=this.getRawNode(e);var r=e.querySelector(".tooltip-inner, .popover-inner");if(r){var o=angular.element(r).hasClass("tooltip-inner"),a=o?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(a){var s={top:"",bottom:"",left:"",right:""};if(n=this.parsePlacement(n),"center"===n[1])return void angular.element(a).css(s);var l="border-"+n[0]+"-width",u=t.getComputedStyle(a)[l],c="border-";c+=i.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],c+="-radius";var f=t.getComputedStyle(o?r:e)[c];switch(n[0]){case"top":s.bottom=o?"0":"-"+u;break;case"bottom":s.top=o?"0":"-"+u;break;case"left":s.right=o?"0":"-"+u;break;case"right":s.left=o?"0":"-"+u}s[n[1]]=f,angular.element(a).css(s)}}}}}])},function(e,t){angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(e,t){var n=null;this.open=function(t,i){n||(e.on("click",r),i.on("keydown",o)),n&&n!==t&&(n.isOpen=!1),n=t},this.close=function(t,i){n===t&&(n=null,e.off("click",r),i.off("keydown",o))};var r=function(e){if(n&&!(e&&"disabled"===n.getAutoClose()||e&&3===e.which)){var r=n.getToggleElement();if(!(e&&r&&r[0].contains(e.target))){var o=n.getDropdownElement();e&&"outsideClick"===n.getAutoClose()&&o&&o[0].contains(e.target)||(n.isOpen=!1,t.$$phase||n.$apply())}}},o=function(e){27===e.which?(e.stopPropagation(),n.focusToggleElement(),r()):n.isKeynavEnabled()&&[38,40].indexOf(e.which)!==-1&&n.isOpen&&(e.preventDefault(),e.stopPropagation(),n.focusDropdownEntry(e.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,r,o,i,a,s,l,u,c){var f,d,p=this,h=e.$new(),m=o.appendToOpenClass,v=o.openClass,g=angular.noop,b=n.onToggle?r(n.onToggle):angular.noop,y=!1,x=null,w=!1,_=l.find("body");t.addClass("dropdown"),this.init=function(){if(n.isOpen&&(d=r(n.isOpen),g=d.assign,e.$watch(d,function(e){h.isOpen=!!e})),angular.isDefined(n.dropdownAppendTo)){var o=r(n.dropdownAppendTo)(h);o&&(x=angular.element(o))}y=angular.isDefined(n.dropdownAppendToBody),w=angular.isDefined(n.keyboardNav),y&&!x&&(x=_),x&&p.dropdownMenu&&(x.append(p.dropdownMenu),t.on("$destroy",function(){p.dropdownMenu.remove()}))},this.toggle=function(e){return h.isOpen=arguments.length?!!e:!h.isOpen,angular.isFunction(g)&&g(h,h.isOpen),h.isOpen},this.isOpen=function(){return h.isOpen},h.getToggleElement=function(){return p.toggleElement},h.getAutoClose=function(){return n.autoClose||"always"},h.getElement=function(){return t},h.isKeynavEnabled=function(){return w},h.focusDropdownEntry=function(e){var n=p.dropdownMenu?angular.element(p.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(p.selectedOption)?p.selectedOption=p.selectedOption===n.length-1?p.selectedOption:p.selectedOption+1:p.selectedOption=0;break;case 38:angular.isNumber(p.selectedOption)?p.selectedOption=0===p.selectedOption?0:p.selectedOption-1:p.selectedOption=n.length-1}n[p.selectedOption].focus()},h.getDropdownElement=function(){return p.dropdownMenu},h.focusToggleElement=function(){p.toggleElement&&p.toggleElement[0].focus()},h.$watch("isOpen",function(n,r){if(x&&p.dropdownMenu){var o,l,d,w=s.positionElements(t,p.dropdownMenu,"bottom-left",!0);if(o={top:w.top+"px",display:n?"block":"none"},l=p.dropdownMenu.hasClass("dropdown-menu-right"),l?(o.left="auto",d=s.scrollbarWidth(!0),o.right=window.innerWidth-d-(w.left+t.prop("offsetWidth"))+"px"):(o.left=w.left+"px",o.right="auto"),!y){var _=s.offset(x);o.top=w.top-_.top+"px",l?o.right=window.innerWidth-(w.left-_.left+t.prop("offsetWidth"))+"px":o.left=w.left-_.left+"px"}p.dropdownMenu.css(o)}var k=x?x:t,M=k.hasClass(x?m:v);if(M===!n&&a[n?"addClass":"removeClass"](k,x?m:v).then(function(){angular.isDefined(n)&&n!==r&&b(e,{open:!!n})}),n)p.dropdownMenuTemplateUrl&&c(p.dropdownMenuTemplateUrl).then(function(e){f=h.$new(),u(e.trim())(f,function(e){var t=e;p.dropdownMenu.replaceWith(t),p.dropdownMenu=t})}),h.focusToggleElement(),i.open(h,t);else{if(p.dropdownMenuTemplateUrl){f&&f.$destroy();var E=angular.element('<ul class="dropdown-menu"></ul>');p.dropdownMenu.replaceWith(E),p.dropdownMenu=E}i.close(h,t),p.selectedOption=null}angular.isFunction(g)&&g(e,n)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,r){if(r&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var o=n.templateUrl;o&&(r.dropdownMenuTemplateUrl=o),r.dropdownMenu||(r.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,r){if(r){t.addClass("dropdown-toggle"),r.toggleElement=t;var o=function(o){o.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){r.toggle()})};t.bind("click",o),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(r.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",o)})}}}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="/get/",r="zip",o="http://deamon87.github.io/WoWFiles/shattrath.zip",i=null,a=!0,s=!1,l=!1,u=!0,c=!1,f=!1,d=!1,p=!1,h=localStorage.getItem("urlForLoading");h&&(n=h);var m=null;t["default"]={getUrlToLoadWoWFile:function(){return n},setUrlToLoadWoWFile:function(e){n=e,localStorage.setItem("urlForLoading",e)},getFileReadMethod:function(){return r},setFileReadMethod:function(e){r=e},getArchiveUrl:function(){return o},setArchiveUrl:function(e){o=e},getArchiveFile:function(){return i},setArchiveFile:function(e){i=e},getRenderM2:function(){return a},setRenderM2:function(e){a=e},getRenderBSP:function(){return s},setRenderBSP:function(e){s=e},getRenderPortals:function(){return l},setRenderPortals:function(e){l=e},getUsePortalCulling:function(){return u},setUsePortalCulling:function(e){u=e},getSceneParams:function(){return m},setSceneParams:function(e){m=e},getDrawWmoBB:function(){return c},setDrawWmoBB:function(e){c=e},getDrawM2BB:function(){return f},setDrawM2BB:function(e){f=e},getUseSecondCamera:function(){return d},setUseSecondCamera:function(e){d=e},getDoubleCameraDebug:function(){return p},setDoubleCameraDebug:function(e){p=e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(13),i=r(o),a=n(24),s=r(a),l=n(22),u=r(l),c=i["default"].module("main.directives.wowJsRender",[]);c.directive("wowJsRender",["$log","$timeout","$interval","$window",function(e,t,n,r){return{restrict:"E",template:'<div class="canvas-form-container" style="width: 100%; height: 100%"><canvas width = "79%" height = "768" style="float:left"></canvas><div style="display: inline-block;float: left; width: 225px"><div>camera = ( {{cameraVecs.cameraVec3[0]}}, {{cameraVecs.cameraVec3[1]}}, {{cameraVecs.cameraVec3[2]}} )</div><div>lookAt = ( {{cameraVecs.lookAtVec3[0]}}, {{cameraVecs.lookAtVec3[1]}}, {{cameraVecs.lookAtVec3[2]}} )</div><div>Group number = {{updateResult.interiorGroupNum}}</div><div>BSP Node Id = {{updateResult.nodeId}}</div><div>Controls: W - forward, S - backward, A - left, D - right, Q - up, E - down, Mouse - move camera</p><div style="display: block"><input type="checkbox" ng-model="drawM2" >Draw M2 objects</div><div style="display: block"><input type="checkbox" ng-model="drawPortals">Draw portals</div><div style="display: block"><input type="checkbox" ng-model="drawM2BB">Draw M2 BB</div><div style="display: block"><input type="checkbox" ng-model="drawWmoBB">Draw Wmo BB</div><div style="display: block"><input type="checkbox" ng-model="drawBSP">Draw BSP leafs</div><div style="display: block"><input type="checkbox" ng-model="usePortalCulling">Use portal culling</div><div style="display: block"><input type="checkbox" ng-model="doubleCameraDebug">Double camera debug</div><div style="display: block"><input type="checkbox" ng-disabled="!doubleCameraDebug" ng-model="useSecondCamera">Control debug camera</div><div style="display: block;"><button ng-disabled="!doubleCameraDebug" ng-style="{color: (doubleCameraDebug) ? 0 : \'rgb(200,200,200)\'};" ng-click="copyToDebugCamera()">Copy main camera to debug camera</button></div></div></div>',link:function(e,t,n){var o=t.find("canvas")[0];o.width=.79*t.children()[0].clientWidth,o.height=t.children()[0].clientHeight;var i=u["default"].getSceneParams(),a=new s["default"](o),l=void 0;if("map"==i.sceneType){var c=Math.floor(32-i.y/533.33333),f=Math.floor(32-i.x/533.33333);a.loadMap(i.mapName,c,f),a.setCameraPos(i.x,i.y,i.z)}else"wmo"==i.sceneType?a.loadWMOFile({fileName:i.fileName,uniqueId:0,pos:{x:17066.666666656,y:0,z:17066.666666656},rotation:{x:0,y:0,z:0},doodadSet:0}):"m2"==i.sceneType&&a.loadM2File({fileName:i.modelName,uniqueId:0,pos:{x:17066.666666656,y:0,z:17066.666666656},rotation:{x:0,y:0,z:0},scale:1024});e.drawM2BB=u["default"].getDrawM2BB(),e.drawWmoBB=u["default"].getDrawWmoBB(),e.drawBSP=u["default"].getRenderBSP(),e.drawM2=u["default"].getRenderM2(),e.drawPortals=u["default"].getRenderPortals(),e.usePortalCulling=u["default"].getUsePortalCulling(),e.useSecondCamera=u["default"].getUseSecondCamera(),e.doubleCameraDebug=u["default"].getDoubleCameraDebug(),e.$watch("drawM2BB",function(e){u["default"].setDrawM2BB(e)}),e.$watch("drawWmoBB",function(e){u["default"].setDrawWmoBB(e)}),e.$watch("drawBSP",function(e){u["default"].setRenderBSP(e)}),e.$watch("drawM2",function(e){u["default"].setRenderM2(e)}),e.$watch("drawPortals",function(e){u["default"].setRenderPortals(e)}),e.$watch("usePortalCulling",function(e){u["default"].setUsePortalCulling(e)}),e.$watch("doubleCameraDebug",function(t){u["default"].setDoubleCameraDebug(t),t?u["default"].setUseSecondCamera(e.useSecondCamera):u["default"].setUseSecondCamera(!1)}),e.$watch("useSecondCamera",function(e){u["default"].setUseSecondCamera(e)}),e.copyToDebugCamera=function(){a.copyFirstCameraToDebugCamera()},e.loadPacket=function(){a.loadPackets()};var d=function p(){var t=(new Date).getTime(),n=0;void 0!==l&&(n=t-l),l=t;var o=a.draw(n),i=o.cameraVecs,s=o.updateResult;e.cameraVecs=i,e.updateResult=s,r.requestAnimationFrame(p)};r.requestAnimationFrame(d),r.setInterval(function(){e.$digest()},200)}}}])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(25),s=r(a),l=n(26),u=(r(l),n(44)),c=r(u),f=n(45),d=r(f),p=n(46),h=r(p),m=n(47),v=r(m),g=n(48),b=r(g),y=n(49),x=r(y),w=n(50),_=r(w),k=n(51),M=r(k),E=n(52),A=r(E),T=n(53),C=r(T),S=n(76),$=r(S),I=n(22),F=r(I),D=n(80),O=r(D),R=n(86),P=r(R),j=n(89),B=r(j),L=n(92),N=r(L),U=n(94),V=r(U),z=n(96),G=r(z),q=n(97),W=r(q),H=n(100),X=r(H),Y=n(56),Z=n(68),K=(r(Z),n(101)),Q=r(K),J=n(103),ee=r(J),te=n(104),ne=r(te),re=n(105),oe=r(re),ie=n(106),ae=r(ie),se=n(107),le=r(se),ue=n(108),ce=r(ue),fe=n(109),de=r(fe),pe=n(110),he=r(pe),me=n(111),ve=r(me),ge=n(112),be=r(ge),ye=n(113),xe=r(ye),we=n(114),_e=r(we),ke=n(115),Me=r(ke);Y.glMatrix.setMatrixArrayType(Array);var Ee=function(){function e(t){o(this,e);var n=new s["default"];n.setMode(1),n.domElement.style.position="absolute",n.domElement.style.left="0px",n.domElement.style.top="0px",document.body.appendChild(n.domElement),this.stats=n;var r=this;r.enableDeferred=!1,r.sceneObjectList=[],r.sceneAdts=[],this.secondCamera=[0,0,0],this.secondCameraLookAt=[0,0,0],this.mainCamera=[0,0,0],this.mainCameraLookAt=[0,0,0],this.fogColor=[.117647,.207843,.392157],r.initGlContext(t),r.initArrayInstancedExt(),r.initDepthTextureExt(),r.enableDeferred&&r.initDeferredRendering(),r.initRenderBuffers(),r.initAnisotropicExt(),r.initVertexArrayObjectExt(),r.initCompressedTextureS3tcExt(),r.initFrameTerminatorExt(),r.initShaders(),r.isShadersLoaded=!0,r.initSceneApi(),r.initSceneGraph(),r.createBlackPixelTexture(),r.initBoxVBO(),r.initCaches(),r.initCamera(t,document),(0,Q["default"])().then(function(e){r.animationDataDBC=e}),(0,ee["default"])().then(function(e){r.characterFacialHairStylesDBC=e}),(0,ne["default"])().then(function(e){r.charHairGeosetsDBC=e}),(0,oe["default"])().then(function(e){r.charSectionsDBC=e}),(0,ae["default"])().then(function(e){r.creatureDisplayInfoDBC=e}),(0,ve["default"])().then(function(e){r.creatureDisplayInfoExtraDBC=e}),(0,be["default"])().then(function(e){r.creatureModelDataDBC=e}),(0,xe["default"])().then(function(e){r.gameObjectDisplayInfoDBC=e}),(0,_e["default"])().then(function(e){r.itemDisplayInfoDBC=e}),(0,Me["default"])().then(function(e){r.mapDBC=e}),(0,le["default"])().then(function(e){r.lightDBC=e}),(0,de["default"])().then(function(e){r.lightFloatBandDBC=e}),(0,he["default"])().then(function(e){r.lightIntBandDBC=e}),(0,ce["default"])().then(function(e){r.lightParamsDBC=e})}return i(e,[{key:"compileShader",value:function(e,t){var n=this.gl;this.enableDeferred&&(e="#define ENABLE_DEFERRED 1\r\n"+e,t="#define ENABLE_DEFERRED 1\r\n"+t);var r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,"#define COMPILING_VS 1\r\n "+e),n.compileShader(r);var o=n.getShaderParameter(r,n.COMPILE_STATUS);if(!o)throw"could not compile shader:"+n.getShaderInfoLog(r);var i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,"#define COMPILING_FS 1\r\n "+t),n.compileShader(i);var o=n.getShaderParameter(i,n.COMPILE_STATUS);if(!o)throw"could not compile shader:"+n.getShaderInfoLog(i);var a=n.createProgram();n.attachShader(a,r),n.attachShader(a,i),n.linkProgram(a);var o=n.getProgramParameter(a,n.LINK_STATUS);if(!o)throw"program filed to link:"+n.getProgramInfoLog(a);var s={};s.program=a;for(var l={},u=n.getProgramParameter(a,n.ACTIVE_ATTRIBUTES),c=0;c<u;++c){var f=n.getActiveAttrib(a,c);if(!f)break;var d=n.getAttribLocation(a,f.name);l[f.name]=d}s.shaderAttributes=l;for(var p={},h=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),c=0;c<h;++c){var m=n.getActiveUniform(a,c);if(!m)break;var v=m.name;"[0]"===v.substr(-3)&&(v=v.substr(0,v.length-3));var g=n.getUniformLocation(a,v);p[v]=g}return s.shaderUniforms=p,s}},{key:"createBlackPixelTexture",value:function(){var e=this.gl,t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([255,255,255,255])),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),this.blackPixelTexture=t}},{key:"initGlContext",value:function(e){function t(e,t,n){throw WebGLDebugUtils.glEnumToString(e)+" was caused by call to: "+t}function n(e,t){for(var n=0;n<t.length;++n)void 0===t[n]&&console.error("undefined passed to gl."+e+"("+WebGLDebugUtils.glFunctionArgsToString(e,t)+")")}try{var r=e.getContext("webgl",{premultipliedAlpha:!1,alpha:!1})||e.getContext("experimental-webgl",{premultipliedAlpha:!1});r=WebGLDebugUtils.makeDebugContext(r,t,n)}catch(o){}r||(alert("Unable to initialize WebGL. Your browser may not support it."),r=null),this.gl=r,this.canvas=e}},{key:"initArrayInstancedExt",value:function(){var e=this.gl,t=e.getExtension("ANGLE_instanced_arrays");t&&(this.instancing_ext=t)}},{key:"initAnisotropicExt",value:function(){var e=this.gl,t=e.getExtension("EXT_texture_filter_anisotropic");t&&(this.anisotropic_ext=t)}},{key:"initVertexArrayObjectExt",value:function(){var e=this.gl,t=e.getExtension("OES_vertex_array_object");t&&(this.vao_ext=t)}},{key:"initCompressedTextureS3tcExt",value:function(){var e=this.gl,t=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");t&&(this.comp_tex_ext=t)}},{key:"initDepthTextureExt",value:function(){var e=this.gl,t=e.getExtension("WEBGL_depth_texture");t&&(this.depth_texture_ext=t)}},{key:"initDeferredRendering",value:function(){var e=this.gl,t=e.getExtension("WEBGL_draw_buffers");t?this.wdb_ext=t:this.enableDeferred=!1}},{key:"initFrameTerminatorExt",value:function(){var e=this.gl,t=e.getExtension("GLI_frame_terminator");t&&(this.glext_ft=t);
}},{key:"initShaders",value:function(){var e=this;e.renderFrameShader=e.compileShader(d["default"],d["default"]),e.drawDepthBuffer=e.compileShader(c["default"],c["default"]),e.readDepthBuffer=e.compileShader(h["default"],h["default"]),e.wmoShader=e.compileShader(v["default"],v["default"]),e.wmoInstancingShader=e.compileShader("#define INSTANCED 1\r\n "+v["default"],"#define INSTANCED 1\r\n "+v["default"]),e.m2Shader=e.compileShader(b["default"],b["default"]),e.m2InstancingShader=e.compileShader("#define INSTANCED 1\r\n "+b["default"],"#define INSTANCED 1\r\n "+b["default"]),e.bbShader=e.compileShader(x["default"],x["default"]),e.adtShader=e.compileShader(_["default"],_["default"]),e.drawPortalShader=e.compileShader(M["default"],M["default"]),e.drawFrustumShader=e.compileShader(A["default"],A["default"])}},{key:"initCaches",value:function(){this.wmoGeomCache=new V["default"](this.sceneApi),this.wmoMainCache=new G["default"](this.sceneApi),this.textureCache=new W["default"](this.sceneApi),this.m2GeomCache=new B["default"](this.sceneApi),this.skinGeomCache=new N["default"](this.sceneApi),this.adtGeomCache=new P["default"](this.sceneApi)}},{key:"initDrawBuffers",value:function(e){var t=this.gl,n=this.wdb_ext;this.texture_floatExt=t.getExtension("OES_texture_float"),this.texture_floatLinExt=t.getExtension("OES_texture_float_linear");var r=t.createTexture(),o=t.createTexture(),i=t.createTexture(),a=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.canvas.width,this.canvas.height,0,t.RGBA,t.FLOAT,null),t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.canvas.width,this.canvas.height,0,t.RGBA,t.FLOAT,null),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.canvas.width,this.canvas.height,0,t.RGBA,t.FLOAT,null),t.bindTexture(t.TEXTURE_2D,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.canvas.width,this.canvas.height,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,e);var s=[];s[0]=n.COLOR_ATTACHMENT0_WEBGL,s[1]=n.COLOR_ATTACHMENT1_WEBGL,s[2]=n.COLOR_ATTACHMENT2_WEBGL,s[3]=n.COLOR_ATTACHMENT3_WEBGL,n.drawBuffersWEBGL(s),t.framebufferTexture2D(t.FRAMEBUFFER,s[0],t.TEXTURE_2D,a,0),t.framebufferTexture2D(t.FRAMEBUFFER,s[1],t.TEXTURE_2D,r,0),t.framebufferTexture2D(t.FRAMEBUFFER,s[2],t.TEXTURE_2D,o,0),t.framebufferTexture2D(t.FRAMEBUFFER,s[3],t.TEXTURE_2D,i,0),this.depthRGBTexture=a,this.normalTexture=r,this.positionTexture=o,this.colorTexture=i}},{key:"initRenderBuffers",value:function(){var e=this.gl;if(this.depth_texture_ext){var t=e.createFramebuffer();this.enableDeferred&&this.initDrawBuffers(t),e.bindFramebuffer(e.FRAMEBUFFER,t);var n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.canvas.width,this.canvas.height,0,e.RGBA,e.UNSIGNED_BYTE,null);var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_COMPONENT,this.canvas.width,this.canvas.height,0,e.DEPTH_COMPONENT,e.UNSIGNED_INT,null),this.enableDeferred||e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0),this.frameBuffer=t,this.frameBufferColorTexture=n,this.frameBufferDepthTexture=r;var o=[1,1,-1,1,-1,-1,1,1,-1,-1,1,-1],i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),this.vertBuffer=i}}},{key:"initSceneGraph",value:function(){this.graphManager=new C["default"](this.sceneApi),this.worldObjectManager=new $["default"](this.sceneApi)}},{key:"initSceneApi",value:function(){var e=this;this.sceneApi={drawCamera:function(){return e.drawCamera()},getGlContext:function(){return e.gl},getCurrentWdt:function(){return e.currentWdt},getBlackPixelTexture:function(){return e.blackPixelTexture},setFogColor:function(t){e.fogColor=t},extensions:{getInstancingExt:function(){return e.instancing_ext},getAnisotropicExt:function(){return e.anisotropic_ext},getComprTextExt:function(){return e.comp_tex_ext},getVaoExt:function(){return e.vao_ext}},shaders:{activateBoundingBoxShader:function(){e.activateBoundingBoxShader()},deativateBoundingBoxShader:function(){e.deactivateBoundingBoxShader()},activateFrustumBoxShader:function(){e.activateFrustumBoxShader()},activateAdtShader:function(){e.activateAdtShader()},activateDrawPortalShader:function(){e.activateDrawPortalShader()},activateWMOShader:function(){e.activateWMOShader()},deactivateWMOShader:function(){e.deactivateWMOShader()},activateM2ShaderAttribs:function(){e.activateM2ShaderAttribs()},deactivateM2ShaderAttribs:function(){e.deactivateM2ShaderAttribs()},activateM2Shader:function(){e.activateM2Shader()},deactivateM2Shader:function(){e.deactivateM2Shader()},activateM2InstancingShader:function(){e.activateM2InstancingShader()},deactivateM2InstancingShader:function(){e.deactivateM2InstancingShader()},getShaderUniforms:function(){return e.currentShaderProgram.shaderUniforms},getShaderAttributes:function(){return e.currentShaderProgram.shaderAttributes}},dbc:{getCharacterFacialHairStylesDBC:function(){return e.characterFacialHairStylesDBC},getCharHairGeosetsDBC:function(){return e.charHairGeosetsDBC},getCharSectionsDBC:function(){return e.charSectionsDBC},getCreatureDisplayInfoDBC:function(){return e.creatureDisplayInfoDBC},getCreatureDisplayInfoExtraDBC:function(){return e.creatureDisplayInfoExtraDBC},getCreatureModelDataDBC:function(){return e.creatureModelDataDBC},getGameObjectDisplayInfoDBC:function(){return e.gameObjectDisplayInfoDBC},getItemDisplayInfoDBC:function(){return e.itemDisplayInfoDBC},getMapDBC:function(){return e.mapDBC},getLightDBC:function(){return e.lightDBC},getLightFloatBandDBC:function(){return e.lightFloatBandDBC},getLightIntBandDBC:function(){return e.lightIntBandDBC},getLightParamsDBC:function(){return e.lightParamsDBC}},objects:{loadAdtM2Obj:function(t){return e.graphManager.addAdtM2Object(t)},loadAdtWmo:function(t){return e.graphManager.addWmoObject(t)},loadWmoM2Obj:function(t,n,r){return e.graphManager.addWmoM2Object(t,n,r)},loadWorldM2Obj:function(t,n,r){return e.graphManager.addWorldMDXObject(t,n,r)},loadAdtChunk:function(t){return e.graphManager.addADTObject(t)}},resources:{loadTexture:function(t){return e.textureCache.loadTexture(t)},unLoadTexture:function(t){e.textureCache.unLoadTexture(t)},loadWmoMain:function(t){return e.wmoMainCache.loadWmoMain(t)},unloadWmoMain:function(t){e.wmoMainCache.unloadWmoMain(t)},loadWmoGeom:function(t){return e.wmoGeomCache.loadWmoGeom(t)},unloadWmoGeom:function(t){e.wmoGeomCache.unLoadWmoGeom(t)},loadM2Geom:function(t){return e.m2GeomCache.loadM2(t)},unloadM2Geom:function(t){e.m2GeomCache.unLoadM2(t)},loadSkinGeom:function(t){return e.skinGeomCache.loadSkin(t)},unloadSkinGeom:function(t){e.skinGeomCache.unLoadSkin(t)},loadAdtGeom:function(t){return e.adtGeomCache.loadAdt(t)},unloadAdtGeom:function(t){e.adtGeomCache.unLoadAdt(t)}}}}},{key:"initCamera",value:function(e,t){this.camera=(0,X["default"])(e,t)}},{key:"initBoxVBO",value:function(){var e=this.gl,t=[-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1],n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);var r=[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,7,6,6,1,1,0,0,7,3,2,2,5,5,4,4,3,6,5,5,2,2,1,1,6,0,3,3,4,4,7,7,0],o=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(r),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.bbBoxVars={vbo_vertices:n,ibo_elements:o}}},{key:"glClearScreen",value:function(e,t){e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.disable(e.BLEND),e.clearColor(t[0],t[1],t[2],1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.CULL_FACE)}},{key:"activateRenderFrameShader",value:function(){if(this.currentShaderProgram=this.renderFrameShader,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program);this.sceneApi.shaders.getShaderAttributes();e.activeTexture(e.TEXTURE0),e.disableVertexAttribArray(1),e.uniform1i(this.currentShaderProgram.shaderUniforms.u_sampler,0),this.currentShaderProgram.shaderUniforms.u_depth&&e.uniform1i(this.currentShaderProgram.shaderUniforms.u_depth,1)}}},{key:"activateRenderDepthShader",value:function(){if(this.currentShaderProgram=this.drawDepthBuffer,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program);this.sceneApi.shaders.getShaderAttributes();e.activeTexture(e.TEXTURE0)}}},{key:"activateReadDepthBuffer",value:function(){if(this.currentShaderProgram=this.readDepthBuffer,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program);this.sceneApi.shaders.getShaderAttributes();e.activeTexture(e.TEXTURE0),e.enableVertexAttribArray(this.currentShaderProgram.shaderAttributes.position),e.enableVertexAttribArray(this.currentShaderProgram.shaderAttributes.texture)}}},{key:"activateAdtShader",value:function(){if(this.currentShaderProgram=this.adtShader,this.currentShaderProgram){var e=this.gl,t=(this.sceneApi.extensions.getInstancingExt(),this.sceneApi.shaders.getShaderAttributes());e.useProgram(this.currentShaderProgram.program),e.enableVertexAttribArray(t.aHeight),e.enableVertexAttribArray(t.aIndex),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),this.currentWdt&&(4&this.currentWdt.flags)>0?e.uniform1i(this.currentShaderProgram.shaderUniforms.uNewFormula,1):e.uniform1i(this.currentShaderProgram.shaderUniforms.uNewFormula,0),e.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer0,0),e.uniform1i(this.currentShaderProgram.shaderUniforms.uAlphaTexture,1),e.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer1,2),e.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer2,3),e.uniform1i(this.currentShaderProgram.shaderUniforms.uLayer3,4),e.uniform3fv(this.currentShaderProgram.shaderUniforms.uFogColor,this.fogColor)}}},{key:"activateWMOShader",value:function(){if(this.currentShaderProgram=this.wmoShader,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program);var t=this.sceneApi.shaders.getShaderAttributes();e.enableVertexAttribArray(t.aPosition),t.aNormal&&e.enableVertexAttribArray(t.aNormal),e.enableVertexAttribArray(t.aTexCoord),e.enableVertexAttribArray(t.aTexCoord2),e.enableVertexAttribArray(t.aColor),e.enableVertexAttribArray(t.aColor2),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),e.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture,0),e.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture2,1),e.uniform3fv(this.currentShaderProgram.shaderUniforms.uFogColor,this.fogColor),e.activeTexture(e.TEXTURE0)}}},{key:"deactivateWMOShader",value:function(){var e=this.gl,t=(this.sceneApi.extensions.getInstancingExt(),this.sceneApi.shaders.getShaderAttributes());t.aNormal&&e.disableVertexAttribArray(t.aNormal),e.disableVertexAttribArray(t.aTexCoord),e.disableVertexAttribArray(t.aTexCoord2),e.disableVertexAttribArray(t.aColor),e.disableVertexAttribArray(t.aColor2)}},{key:"activateM2ShaderAttribs",value:function(){var e=this.gl,t=this.sceneApi.shaders.getShaderAttributes();e.enableVertexAttribArray(t.aPosition),t.aNormal&&e.enableVertexAttribArray(t.aNormal),e.enableVertexAttribArray(t.boneWeights),e.enableVertexAttribArray(t.bones),e.enableVertexAttribArray(t.aTexCoord),e.enableVertexAttribArray(t.aTexCoord2)}},{key:"deactivateM2ShaderAttribs",value:function(){var e=this.gl,t=this.sceneApi.shaders.getShaderAttributes();e.disableVertexAttribArray(t.aPosition),t.aNormal&&e.disableVertexAttribArray(t.aNormal),e.disableVertexAttribArray(t.boneWeights),e.disableVertexAttribArray(t.bones),e.disableVertexAttribArray(t.aTexCoord),e.disableVertexAttribArray(t.aTexCoord2),e.enableVertexAttribArray(0)}},{key:"activateM2Shader",value:function(){if(this.currentShaderProgram=this.m2Shader,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program),e.enableVertexAttribArray(0),this.vao_ext||this.activateM2ShaderAttribs(),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),this.currentShaderProgram.shaderUniforms.isBillboard&&e.uniform1i(this.currentShaderProgram.shaderUniforms.isBillboard,0),e.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture,0),e.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture2,1),e.uniform3fv(this.currentShaderProgram.shaderUniforms.uFogColor,this.fogColor),e.activeTexture(e.TEXTURE0)}}},{key:"deactivateM2Shader",value:function(){this.gl,this.sceneApi.extensions.getInstancingExt();this.vao_ext||this.deactivateM2ShaderAttribs()}},{key:"activateM2InstancingShader",value:function(){if(this.currentShaderProgram=this.m2InstancingShader,this.currentShaderProgram){var e=this.gl,t=this.sceneApi.extensions.getInstancingExt(),n=this.sceneApi.shaders.getShaderAttributes();e.useProgram(this.currentShaderProgram.program),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix),e.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture,0),e.uniform1i(this.currentShaderProgram.shaderUniforms.uTexture2,1),e.activeTexture(e.TEXTURE0),e.enableVertexAttribArray(0),e.enableVertexAttribArray(n.aPosition),n.aNormal&&e.enableVertexAttribArray(n.aNormal),e.enableVertexAttribArray(n.boneWeights),e.enableVertexAttribArray(n.bones),e.enableVertexAttribArray(n.aTexCoord),e.enableVertexAttribArray(n.aTexCoord2),e.enableVertexAttribArray(n.aPlacementMat+0),e.enableVertexAttribArray(n.aPlacementMat+1),e.enableVertexAttribArray(n.aPlacementMat+2),e.enableVertexAttribArray(n.aPlacementMat+3),e.enableVertexAttribArray(n.aDiffuseColor),null!=t&&(t.vertexAttribDivisorANGLE(n.aPlacementMat+0,1),t.vertexAttribDivisorANGLE(n.aPlacementMat+1,1),t.vertexAttribDivisorANGLE(n.aPlacementMat+2,1),t.vertexAttribDivisorANGLE(n.aPlacementMat+3,1),t.vertexAttribDivisorANGLE(n.aDiffuseColor,1)),e.uniform3fv(this.currentShaderProgram.shaderUniforms.uFogColor,this.fogColor)}}},{key:"deactivateM2InstancingShader",value:function(){var e=this.gl,t=this.sceneApi.extensions.getInstancingExt(),n=this.sceneApi.shaders.getShaderAttributes();e.disableVertexAttribArray(n.aPosition),n.aNormal&&e.disableVertexAttribArray(n.aNormal),e.disableVertexAttribArray(n.boneWeights),e.disableVertexAttribArray(n.bones),e.disableVertexAttribArray(n.aTexCoord),e.disableVertexAttribArray(n.aTexCoord2),t&&(t.vertexAttribDivisorANGLE(n.aPlacementMat+0,0),t.vertexAttribDivisorANGLE(n.aPlacementMat+1,0),t.vertexAttribDivisorANGLE(n.aPlacementMat+2,0),t.vertexAttribDivisorANGLE(n.aPlacementMat+3,0)),e.disableVertexAttribArray(n.aPlacementMat+0),e.disableVertexAttribArray(n.aPlacementMat+1),e.disableVertexAttribArray(n.aPlacementMat+2),e.disableVertexAttribArray(n.aPlacementMat+3),e.enableVertexAttribArray(0)}},{key:"activateBoundingBoxShader",value:function(){if(this.currentShaderProgram=this.bbShader,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.bbBoxVars.ibo_elements),e.bindBuffer(e.ARRAY_BUFFER,this.bbBoxVars.vbo_vertices),e.vertexAttribPointer(this.currentShaderProgram.shaderAttributes.aPosition,3,e.FLOAT,!1,0,0),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix)}}},{key:"activateFrustumBoxShader",value:function(){if(this.currentShaderProgram=this.drawFrustumShader,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.bbBoxVars.ibo_elements),e.bindBuffer(e.ARRAY_BUFFER,this.bbBoxVars.vbo_vertices),e.enableVertexAttribArray(this.currentShaderProgram.shaderAttributes.aPosition),e.vertexAttribPointer(this.currentShaderProgram.shaderAttributes.aPosition,3,e.FLOAT,!1,0,0),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix)}}},{key:"activateDrawPortalShader",value:function(){if(this.currentShaderProgram=this.drawPortalShader,this.currentShaderProgram){var e=this.gl;e.useProgram(this.currentShaderProgram.program),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uLookAtMat,!1,this.lookAtMat4),e.uniformMatrix4fv(this.currentShaderProgram.shaderUniforms.uPMatrix,!1,this.perspectiveMatrix)}}},{key:"drawTexturedQuad",value:function(e,t,n,r,o,i,a,s){e.disable(e.DEPTH_TEST),e.bindBuffer(e.ARRAY_BUFFER,this.vertBuffer),e.vertexAttribPointer(this.drawDepthBuffer.shaderAttributes.position,2,e.FLOAT,!1,0,0),e.uniform1f(this.drawDepthBuffer.shaderUniforms.uWidth,o/a),e.uniform1f(this.drawDepthBuffer.shaderUniforms.uHeight,i/s),e.uniform1f(this.drawDepthBuffer.shaderUniforms.uX,n/a),e.uniform1f(this.drawDepthBuffer.shaderUniforms.uY,r/s),e.bindTexture(e.TEXTURE_2D,t),e.drawArrays(e.TRIANGLES,0,6),e.enable(e.DEPTH_TEST)}},{key:"drawFrameBuffer",value:function(){var e=this.gl;this.enableDeferred?e.bindTexture(e.TEXTURE_2D,this.colorTexture):(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.frameBufferColorTexture),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.frameBufferDepthTexture));var t=this.currentShaderProgram.shaderUniforms;t.gauss_offsets&&(e.uniform1fv(t.gauss_offsets,[0/this.canvas.height,1/this.canvas.height,2/this.canvas.height,3/this.canvas.height,4/this.canvas.height]),e.uniform1fv(t.gauss_weights,[.227027027,.1945945946,.1216216216,.0540540541,.0162162162])),e.bindBuffer(e.ARRAY_BUFFER,this.vertBuffer),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6)}},{key:"drawCamera",value:function(){var e=this.gl,t=this.currentShaderProgram.shaderUniforms;e.disable(e.DEPTH_TEST);var n=Y.mat4.create();Y.mat4.invert(n,this.viewCameraForRender),e.uniformMatrix4fv(t.uInverseViewProjection,!1,new Float32Array(n)),e.drawElements(e.LINES,48,e.UNSIGNED_SHORT,0),e.enable(e.DEPTH_TEST)}},{key:"draw",value:function(e){var t=this.gl;if(!this.depthBuffer){var n=new Uint8Array(this.canvas.width*this.canvas.height*4);this.depthBuffer=n}this.stats.begin();var r;r=F["default"].getUseSecondCamera()?this.secondCamera:this.mainCamera,this.camera.setCameraPos(r[0],r[1],r[2]);var o=this.camera.tick(e);F["default"].getUseSecondCamera()?(this.secondCamera=o.cameraVec3,this.secondCameraLookAt=o.lookAtVec3):(this.mainCamera=o.cameraVec3,this.mainCameraLookAt=o.lookAtVec3);var i=[];Y.mat4.lookAt(i,this.mainCamera,this.mainCameraLookAt,[0,0,1]);var a=[];Y.mat4.lookAt(a,this.secondCamera,this.secondCameraLookAt,[0,0,1]);var s=Y.mat4.create();Y.mat4.perspective(s,45,this.canvas.width/this.canvas.height,1,300);var l=Y.mat4.create();Y.mat4.perspective(l,45,this.canvas.width/this.canvas.height,1,300);var u=Y.mat4.create();Y.mat4.perspective(u,45,this.canvas.width/this.canvas.height,1,300);var c=Y.mat4.create();if(Y.mat4.multiply(c,u,i),this.perspectiveMatrix=s,this.viewCameraForRender=c,this.isShadersLoaded){var f=Y.vec4.fromValues(this.mainCamera[0],this.mainCamera[1],this.mainCamera[2],1);this.graphManager.setCameraPos(f),this.perspectiveMatrix&&this.lookAtMat4,this.graphManager.setLookAtMat(i),this.worldObjectManager.update(e,f);var d=this.graphManager.update(e);return this.graphManager.checkCulling(l,i),F["default"].getDoubleCameraDebug()&&(this.lookAtMat4=a,t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),this.glClearScreen(t,this.fogColor),t.activeTexture(t.TEXTURE0),t.depthMask(!0),t.enableVertexAttribArray(0),this.graphManager.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null),this.glClearScreen(t,this.fogColor),this.activateRenderFrameShader(),t.enableVertexAttribArray(0),this.drawFrameBuffer()),this.lookAtMat4=i,t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),this.glClearScreen(t,this.fogColor),t.activeTexture(t.TEXTURE0),t.depthMask(!0),t.enableVertexAttribArray(0),this.graphManager.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null),F["default"].getDoubleCameraDebug()?(this.activateRenderDepthShader(),t.enableVertexAttribArray(0),this.drawTexturedQuad(t,this.frameBufferColorTexture,.6*this.canvas.width,0,.4*this.canvas.width,.4*this.canvas.height,this.canvas.width,this.canvas.height)):(this.glClearScreen(t,this.fogColor),t.enableVertexAttribArray(0),this.activateRenderFrameShader(),this.drawFrameBuffer()),this.stats.end(),this.glext_ft&&this.glext_ft.frameTerminator&&this.glext_ft.frameTerminator(),{cameraVecs:o,updateResult:d}}}},{key:"loadM2File",value:function(e){this.sceneApi.objects.loadAdtM2Obj(e)}},{key:"loadWMOFile",value:function(e){this.sceneApi.objects.loadAdtWmo(e)}},{key:"loadMap",value:function(e,t,n){var r=this,o="world/maps/"+e+"/"+e+".wdt";(0,O["default"])(o).then(function(o){if(r.currentWdt=o,o.isWMOMap)r.sceneApi.objects.loadAdtWmo(o.modfChunk);else{var i="world/maps/"+e+"/"+e+"_"+t+"_"+n+".adt";r.graphManager.addADTObject(i)}},function(){})}},{key:"setCameraPos",value:function(e,t,n){this.mainCamera=[e,t,n]}},{key:"loadPackets",value:function(){this.worldObjectManager.startPlayingPackets()}},{key:"copyFirstCameraToDebugCamera",value:function(){this.secondCamera=this.mainCamera,this.secondCameraLookAt=this.mainCameraLookAt}}]),e}();t["default"]=Ee},function(e,t,n){var r=function(){function e(e,t,n){var r=document.createElement(e);return r.id=t,r.style.cssText=n,r}function t(t,n,r){var o=e("div",t,"padding:0 0 3px 3px;text-align:left;background:"+r),i=e("div",t+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+n);i.innerHTML=t.toUpperCase(),o.appendChild(i);var a=e("div",t+"Graph","width:74px;height:30px;background:"+n);o.appendChild(a);for(var s=0;s<74;s++)a.appendChild(e("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+r));return o}function n(e){for(var t=u.children,n=0;n<t.length;n++)t[n].style.display=n===e?"block":"none";l=e}function r(e,t){var n=e.appendChild(e.firstChild);n.style.height=Math.min(30,30-30*t)+"px"}var o=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,i=o(),a=i,s=0,l=0,u=e("div","stats","width:80px;opacity:0.9;cursor:pointer");u.addEventListener("mousedown",function(e){e.preventDefault(),n(++l%u.children.length)},!1);var c=0,f=1/0,d=0,p=t("fps","#0ff","#002"),h=p.children[0],m=p.children[1];u.appendChild(p);var v=0,g=1/0,b=0,y=t("ms","#0f0","#020"),x=y.children[0],w=y.children[1];if(u.appendChild(y),self.performance&&self.performance.memory){var _=0,k=1/0,M=0,E=t("mb","#f08","#201"),A=E.children[0],T=E.children[1];u.appendChild(E)}return n(l),{REVISION:14,domElement:u,setMode:n,begin:function(){i=o()},end:function(){var e=o();if(v=e-i,g=Math.min(g,v),b=Math.max(b,v),x.textContent=(0|v)+" MS ("+(0|g)+"-"+(0|b)+")",r(w,v/200),s++,e>a+1e3&&(c=Math.round(1e3*s/(e-a)),f=Math.min(f,c),d=Math.max(d,c),h.textContent=c+" FPS ("+f+"-"+d+")",r(m,c/100),a=e,s=0,void 0!==_)){var t=performance.memory.usedJSHeapSize,n=performance.memory.jsHeapSizeLimit;_=Math.round(9.54e-7*t),k=Math.min(k,_),M=Math.max(M,_),A.textContent=_+" MB ("+k+"-"+M+")",r(T,t/n)}return e},update:function(){i=this.end()}}};e.exports=r},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";function r(e){this.defaults=i.merge({},e),this.interceptors={request:new s,response:new s}}var o=n(28),i=n(29),a=n(30),s=n(39),l=n(40),u=n(41),c=n(42),f=n(35);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.baseURL&&!l(e.url)&&(e.url=u(e.baseURL,e.url)),e.withCredentials=e.withCredentials||this.defaults.withCredentials,e.data=f(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n};var d=new r(o),p=e.exports=c(r.prototype.request,d);p.create=function(e){return new r(e)},p.defaults=d.defaults,p.all=function(e){return Promise.all(e)},p.spread=n(43),p.interceptors=d.interceptors,i.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))},p[e]=c(r.prototype[e],d)}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))},p[e]=c(r.prototype[e],d)})},function(e,t,n){"use strict";var r=n(29),o=/^\)\]\}',?\n/,i={"Content-Type":"application/x-www-form-urlencoded"};e.exports={transformRequest:[function(e,t){return r.isFormData(e)?e:r.isArrayBuffer(e)?e:r.isArrayBufferView(e)?e.buffer:!r.isObject(e)||r.isFile(e)||r.isBlob(e)?e:(r.isUndefined(t)||(r.forEach(t,function(e,n){"content-type"===n.toLowerCase()&&(t["Content-Type"]=e)}),r.isUndefined(t["Content-Type"])&&(t["Content-Type"]="application/json;charset=utf-8")),JSON.stringify(e))}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(o,"");try{e=JSON.parse(e)}catch(t){}}return e}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:r.merge(i),post:r.merge(i),put:r.merge(i)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"}},function(e,t){"use strict";function n(e){return"[object Array]"===g.call(e)}function r(e){return"[object ArrayBuffer]"===g.call(e)}function o(e){return"[object FormData]"===g.call(e)}function i(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function a(e){return"string"==typeof e}function s(e){return"number"==typeof e}function l(e){return"undefined"==typeof e}function u(e){return null!==e&&"object"==typeof e}function c(e){return"[object Date]"===g.call(e)}function f(e){return"[object File]"===g.call(e)}function d(e){return"[object Blob]"===g.call(e)}function p(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function h(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function m(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||n(e)||(e=[e]),n(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(null,e[i],i,e)}function v(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=v(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)m(arguments[n],e);return t}var g=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:r,isFormData:o,isArrayBufferView:i,isString:a,isNumber:s,isObject:u,isUndefined:l,isDate:c,isFile:f,isBlob:d,isStandardBrowserEnv:h,forEach:m,merge:v,trim:p}},function(e,t,n){(function(t){"use strict";e.exports=function(e){return new Promise(function(r,o){try{var i;"function"==typeof e.adapter?i=e.adapter:"undefined"!=typeof XMLHttpRequest?i=n(32):"undefined"!=typeof t&&(i=n(32)),"function"==typeof i&&i(r,o,e)}catch(a){o(a)}})}}).call(t,n(31))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?h=p.concat(h):v=-1,h.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,m=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,h=[],m=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(29),o=n(33),i=n(34),a=n(35),s=n(36),l=window.btoa||n(37);e.exports=function(e,t,u){var c=u.data,f=u.headers;r.isFormData(c)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(!window.XDomainRequest||"withCredentials"in d||s(u.url)||(d=new window.XDomainRequest),u.auth){var p=u.auth.username||"",h=u.auth.password||"";f.Authorization="Basic "+l(p+":"+h)}if(d.open(u.method.toUpperCase(),o(u.url,u.params,u.paramsSerializer),!0),d.timeout=u.timeout,d.onload=function(){if(d){var n="getAllResponseHeaders"in d?i(d.getAllResponseHeaders()):null,r=["text",""].indexOf(u.responseType||"")!==-1?d.responseText:d.response,o={data:a(r,n,u.transformResponse),status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:u};(o.status>=200&&o.status<300||!("status"in d)&&o.responseText?e:t)(o),d=null}},d.onerror=function(){t(new Error("Network Error")),d=null},r.isStandardBrowserEnv()){var m=n(38),v=u.withCredentials||s(u.url)?m.read(u.xsrfCookieName):void 0;v&&(f[u.xsrfHeaderName]=v)}if("setRequestHeader"in d&&r.forEach(f,function(e,t){"undefined"==typeof c&&"content-type"===t.toLowerCase()?delete f[t]:d.setRequestHeader(t,e)}),u.withCredentials&&(d.withCredentials=!0),u.responseType)try{d.responseType=u.responseType}catch(g){if("json"!==d.responseType)throw g}r.isArrayBuffer(c)&&(c=new DataView(c)),
d.send(c)}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(29);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else{var a=[];o.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(29);e.exports=function(e){var t,n,o,i={};return e?(r.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}},function(e,t,n){"use strict";var r=n(29);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";var r=n(29);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function n(e){this.message=e}function r(e){for(var t,r,i=String(e),a="",s=0,l=o;i.charAt(0|s)||(l="=",s%1);a+=l.charAt(63&t>>8-s%1*8)){if(r=i.charCodeAt(s+=.75),r>255)throw new n("INVALID_CHARACTER_ERR: DOM Exception 5");t=t<<8|r}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=r},function(e,t,n){"use strict";var r=n(29);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var o=n(29);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){e.exports="//Taken from http://media.tojicode.com/webgl-samples/depth-texture.html\n\n#ifdef COMPILING_VS\nattribute vec2 position;\nattribute vec2 texture;\nvarying vec2 texCoord;\n\nuniform float uWidth;\nuniform float uHeight;\nuniform float uX;\nuniform float uY;\n\n\nvoid main(void) {\n    //texCoord = texture;\n    texCoord = position.xy * 0.5 + 0.5;\n\n    //gl_Position = vec4(position, 0.0, 1.0);\n    gl_Position = vec4(\n        (((position.x + 1.0)/2.0) * uWidth + uX)*2.0 - 1.0,\n        (((position.y + 1.0)/2.0) * uHeight + uY)*2.0 - 1.0,\n\n\n        0.0,\n        1.0)  ;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision mediump float;\nuniform sampler2D diffuse;\nvarying vec2 texCoord;\n\nvoid main(void) {\n\n    //float f = 1000.0; //far plane\n    //float n = 1.0; //near plane\n    //float z = (2.0 * n) / (f + n - texture2D( diffuse, texCoord ).x * (f - n));\n\n\n    //vec4 color = texture2D(diffuse, texCoord);\n    //gl_FragColor = vec4(z,z,z, 255);\n    gl_FragColor = vec4(texture2D( diffuse, texCoord ).rgb, 255);\n}\n\n#endif //COMPILING_FS"},function(e,t){e.exports="#ifdef ENABLE_DEFERRED\n    #extension OES_texture_float_linear : enable\n#endif\n\n#ifdef COMPILING_VS\nattribute vec4 a_position;\nvarying vec2 v_texcoord;\n\nvoid main() {\n      gl_Position = a_position;\n      v_texcoord = a_position.xy * 0.5 + 0.5;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_sampler;\nuniform sampler2D u_depth;\n\nuniform float gauss_offsets[5];\nuniform float gauss_weights[5];\n\nvoid main() {\n   /*\n    vec4 fragmentColor = texture2D(u_sampler, v_texcoord);\n    float sourceDepth = texture2D(u_depth, v_texcoord).x;\n    vec4 final = (fragmentColor * gauss_weights[0]);\n    for (int i = 1; i < 5; i++) {\n\n        float sampleDepth = texture2D(u_depth, (v_texcoord + vec2(0.0, gauss_offsets[i]))).x;\n        float filterDepth = (((sourceDepth - sampleDepth) > 0.0700000003) ? 1.0 : 0.0);\n        //float filterDepth = 1.0;\n        vec4 t = vec4(filterDepth);\n        final = (final + (gauss_weights[i] * mix(texture2D(u_sampler, (v_texcoord + vec2(0.0, gauss_offsets[i]))), fragmentColor, t)));\n    }\n\n    final.a = 1.0;\n    gl_FragColor = final;   */\n\n\n    gl_FragColor = vec4(texture2D(u_sampler, v_texcoord).rgb, 0);\n}\n\n#endif //COMPILING_FS\n\n\n#ifdef deffered_light\nprecision highp float;\n\n#define DISPLAY_DEPTH 0\n#define DISPLAY_NORMAL 1\n#define DISPLAY_POSITION 2\n#define DISPLAY_COLOR 3\n#define DISPLAY_TOTAL 4\n#define DISPLAY_LIGHTS 5\n#define DISPLAY_NONTILE_LIGHTS 6\n#define DISPLAY_INK 7\n#define DISPLAY_DEBUGTILE 8\n#define MAXLIGHTNUM 1000\n\nuniform sampler2D u_Depthtex;\nuniform sampler2D u_Normaltex;\nuniform sampler2D u_Positiontex;\nuniform sampler2D u_Colortex;\n//for light\nuniform sampler2D u_LightGridtex;\nuniform sampler2D u_LightIndextex;\nuniform sampler2D u_LightPositiontex;\nuniform sampler2D u_LightColorRadiustex;\nuniform int u_LightNum;\nuniform int u_DisplayType;\n//uniform float u_Far;\n//uniform float u_Near;\n//uniform float u_Width;\n//uniform float u_Height;\nuniform int u_MaxTileLightNum;\nuniform int u_TileSize;\n//uniform Light u_Lights[LIGHTNUM];\nuniform int u_LightIndexImageSize;\nuniform float u_FloatLightIndexSize;\nuniform float u_WidthTile;\nuniform float u_HeightTile;\nvarying vec2 fs_Texcoord;\nfloat linearizeDepth(float exp_depth, float near, float far) {\n    return  (2.0 * near) / (far + near -  exp_depth * (far - near));\n}\nvoid main(void)\n{\n    vec3 normal = texture2D(u_Normaltex, fs_Texcoord).xyz;\n    vec3 position = texture2D(u_Positiontex, fs_Texcoord).xyz;\n    vec3 color = texture2D(u_Colortex, fs_Texcoord).xyz;\n    //vec3 depth = texture2D(u_Depthtex, fs_Texcoord).xyz;\n    //float exp_depth = texture2D(u_Depthtex, fs_Texcoord).r;\n    //float lin_depth = linearizeDepth(exp_depth,u_Near,u_Far);\n    //get the grid data index\n    vec2 gridIndex = vec2(((fs_Texcoord.x*u_Width) / float(u_TileSize)) / (u_WidthTile), ((fs_Texcoord.y*u_Height) / float(u_TileSize)) / (u_HeightTile));\n    //x for offset, y for count\n    vec3 gridInfo = texture2D(u_LightGridtex, gridIndex).xyz;\n    int offset = int(gridInfo.x);\n    int count = int(gridInfo.y);\n    int offset2 = int(gridInfo.z);\n    vec3 lightColor = vec3(0.0);\n    int lightCount = 0;\n    if(count > 0){\n        for(int i = 0; i < MAXLIGHTNUM; i++){\n            if(i < count){\n                int lightId;\n                //float temp = (mod(float(offset+i), u_FloatLightIndexSize));\n                float temp = float(offset + i);\n                int addNext = 0;\n\n                if(temp >= u_FloatLightIndexSize){\n                    temp -= u_FloatLightIndexSize;\n                    addNext++;\n                }\n\n                //precision problem\n                if(temp == u_FloatLightIndexSize)\n                   temp = 0.0;\n                float lightSize =  u_FloatLightIndexSize-1.0;\n                vec2 dataIndex = vec2(\n                    temp / lightSize,\n                    //floor(float((offset2+i) / (u_LightIndexImageSize))) / (lightSize)\n                    float(offset2 + addNext) / lightSize\n                    );\n\n                //vec2 dataIndex = vec2(float(offset+i) / float(u_LightIndexImageSize-1), 1.0);\n                lightId = int((texture2D(u_LightIndextex, dataIndex).x));\n                vec3 lightPos = texture2D(u_LightPositiontex, vec2(float(lightId)/float(u_LightNum-1))).xyz;\n                vec4 lightColorRadius = texture2D(u_LightColorRadiustex, vec2(float(lightId)/float(u_LightNum-1))).xyzw;\n                if(distance(lightPos, position) < lightColorRadius.w){\n                    //float distoL = distance(lightPos, position);\n                    //distoL = max(lightColorRadius.w - distoL, 0.0);\n                    float diffuse = abs(dot(normal, normalize(lightPos - position)));\n                    //max(dot(normal, normalize(lightPos - position)),0.0);\n                    // if(diffuse == 0.0)\n                    //     diffuse = dot(-normal, normalize(lightPos - position));\n                    float dist = distance(lightPos, position);\n                    float lightR = lightColorRadius.w;\n                    float attenuation = dist/(1.0 - (dist/lightR) * (dist/lightR));\n                    attenuation = attenuation / lightR + 1.0;\n                    attenuation = 1.0 / (attenuation * attenuation);\n\n                    lightColor += diffuse * lightColorRadius.xyz * attenuation* color;// * ((lightColorRadius.w - distance(lightPos, position)) /     lightColorRadius.w);\n\n                    //lightColor += lightColorRadius.xyz;\n                    //if(distoL > 0.0)\n                    lightCount ++;\n                }\n            }\n            else\n                break;\n        }\n        lightColor = mix(vec3(0.0), vec3(1.0), lightColor);\n        lightColor = clamp(lightColor, vec3(0.0), vec3(1.0));\n    }\n    //gl_FragData[0] = vec4(vec3(float(count) / float(LIGHTNUM)),1.0);\n    gl_FragColor = vec4(lightColor * 0.7, 1.0) + vec4(color * 0.3,1.0);\n}\n#endif"},function(e,t){e.exports="#ifdef COMPILING_VS\nattribute vec2 position;\nattribute vec2 texture;\nvarying vec2 v_texcoord;\n\nvoid main() {\n    v_texcoord = texture;\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_sampler;\n\nvoid main() {\n    float depth = texture2D(u_sampler, v_texcoord).x;\n    float depth65535 = depth * 65535.0;\n    float depth_high = floor(depth65535/256.0) / 255.0;\n    float depth_low = mod(depth65535, 256.0) / 255.0;\n\n    vec4 color = vec4(depth_high, depth_low, 0 ,0);\n\n    gl_FragColor = color;\n}\n\n#endif //COMPILING_FS"},function(e,t){e.exports="//https://www.khronos.org/registry/webgl/extensions/WEBGL_draw_buffers/\n//For drawbuffers in glsl of webgl you need to use GL_EXT_draw_buffers instead of WEBGL_draw_buffers\n\n#ifdef ENABLE_DEFERRED\n#ifdef GL_EXT_draw_buffers\n    #extension GL_EXT_draw_buffers: require\n    #extension OES_texture_float_linear : enable\n    #define drawBuffersIsSupported 1\n#endif\n#endif\n\n/*\n//0\nMapObjDiffuse {\n    VertexShader(MapObjDiffuse_T1);\n\tPixelShader(MapObjDiffuse);\n}\n\n//1\nMapObjSpecular {\n    VertexShader(MapObjSpecular_T1);\n    PixelShader(MapObjSpecular);\n}\n\n//2\nMapObjMetal {\n    VertexShader(MapObjSpecular_T1);\n    PixelShader(MapObjMetal);\n}\n\n//3\nMapObjEnv {\n\tVertexShader(MapObjDiffuse_T1_Refl);\n\tPixelShader(MapObjEnv);\n}\n\n//4\nMapObjOpaque {\n    VertexShader(MapObjDiffuse_T1);\n    PixelShader(MapObjOpaque);\n}\n\n//5\nEffect(MapObjEnvMetal {\n    VertexShader(MapObjDiffuse_T1_Refl);\n    PixelShader(MapObjEnvMetal);\n}\n\n//6\nEffect(MapObjComposite)\n{\n    VertexShader(MapObjDiffuse_Comp);\n    PixelShader(MapObjComposite);\n}\n*/\n\n\n#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec2 aTexCoord2;\nattribute vec4 aColor;\nattribute vec4 aColor2;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\n\n#ifdef INSTANCED\nattribute mat4 uPlacementMat;\n#else\nuniform mat4 uPlacementMat;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec4 vColor;\nvarying vec4 vColor2;\nvarying vec3 vPosition;\n\n#ifdef drawBuffersIsSupported\nvarying vec3 vNormal;\nvarying float fs_Depth;\n#endif\n\nvoid main() {\n    vec4 worldPoint = uPlacementMat * vec4(aPosition, 1);\n\n    vec4 cameraPoint = uLookAtMat * worldPoint;\n\n    vTexCoord = aTexCoord;\n    vTexCoord2 = aTexCoord2;\n    vColor = aColor;\n    vColor2 = aColor2;\n\n#ifndef drawBuffersIsSupported\n    gl_Position = uPMatrix * cameraPoint;\n    vPosition = cameraPoint.xyz;\n#else\n    gl_Position = uPMatrix * cameraPoint;\n    fs_Depth = gl_Position.z / gl_Position.w;\n\n    vNormal = normalize((uPlacementMat * vec4(aNormal, 0)).xyz);\n    vPosition = cameraPoint.xyz;\n#endif //drawBuffersIsSupported\n\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision lowp float;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec4 vColor;\nvarying vec4 vColor2;\nvarying vec3 vPosition;\n\n//uniform vec4  uGlobalLighting;\nuniform float uAlphaTest;\nuniform vec4 uMeshColor1;\nuniform vec4 uMeshColor2;\nuniform sampler2D uTexture;\nuniform sampler2D uTexture2;\n\nuniform vec3 uFogColor;\n\n#ifdef drawBuffersIsSupported\nvarying float fs_Depth;\n#endif\n\nvoid main() {\n    vec4 tex = texture2D(uTexture, vTexCoord).rgba * uMeshColor1;\n    vec4 tex2 = texture2D(uTexture2, vTexCoord2).rgba * uMeshColor2*0.00001;\n\n    vec4 finalColor = vec4(tex.rgb * vColor.bgr + tex2.rgb*vColor2.bgr, tex.a);\n\n    vec3 fogColor = uFogColor;\n    float fog_start = 1.0;\n    float fog_end = 200.0;\n    float fog_rate = 1.5;\n    float fog_bias = 0.01;\n\n    //vec4 fogHeightPlane = pc_fog.heightPlane;\n    //float heightRate = pc_fog.color_and_heightRate.w;\n\n    float distanceToCamera = length(vPosition.xyz);\n    float z_depth = (distanceToCamera - fog_bias);\n    float expFog = 1.0 / (exp((max(0.0, (z_depth - fog_start)) * fog_rate)));\n    //float height = (dot(fogHeightPlane.xyz, vPosition.xyz) + fogHeightPlane.w);\n    //float heightFog = clamp((height * heightRate), 0, 1);\n    float heightFog = 1.0;\n    expFog = (expFog + heightFog);\n    float endFadeFog = clamp(((fog_end - distanceToCamera) / (0.699999988 * fog_end)), 0.0, 1.0);\n\n    finalColor.rgb = mix(fogColor.rgb, finalColor.rgb, vec3(min(expFog, endFadeFog)));\n\n\n    if(finalColor.a < uAlphaTest)\n        discard;\n\n    //Apply global lighting\n/*\n    finalColor = vec4(\n        (finalColor.r + uGlobalLighting.r) ,\n        (finalColor.g + uGlobalLighting.g) ,\n        (finalColor.b + uGlobalLighting.b) ,\n        finalColor.a);\n  */\n    finalColor.a = 1.0; //do I really need it now?\n\n#ifndef drawBuffersIsSupported\n    //Forward rendering without lights\n    gl_FragColor = finalColor;\n#else\n    //Deferred rendering\n    //gl_FragColor = finalColor;\n    gl_FragData[0] = vec4(vec3(fs_Depth), 1.0);\n    gl_FragData[1] = vec4(vPosition.xyz,0);\n    gl_FragData[2] = vec4(vNormal.xyz,0);\n    gl_FragData[3] = finalColor;\n#endif //drawBuffersIsSupported\n}\n\n#endif //COMPILING_FS\n"},function(e,t){e.exports="//https://www.khronos.org/registry/webgl/extensions/WEBGL_draw_buffers/\n//For drawbuffers in glsl of webgl you need to use GL_EXT_draw_buffers instead of WEBGL_draw_buffers\n\n#ifdef ENABLE_DEFERRED\n#ifdef GL_EXT_draw_buffers\n    #extension GL_EXT_draw_buffers: require\n    #extension OES_texture_float_linear : enable\n    #define drawBuffersIsSupported 1\n#endif\n#endif\n\n#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec4 bones;\nattribute vec4 boneWeights;\nattribute vec2 aTexCoord;\nattribute vec2 aTexCoord2;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\nuniform mat4 uBoneMatrixes[59]; //Max 59 for ANGLE implementation and max 120? bones in Wotlk client\nuniform int isEnviroment;\nuniform lowp int isTransparent;\n\nuniform int uUseDiffuseColor;\n\n#ifdef INSTANCED\nattribute vec4 aDiffuseColor;\nattribute mat4 aPlacementMat;\n\n#else\nuniform mat4 uPlacementMat;\nuniform vec4 uDiffuseColor;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\nvarying vec4 vDiffuseColor;\n\n\n\n\n#ifdef drawBuffersIsSupported\nvarying float fs_Depth;\n#endif\n\nvoid main() {\n    vec4 modelPoint = vec4(0,0,0,0);\n\n    vec4 aPositionVec4 = vec4(aPosition, 1);\n    mat4 boneTransformMat = mat4(0.0);\n\n    boneTransformMat += (boneWeights.x ) * uBoneMatrixes[int(bones.x)];\n    boneTransformMat += (boneWeights.y ) * uBoneMatrixes[int(bones.y)];\n    boneTransformMat += (boneWeights.z ) * uBoneMatrixes[int(bones.z)];\n    boneTransformMat += (boneWeights.w ) * uBoneMatrixes[int(bones.w)];\n\n    mat4 placementMat;\n#ifdef INSTANCED\n    placementMat = aPlacementMat;\n#else\n    placementMat = uPlacementMat;\n#endif\n\n    mat4 cameraMatrix = uLookAtMat * placementMat * boneTransformMat;\n    vec4 cameraPoint = cameraMatrix * aPositionVec4;\n\n    vec3 normal = mat3(cameraMatrix) * aNormal;\n\n    vec2 texCoord;\n    if (isEnviroment == 1) {\n\n        vec3 normPos = -(normalize(cameraPoint.xyz));\n        vec3 temp = reflect(normPos, normal);\n        temp.z += 1.0;\n\n        texCoord = ((normalize(temp).xy * 0.5) + vec2(0.5));\n\n    } else {\n        /* Animation support */\n        texCoord = vec4(aTexCoord, 0, 1).xy;\n    }\n\n    vTexCoord = texCoord;\n    vTexCoord2 = aTexCoord2;\n\n    if ((uUseDiffuseColor == 1)) {\n\n#ifdef INSTANCED\n    vDiffuseColor = aDiffuseColor;\n#else\n    vDiffuseColor = uDiffuseColor;\n#endif\n    } else {\n        vDiffuseColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n\n\n#ifndef drawBuffersIsSupported\n    gl_Position = uPMatrix * cameraPoint;\n    vNormal = normal;\n    vPosition = cameraPoint.xyz;\n#else\n    gl_Position = uPMatrix * cameraPoint;\n    fs_Depth = gl_Position.z / gl_Position.w;\n\n    vNormal = normal;\n    vPosition = cameraPoint.xyz;\n#endif //drawBuffersIsSupported\n\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\n\nprecision highp float;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying vec3 vPosition;\n\nvarying vec4 vDiffuseColor;\n\nuniform lowp int isTransparent;\n\nuniform int uBlendMode;\nuniform int uPixelShader;\nuniform int uUnFogged;\n\nuniform vec4 uColor;\nuniform vec3 uFogColor;\n\n//uniform vec4  uGlobalLighting;\nuniform float uAlphaTest;\nuniform float uTransparency;\nuniform sampler2D uTexture;\nuniform sampler2D uTexture2;\n\nuniform mat4 uTextMat1;\nuniform mat4 uTextMat2;\n\n#ifdef drawBuffersIsSupported\nvarying float fs_Depth;\n#endif\n\nvoid main() {\n    /* Animation support */\n    vec2 texCoord = (uTextMat1 * vec4(vTexCoord, 0, 1)).xy;\n    vec2 texCoord2 = (uTextMat2 * vec4(vTexCoord2, 0, 1)).xy;\n\n    /* Get color from texture */\n    vec4 tex = texture2D(uTexture, texCoord).rgba;\n    vec4 tex2 = texture2D(uTexture2, texCoord2).rgba;\n\n    vec4 meshColor = uColor;\n    /*if (uBlendMode == 6) {\n       meshColor.rbg *= vec3(0.65);\n    }*/\n\n    vec4 finalColor = vec4(0);\n    //finalColor = vec4((tex.rgb * tex2.rgb), 1.0);\n    //finalColor.rgb = finalColor.rgb * meshColor.rgb * vDiffuseColor.bgr;\n    //finalColor.a = tex.a * tex2.a * uColor.a* uTransparency;\n    vec4 meshResColor = vec4(meshColor.rgb * vDiffuseColor.bgr, uColor.a* uTransparency);\n\n    if (uPixelShader == 0) { //Combiners_Opaque\n        finalColor.rgb = tex.rgb * meshResColor.rgb;\n        finalColor.a = meshResColor.a;\n    } else if (uPixelShader == 1) { // Combiners_Decal\n        finalColor.rgb = (meshResColor.rgb - tex.rgb) * meshResColor.a + tex.rgb;\n        finalColor.a = meshResColor.a;\n    } else if (uPixelShader == 2) { // Combiners_Add\n        finalColor.rgba = tex.rgba + meshResColor.rgba;\n    } else if (uPixelShader == 3) { // Combiners_Mod2x\n        finalColor.rgb = tex.rgb * meshResColor.rgb * vec3(2.0);\n        finalColor.a = tex.a * meshResColor.a * 2.0;\n    } else if (uPixelShader == 4) { // Combiners_Fade\n        finalColor.rgb = (tex.rgb - meshResColor.rgb) * meshResColor.a + meshResColor.rgb;\n        finalColor.a = meshResColor.a;\n    } else if (uPixelShader == 5) { // Combiners_Mod\n        finalColor.rgba = tex.rgba * meshResColor.rgba;\n    } else if (uPixelShader == 6) { // Combiners_Opaque_Opaque\n        finalColor.rgb = tex.rgb * tex2.rgb * meshResColor.rgb;\n        finalColor.a = meshResColor.a;\n    } else if (uPixelShader == 7) { // Combiners_Opaque_Add\n        finalColor.rgb = tex2.rgb + tex.rgb * meshResColor.rgb;\n        finalColor.a = meshResColor.a + tex.a;\n    } else if (uPixelShader == 8) { // Combiners_Opaque_Mod2x\n        finalColor.rgb = tex.rgb * meshResColor.rgb * tex2.rgb * vec3(2.0);\n        finalColor.a  = tex2.a * meshResColor.a * 2.0;\n    } else if (uPixelShader == 9) { // Combiners_Opaque_Mod2xNA\n        finalColor.rgb = tex.rgb * meshResColor.rgb * tex2.rgb * vec3(2.0);\n        finalColor.a  = meshResColor.a;\n    } else if (uPixelShader == 10) { // Combiners_Opaque_AddNA\n        finalColor.rgb = tex2.rgb + tex.rgb * meshResColor.rgb;\n        finalColor.a = meshResColor.a;\n    } else if (uPixelShader == 11) { // Combiners_Opaque_Mod\n        finalColor.rgb = tex.rgb * tex2.rgb * meshResColor.rgb;\n        finalColor.a = tex2.a * meshResColor.a;\n    } else if (uPixelShader == 12) { // Combiners_Mod_Opaque\n        finalColor.rgb = tex.rgb * tex2.rgb * meshResColor.rgb;\n        finalColor.a = tex.a;\n    } else if (uPixelShader == 13) { // Combiners_Mod_Add\n        finalColor.rgba = tex2.rgba + tex.rgba * meshResColor.rgba;\n    } else if (uPixelShader == 14) { // Combiners_Mod_Mod2x\n        finalColor.rgba = tex.rgba * tex2.rgba * meshResColor.rgba * vec4(2.0);\n    } else if (uPixelShader == 15) { // Combiners_Mod_Mod2xNA\n        finalColor.rgb = tex.rgb * tex2.rgb * meshResColor.rgb * vec3(2.0);\n        finalColor.a = tex.a * meshResColor.a;\n    } else if (uPixelShader == 16) { // Combiners_Mod_AddNA\n        finalColor.rgb = tex2.rgb + tex.rgb * meshResColor.rgb;\n        finalColor.a = tex.a * meshResColor.a;\n    } else if (uPixelShader == 17) { // Combiners_Mod_Mod\n        finalColor.rgba = tex.rgba * tex2.rgba * meshResColor.rgba;\n    } else if (uPixelShader == 18) { // Combiners_Add_Mod\n        finalColor.rgb = (tex.rgb + meshResColor.rgb) * tex2.a;\n        finalColor.a = (tex.a + meshResColor.a) * tex2.a;\n    } else if (uPixelShader == 19) { // Combiners_Mod2x_Mod2x\n        finalColor.rgba = tex.rgba * tex2.rgba * meshResColor.rgba * vec4(4.0);\n    }\n\n    if(finalColor.a < uAlphaTest)\n        discard;\n\n    if (uUnFogged == 0) {\n        vec3 fogColor = uFogColor;\n        float fog_start = 1.0;\n        float fog_end = 200.0;\n        float fog_rate = 1.5;\n        float fog_bias = 0.01;\n    \n        //vec4 fogHeightPlane = pc_fog.heightPlane;\n        //float heightRate = pc_fog.color_and_heightRate.w;\n\n        float distanceToCamera = length(vPosition.xyz);\n        float z_depth = (distanceToCamera - fog_bias);\n        float expFog = 1.0 / (exp((max(0.0, (z_depth - fog_start)) * fog_rate)));\n        //float height = (dot(fogHeightPlane.xyz, vPosition.xyz) + fogHeightPlane.w);\n        //float heightFog = clamp((height * heightRate), 0, 1);\n        float heightFog = 1.0;\n        expFog = (expFog + heightFog);\n        float endFadeFog = clamp(((fog_end - distanceToCamera) / (0.699999988 * fog_end)), 0.0, 1.0);\n\n        finalColor.rgb = mix(fogColor.rgb, finalColor.rgb, vec3(min(expFog, endFadeFog)));\n    }\n    /*\n    vec3 matDiffuse_575 = (tex.rgb * tex2.rgb * meshColor.rgb);\n    vec3 S_570 = vec3(mix(vec3(0.699999988), vec3(1.0), 1.0));\n    vec3 lDiffuse_578 = vec3((1.0 * S_570));\n    float mag_257 = length(lDiffuse_578);\n    vec3 l_702;\n    if ((mag_257 > 1.0))\n    {\n        // Block 258\n        vec3 t265 = vec3(mag_257);\n        vec3 l_266 = ((lDiffuse_578 * (1.0 + log(mag_257))) / t265);\n        l_702 = l_266;\n    }\n    else\n    {\n        // Block 259\n        l_702 = lDiffuse_578;\n    }\n    // Block 625\n    vec3 l_267 = l_702;\n    vec3 diffTerm_580 = (matDiffuse_575 * l_267);\n    vec3 specTerm_583 = (vec3(0.0) * (S_570 * 1.0));\n    vec4 final_599 = vec4(((diffTerm_580 + specTerm_583) + vec3(0.0)), (((tex.a * tex.b * meshColor.a) * 1.0) * 1.0));\n    vec4 final_705;\n    if ((vDiffuseColor.w != 0.0))\n    {\n        // Block 600\n        vec3 t606 = final_599.xyz;\n        vec3 t612 = vec3(dot(t606, vDiffuseColor.bgr));\n        vec3 t613 = vec3(vDiffuseColor.w);\n        vec4 final_615 = vec4(mix(t606, t612, t613), final_599.w);\n        final_705 = final_615;\n    }\n    else\n    {\n        // Block 601\n        final_705 = final_599;\n    }\n\n\n    vec4 finalColor = final_705;\n    */\n\n    //Apply global lighting\n/*\n    finalColor = vec4(\n        (finalColor.r + uGlobalLighting.r) ,\n        (finalColor.g + uGlobalLighting.g) ,\n        (finalColor.b + uGlobalLighting.b) ,\n        finalColor.a);\n  */\n    //finalColor.a = 1.0; //do I really need it now?\n\n#ifndef drawBuffersIsSupported\n    //Forward rendering without lights\n    gl_FragColor = finalColor;\n#else\n    //Deferred rendering\n    //gl_FragColor = finalColor;\n    gl_FragData[0] = vec4(vec3(fs_Depth), 1.0);\n    gl_FragData[1] = vec4(vPosition.xyz,0);\n    gl_FragData[2] = vec4(vNormal.xyz,0);\n    gl_FragData[3] = finalColor;\n#endif //drawBuffersIsSupported\n}\n\n#endif //COMPILING_FS\n\n"},function(e,t){e.exports="#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\n\nuniform vec3 uBBScale;\nuniform vec3 uBBCenter;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\nuniform mat4 uPlacementMat;\n\nvoid main() {\n    vec4 worldPoint = vec4(\n        aPosition.x*uBBScale.x + uBBCenter.x,\n        aPosition.y*uBBScale.y + uBBCenter.y,\n        aPosition.z*uBBScale.z + uBBCenter.z,\n    1);\n\n    gl_Position = uPMatrix * uLookAtMat * uPlacementMat * worldPoint;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision lowp float;\n\nuniform vec3 uColor;\n\nvoid main() {\n    vec4 finalColor = vec4(uColor, 1.0);\n\n    finalColor.a = 1.0; //do I really need it now?\n    gl_FragColor = finalColor;\n}\n\n#endif //COMPILING_FS\n"},function(e,t){e.exports='#ifdef COMPILING_VS\n/* vertex shader code */\nattribute float aHeight;\nattribute float aNormal;\nattribute float aIndex;\n\nuniform vec3 uPos;\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\n\nvarying vec2 vChunkCoords;\nvarying vec3 vPosition;\n\nconst float UNITSIZE =  533.3433333 / 16.0 / 8.0;\n\nvoid main() {\n\n/*\n     Y\n  X  0    1    2    3    4    5    6    7    8\n        9   10   11   12   13   14   15   16\n*/\n    float iX = mod(aIndex, 17.0);\n    float iY = floor(aIndex/17.0);\n\n    vec4 worldPoint = vec4(\n        uPos.x - iY * UNITSIZE,\n        uPos.y - iX * UNITSIZE,\n        uPos.z + aHeight,\n        1);\n\n    vChunkCoords = vec2(iX, iY);\n\n    //On Intel Graphics ">" is equal to ">="\n    if (iX > 8.1) {\n        worldPoint.x = uPos.x - (iX - 8.5) * UNITSIZE;\n        worldPoint.y = uPos.x - (iY + 0.5) * UNITSIZE;\n        vChunkCoords.x = (iY-8.5);\n    }\n\n    vPosition = (uLookAtMat * worldPoint).xyz;\n\n    gl_Position = uPMatrix * uLookAtMat * worldPoint;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision lowp float;\n\nvarying vec2 vChunkCoords;\nvarying vec3 vPosition;\n\nuniform int uNewFormula;\n\nuniform sampler2D uLayer0;\nuniform sampler2D uLayer1;\nuniform sampler2D uLayer2;\nuniform sampler2D uLayer3;\nuniform sampler2D uAlphaTexture;\nuniform vec3 uFogColor;\n\n/* Bicubic interpolation implementation */\n/* Taken from http://www.codeproject.com/Articles/236394/Bi-Cubic-and-Bi-Linear-Interpolation-with-GLSL#Triangular */\n\nfloat Triangular( float f ) {\n\tf = f / 2.0;\n\tif( f < 0.0 )\n\t{\n\t\treturn ( f + 1.0 );\n\t}\n\telse\n\t{\n\t\treturn ( 1.0 - f );\n\t}\n\treturn 0.0;\n}\n\nfloat CatMullRom( float x ) {\n    const float B = 0.0;\n    const float C = 0.5;\n    float f = x;\n    if( f < 0.0 )\n    {\n        f = -f;\n    }\n    if( f < 1.0 )\n    {\n        return ( ( 12.0 - 9.0 * B - 6.0 * C ) * ( f * f * f ) +\n            ( -18.0 + 12.0 * B + 6.0 * C ) * ( f * f ) +\n            ( 6.0 - 2.0 * B ) ) / 6.0;\n    }\n    else if( f >= 1.0 && f < 2.0 )\n    {\n        return ( ( -B - 6.0 * C ) * ( f * f * f )\n            + ( 6.0 * B + 30.0 * C ) * ( f *f ) +\n            ( - ( 12.0 * B ) - 48.0 * C  ) * f +\n            8.0 * B + 24.0 * C)/ 6.0;\n    }\n    else\n    {\n        return 0.0;\n    }\n}\nvec4 BiCubic( sampler2D textureSampler, vec2 TexCoord, float widthMinClamp, float widthMaxClamp) {\n    float fWidth = 256.0;\n    float fHeight = 64.0;\n\n    float texelSizeX = 1.0 / fWidth; //size of one texel\n    float texelSizeY = 1.0 / fHeight; //size of one texel\n    vec4 nSum = vec4( 0.0, 0.0, 0.0, 0.0 );\n    vec4 nDenom = vec4( 0.0, 0.0, 0.0, 0.0 );\n    float a = fract( TexCoord.x * fWidth ); // get the decimal part\n    float b = fract( TexCoord.y * fHeight ); // get the decimal part\n    for( int m = -1; m <=2; m++ )\n    {\n        for( int n =-1; n<= 2; n++)\n        {\n            vec2 coords = TexCoord + vec2( texelSizeX * float( m ), texelSizeY * float( n ));\n\n            float xCoord = coords.x;\n            xCoord = max(widthMinClamp, xCoord);\n            xCoord = min(widthMaxClamp, xCoord);\n            coords.x = xCoord;\n\n            vec4 vecData = texture2D( textureSampler, coords);\n            float f  = Triangular( float( m ) - a );\n            vec4 vecCooef1 = vec4( f,f,f,f );\n            float f1 = Triangular ( -( float( n ) - b ) );\n            vec4 vecCoeef2 = vec4( f1, f1, f1, f1 );\n            nSum = nSum + ( vecData * vecCoeef2 * vecCooef1  );\n            nDenom = nDenom + (( vecCoeef2 * vecCooef1 ));\n        }\n    }\n    return nSum / nDenom;\n}\n/********************************/\n\nfloat filterFunc(float x) {\n  //x = ceil(x * 16.0)/16.0;\n\n  /*const float multiplier = 1.0;\n  const float additive =  0.0;\n  const float maxThreshold = 0.0;\n  const float minThreshold = 1.0;\n\n\n  x = x * multiplier + additive;\n  x = max(x, maxThreshold);\n  x = min(x, minThreshold);\n  return x;*/\n    return x;\n}\n\nvec3 mixTextures(vec3 tex0, vec3 tex1, float alpha) {\n    return  (alpha*(tex1.rgb-tex0.rgb)+tex0.rgb);\n}\n\nvoid main() {\n    vec2 vTexCoord = vChunkCoords;\n    const float threshold = 1.5;\n\n    vec2 a4Coords = vec2(3.0/4.0+ ((vChunkCoords.x/8.0) ) /4.0, vChunkCoords.y/8.0 );\n    vec2 a3Coords = vec2(2.0/4.0+ ((vChunkCoords.x/8.0) ) /4.0, vChunkCoords.y/8.0 );\n    vec2 a2Coords = vec2(1.0/4.0+ ((vChunkCoords.x/8.0) ) /4.0, vChunkCoords.y/8.0 );\n\n    vec3 tex4 = texture2D(uLayer3, vTexCoord).rgb;\n    float a4 = BiCubic(uAlphaTexture, a4Coords, 3.0/4.0, 3.999/4.0).a;\n    a4 = filterFunc(a4);\n\n    vec3 tex3 = texture2D(uLayer2, vTexCoord).rgb;\n    float a3 = BiCubic(uAlphaTexture, a3Coords, 2.0/4.0, 2.999/4.0).a;\n    a3 = filterFunc(a3);\n\n    vec3 tex2 = texture2D(uLayer1, vTexCoord).rgb;\n    float a2 = BiCubic(uAlphaTexture, a2Coords, 1.0/4.0, 1.999/4.0).a;\n    a2 = filterFunc(a2);\n\n    vec3 tex1 = texture2D(uLayer0, vTexCoord).rgb;\n    //vec4 a1 = texture2D(uTexture, vTexCoord).rgba;\n\n    //Mix formula for 4 texture mixing\n    vec4 finalColor;\n    if (uNewFormula >= 1) {\n        finalColor = vec4(tex1 * (1.0 - (a2 + a3 + a4)) + tex2 * a2 + tex3 * a3 + tex4* a4, 1);\n    } else {\n        finalColor = vec4(mixTextures(mixTextures(mixTextures(tex1,tex2,a2),tex3, a3), tex4, a4), 1);\n        //finalColor = vec4(a4 * tex4 - (a4  - 1.0) * ( (a3 - 1.0)*( tex1 * (a2 - 1.0) - a2*tex2) + a3*tex3), 1);\n    }\n\n\n    // --- Fog start ---\n    vec3 fogColor = uFogColor;\n    float fog_start = 1.0;\n    float fog_end = 200.0;\n    float fog_rate = 1.5;\n    float fog_bias = 0.01;\n\n    //vec4 fogHeightPlane = pc_fog.heightPlane;\n    //float heightRate = pc_fog.color_and_heightRate.w;\n\n    float distanceToCamera = length(vPosition.xyz);\n    float z_depth = (distanceToCamera - fog_bias);\n    float expFog = 1.0 / (exp((max(0.0, (z_depth - fog_start)) * fog_rate)));\n    //float height = (dot(fogHeightPlane.xyz, vPosition.xyz) + fogHeightPlane.w);\n    //float heightFog = clamp((height * heightRate), 0, 1);\n    float heightFog = 1.0;\n    expFog = (expFog + heightFog);\n    float endFadeFog = clamp(((fog_end - distanceToCamera) / (0.699999988 * fog_end)), 0.0, 1.0);\n\n    finalColor.rgb = mix(fogColor.rgb, finalColor.rgb, vec3(min(expFog, endFadeFog)));\n    // --- Fog end ---\n\n\n    finalColor.a = 1.0;\n    gl_FragColor = finalColor;\n}\n\n#endif //COMPILING_FS';
},function(e,t){e.exports="#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\nuniform mat4 uPlacementMat;\n\nvoid main() {\n    vec4 worldPoint = vec4(aPosition.xyz, 1);\n\n    gl_Position = uPMatrix * uLookAtMat * uPlacementMat * worldPoint;\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision lowp float;\n\nuniform vec4 uColor;\n\nvoid main() {\n    vec4 finalColor = uColor ;\n\n    gl_FragColor = finalColor;\n}\n\n#endif //COMPILING_FS\n"},function(e,t){e.exports="#ifdef COMPILING_VS\n/* vertex shader code */\nattribute vec3 aPosition;\n\nuniform mat4 uLookAtMat;\nuniform mat4 uPMatrix;\n\nuniform mat4 uInverseViewProjection;\n\nvoid main() {\n\n    vec4 c_world = uInverseViewProjection * vec4(aPosition, 1);\n    c_world = c_world*1.0/c_world.w;\n\n    gl_Position = uPMatrix * uLookAtMat * vec4(c_world.xyz, 1);\n}\n#endif //COMPILING_VS\n\n#ifdef COMPILING_FS\nprecision lowp float;\n\nuniform vec3 uColor;\n\nvoid main() {\n    vec4 finalColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    finalColor.a = 1.0; //do I really need it now?\n    gl_FragColor = finalColor;\n}\n\n#endif //COMPILING_FS\n"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(54),s=r(a),l=n(66),u=r(l),c=n(71),f=r(c),d=n(72),p=r(d),h=n(73),m=r(h),v=n(74),g=r(v),b=n(55),y=r(b),x=n(75),w=r(x),_=n(22),k=r(_),M=n(56),E=function(){function e(t){o(this,e),this.sceneApi=t,this.m2Objects=[],this.instanceMap={},this.instanceList=[],this.wmoObjects=[],this.adtObjects=[],this.m2RenderedThisFrame=[],this.skyDom=null,this.currentTime=0,this.lastTimeSort=0,this.lastTimeDistanceCalc=0,this.lastInstanceCollect=0,this.lastFogParamCheck=0,this.globalM2Counter=0,this.portalCullingAlgo=new w["default"]}return i(e,[{key:"addAdtM2Object",value:function(e){var t=new u["default"](this.sceneApi);return t.load(e,!1),t.sceneNumber=this.globalM2Counter++,this.m2Objects.push(t),t}},{key:"addWorldMDXObject",value:function(e,t,n){var r=new p["default"](this.sceneApi);return r.setLoadParams(e,0,t,n),r.sceneNumber=this.globalM2Counter++,this.m2Objects.push(r),r}},{key:"addWmoM2Object",value:function(e,t,n){var r=new f["default"](this.sceneApi);r.load(e,t,n);return r.sceneNumber=this.globalM2Counter++,this.m2Objects.push(r),r}},{key:"addWmoObject",value:function(e){var t=new m["default"](this.sceneApi);return t.load(e),this.wmoObjects.push(t),t}},{key:"addADTObject",value:function(e){var t=new s["default"](this.sceneApi);t.load(e),this.adtObjects.push(t)}},{key:"addM2ObjectToInstanceManager",value:function(e,t){var n=e.getFileNameIdent(),r=this.instanceMap[n];r||(r=new g["default"](this.sceneApi),this.instanceMap[n]=r,this.instanceList.push(r)),r.addMDXObject(e,t),e.instanceManager=r}},{key:"setCameraPos",value:function(e){this.position=e}},{key:"setLookAtMat",value:function(e){this.lookAtMat=e}},{key:"checkCulling",value:function(e,t){if(this.currentInteriorGroup>=0&&k["default"].getUsePortalCulling()){for(var n=0;n<this.m2Objects.length;n++)this.m2Objects[n].setIsRendered(!1);var r=M.mat4.create();M.mat4.multiply(r,e,t);var o=y["default"].getFrustumClipsFromMatrix(r);if(y["default"].fixNearPlane(o,this.position),this.portalCullingAlgo.startTraversingFromInteriorWMO(this.currentWMO,this.currentInteriorGroup,this.position,e,t,o),this.currentWMO.exteriorPortals.length>0){for(var n=0;n<this.m2Objects.length;n++)this.m2Objects[n].setIsRendered(!0);this.portalCullingAlgo.checkAllDoodads(this.currentWMO,this.position),this.checkNormalFrustumCulling(e,t)}else this.portalCullingAlgo.checkAllDoodads(this.currentWMO,this.position)}else{for(var n=0;n<this.m2Objects.length;n++)this.m2Objects[n].setIsRendered(!0);this.checkNormalFrustumCulling(e,t)}}},{key:"checkNormalFrustumCulling",value:function(e,t){var n=M.mat4.create();M.mat4.multiply(n,e,t);var r=y["default"].getFrustumClipsFromMatrix(n);y["default"].fixNearPlane(r,this.position);for(var o=y["default"].getFrustumPoints(e,t),i=0;i<this.adtObjects.length;i++)this.adtObjects[0].checkFrustumCulling(this.position,r,6);for(var i=0;i<this.wmoObjects.length;i++)if(k["default"].getUsePortalCulling()&&this.wmoObjects[i].hasPortals()){if(this.currentInteriorGroup>=0&&this.currentWMO==this.wmoObjects[i])continue;this.portalCullingAlgo.startTraversingFromExterior(this.wmoObjects[i],this.position,e,t,r,o),this.portalCullingAlgo.checkAllDoodads(this.wmoObjects[i],this.position)}else this.wmoObjects[i].resetDrawnForAllGroups(!0),this.wmoObjects[i].checkFrustumCulling(this.position,e,t,r),this.wmoObjects[i].setIsRenderedForDoodads();for(var a=0;a<this.m2Objects.length;a++)this.m2Objects[a].getIsRendered()&&this.m2Objects[a].checkFrustumCullingAndSet(this.position,r,6)}},{key:"sortM2",value:function(e,t){return t.getCurrentDistance()-e.getCurrentDistance()>0?1:-1}},{key:"update",value:function(e){var t;if(k["default"].getRenderM2())for(t=0;t<this.m2Objects.length;t++)this.m2Objects[t].update(e,this.position);for(t=0;t<this.wmoObjects.length;t++)this.wmoObjects[t].update(e);if(this.currentTime+e-this.lastTimeDistanceCalc>100){for(var n=0;n<this.m2Objects.length;n++)this.m2Objects[n].calcDistance(this.position);this.lastTimeDistanceCalc=this.currentTime}var r=this.m2Objects.filter(function(e){return e.loaded&&e.getIsRendered()});if(r.sort(this.sortM2),this.m2RenderedThisFrame=r,this.lastTimeSort=this.currentTime,this.currentTime+e-this.lastInstanceCollect>400){for(var o={},n=0;n<this.m2Objects.length;n++){var i=this.m2Objects[n];if(i.m2Geom&&!i.getHasBillboarded()&&i.getIsInstancable()&&i.getIsRendered()){var a=i.getFileNameIdent();void 0!=o[a]?(this.addM2ObjectToInstanceManager(i),o[a].instanceManager||this.addM2ObjectToInstanceManager(o[a])):o[a]=i}}for(var n=0;n<this.instanceList.length;n++){var s=this.instanceList[n];s.updatePlacementVBO()}this.lastInstanceCollect=this.currentTime}this.currentInteriorGroup=-1,this.currentWMO=null;for(var l=-1,u=-1,t=0;t<this.wmoObjects.length;t++){var c=this.wmoObjects[t].isInsideInterior(this.position);if(u=c.groupId,u>=0){this.currentWMO=this.wmoObjects[t],this.currentInteriorGroup=u,l=c.nodeId;break}}return this.currentTime+e-this.lastFogParamCheck>2e3&&(this.sceneApi,this.lastFogParamCheck=this.currentTime),this.currentTime=this.currentTime+e,{interiorGroupNum:u,nodeId:l}}},{key:"drawExterior",value:function(){this.sceneApi.shaders.activateAdtShader();for(var e=0;e<this.adtObjects.length;e++)this.adtObjects[e].draw();if(k["default"].getRenderBSP()){this.sceneApi.shaders.activateDrawPortalShader();for(var e=0;e<this.wmoObjects.length;e++)this.wmoObjects[e].drawBspVerticles()}this.sceneApi.shaders.activateWMOShader();for(var e=0;e<this.wmoObjects.length;e++)k["default"].getUsePortalCulling()?this.wmoObjects[e].drawPortalBased(!1):this.wmoObjects[e].draw();if(this.sceneApi.shaders.deactivateWMOShader(),this.skyDom&&this.skyDom.draw(),this.sceneApi.shaders.activateBoundingBoxShader(),k["default"].getDrawWmoBB())for(var e=0;e<this.wmoObjects.length;e++)this.wmoObjects[e].drawBB()}},{key:"drawM2s",value:function(){if(k["default"].getRenderM2()){var e=!1;this.sceneApi.shaders.activateM2Shader();for(var t=0;t<this.m2RenderedThisFrame.length;t++){var n=this.m2RenderedThisFrame[t];this.m2OpaqueRenderedThisFrame[n.sceneNumber]||n.getIsRendered()&&(n.instanceManager?(e||this.sceneApi.shaders.activateM2InstancingShader(),n.instanceManager.drawInstancedNonTransparentMeshes(this.m2OpaqueRenderedThisFrame),e=!0):(e&&(this.sceneApi.shaders.deactivateM2InstancingShader(),this.sceneApi.shaders.activateM2Shader()),this.m2OpaqueRenderedThisFrame[n.sceneNumber]=!0,n.drawNonTransparentMeshes(),e=!1))}e?this.sceneApi.shaders.deactivateM2InstancingShader():this.sceneApi.shaders.deactivateM2Shader()}if(k["default"].getRenderM2()){var e=!1;this.sceneApi.shaders.activateM2Shader();for(var t=0;t<this.m2Objects.length;t++){var n=this.m2Objects[t];this.m2TranspRenderedThisFrame[n.sceneNumber]||n.getIsRendered()&&(n.instanceManager?(e||this.sceneApi.shaders.activateM2InstancingShader(),n.instanceManager.drawInstancedTransparentMeshes(this.m2TranspRenderedThisFrame),e=!0):(e&&(this.sceneApi.shaders.deactivateM2InstancingShader(),this.sceneApi.shaders.activateM2Shader()),this.m2TranspRenderedThisFrame[n.sceneNumber]=!0,n.drawTransparentMeshes(),e=!1))}e?this.sceneApi.shaders.deactivateM2InstancingShader():this.sceneApi.shaders.deactivateM2Shader()}if(this.sceneApi.shaders.activateBoundingBoxShader(),k["default"].getDrawM2BB())for(var t=0;t<this.m2Objects.length;t++)this.m2Objects[t].getIsRendered()&&this.m2Objects[t].drawBB()}},{key:"draw",value:function(){if(this.m2OpaqueRenderedThisFrame={},this.m2TranspRenderedThisFrame={},this.currentWMO&&k["default"].getUsePortalCulling()){if(this.currentWMO.drawPortalBased(!0),this.currentWMO.exteriorPortals.length>0&&this.drawExterior(),k["default"].getRenderPortals()){this.sceneApi.shaders.activateDrawPortalShader();for(var e=0;e<this.wmoObjects.length;e++)this.wmoObjects[e].drawPortals()}this.drawM2s(),this.sceneApi.shaders.activateFrustumBoxShader(),this.sceneApi.drawCamera()}else{if(this.drawExterior(),this.drawM2s(),k["default"].getRenderPortals()){this.sceneApi.shaders.activateDrawPortalShader();for(var e=0;e<this.wmoObjects.length;e++)this.wmoObjects[e].drawPortals()}this.sceneApi.shaders.activateFrustumBoxShader(),this.sceneApi.drawCamera()}}}]),e}();t["default"]=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(55),s=r(a),l=function(){function e(t,n){o(this,e),this.sceneApi=t,this.m2Array=[],this.drawChunk=new Array(256),this.aabbs=[];for(var r=0;r<256;r++)this.drawChunk[r]=!0}return i(e,[{key:"checkFrustumCulling",value:function(e,t,n){for(var r=0;r<256;r++){var o=this.aabbs[r];if(o)if(e[0]>o[0][0]&&e[0]<o[1][0]&&e[1]>o[0][1]&&e[1]<o[1][1]&&e[2]>o[0][2]&&e[2]<o[1][2])this.drawChunk[r]=!0;else{var i=s["default"].checkFrustum(t,o,n);this.drawChunk[r]=i}}}},{key:"calcBoundingBoxes",value:function(){for(var e=new Array(256),t=this.adtGeom.adtFile,n=0;n<256;n++){for(var r=t.mcnkObjs[n],o=999999,i=-999999,a=0;a<r.heights.length;a++){var s=r.heights[a];o>s&&(o=s),i<s&&(i=s)}var l=r.pos.x-33.33395833125,u=r.pos.x,c=r.pos.y-33.33395833125,f=r.pos.y;o+=r.pos.z,i+=r.pos.z,e[n]=[[l,c,o],[u,f,i]]}this.aabbs=e}},{key:"loadM2s",value:function(){var e=this.adtGeom.adtFile.mddf;if(e){this.m2Array=[];for(var t=0;t<e.length;t++){var n=e[t];this.sceneApi.objects.loadAdtM2Obj(n)}}}},{key:"loadWmos",value:function(){var e=this,t=this.adtGeom.adtFile.wmoObjs;t&&(this.wmoArray=[],t.forEach(function(t){e.sceneApi.objects.loadAdtWmo(t)}))}},{key:"load",value:function(e){var t=this,n=this.sceneApi.resources.loadAdtGeom(e);n.then(function(e){t.adtGeom=e,t.loadM2s(),t.loadWmos(),t.calcBoundingBoxes()})}},{key:"draw",value:function(e){this.adtGeom&&this.adtGeom.draw(this.drawChunk)}}]),e}();t["default"]=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(56),a=function(){function e(){r(this,e)}return o(e,null,[{key:"getFrustumClipsFromMatrix",value:function(e){var t=new Array(6);t[0]=i.vec4.fromValues(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),t[1]=i.vec4.fromValues(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),t[2]=i.vec4.fromValues(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),t[3]=i.vec4.fromValues(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),t[4]=i.vec4.fromValues(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14]),t[5]=i.vec4.fromValues(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]);for(var n=0;n<6;n++){var r=1/i.vec3.length(t[n]);i.vec4.scale(t[n],t[n],r)}return t}},{key:"fixNearPlane",value:function(e,t){var n=e[5],r=i.vec4.fromValues(t[0],t[1],t[2],1),o=i.vec4.dot(n,r);n[3]-=o}},{key:"sortVec3ArrayAgainstPlane",value:function(e,t){for(var n=i.vec3.fromValues(0,0,0),r=0;r<e.length;r++)i.vec3.add(n,e[r],n);i.vec3.scale(n,1/e.length),e.sort(function(e,r){var o=i.vec3.create();i.vec3.subtract(o,e,n);var a=i.vec3.create();i.vec3.subtract(a,r,n);var s=i.vec3.create();i.vec3.cross(s,o,a);var l=i.vec3.dot(s,[t.x,t.y,t.z]);return l})}},{key:"planeCull",value:function(e,t){function n(e,t,n){return i.vec4.fromValues(e[0]+n*(t[0]-e[0]),e[1]+n*(t[1]-e[1]),e[2]+n*(t[2]-e[2]),1)}for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=i.vec4.fromValues(e[o][0],e[o][1],e[o][2],1);for(var a=0;a<t.length;a++){for(var s=0,l=0,o=0;o<r.length;o++)s+=i.vec4.dot(t[a],r[o])+l<0?1:0;if(s==r.length)return!1;var u,c=new Array;if(0!=t[a][2])u=i.vec3.fromValues(0,0,-t[a][3]/t[a][2]);else if(0!=t[a][1])u=i.vec3.fromValues(0,-t[a][3]/t[a][1],0);else{if(0==t[a][0])continue;u=i.vec3.fromValues(-t[a][3]/t[a][0],0,0)}for(o=0;o<r.length;o++){var f=r[o],d=r[(o+1)%r.length],p=i.vec4.dot(f,t[a]),h=i.vec4.dot(d,t[a]);if(p>0&&h>0)c.push(d);else if(p>0&&h<0){var m=p/(p-h);c.push(n(f,d,m))}else if(p<0&&h>0){var m=p/(p-h);c.push(n(f,d,m)),c.push(d)}}r=c}for(var o=0;o<r.length;o++)e[o]=r[o];return r.length>2}},{key:"createPlaneFromVertexes",value:function(e,t,n){i.vec4.create();i.vec3.subtract(edgeDir,e,t),i.vec3.normalize(edgeDir,edgeDir);var r=i.vec4.create();i.vec3.subtract(r,e,n),i.vec3.normalize(r,r);var o=i.vec4.create();i.vec3.cross(o,r,edgeDir),i.vec3.normalize(o,o),o[3]=1;var a=i.vec4.dot(o,e);o[3]=a}},{key:"createPlaneFromEyeAndVertexes",value:function(e,t,n){var r=i.vec4.create();i.vec3.subtract(r,t,e);var o=i.vec4.create();i.vec3.subtract(o,n,e);var a=i.vec4.create();i.vec3.cross(a,o,r),i.vec3.normalize(a,a);var s=i.vec3.dot(a,e);return a[3]=-s,a}},{key:"GetPolyFrustum",value:function(e,t,n,r){for(var o,a,s=0;s<=t-1;s++){o=e[(s+1)%t],a=e[s];var l=i.vec4.create();i.vec3.subtract(l,o,a),i.vec3.normalize(l,l);var u=i.vec4.create();i.vec3.add(u,o,a),i.vec3.scale(u,u,.5),i.vec3.subtract(u,u,r),i.vec3.normalize(u,u),n[s]=i.vec4.create(),i.vec3.cross(n[s],u,l),i.vec3.normalize(n[s],n[s]),n[s][3]=1;var c=i.vec4.dot(n[s],o);n[s][3]=-c}}},{key:"calcZ",value:function(e,t,n,r,o){var i=(t[1]-n[1])*(e[0]-n[0])+(n[0]-t[0])*(e[1]-n[1]);if(i>-.001&&i<.001)return Math.min(e[0],t[0],n[0]);var a=((t[1]-n[1])*(r-n[0])+(n[0]-t[0])*(o-n[1]))/i,s=((n[1]-e[1])*(r-n[0])+(e[0]-n[0])*(o-n[1]))/i,l=1-a-s;return a*e[2]+s*t[2]+l*n[2]}},{key:"getBarycentric",value:function(e,t,n,r){var o=i.vec3.create();i.vec3.subtract(o,n,t);var a=i.vec3.create();i.vec3.subtract(a,r,t);var s=i.vec3.create();i.vec3.subtract(s,e,t);var l=i.vec3.dot(o,o),u=i.vec3.dot(o,a),c=i.vec3.dot(a,a),f=i.vec3.dot(s,o),d=i.vec3.dot(s,a),p=l*c-u*u,h=(c*f-u*d)/p,m=(l*d-u*f)/p,v=1-h-m;return i.vec3.fromValues(v,h,m)}},{key:"checkFrustum",value:function(e,t,n,r){for(var o=0;o<n;o++){var a=0;if(a+=i.vec4.dot(e[o],i.vec4.fromValues(t[0][0],t[0][1],t[0][2],1))<0?1:0,a+=i.vec4.dot(e[o],i.vec4.fromValues(t[1][0],t[0][1],t[0][2],1))<0?1:0,a+=i.vec4.dot(e[o],i.vec4.fromValues(t[0][0],t[1][1],t[0][2],1))<0?1:0,a+=i.vec4.dot(e[o],i.vec4.fromValues(t[1][0],t[1][1],t[0][2],1))<0?1:0,a+=i.vec4.dot(e[o],i.vec4.fromValues(t[0][0],t[0][1],t[1][2],1))<0?1:0,a+=i.vec4.dot(e[o],i.vec4.fromValues(t[1][0],t[0][1],t[1][2],1))<0?1:0,a+=i.vec4.dot(e[o],i.vec4.fromValues(t[0][0],t[1][1],t[1][2],1))<0?1:0,a+=i.vec4.dot(e[o],i.vec4.fromValues(t[1][0],t[1][1],t[1][2],1))<0?1:0,8==a)return!1}if(r){a=0;for(var o=0;o<8;o++)a+=r[o][0]>t[1][0]?1:0;if(8==a)return!1;a=0;for(var o=0;o<8;o++)a+=r[o][0]<t[0][0]?1:0;if(8==a)return!1;a=0;for(var o=0;o<8;o++)a+=r[o][1]>t[1][1]?1:0;if(8==a)return!1;a=0;for(var o=0;o<8;o++)a+=r[o][1]<t[0][1]?1:0;if(8==a)return!1;a=0;for(var o=0;o<8;o++)a+=r[o][2]>t[1][2]?1:0;if(8==a)return!1;a=0;for(var o=0;o<8;o++)a+=r[o][2]<t[0][2]?1:0;if(8==a)return!1}return!0}},{key:"getFrustumPoints",value:function(e,t){var n=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,1],[1,1,1],[1,1,-1],[-1,1,-1]],r=i.mat4.create();i.mat4.multiply(r,e,t),i.mat4.invert(r,r);for(var o=[],a=0;a<8;a++)o[a]=i.vec4.fromValues(n[a][0],n[a][1],n[a][2],1),i.vec4.transformMat4(o[a],o[a],r),i.vec4.scale(o[a],o[a],1/o[a][3]);return o}},{key:"transformAABBWithMat4",value:function(e,t){var n=i.vec4.create(),r=i.vec4.create();i.vec4.scale(n,i.vec4.fromValues(e[0],e[1],e[2],e[3]),t[0][0]),i.vec4.scale(r,i.vec4.fromValues(e[0],e[1],e[2],e[3]),t[1][0]);var o=i.vec4.create(),a=i.vec4.create();i.vec4.scale(o,i.vec4.fromValues(e[4],e[5],e[6],e[7]),t[0][1]),i.vec4.scale(a,i.vec4.fromValues(e[4],e[5],e[6],e[7]),t[1][1]);var s=i.vec4.create(),l=i.vec4.create();i.vec4.scale(s,i.vec4.fromValues(e[8],e[9],e[10],e[11]),t[0][2]),i.vec4.scale(l,i.vec4.fromValues(e[8],e[9],e[10],e[11]),t[1][2]);var u=i.vec4.create(),c=i.vec4.create(),f=i.vec4.create(),d=i.vec4.create(),p=i.vec4.create(),h=i.vec4.create();i.vec3.min(u,n,r),i.vec3.max(d,n,r),i.vec3.min(c,o,a),i.vec3.max(p,o,a),i.vec3.min(f,s,l),i.vec3.max(h,s,l);var m=i.vec4.fromValues(e[12],e[13],e[14],0),v=i.vec4.create(),g=i.vec4.create();return i.vec4.add(v,u,c),i.vec4.add(v,v,f),i.vec4.add(v,v,m),i.vec4.add(g,d,p),i.vec4.add(g,g,h),i.vec4.add(g,g,m),[v,g]}}]),e}();t["default"]=a},function(e,t,n){t.glMatrix=n(57),t.mat2=n(58),t.mat2d=n(59),t.mat3=n(60),t.mat4=n(61),t.quat=n(62),t.vec2=n(65),t.vec3=n(63),t.vec4=n(64)},function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var r=Math.PI/180;n.toRadian=function(e){return e*r},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=n},function(e,t,n){var r=n(57),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*s+i*l,e[1]=o*s+a*l,e[2]=r*u+i*c,e[3]=o*u+a*c,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=o*l+a*s,e[2]=r*-s+i*l,e[3]=o*-s+a*l,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=o*s,e[2]=i*l,e[3]=a*l,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},e.exports=o},function(e,t,n){var r=n(57),o={};o.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.fromValues=function(e,t,n,o,i,a){var s=new r.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=n,s[3]=o,s[4]=i,s[5]=a,s},o.set=function(e,t,n,r,o,i,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=n*i-r*o;return l?(l=1/l,e[0]=i*l,e[1]=-r*l,e[2]=-o*l,e[3]=n*l,e[4]=(o*s-i*a)*l,e[5]=(r*a-n*s)*l,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=n[0],c=n[1],f=n[2],d=n[3],p=n[4],h=n[5];return e[0]=r*u+i*c,e[1]=o*u+a*c,e[2]=r*f+i*d,e[3]=o*f+a*d,e[4]=r*p+i*h+s,e[5]=o*p+a*h+l,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*u,e[1]=o*c+a*u,e[2]=r*-u+i*c,e[3]=o*-u+a*c,e[4]=s,e[5]=l,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r*u,e[1]=o*u,e[2]=i*c,e[3]=a*c,e[4]=s,e[5]=l,e},o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=r*u+i*c+s,e[5]=o*u+a*c+l,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=t[0],c=t[1],f=t[2],d=t[3],p=t[4],h=t[5];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-h)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(h))},e.exports=o},function(e,t,n){var r=n(57),o={};o.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromValues=function(e,t,n,o,i,a,s,l,u){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=o,c[4]=i,c[5]=a,c[6]=s,c[7]=l,c[8]=u,c},o.set=function(e,t,n,r,o,i,a,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,d=-c*i+s*l,p=u*i-a*l,h=n*f+r*d+o*p;return h?(h=1/h,e[0]=f*h,e[1]=(-c*r+o*u)*h,e[2]=(s*r-o*a)*h,e[3]=d*h,e[4]=(c*n-o*l)*h,e[5]=(-s*n+o*i)*h,e[6]=p*h,e[7]=(-u*n+r*l)*h,e[8]=(a*n-r*i)*h,e):null},o.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=a*c-s*u,e[1]=o*u-r*c,e[2]=r*s-o*a,e[3]=s*l-i*c,e[4]=n*c-o*l,e[5]=o*i-n*s,e[6]=i*u-a*l,e[7]=r*l-n*u,e[8]=n*a-r*i,e},o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*i-a*l)+n*(-u*o+a*s)+r*(l*o-i*s)},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=n[0],p=n[1],h=n[2],m=n[3],v=n[4],g=n[5],b=n[6],y=n[7],x=n[8];return e[0]=d*r+p*a+h*u,e[1]=d*o+p*s+h*c,e[2]=d*i+p*l+h*f,e[3]=m*r+v*a+g*u,e[4]=m*o+v*s+g*c,e[5]=m*i+v*l+g*f,e[6]=b*r+y*a+x*u,e[7]=b*o+y*s+x*c,e[8]=b*i+y*l+x*f,e},o.mul=o.multiply,o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=n[0],p=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=d*r+p*a+u,e[7]=d*o+p*s+c,e[8]=d*i+p*l+f,e},o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=Math.sin(n),p=Math.cos(n);return e[0]=p*r+d*a,e[1]=p*o+d*s,e[2]=p*i+d*l,e[3]=p*a-d*r,e[4]=p*s-d*o,e[5]=p*l-d*i,e[6]=u,e[7]=c,e[8]=f,e},o.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,f=r*s,d=o*a,p=o*s,h=o*l,m=i*a,v=i*s,g=i*l;return e[0]=1-f-h,e[3]=c-g,e[6]=d+v,e[1]=c+g,e[4]=1-u-h,e[7]=p-m,e[2]=d-v,e[5]=p+m,e[8]=1-u-f,e},o.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],m=t[13],v=t[14],g=t[15],b=n*s-r*a,y=n*l-o*a,x=n*u-i*a,w=r*l-o*s,_=r*u-i*s,k=o*u-i*l,M=c*m-f*h,E=c*v-d*h,A=c*g-p*h,T=f*v-d*m,C=f*g-p*m,S=d*g-p*v,$=b*S-y*C+x*T+w*A-_*E+k*M;return $?($=1/$,e[0]=(s*S-l*C+u*T)*$,e[1]=(l*A-a*S-u*E)*$,e[2]=(a*C-s*A+u*M)*$,e[3]=(o*C-r*S-i*T)*$,e[4]=(n*S-o*A+i*E)*$,e[5]=(r*A-n*C-i*M)*$,e[6]=(m*k-v*_+g*w)*$,e[7]=(v*x-h*k-g*y)*$,e[8]=(h*_-m*x+g*b)*$,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=t[0],p=t[1],h=t[2],m=t[3],v=t[4],g=t[5],b=e[6],y=t[7],x=t[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-y)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-x)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))},e.exports=o},function(e,t,n){var r=n(57),o={scalar:{},SIMD:{}};o.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.fromValues=function(e,t,n,o,i,a,s,l,u,c,f,d,p,h,m,v){var g=new r.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=o,g[4]=i,g[5]=a,g[6]=s,g[7]=l,g[8]=u,g[9]=c,g[10]=f,g[11]=d,g[12]=p,g[13]=h,g[14]=m,g[15]=v,g},o.set=function(e,t,n,r,o,i,a,s,l,u,c,f,d,p,h,m,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=f,e[11]=d,e[12]=p,e[13]=h,e[14]=m,e[15]=v,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.SIMD.transpose=function(e,t){var n,r,o,i,a,s,l,u,c,f;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),a=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,i,0,1,4,5),
l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),u=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,0,l),SIMD.Float32x4.store(e,4,u),a=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(o,i,2,3,6,7),c=SIMD.Float32x4.shuffle(a,s,0,2,4,6),f=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,f),e},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],m=t[13],v=t[14],g=t[15],b=n*s-r*a,y=n*l-o*a,x=n*u-i*a,w=r*l-o*s,_=r*u-i*s,k=o*u-i*l,M=c*m-f*h,E=c*v-d*h,A=c*g-p*h,T=f*v-d*m,C=f*g-p*m,S=d*g-p*v,$=b*S-y*C+x*T+w*A-_*E+k*M;return $?($=1/$,e[0]=(s*S-l*C+u*T)*$,e[1]=(o*C-r*S-i*T)*$,e[2]=(m*k-v*_+g*w)*$,e[3]=(d*_-f*k-p*w)*$,e[4]=(l*A-a*S-u*E)*$,e[5]=(n*S-o*A+i*E)*$,e[6]=(v*x-h*k-g*y)*$,e[7]=(c*k-d*x+p*y)*$,e[8]=(a*C-s*A+u*M)*$,e[9]=(r*A-n*C-i*M)*$,e[10]=(h*_-m*x+g*b)*$,e[11]=(f*x-c*_-p*b)*$,e[12]=(s*E-a*T-l*M)*$,e[13]=(n*T-r*E+o*M)*$,e[14]=(m*y-h*w-v*b)*$,e[15]=(c*w-f*y+d*b)*$,e):null},o.SIMD.invert=function(e,t){var n,r,o,i,a,s,l,u,c,f,d=SIMD.Float32x4.load(t,0),p=SIMD.Float32x4.load(t,4),h=SIMD.Float32x4.load(t,8),m=SIMD.Float32x4.load(t,12);return a=SIMD.Float32x4.shuffle(d,p,0,1,4,5),r=SIMD.Float32x4.shuffle(h,m,0,1,4,5),n=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.shuffle(d,p,2,3,6,7),i=SIMD.Float32x4.shuffle(h,m,2,3,6,7),o=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.mul(o,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(r,a),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),u=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),c),f=SIMD.Float32x4.mul(n,s),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),a=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(f,c)),e):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],m=t[13],v=t[14],g=t[15];return e[0]=s*(d*g-p*v)-f*(l*g-u*v)+m*(l*p-u*d),e[1]=-(r*(d*g-p*v)-f*(o*g-i*v)+m*(o*p-i*d)),e[2]=r*(l*g-u*v)-s*(o*g-i*v)+m*(o*u-i*l),e[3]=-(r*(l*p-u*d)-s*(o*p-i*d)+f*(o*u-i*l)),e[4]=-(a*(d*g-p*v)-c*(l*g-u*v)+h*(l*p-u*d)),e[5]=n*(d*g-p*v)-c*(o*g-i*v)+h*(o*p-i*d),e[6]=-(n*(l*g-u*v)-a*(o*g-i*v)+h*(o*u-i*l)),e[7]=n*(l*p-u*d)-a*(o*p-i*d)+c*(o*u-i*l),e[8]=a*(f*g-p*m)-c*(s*g-u*m)+h*(s*p-u*f),e[9]=-(n*(f*g-p*m)-c*(r*g-i*m)+h*(r*p-i*f)),e[10]=n*(s*g-u*m)-a*(r*g-i*m)+h*(r*u-i*s),e[11]=-(n*(s*p-u*f)-a*(r*p-i*f)+c*(r*u-i*s)),e[12]=-(a*(f*v-d*m)-c*(s*v-l*m)+h*(s*d-l*f)),e[13]=n*(f*v-d*m)-c*(r*v-o*m)+h*(r*d-o*f),e[14]=-(n*(s*v-l*m)-a*(r*v-o*m)+h*(r*l-o*s)),e[15]=n*(s*d-l*f)-a*(r*d-o*f)+c*(r*l-o*s),e},o.SIMD.adjoint=function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,i,0,1,4,5),a=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,i,2,3,6,7),l=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.mul(l,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(s,c),d=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),p=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),c=SIMD.Float32x4.mul(a,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),p),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),h),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),p),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(a,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),p),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(a,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),SIMD.Float32x4.store(e,0,f),SIMD.Float32x4.store(e,4,d),SIMD.Float32x4.store(e,8,p),SIMD.Float32x4.store(e,12,h),e},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],p=e[12],h=e[13],m=e[14],v=e[15],g=t*a-n*i,b=t*s-r*i,y=t*l-o*i,x=n*s-r*a,w=n*l-o*a,_=r*l-o*s,k=u*h-c*p,M=u*m-f*p,E=u*v-d*p,A=c*m-f*h,T=c*v-d*h,C=f*v-d*m;return g*C-b*T+y*A+x*E-w*M+_*k},o.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(e,0,l);var u=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(e,4,c);var f=SIMD.Float32x4.load(n,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(e,8,d);var p=SIMD.Float32x4.load(n,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),a))));return SIMD.Float32x4.store(e,12,h),e},o.scalar.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],m=t[12],v=t[13],g=t[14],b=t[15],y=n[0],x=n[1],w=n[2],_=n[3];return e[0]=y*r+x*s+w*f+_*m,e[1]=y*o+x*l+w*d+_*v,e[2]=y*i+x*u+w*p+_*g,e[3]=y*a+x*c+w*h+_*b,y=n[4],x=n[5],w=n[6],_=n[7],e[4]=y*r+x*s+w*f+_*m,e[5]=y*o+x*l+w*d+_*v,e[6]=y*i+x*u+w*p+_*g,e[7]=y*a+x*c+w*h+_*b,y=n[8],x=n[9],w=n[10],_=n[11],e[8]=y*r+x*s+w*f+_*m,e[9]=y*o+x*l+w*d+_*v,e[10]=y*i+x*u+w*p+_*g,e[11]=y*a+x*c+w*h+_*b,y=n[12],x=n[13],w=n[14],_=n[15],e[12]=y*r+x*s+w*f+_*m,e[13]=y*o+x*l+w*d+_*v,e[14]=y*i+x*u+w*p+_*g,e[15]=y*a+x*c+w*h+_*b,e},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=d,e[10]=p,e[11]=h,e[12]=r*m+s*v+f*g+t[12],e[13]=o*m+l*v+d*g+t[13],e[14]=i*m+u*v+p*g+t[14],e[15]=a*m+c*v+h*g+t[15]),e},o.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(i,a)));return SIMD.Float32x4.store(e,12,l),e},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.SIMD.scale=function(e,t,n){var r,o,i,a=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,1,1,1,1))),i=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(e,t,n,o){var i,a,s,l,u,c,f,d,p,h,m,v,g,b,y,x,w,_,k,M,E,A,T,C,S=o[0],$=o[1],I=o[2],F=Math.sqrt(S*S+$*$+I*I);return Math.abs(F)<r.EPSILON?null:(F=1/F,S*=F,$*=F,I*=F,i=Math.sin(n),a=Math.cos(n),s=1-a,l=t[0],u=t[1],c=t[2],f=t[3],d=t[4],p=t[5],h=t[6],m=t[7],v=t[8],g=t[9],b=t[10],y=t[11],x=S*S*s+a,w=$*S*s+I*i,_=I*S*s-$*i,k=S*$*s-I*i,M=$*$*s+a,E=I*$*s+S*i,A=S*I*s+$*i,T=$*I*s-S*i,C=I*I*s+a,e[0]=l*x+d*w+v*_,e[1]=u*x+p*w+g*_,e[2]=c*x+h*w+b*_,e[3]=f*x+m*w+y*_,e[4]=l*k+d*M+v*E,e[5]=u*k+p*M+g*E,e[6]=c*k+h*M+b*E,e[7]=f*k+m*M+y*E,e[8]=l*A+d*T+v*C,e[9]=u*A+p*T+g*C,e[10]=c*A+h*T+b*C,e[11]=f*A+m*T+y*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.scalar.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+u*r,e[5]=a*o+c*r,e[6]=s*o+f*r,e[7]=l*o+d*r,e[8]=u*o-i*r,e[9]=c*o-a*r,e[10]=f*o-s*r,e[11]=d*o-l*r,e},o.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-u*r,e[1]=a*o-c*r,e[2]=s*o-f*r,e[3]=l*o-d*r,e[8]=i*r+u*o,e[9]=a*r+c*o,e[10]=s*r+f*o,e[11]=l*r+d*o,e},o.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(a,o))),e},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+u*r,e[1]=a*o+c*r,e[2]=s*o+f*r,e[3]=l*o+d*r,e[4]=u*o-i*r,e[5]=c*o-a*r,e[6]=f*o-s*r,e[7]=d*o-l*r,e},o.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,n){var o,i,a,s=n[0],l=n[1],u=n[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<r.EPSILON?null:(c=1/c,s*=c,l*=c,u*=c,o=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=s*s*a+i,e[1]=l*s*a+u*o,e[2]=u*s*a-l*o,e[3]=0,e[4]=s*l*a-u*o,e[5]=l*l*a+i,e[6]=u*l*a+s*o,e[7]=0,e[8]=s*u*a+l*o,e[9]=l*u*a-s*o,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=r+r,l=o+o,u=i+i,c=r*s,f=r*l,d=r*u,p=o*l,h=o*u,m=i*u,v=a*s,g=a*l,b=a*u;return e[0]=1-(p+m),e[1]=f+b,e[2]=d-g,e[3]=0,e[4]=f-b,e[5]=1-(c+m),e[6]=h+v,e[7]=0,e[8]=d+g,e[9]=h-v,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},o.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},o.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3],l=o+o,u=i+i,c=a+a,f=o*l,d=o*u,p=o*c,h=i*u,m=i*c,v=a*c,g=s*l,b=s*u,y=s*c,x=r[0],w=r[1],_=r[2];return e[0]=(1-(h+v))*x,e[1]=(d+y)*x,e[2]=(p-b)*x,e[3]=0,e[4]=(d-y)*w,e[5]=(1-(f+v))*w,e[6]=(m+g)*w,e[7]=0,e[8]=(p+b)*_,e[9]=(m-g)*_,e[10]=(1-(f+h))*_,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var i=t[0],a=t[1],s=t[2],l=t[3],u=i+i,c=a+a,f=s+s,d=i*u,p=i*c,h=i*f,m=a*c,v=a*f,g=s*f,b=l*u,y=l*c,x=l*f,w=r[0],_=r[1],k=r[2],M=o[0],E=o[1],A=o[2];return e[0]=(1-(m+g))*w,e[1]=(p+x)*w,e[2]=(h-y)*w,e[3]=0,e[4]=(p-x)*_,e[5]=(1-(d+g))*_,e[6]=(v+b)*_,e[7]=0,e[8]=(h+y)*k,e[9]=(v-b)*k,e[10]=(1-(d+m))*k,e[11]=0,e[12]=n[0]+M-(e[0]*M+e[4]*E+e[8]*A),e[13]=n[1]+E-(e[1]*M+e[5]*E+e[9]*A),e[14]=n[2]+A-(e[2]*M+e[6]*E+e[10]*A),e[15]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,f=r*s,d=o*a,p=o*s,h=o*l,m=i*a,v=i*s,g=i*l;return e[0]=1-f-h,e[1]=c+g,e[2]=d-v,e[3]=0,e[4]=c-g,e[5]=1-u-h,e[6]=p+m,e[7]=0,e[8]=d+v,e[9]=p-m,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,n,r,o,i,a){var s=1/(n-t),l=1/(o-r),u=1/(i-a);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(o+r)*l,e[10]=(a+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*u,e[15]=0,e},o.perspective=function(e,t,n,r,o){var i=1/Math.tan(t/2),a=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*a,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(o+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((a-s)*l*.5),e[9]=(o-i)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},o.ortho=function(e,t,n,r,o,i,a){var s=1/(t-n),l=1/(r-o),u=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*l,e[14]=(a+i)*u,e[15]=1,e},o.lookAt=function(e,t,n,i){var a,s,l,u,c,f,d,p,h,m,v=t[0],g=t[1],b=t[2],y=i[0],x=i[1],w=i[2],_=n[0],k=n[1],M=n[2];return Math.abs(v-_)<r.EPSILON&&Math.abs(g-k)<r.EPSILON&&Math.abs(b-M)<r.EPSILON?o.identity(e):(d=v-_,p=g-k,h=b-M,m=1/Math.sqrt(d*d+p*p+h*h),d*=m,p*=m,h*=m,a=x*h-w*p,s=w*d-y*h,l=y*p-x*d,m=Math.sqrt(a*a+s*s+l*l),m?(m=1/m,a*=m,s*=m,l*=m):(a=0,s=0,l=0),u=p*l-h*s,c=h*a-d*l,f=d*s-p*a,m=Math.sqrt(u*u+c*c+f*f),m?(m=1/m,u*=m,c*=m,f*=m):(u=0,c=0,f=0),e[0]=a,e[1]=u,e[2]=d,e[3]=0,e[4]=s,e[5]=c,e[6]=p,e[7]=0,e[8]=l,e[9]=f,e[10]=h,e[11]=0,e[12]=-(a*v+s*g+l*b),e[13]=-(u*v+c*g+f*b),e[14]=-(d*v+p*g+h*b),e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],p=e[10],h=e[11],m=e[12],v=e[13],g=e[14],b=e[15],y=t[0],x=t[1],w=t[2],_=t[3],k=t[4],M=t[5],E=t[6],A=t[7],T=t[8],C=t[9],S=t[10],$=t[11],I=t[12],F=t[13],D=t[14],O=t[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(o-x)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-k)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(l-M)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-E)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-A)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-T)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-S)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(h-$)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs($))&&Math.abs(m-I)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(v-F)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(g-D)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(b-O)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(O))},e.exports=o},function(e,t,n){var r=n(57),o=n(60),i=n(63),a=n(64),s={};s.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.rotationTo=function(){var e=i.create(),t=i.fromValues(1,0,0),n=i.fromValues(0,1,0);return function(r,o,a){var l=i.dot(o,a);return l<-.999999?(i.cross(e,t,o),i.length(e)<1e-6&&i.cross(e,n,o),i.normalize(e,e),s.setAxisAngle(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.cross(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,s.normalize(r,r))}}(),s.setAxes=function(){var e=o.create();return function(t,n,r,o){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],s.normalize(t,s.fromMat3(t,e))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.setAxisAngle=function(e,t,n){n=.5*n;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},s.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},s.add=a.add,s.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+a*s+o*u-i*l,e[1]=o*c+a*l+i*s-r*u,e[2]=i*c+a*u+r*l-o*s,e[3]=a*c-r*s-o*l-i*u,e},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=o*l+i*s,e[2]=i*l-o*s,e[3]=a*l-r*s,e},s.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-i*s,e[1]=o*l+a*s,e[2]=i*l+r*s,e[3]=a*l-o*s,e},s.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=o*l-r*s,e[2]=i*l+a*s,e[3]=a*l-i*s,e},s.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(e,t,n,r){var o,i,a,s,l,u=t[0],c=t[1],f=t[2],d=t[3],p=n[0],h=n[1],m=n[2],v=n[3];return i=u*p+c*h+f*m+d*v,i<0&&(i=-i,p=-p,h=-h,m=-m,v=-v),1-i>1e-6?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,l=Math.sin(r*o)/a):(s=1-r,l=r),e[0]=s*u+l*p,e[1]=s*c+l*h,e[2]=s*f+l*m,e[3]=s*d+l*v,e},s.sqlerp=function(){var e=s.create(),t=s.create();return function(n,r,o,i,a,l){return s.slerp(e,r,a,l),s.slerp(t,o,i,l),s.slerp(n,e,t,2*l*(1-l)),n}}(),s.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-o*s,e[3]=i*s,e},s.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*i+a]-t[3*a+i])*n,e[i]=(t[3*i+o]+t[3*o+i])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e},s.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},s.exactEquals=a.exactEquals,s.equals=a.equals,e.exports=s},function(e,t,n){var r=n(57),o={};o.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,n){var o=new r.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2];return e[0]=o*l-i*s,e[1]=i*a-r*l,e[2]=r*s-o*a,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e},o.hermite=function(e,t,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,u=a*(i-1),c=a*(3-2*i);return e[0]=t[0]*s+n[0]*l+r[0]*u+o[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+o[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+o[2]*c,e},o.bezier=function(e,t,n,r,o,i){var a=1-i,s=a*a,l=i*i,u=s*a,c=3*i*s,f=3*l*a,d=l*i;return e[0]=t[0]*u+n[0]*c+r[0]*f+o[0]*d,e[1]=t[1]*u+n[1]*c+r[1]*f+o[1]*d,e[2]=t[2]*u+n[2]*c+r[2]*f+o[2]*d,e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,i=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=o*t,e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*o,f=u*o+l*r-a*i,d=u*i+a*o-s*r,p=-a*r-s*o-l*i;return e[0]=c*u+p*-a+f*-l-d*-s,e[1]=f*u+p*-s+d*-a-c*-l,e[2]=d*u+p*-l+c*-s-f*-a,e},o.rotateX=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateY=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateZ=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var s,l;for(n||(n=3),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],i(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),o.angle=function(e,t){var n=o.fromValues(e[0],e[1],e[2]),r=o.fromValues(t[0],t[1],t[2]);o.normalize(n,n),o.normalize(r,r);var i=o.dot(n,r);return i>1?0:Math.acos(i)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=t[0],s=t[1],l=t[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.exports=o},function(e,t,n){var r=n(57),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],
e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+i*i)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},o.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*o,f=u*o+l*r-a*i,d=u*i+a*o-s*r,p=-a*r-s*o-l*i;return e[0]=c*u+p*-a+f*-l-d*-s,e[1]=f*u+p*-s+d*-a-c*-l,e[2]=d*u+p*-l+c*-s-f*-a,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var s,l;for(n||(n=4),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.exports=o},function(e,t,n){var r=n(57),o={};o.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},o.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var s,l;for(n||(n=2),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],i(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var n=e[0],o=e[1],i=t[0],a=t[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))},e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function h(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:h(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(67),c=r(u),f=n(55),d=(r(f),n(56)),p=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=r;return a.sceneApi=e,a.currentDistance=0,a.isRendered=!0,r}return a(t,e),s(t,[{key:"getDiffuseColor",value:function(){return this.diffuseColor}},{key:"drawBB",value:function(){var e=this.sceneApi.getGlContext(),n=this.sceneApi.shaders.getShaderUniforms(),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBoundingBox",this).call(this);if(r){var o=r.ab,i=r.cd,a=[(o.x+i.x)/2,(o.y+i.y)/2,(o.z+i.z)/2],s=[i.x-a[0],i.y-a[1],i.z-a[2]];e.uniform3fv(n.uBBScale,new Float32Array(s)),e.uniform3fv(n.uBBCenter,new Float32Array(a)),e.uniform3fv(n.uColor,new Float32Array([.819607843,.058,.058])),e.uniformMatrix4fv(n.uPlacementMat,!1,this.placementMatrix),e.drawElements(e.LINES,48,e.UNSIGNED_SHORT,0)}}},{key:"drawTransparentMeshes",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,!0,this.placementMatrix,this.diffuseColor)}},{key:"drawNonTransparentMeshes",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,!1,this.placementMatrix,this.diffuseColor)}},{key:"draw",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"draw",this).call(this,this.placementMatrix,this.diffuseColor)}},{key:"drawInstancedNonTransparentMeshes",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"drawInstanced",this).call(this,!1,e,n,4294967295)}},{key:"drawInstancedTransparentMeshes",value:function(e,n){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"drawInstanced",this).call(this,!0,e,n,4294967295)}},{key:"checkFrustumCullingAndSet",value:function(e,t,n){var r=this.checkFrustumCulling(e,t,n);this.setIsRendered(this.getIsRendered()&&r)}},{key:"checkFrustumCulling",value:function(e,n,r){if(!this.loaded)return!0;var o=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"checkFrustumCulling",this).call(this,e,n,r);return o}},{key:"checkAgainstDepthBuffer",value:function(e,n,r){this.setIsRendered(this.getIsRendered()&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"checkAgainstDepthBuffer",this).call(this,e,n,this.placementMatrix,r))}},{key:"update",value:function(e,n){this.getIsRendered()&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,n,this.placementInvertMatrix)}},{key:"createPlacementMatrix",value:function(e){var t=533.333333333,n=32*t-e.pos.x,r=e.pos.y,o=32*t-e.pos.z,i=d.mat4.create();d.mat4.identity(i),d.mat4.rotateX(i,i,d.glMatrix.toRadian(90)),d.mat4.rotateY(i,i,d.glMatrix.toRadian(90)),d.mat4.translate(i,i,[n,r,o]),d.mat4.rotateY(i,i,d.glMatrix.toRadian(e.rotation.y-270)),d.mat4.rotateZ(i,i,d.glMatrix.toRadian(-e.rotation.x)),d.mat4.rotateX(i,i,d.glMatrix.toRadian(e.rotation.z-90)),d.mat4.scale(i,i,[e.scale/1024,e.scale/1024,e.scale/1024]);var a=d.mat4.create();d.mat4.invert(a,i),this.placementInvertMatrix=a,this.placementMatrix=i}},{key:"calcOwnPosition",value:function(){var e=d.vec4.fromValues(0,0,0,1);d.vec4.transformMat4(e,e,this.placementMatrix),this.position=e}},{key:"calcDistance",value:function(e){function t(e,t){var n=Math.max(e[0][0]-t[0],0,t[0]-e[1][0]),r=Math.max(e[0][1]-t[1],0,t[1]-e[1][1]),o=Math.max(e[0][2]-t[2],0,t[2]-e[1][2]);return Math.sqrt(n*n+r*r+o*o)}this.loaded&&(this.currentDistance=t(this.aabb,e))}},{key:"getCurrentDistance",value:function(){return this.currentDistance}},{key:"getDiameter",value:function(){return this.diameter}},{key:"setIsRendered",value:function(e){this.isRendered=e}},{key:"getIsRendered",value:function(){return this.isRendered}},{key:"load",value:function(e){var n=this;return n.mddf=e,n.diffuseColor=new Float32Array([1,1,1,1]),n.createPlacementMatrix(e),n.calcOwnPosition(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setLoadParams",this).call(this,e.fileName,0)}}]),t}(c["default"]);t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(68),s=r(a),l=n(70),u=r(l),c=n(55),f=r(c),d=n(56),p={Combiners_Opaque:0,Combiners_Decal:1,Combiners_Add:2,Combiners_Mod2x:3,Combiners_Fade:4,Combiners_Mod:5,Combiners_Opaque_Opaque:6,Combiners_Opaque_Add:7,Combiners_Opaque_Mod2x:8,Combiners_Opaque_Mod2xNA:9,Combiners_Opaque_AddNA:10,Combiners_Opaque_Mod:11,Combiners_Mod_Opaque:12,Combiners_Mod_Add:13,Combiners_Mod_Mod2x:14,Combiners_Mod_Mod2xNA:15,Combiners_Mod_AddNA:16,Combiners_Mod_Mod:17,Combiners_Add_Mod:18,Combiners_Mod2x_Mod2x:19},h=function(){function e(t){o(this,e),this.sceneApi=t,this.currentAnimationStart=0,this.currentAnimation=0,this.currentTime=0,this.isAnimated=!1,this.subMeshColors=null,this.hasBillboarded=!1,this.rightHandClosed=!1,this.leftHandClosed=!1,this.localBB=null,this.loaded=!1,this.loading=!1}return i(e,[{key:"getFileNameIdent",value:function(){return this.fileIdent}},{key:"getHasBillboarded",value:function(){return this.hasBillboarded}},{key:"getIsInstancable",value:function(){return!0}},{key:"setLeftHandClosed",value:function(e){this.animationManager.setLeftHandClosed(e)}},{key:"setRightHandClosed",value:function(e){this.animationManager.setRightHandClosed(e)}},{key:"createAABB",value:function(){var e=this.getBoundingBox();if(e){var t=d.vec4.fromValues(e.ab.x,e.ab.y,e.ab.z,1),n=d.vec4.fromValues(e.cd.x,e.cd.y,e.cd.z,1),r=f["default"].transformAABBWithMat4(this.placementMatrix,[t,n]);this.diameter=d.vec3.distance(r[0],r[1]),this.aabb=r}}},{key:"setLoadParams",value:function(e,t,n,r){this.modelName=e,this.skinNum=t,this.meshIds=n,this.replaceTextures=r;var o=e.split(".")[0],i=o+".m2",a=o+"00.skin";i=i.toLowerCase(),a=a.toLowerCase(),this.fileIdent=i+" "+a,this.fileIdent=this.fileIdent.replace(/\0/g,"")}},{key:"load",value:function(){var e=this,t=this.modelName.split(".")[0],n=t+".m2",r=t+"00.skin",o=this.sceneApi.resources.loadM2Geom(n),i=this.sceneApi.resources.loadSkinGeom(r);return s["default"].all([o,i]).then(function(t){var n=t[0],r=t[1];if(e.m2Geom=n,e.skinGeom=r,r.fixData(n.m2File),n){e.sceneApi.getGlContext();n.createVAO(r),e.hasBillboarded=e.checkIfHasBillboarded(),e.makeTextureArray(e.meshIds,e.replaceTextures),e.updateLocalBB([e.m2Geom.m2File.BoundingCorner1,e.m2Geom.m2File.BoundingCorner2]),e.createAABB(),e.initAnimationManager(n.m2File),e.initBoneAnimMatrices(),e.initSubmeshColors(),e.initTextureAnimMatrices(),e.initTransparencies(),e.postLoad(),e.loaded=!0}else $log.log("m2 file failed to load : "+modelName);return!0})}},{key:"postLoad",value:function(){}},{key:"getShaderNames",value:function(e){function t(e,t,n){var r,o,i=e>>4&7,a=7&e,s=e>>4&8,l=8&e;if(1==t)switch(s?r="Diffuse_Env":(r="Diffuse_T2",n&&(r="Diffuse_T1")),i){case 0:o="Combiners_Opaque";break;case 2:o="Combiners_Decal";break;case 3:o="Combiners_Add";break;case 4:o="Combiners_Mod2x";break;case 5:o="Combiners_Fade";break;default:o="Combiners_Mod"}else if(s?(r="Diffuse_Env_T2",l&&(r="Diffuse_Env_Env")):r=8&e?"Diffuse_T1_Env":"Diffuse_T1_T2",i)if(1==i)switch(a){case 0:o="Combiners_Mod_Opaque";break;case 3:o="Combiners_Mod_Add";break;case 4:o="Combiners_Mod_Mod2x";break;case 6:o="Combiners_Mod_Mod2xNA";break;case 7:o="Combiners_Mod_AddNA";break;default:o="Combiners_Mod_Mod"}else{if(3==i)return 1==a&&(o="Combiners_Add_Mod"),0;if(4!=i)return 0;if(1==a)o="Combiners_Mod_Mod2x";else{if(4!=a)return 0;o="Combiners_Mod2x_Mod2x"}}else switch(a){case 0:o="Combiners_Opaque_Opaque";break;case 3:o="Combiners_Opaque_Add";break;case 4:o="Combiners_Opaque_Mod2x";break;case 6:o="Combiners_Opaque_Mod2xNA";break;case 7:o="Combiners_Opaque_AddNA";break;default:o="Combiners_Opaque_Mod"}return{vertex:r,pixel:o}}var n,r,o,i=e.shaderId;if(!(32768&i))return n=t(i,e.op_count,e.textureUnitNum),n||(n=t(i,e.op_count,17,e.textureUnitNum)),n;switch(32767&i){case 0:return 0;case 1:r="Combiners_Opaque_Mod2xNA_Alpha",o="Diffuse_T1_Env";break;case 2:r="Combiners_Opaque_AddAlpha",o="Diffuse_T1_Env";break;case 3:r="Combiners_Opaque_AddAlpha_Alpha",o="Diffuse_T1_Env"}return{vertex:r,pixel:o}}},{key:"makeTextureArray",value:function(e,t){try{for(var n=this,r=this.m2Geom,o=this.skinGeom,i=new Array,a=o.skinFile.header.subMeshes,s=0;s<o.skinFile.header.texs.length;s++){var l={isRendered:!1,isTransparent:!1,isEnviromentMapping:!1,meshIndex:-1,textureTexUnit1:null,textureTexUnit2:null,textureTexUnit3:null},u=o.skinFile.header.texs[s],c=a[u.submeshIndex];if(!(e&&e.length>0&&c.meshID>0&&e[c.meshID/100|0]!=c.meshID%100)){i.push(l);var f=u.op_count,d=u.renderFlagIndex,p=r.m2File.renderFlags[d].blend>=2,h=this.getShaderNames(u);l.layer=u.layer,l.isRendered=!0,l.isTransparent=p,l.meshIndex=u.submeshIndex,l.shaderNames=h;var m;if(u.textureUnitNum<=r.m2File.textUnitLookup.length&&(m=r.m2File.textUnitLookup[u.textureUnitNum],65535==m&&(l.isEnviromentMapping=!0)),f>0){var v=r.m2File.texLookup[u.textureIndex],g=r.m2File.textureDefinition[v];l.texUnit1TexIndex=s,l.xWrapTex1=g.flags&!0,l.yWrapTex1=g.flags&!0,0==g.texType?l.textureUnit1TexName=g.textureName:l.textureUnit1TexName=t[g.texType]}if(f>1){var b=r.m2File.texLookup[u.textureIndex+1],y=r.m2File.textureDefinition[b];l.xWrapTex2=g.flags&!0,l.yWrapTex2=g.flags&!0,l.texUnit2TexIndex=s,0==y.texType?l.textureUnit2TexName=y.textureName:l.textureUnit2TexName=t[y.texType]}if(f>2){var x=r.m2File.texLookup[u.textureIndex+2],w=r.m2File.textureDefinition[x];l.xWrapTex3=g.flags&!0,l.yWrapTex3=g.flags&!0,l.texUnit3TexIndex=s,0==w.texType?l.textureUnit3TexName=w.textureName:l.textureUnit3TexName=t[w.texType]}}}for(var s=0;s<i.length;s++){var l=i[s];l.textureUnit1TexName&&!function(e){n.sceneApi.resources.loadTexture(e.textureUnit1TexName).then(function(t){e.texUnit1Texture=t},function(){})}(l),l.textureUnit2TexName&&!function(e){n.sceneApi.resources.loadTexture(e.textureUnit2TexName).then(function(t){e.texUnit2Texture=t},function(){})}(l),l.textureUnit3TexName&&!function(e){n.sceneApi.resources.loadTexture(e.textureUnit3TexName).then(function(t){e.texUnit3Texture=t},function(){})}(l)}i.sort(function(e,t){return e.layer-t.layer}),this.materialArray=i}catch(_){console.log(_)}}},{key:"checkFrustumCulling",value:function(e,t,n){var r=this.aabb;if(e[0]>r[0][0]&&e[0]<r[1][0]&&e[1]>r[0][1]&&e[1]<r[1][1]&&e[2]>r[0][2]&&e[2]<r[1][2])return!0;var o=f["default"].checkFrustum(t,r,n);return o}},{key:"checkAgainstDepthBuffer",value:function(e,t,n,r){var o=this.getBoundingBox();if(!o)return!1;var i=d.mat4.create();d.mat4.multiply(i,e,t),d.mat4.multiply(i,i,n);var a=o.ab,s=o.cd,l=d.vec4.fromValues(a.x,a.y,a.z,1),u=d.vec4.fromValues(s.x,s.y,s.z,1);d.vec4.transformMat4(l,l,i),d.vec4.transformMat4(u,u,i),d.vec4.scale(l,l,1/l[3]),d.vec4.scale(u,u,1/u[3]);var c=Math.max(0,Math.min(l[2],u[2])),f=Math.min(l[0],u[0]);f=Math.max(f,-1);var p=Math.max(l[0],u[0]);p=Math.min(p,1);var h=Math.min(l[1],u[1]);h=Math.max(h,-1);var m=Math.max(l[1],u[1]);return m=Math.min(m,1),r(f,p,h,m,c)}},{key:"setAnimationId",value:function(e){this.animationManager.setAnimationId(e)}},{key:"getCombinedColor",value:function(e,t,n){var r=e.texs[t.texUnit1TexIndex].colorIndex,o=new Float32Array([1,1,1,1]);if(r>=0&&n){var i=n[r];o=i}return o}},{key:"getTransparency",value:function(e,t,n){var r=1,o=e.texs[t.texUnit1TexIndex].transpIndex;return o>=0&&n&&(r=n[o]),r}},{key:"updateLocalBB",value:function(e){this.localBB=e}},{key:"getBoundingBox",value:function(){return{ab:this.localBB[0],cd:this.localBB[1]}}},{key:"update",value:function(e,t,n){if(this.loaded){var r=d.vec4.create();d.vec4.copy(r,t),d.vec4.transformMat4(r,r,n),this.animationManager.update(e,r,this.bonesMatrices,this.textAnimMatrices,this.subMeshColors,this.transparencies),this.combinedBoneMatrix=this.combineBoneMatrixes();var o=this.skinGeom.skinFile.header;this.materialArray.sort(function(e,t){var n=e.layer-t.layer;if(0==n){var i=o.subMeshes[e.meshIndex].pos,a=o.subMeshes[t.meshIndex].pos,s=d.vec3.create();d.vec3.subtract(s,[i.x,i.y,i.z],r);var l=d.vec3.create();d.vec3.subtract(l,[a.x,a.y,a.z],r);var u=d.vec3.length(s),c=d.vec3.length(l);n=c-u}return n}),this.currentTime+=e}}},{key:"checkIfHasBillboarded",value:function(){for(var e=this.m2Geom.m2File,t=0;t<e.nBones;t++){var n=e.bones[t];if((72&n.flags)>0)return!0}return!1}},{key:"initAnimationManager",value:function(e){this.animationManager=new u["default"](e)}},{key:"initTextureAnimMatrices",value:function(){for(var e=this.m2Geom.m2File,t=new Array(e.nTexAnims),n=0;n<e.nTexAnims;n++)t[n]=d.mat4.create();this.textAnimMatrices=t}},{key:"initBoneAnimMatrices",value:function(){for(var e=this.m2Geom.m2File,t=new Array(e.nBones),n=0;n<e.nBones;n++)t[n]=d.mat4.create();this.bonesMatrices=t}},{key:"initSubmeshColors",value:function(){var e=this.m2Geom.m2File;this.subMeshColors=new Array(e.colors.length);for(var t=0;t<this.subMeshColors.length;t++)this.subMeshColors[t]=[1,1,1,1]}},{key:"initTransparencies",value:function(){var e=this.m2Geom.m2File;this.transparencies=new Array(e.transparencies.length);for(var t=0;t<this.transparencies.length;t++)this.transparencies[t]=1}},{key:"combineBoneMatrixes",value:function(){for(var e=new Float32Array(16*this.bonesMatrices.length),t=0;t<this.bonesMatrices.length;t++)e.set(this.bonesMatrices[t],16*t);return e}},{key:"drawMeshes",value:function(e,t){var n=d.mat4.create();d.mat4.identity(n);for(var r=0;r<this.materialArray.length;r++){var o=this.materialArray[r];if(o.isTransparent^!e){var i=n,a=n,s=this.skinGeom.skinFile.header;if(o.texUnit1TexIndex>=0&&s.texs[o.texUnit1TexIndex]){var l=s.texs[o.texUnit1TexIndex].textureAnim,u=this.m2Geom.m2File.texAnimLookup[l];if(void 0!==u&&this.textAnimMatrices&&u>=0&&u<this.textAnimMatrices.length&&(i=this.textAnimMatrices[u]),o.texUnit2TexIndex>=0){var u=this.m2Geom.m2File.texAnimLookup[l+1];void 0!==u&&this.textAnimMatrices&&u>=0&&u<this.textAnimMatrices.length&&(a=this.textAnimMatrices[u])}}var c=this.getCombinedColor(s,o,this.subMeshColors),f=this.getTransparency(s,o,this.transparencies);if(!(f<1e-4||c[3]<.001)){var h=p[o.shaderNames.pixel];this.m2Geom.drawMesh(r,o,this.skinGeom,c,f,i,a,h,t)}}}}},{key:"drawInstanced",value:function(e,t,n){if(this.m2Geom&&this.skinGeom){this.m2Geom.setupAttributes(this.skinGeom);var r=this.combinedBoneMatrix;this.m2Geom.setupUniforms(null,r,null,e),this.m2Geom.setupPlacementAttribute(n),this.drawMeshes(e,t)}}},{key:"draw",value:function(t,n,r){if(!this.loaded)return void(this.loading||(this.loading=!0,e.prototype.load.apply(this)));var o=this.m2Geom.bindVao();o||this.m2Geom.setupAttributes(this.skinGeom);var i=this.combinedBoneMatrix;this.m2Geom.setupUniforms(n,i,r,t),this.drawMeshes(t,-1),o&&this.m2Geom.unbindVao()}}]),e}();t["default"]=h},function(e,t,n){(function(t,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else{e.exports=t()}}(function(){"use strict";function e(e){return function(){return Z.apply(e,arguments)}}function r(e){return e===Object(e)}function o(e){return"[object StopIteration]"===oe(e)||e instanceof W}function i(e,t){if(z&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(ie)===-1){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var o=n.join("\n"+ie+"\n");e.stack=a(o)}}function a(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var o=t[r];u(o)||s(o)||!o||n.push(o)}return n.join("\n")}function s(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function l(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function u(e){var t=l(e);if(!t)return!1;var n=t[0],r=t[1];return n===q&&r>=H&&r<=ce}function c(){if(z)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=l(n);if(!r)return;return q=r[0],r[1]}}function f(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function d(e){return e instanceof v?e:x(e)?S(e):C(e)}function p(){function e(e){t=e,i.source=e,Q(n,function(t,n){d.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],o=te(p.prototype),i=te(v.prototype);if(i.promiseDispatch=function(e,o,i){var a=K(arguments);n?(n.push(a),"when"===o&&i[1]&&r.push(i[1])):d.nextTick(function(){t.promiseDispatch.apply(t,a)})},i.valueOf=function(){if(n)return i;var e=b(t);return y(e)&&(t=e),e},i.inspect=function(){return t?t.inspect():{state:"pending"}},d.longStackSupport&&z)try{throw new Error}catch(a){i.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){t||e(d(n))},o.fulfill=function(n){t||e(C(n))},o.reject=function(n){t||e(T(n))},o.notify=function(e){t||Q(r,function(t,n){d.nextTick(function(){n(e)})},void 0)},o}function h(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=p();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function m(e){return h(function(t,n){for(var r=0,o=e.length;r<o;r++)d(e[r]).then(t,n)})}function v(e,t,n){void 0===t&&(t=function(e){return T(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=te(v.prototype);if(r.promiseDispatch=function(n,o,i){var a;try{a=e[o]?e[o].apply(r,i):t.call(r,o,i)}catch(s){a=T(s)}n&&n(a)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function g(e,t,n,r){return d(e).then(t,n,r)}function b(e){if(y(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function y(e){return e instanceof v}function x(e){return r(e)&&"function"==typeof e.then}function w(e){return y(e)&&"pending"===e.inspect().state}function _(e){return!y(e)||"fulfilled"===e.inspect().state}function k(e){return y(e)&&"rejected"===e.inspect().state}function M(){ae.length=0,se.length=0,ue||(ue=!0)}function E(e,n){ue&&("object"==typeof t&&"function"==typeof t.emit&&d.nextTick.runAfter(function(){J(se,e)!==-1&&(t.emit("unhandledRejection",n,e),le.push(e))}),se.push(e),n&&"undefined"!=typeof n.stack?ae.push(n.stack):ae.push("(no stack) "+n))}function A(e){if(ue){var n=J(se,e);n!==-1&&("object"==typeof t&&"function"==typeof t.emit&&d.nextTick.runAfter(function(){var r=J(le,e);r!==-1&&(t.emit("rejectionHandled",ae[n],e),le.splice(r,1))}),se.splice(n,1),ae.splice(n,1))}}function T(e){var t=v({when:function(t){return t&&A(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return E(t,e),t}function C(e){return v({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return re(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function S(e){var t=p();return d.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function $(e){return v({isDef:function(){}},function(t,n){return P(e,t,n)},function(){return d(e).inspect()})}function I(e,t,n){return d(e).spread(t,n)}function F(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=n[e](t)}catch(s){return T(s)}return a.done?d(a.value):g(a.value,r,i)}try{a=n[e](t)}catch(s){return o(s)?d(s.value):T(s)}return g(a,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function D(e){d.done(d.async(e)())}function O(e){throw new W(e)}function R(e){return function(){return I([this,j(arguments)],function(t,n){return e.apply(t,n)})}}function P(e,t,n){return d(e).dispatch(t,n)}function j(e){return g(e,function(e){var t=0,n=p();return Q(e,function(r,o,i){var a;y(o)&&"fulfilled"===(a=o.inspect()).state?e[i]=a.value:(++t,g(o,function(r){e[i]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:i,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function B(e){if(0===e.length)return d.resolve();var t=d.defer(),n=0;return Q(e,function(r,o,i){function a(e){t.resolve(e)}function s(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function l(e){t.notify({index:i,value:e})}var u=e[i];n++,g(u,a,s,l)},void 0),t.promise}function L(e){return g(e,function(e){return e=ee(e,d),g(j(ee(e,function(e){return g(e,X,X)})),function(){return e})})}function N(e){return d(e).allSettled()}function U(e,t){return d(e).then(void 0,void 0,t)}function V(e,t){return d(e).nodeify(t)}var z=!1;try{throw new Error}catch(G){z=!!G.stack}var q,W,H=c(),X=function(){},Y=function(){function e(){for(var e,t;o.next;)o=o.next,e=o.task,o.task=void 0,t=o.domain,t&&(o.domain=void 0,t.enter()),r(e,t);for(;u.length;)e=u.pop(),r(e);a=!1}function r(t,n){try{t()}catch(r){if(l)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var o={task:void 0,next:null},i=o,a=!1,s=void 0,l=!1,u=[];if(Y=function(e){i=i.next={task:e,domain:l&&t.domain,next:null},a||(a=!0,s())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)l=!0,s=function(){t.nextTick(e)};else if("function"==typeof n)s="undefined"!=typeof window?n.bind(window,e):function(){n(e)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){s=f,c.port1.onmessage=e,e()};var f=function(){c.port2.postMessage(0)};s=function(){setTimeout(e,0),f()}}else s=function(){setTimeout(e,0)};return Y.runAfter=function(e){u.push(e),a||(a=!0,s())},Y}(),Z=Function.call,K=e(Array.prototype.slice),Q=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),J=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),ee=e(Array.prototype.map||function(e,t){var n=this,r=[];return Q(n,function(o,i,a){r.push(e.call(t,i,a,n))},void 0),r}),te=Object.create||function(e){function t(){}return t.prototype=e,new t},ne=e(Object.prototype.hasOwnProperty),re=Object.keys||function(e){var t=[];for(var n in e)ne(e,n)&&t.push(n);return t},oe=e(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ie="From previous event:";d.resolve=d,d.nextTick=Y,d.longStackSupport=!1,"object"==typeof t&&t&&{NODE_ENV:"production"}.Q_DEBUG&&(d.longStackSupport=!0),d.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(K(arguments,1)):e.resolve(n)}},d.Promise=h,d.promise=h,h.race=m,h.all=j,h.reject=T,h.resolve=d,d.passByCopy=function(e){return e},v.prototype.passByCopy=function(){return this},d.join=function(e,t){return d(e).join(t)},v.prototype.join=function(e){return d([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},d.race=m,v.prototype.race=function(){return this.then(d.race)},d.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return T(n)}}function o(e){if("function"==typeof t){i(e,s);try{return t(e)}catch(n){return T(n)}}return T(e)}function a(e){return"function"==typeof n?n(e):e}var s=this,l=p(),u=!1;return d.nextTick(function(){s.promiseDispatch(function(e){u||(u=!0,l.resolve(r(e)))},"when",[function(e){u||(u=!0,l.resolve(o(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(r){if(n=!0,!d.onerror)throw r;d.onerror(r)}n||l.notify(t)}]),l.promise},d.tap=function(e,t){return d(e).tap(t)},v.prototype.tap=function(e){return e=d(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},d.when=g,v.prototype.thenResolve=function(e){return this.then(function(){return e})},d.thenResolve=function(e,t){return d(e).thenResolve(t)},v.prototype.thenReject=function(e){return this.then(function(){throw e})},d.thenReject=function(e,t){return d(e).thenReject(t)},d.nearer=b,d.isPromise=y,d.isPromiseAlike=x,d.isPending=w,v.prototype.isPending=function(){return"pending"===this.inspect().state},d.isFulfilled=_,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},d.isRejected=k,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ae=[],se=[],le=[],ue=!0;d.resetUnhandledRejections=M,d.getUnhandledReasons=function(){return ae.slice()},d.stopUnhandledRejectionTracking=function(){M(),ue=!1},M(),d.reject=T,d.fulfill=C,d.master=$,d.spread=I,v.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},d.async=F,d.spawn=D,d["return"]=O,d.promised=R,d.dispatch=P,v.prototype.dispatch=function(e,t){var n=this,r=p();return d.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},d.get=function(e,t){return d(e).dispatch("get",[t])},v.prototype.get=function(e){return this.dispatch("get",[e])},d.set=function(e,t,n){return d(e).dispatch("set",[t,n])},v.prototype.set=function(e,t){return this.dispatch("set",[e,t])},d.del=d["delete"]=function(e,t){return d(e).dispatch("delete",[t])},v.prototype.del=v.prototype["delete"]=function(e){return this.dispatch("delete",[e])},d.mapply=d.post=function(e,t,n){return d(e).dispatch("post",[t,n])},v.prototype.mapply=v.prototype.post=function(e,t){return this.dispatch("post",[e,t])},d.send=d.mcall=d.invoke=function(e,t){return d(e).dispatch("post",[t,K(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(e){return this.dispatch("post",[e,K(arguments,1)])},d.fapply=function(e,t){return d(e).dispatch("apply",[void 0,t])},v.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},d["try"]=d.fcall=function(e){return d(e).dispatch("apply",[void 0,K(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},d.fbind=function(e){var t=d(e),n=K(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(K(arguments))])}},v.prototype.fbind=function(){var e=this,t=K(arguments);return function(){return e.dispatch("apply",[this,t.concat(K(arguments))])}},d.keys=function(e){return d(e).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},d.all=j,v.prototype.all=function(){return j(this)},d.any=B,v.prototype.any=function(){return B(this)},d.allResolved=f(L,"allResolved","allSettled"),v.prototype.allResolved=function(){return L(this)},d.allSettled=N,v.prototype.allSettled=function(){return this.then(function(e){return j(ee(e,function(e){function t(){return e.inspect()}return e=d(e),e.then(t,t)}))})},d.fail=d["catch"]=function(e,t){return d(e).then(void 0,t)},v.prototype.fail=v.prototype["catch"]=function(e){return this.then(void 0,e)},d.progress=U,v.prototype.progress=function(e){return this.then(void 0,void 0,e)},d.fin=d["finally"]=function(e,t){return d(e)["finally"](t)},v.prototype.fin=v.prototype["finally"]=function(e){return e=d(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},d.done=function(e,t,n,r){return d(e).done(t,n,r)},v.prototype.done=function(e,n,r){var o=function(e){d.nextTick(function(){if(i(e,a),!d.onerror)throw e;d.onerror(e)})},a=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),a.then(void 0,o)},d.timeout=function(e,t,n){return d(e).timeout(t,n)},v.prototype.timeout=function(e,t){var n=p(),r=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},d.delay=function(e,t){return void 0===t&&(t=e,e=void 0),d(e).delay(t)},v.prototype.delay=function(e){return this.then(function(t){var n=p();return setTimeout(function(){n.resolve(t)},e),n.promise})},d.nfapply=function(e,t){return d(e).nfapply(t)},v.prototype.nfapply=function(e){var t=p(),n=K(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},d.nfcall=function(e){var t=K(arguments,1);return d(e).nfapply(t)},v.prototype.nfcall=function(){var e=K(arguments),t=p();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},d.nfbind=d.denodeify=function(e){var t=K(arguments,1);return function(){var n=t.concat(K(arguments)),r=p();return n.push(r.makeNodeResolver()),d(e).fapply(n).fail(r.reject),r.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var e=K(arguments);return e.unshift(this),d.denodeify.apply(void 0,e)},d.nbind=function(e,t){var n=K(arguments,2);return function(){function r(){return e.apply(t,arguments)}var o=n.concat(K(arguments)),i=p();return o.push(i.makeNodeResolver()),d(r).fapply(o).fail(i.reject),i.promise}},v.prototype.nbind=function(){var e=K(arguments,0);return e.unshift(this),d.nbind.apply(void 0,e)},d.nmapply=d.npost=function(e,t,n){return d(e).npost(t,n)},v.prototype.nmapply=v.prototype.npost=function(e,t){var n=K(t||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},d.nsend=d.nmcall=d.ninvoke=function(e,t){var n=K(arguments,2),r=p();return n.push(r.makeNodeResolver()),d(e).dispatch("post",[t,n]).fail(r.reject),r.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(e){var t=K(arguments,1),n=p();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},d.nodeify=V,v.prototype.nodeify=function(e){return e?void this.then(function(t){d.nextTick(function(){e(null,t)})},function(t){d.nextTick(function(){e(t)})}):this},d.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ce=c();return d})}).call(t,n(31),n(69).setImmediate)},function(e,t,n){(function(e,r){function o(e,t){this._id=e,this._clearFn=t}var i=n(31).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,l={},u=0;t.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=u++,r=!(arguments.length<2)&&s.call(arguments,1);return l[n]=!0,i(function(){l[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete l[e]}}).call(t,n(69).setImmediate,n(69).clearImmediate)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(56),a=function(){function e(t){r(this,e),this.m2File=t,this.mainAnimationId=0,this.mainAnimationIndex=0,this.currentAnimationIndex=0,this.currentAnimationTime=0,this.currentAnimationPlayedTimes=0,this.nextSubAnimationIndex=-1,this.nextSubAnimationTime=0,this.firstCalc=!0,this.initBonesIsCalc(),this.initBlendMatrices(),this.initGlobalSequenceTimes(),this.calculateBoneTree(),this.setAnimationId(0)||this.setAnimationId(147)}return o(e,[{key:"setAnimationId",value:function(e,t){var n=this.m2File,r=-1;if(0==n.nAnimationLookup&&n.nAnimations>0)for(var o=0;o<n.nAnimations;o++){var i=n.animations[o];if(i.animation_id==e){r=o;break}}else e<n.nAnimationLookup&&(r=n.animationLookup[e]);return r>-1&&(t||r!=this.mainAnimationIndex)&&(this.mainAnimationId=e,this.mainAnimationIndex=r,this.currentAnimationIndex=r,this.currentAnimationTime=0,this.currentAnimationPlayedTimes=0,this.nextSubAnimationIndex=-1,this.nextSubAnimationTime=0,this.nextSubAnimationActive=!1,this.firstCalc=!0),r>-1}},{key:"setLeftHandClosed",value:function(e){this.leftHandClosed=e}},{key:"setRightHandClosed",value:function(e){this.rightHandClosed=e}},{key:"blendMatrices",value:function(e,t,n,r){for(var o=0;o<n;o++){var a=t[o],s=e[o];i.mat4.subtract(a,a,s),i.mat4.multiplyScalar(a[o],a[o],1-r),i.mat4.add(s,a,s)}}},{key:"update",value:function(e,t,n,r,o,i){var a=this.m2File,s=a.animations[this.mainAnimationIndex],l=a.animations[this.currentAnimationIndex];this.currentAnimationTime+=e;for(var u=0;u<this.globalSequenceTimes.length;u++)a.globalSequences[u]>0&&(this.globalSequenceTimes[u]+=e,this.globalSequenceTimes[u]=this.globalSequenceTimes[u]%a.globalSequences[u]);if(this.nextSubAnimationIndex<0&&s.next_animation>-1){var c=Math.floor(32768*Math.random()),f=0,d=this.mainAnimationIndex,p=a.animations[d];for(f+=p.probability;f<c&&p.next_animation>-1;)d=p.next_animation,p=a.animations[d],f+=p.probability;this.nextSubAnimationIndex=d,this.nextSubAnimationTime=0}var h=l.length-this.currentAnimationTime,m=0,v=1;this.nextSubAnimationIndex>-1&&(p=a.animations[this.nextSubAnimationIndex],m=p.blend_time);var g=-1;m>0&&h<m&&(this.firstCalc=!0,this.nextSubAnimationTime=(m-h)%p.length,v=h/m,g=this.nextSubAnimationIndex),this.currentAnimationTime>=l.length&&(this.nextSubAnimationIndex>-1?(this.currentAnimationIndex=this.nextSubAnimationIndex,this.currentAnimationTime=this.nextSubAnimationTime,this.firstCalc=!0,this.nextSubAnimationIndex=-1,this.nextSubAnimationActive=!1):this.currentAnimationTime=this.currentAnimationTime%l.length),this.calcAnimMatrixes(r,this.currentAnimationIndex,this.currentAnimationTime),g>-1&&(this.calcAnimMatrixes(this.blendMatrixArray,g,this.nextSubAnimationTime),this.blendMatrices(r,this.blendMatrixArray,a.nTexAnims,v));for(var u=0;u<a.nBones;u++)this.bonesIsCalculated[u]=!1;if(this.calcBones(n,this.currentAnimationIndex,this.currentAnimationTime,t),g>-1){for(var u=0;u<a.nBones;u++)this.bonesIsCalculated[u]=!1;this.calcBones(this.blendMatrixArray,g,this.nextSubAnimationTime,t),this.blendMatrices(n,this.blendMatrixArray,a.nBones,v)}this.calcSubMeshColors(o,this.currentAnimationIndex,this.currentAnimationTime,g,this.nextSubAnimationTime,v),this.calcTransparencies(i,this.currentAnimationIndex,this.currentAnimationTime,g,this.nextSubAnimationTime,v)}},{key:"initGlobalSequenceTimes",value:function(){for(var e=this.m2File,t=new Array(e.nGlobalSequences>0?e.nGlobalSequences:0),n=0;n<t.length;n++)t[n]=0;this.globalSequenceTimes=t}},{key:"initBonesIsCalc",value:function(){for(var e=this.m2File,t=new Array(e.nBones),n=0;n<e.nBones;n++)t[n]=!1;this.bonesIsCalculated=t}},{key:"initBlendMatrices",value:function(){for(var e=this.m2File,t=Math.max(e.nBones,e.nTexAnims),n=new Array(t),r=0;r<t;r++)n[r]=i.mat4.create();this.blendMatrixArray=n}},{key:"interpolateValues",value:function(e,t,n,r,o,a,s){if(0==t)return o;if(t>=1){if(1==s||3==s){var l=i.vec4.create();i.quat.slerp(l,o,a,(e-n)/(r-n)),i.vec4.normalize(l,l)}else{var u=i.vec4.create();i.vec4.subtract(u,a,o),i.vec4.scale(u,u,(e-n)/(r-n));var l=i.vec4.create();i.vec4.add(l,o,u)}return l}}},{key:"getTimedValue",value:function(e,t,n,r,o){function i(e){return 30518044e-12*e-1}function a(e,t){return 0==t?[e.x,e.y,e.z,0]:1==t?[i(e[0]),i(e[1]),i(e[2]),i(e[3])]:2==t?[e/32767,e/32767,e/32767,e/32767]:3==t?[e.x,e.y,e.z,e.w]:void 0}var s=o.global_sequence,l=o.interpolation_type,u=o.timestampsPerAnimation[r],c=o.valuesPerAnimation[r];if(void 0==u&&(r=0,u=o.timestampsPerAnimation[r],c=o.valuesPerAnimation[r]),0!=u.length){s>=0&&(t=this.globalSequenceTimes[s],n=this.m2File.globalSequences[s]);var f,d=u.length;if(d>1){var p=t%n;if(p>u[d-1]&&p<=n)f=a(c[0],e);else{f=a(u[d-1],e);for(var h=0;h<d;h++)if(u[h]>p){var m=c[h-1],v=c[h],g=u[h-1],b=u[h];m=a(m,e),v=a(v,e),f=this.interpolateValues(p,l,g,b,m,v,e);break}}}else f=a(c[0],e);return f}}},{key:"calcAnimationTransform",value:function(e,t,n,r,o,a,s,l,u){if(c=i.mat4.translate(e,e,n),o.translation.valuesPerAnimation.length>0){var c=this.getTimedValue(0,l,s.length,a,o.translation),f=[0,0,0,0];c&&(f=[c[0],c[1],c[2],0]),i.mat4.translate(e,e,f),this.isAnimated=!0}if(null!=u)i.mat4.multiply(e,e,u);else if(o.rotation.valuesPerAnimation.length>0){var d=t?1:3,p=this.getTimedValue(d,l,s.length,a,o.rotation);if(p){var h=i.mat4.create();i.mat4.fromQuat(h,p),i.mat4.multiply(e,e,h)}this.isAnimated=!0}if(o.scale.valuesPerAnimation.length>0){var m=this.getTimedValue(0,l,s.length,a,o.scale);m&&i.mat4.scale(e,e,[m[0],m[1],m[2]]),this.isAnimated=!0}i.mat4.translate(e,e,r)}},{key:"calcAnimMatrixes",value:function(e,t,n){var r=this.m2File,o=i.vec4.fromValues(.5,.5,0,0),a=i.vec4.create();i.vec4.negate(a,o);for(var s=r.animations[t],l=0;l<r.texAnims.length;l++){var u=r.texAnims[l];i.mat4.identity(e[l]),this.calcAnimationTransform(e[l],!1,o,a,u,t,s,n,null)}}},{key:"calculateBoneTree",value:function(){for(var e=this.m2File,t=new Array(e.bones.length),n=0;n<e.bones.length;n++){for(var r=[],o=0;o<e.bones.length;o++)e.bones[o].parent_bone==n&&r.push(o);t[n]=r}this.childBonesLookup=t}},{key:"calcBones",value:function(e,t,n,r){var o=this.m2File;if(this.firstCalc||this.isAnimated){for(var i=0;i<o.nBones;i++)this.calcBoneMatrix(e,i,t,n,r);var a=-1;if(o.animationLookup.length>15&&o.animationLookup[15]>0&&(a=o.animationLookup[15]),a>=0){if(this.leftHandClosed)for(var s=0;s<5;s++)if(o.keyBoneLookup[13+s]>-1){var l=o.keyBoneLookup[13+s];this.bonesIsCalculated[l]=!1,this.calcBoneMatrix(e,l,a,1,r),this.calcChildBones(e,l,a,1,r)}if(this.rightHandClosed)for(var s=0;s<5;s++)if(o.keyBoneLookup[8+s]>-1){var l=o.keyBoneLookup[8+s];this.bonesIsCalculated[l]=!1,this.calcBoneMatrix(e,l,a,1,r),this.calcChildBones(e,l,a,1,r)}}}this.firstCalc=!1}},{key:"calcBoneBillboardMatrix",value:function(e,t,n,r,o){var a=i.vec3.create(),s=i.vec4.create();if(i.vec4.copy(s,o),n>=0){var l=e[n],u=i.mat4.create();i.mat4.invert(u,l),i.vec4.transformMat4(s,s,u)}if(i.vec4.subtract(s,s,r),i.vec3.normalize(a,s),(64&t.flags)>0){var c=i.vec3.fromValues(0,0,1),f=i.vec3.create();i.vec3.cross(f,c,a),i.vec3.normalize(f,f),i.vec3.cross(a,f,c),i.vec3.normalize(a,a),i.vec3.cross(f,c,a),i.vec3.normalize(f,f)}else{var f=i.vec3.create();i.vec3.cross(f,[0,0,1],a),i.vec3.normalize(f,f);var c=i.vec3.create();i.vec3.cross(c,a,f),i.vec3.normalize(c,c)}var d=i.mat4.fromValues(a[0],a[1],a[2],0,f[0],f[1],f[2],0,c[0],c[1],c[2],0,0,0,0,1);return d}},{key:"calcBoneMatrix",value:function(e,t,n,r,o){if(!this.bonesIsCalculated[t]){var a=this.m2File,s=a.animations[n],l=a.bones[t],u=l.parent_bone,c=e[t];if(c=i.mat4.identity(c),u>=0&&(this.calcBoneMatrix(e,u,n,r,o),i.mat4.multiply(c,c,e[u])),0==(632&l.flags))return void(this.bonesIsCalculated[t]=!0);var f=i.vec4.fromValues(l.pivot.x,l.pivot.y,l.pivot.z,0),d=i.vec4.fromValues(-l.pivot.x,-l.pivot.y,-l.pivot.z,0),p=null;((8&l.flags)>0||(64&l.flags)>0)&&(p=this.calcBoneBillboardMatrix(e,l,u,f,o),this.isAnimated=!0),this.calcAnimationTransform(c,!0,f,d,l,n,s,r,p),this.bonesIsCalculated[t]=!0}}},{key:"calcChildBones",value:function(e,t,n,r,o,i,a,s){for(var l=this.childBonesLookup[t],u=0;u<l.length;u++){var c=l[u];this.bonesIsCalculated[c]=!1,this.calcBoneMatrix(e,c,n,r,o,i,a,s),this.calcChildBones(e,c,n,r,o,i,a,s)}}},{key:"calcSubMeshColors",value:function(e,t,n,r,o,i){var a=this.m2File.colors,s=this.m2File.animations[t],l=null;r>-1&&(l=this.m2File.animations[r]);for(var u=0;u<a.length;u++){var c=this.getTimedValue(0,n,s.length,t,a[u].color),f=[1,1,1,1];if(c&&(f=[c[0],c[1],c[2],1]),null!=l&&(c=this.getTimedValue(0,o,l.length,r,a[u].color))){var d=[c[0],c[1],c[2],1];f=this.interpolateValues(1-i,1,0,1,f,d,0)}e[u]=f;var p=this.getTimedValue(2,n,s.length,t,a[u].alpha),h=1;if(p&&(h=p[0]),null!=l&&(p=this.getTimedValue(2,n,s.length,t,a[u].alpha))){var m=p[0];h=h*i+(1-i)*m}e[u][3]=h}}},{key:"calcTransparencies",value:function(e,t,n,r,o,i){var a=this.m2File.transparencies,s=this.m2File.animations[t],l=null;r>-1&&(l=this.m2File.animations[r]);for(var u=0;u<a.length;u++){var c=this.getTimedValue(2,n,s.length,t,a[u].values),f=1;if(c&&(f=c[0]),null!=l&&(c=this.getTimedValue(2,o,l.length,r,a[u].values))){var d=c[0];f=f*i+(1-i)*d}e[u]=f}}}]),e}();t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function v(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:v(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(67),c=r(u),f=n(22),d=r(f),p=n(55),h=(r(p),n(56)),m=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n;return r.sceneApi=e,r.currentDistance=0,r.isRendered=!0,r.useLocalLighting=!0,r.wmoObject=null,n}return a(t,e),s(t,[{key:"setWmoObject",value:function(e){this.wmoObject=e}},{key:"getDiffuseColor",value:function(){return this.useLocalLighting?this.diffuseColor:new Float32Array([1,1,1,1])}},{key:"checkFrustumCullingAndSet",value:function(e,t,n){if(!d["default"].getUsePortalCulling()){var r=this.checkFrustumCulling(e,t,n);this.setIsRendered(this.getIsRendered()&&r)}}},{key:"checkFrustumCulling",value:function(e,n,r,o){if(!this.loaded)return!0;var i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"checkFrustumCulling",this).call(this,e,n,r);return i}},{key:"checkAgainstDepthBuffer",value:function(e,n,r){this.setIsRendered(this.getIsRendered()&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"checkAgainstDepthBuffer",this).call(this,e,n,this.placementMatrix,r))}},{key:"update",value:function(e,n){this.getIsRendered()&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,n,this.placementInvertMatrix)}},{key:"drawTransparentMeshes",value:function(){var e=this.getDiffuseColor();this.draw(!0,this.placementMatrix,e)}},{key:"drawNonTransparentMeshes",value:function(){var e=this.getDiffuseColor();this.draw(!1,this.placementMatrix,e)}},{key:"drawInstancedNonTransparentMeshes",value:function(e,t){this.drawInstanced(!1,e,t)}},{key:"drawInstancedTransparentMeshes",value:function(e,t){this.drawInstanced(!0,e,t)}},{key:"drawBB",value:function(){var e=this.sceneApi.getGlContext(),n=this.sceneApi.shaders.getShaderUniforms(),r=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBoundingBox",this).call(this);if(r){var o=r.ab,i=r.cd,a=[(o.x+i.x)/2,(o.y+i.y)/2,(o.z+i.z)/2],s=[i.x-a[0],i.y-a[1],i.z-a[2]];e.uniform3fv(n.uBBScale,new Float32Array(s)),e.uniform3fv(n.uBBCenter,new Float32Array(a)),e.uniform3fv(n.uColor,new Float32Array([.819607843,.058,.058])),e.uniformMatrix4fv(n.uPlacementMat,!1,this.placementMatrix),e.drawElements(e.LINES,48,e.UNSIGNED_SHORT,0)}}},{key:"createPlacementMatrix",value:function(e,t){var n=h.mat4.create();h.mat4.identity(n),h.mat4.multiply(n,n,t),h.mat4.translate(n,n,[e.pos.x,e.pos.y,e.pos.z]);var r=h.mat4.create();h.mat4.fromQuat(r,[e.rotation.imag.x,e.rotation.imag.y,e.rotation.imag.z,e.rotation.real]),h.mat4.multiply(n,n,r),h.mat4.scale(n,n,[e.scale,e.scale,e.scale]);var o=h.mat4.create();h.mat4.invert(o,n),this.placementInvertMatrix=o,this.placementMatrix=n}},{key:"calcOwnPosition",value:function(){var e=h.vec4.fromValues(0,0,0,1);h.vec4.transformMat4(e,e,this.placementMatrix),this.position=e}},{key:"calcDistance",value:function(e){function t(e,t){var n=Math.max(e[0][0]-t[0],0,t[0]-e[1][0]),r=Math.max(e[0][1]-t[1],0,t[1]-e[1][1]),o=Math.max(e[0][2]-t[2],0,t[2]-e[1][2]);return Math.sqrt(n*n+r*r+o*o)}this.loaded&&(this.currentDistance=t(this.aabb,e))}},{key:"setUseLocalLighting",value:function(e){this.useLocalLighting=e}},{key:"getCurrentDistance",value:function(){return this.currentDistance}},{key:"getDiameter",value:function(){return this.diameter}},{key:"setIsRendered",value:function(e){this.isRendered=e}},{key:"getIsRendered",value:function(){return this.isRendered}},{key:"load",value:function(e,n,r){var o=this;o.doodad=e;var i=e.color,a=[255&i,i>>8&255,i>>16&255,i>>24&255];return a[0]/=255,a[1]/=255,a[2]/=255,a[3]/=255,o.diffuseColor=new Float32Array(a),o.createPlacementMatrix(e,n),o.calcOwnPosition(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setLoadParams",this).call(this,e.modelName,0)}},{key:"postLoad",value:function(){this.wmoObject.needUpdateWorldGroupBB()}}]),t}(c["default"]);t["default"]=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function m(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);
if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:m(o,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},u=n(67),c=r(u),f=n(22),d=(r(f),n(55)),p=(r(d),n(56)),h=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.diffuseColor=new Float32Array([1,1,1,1]),n.aabb=null,n}return a(t,e),s(t,[{key:"calcDistance",value:function(e){this.currentDistance=0}},{key:"getIsInstancable",value:function(){return!1}},{key:"getCurrentDistance",value:function(){return 0}},{key:"setIsRendered",value:function(e){this.isRendered=e}},{key:"getIsRendered",value:function(){return this.isRendered}},{key:"getDiameter",value:function(){return 100}},{key:"checkFrustumCullingAndSet",value:function(e,t,n){if(this.aabb){var r=this.checkFrustumCulling(e,t,n);this.setIsRendered(this.getIsRendered()&&r)}else this.setIsRendered(!1)}},{key:"getDiffuseColor",value:function(){return new Float32Array([1,1,1,1])}},{key:"update",value:function(e,t){}},{key:"objectUpdate",value:function(e,n){this.getIsRendered()&&l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,n,this.placementInvertMatrix)}},{key:"createPlacementMatrix",value:function(e,t,n,r){var o=p.mat4.create();p.mat4.identity(o),p.mat4.translate(o,o,e),r?p.mat4.multiply(o,o,r):p.mat4.rotateZ(o,o,t),p.mat4.scale(o,o,[n,n,n]);var i=p.mat4.create();p.mat4.invert(i,o),this.placementInvertMatrix=i,this.placementMatrix=o}},{key:"createPlacementMatrixFromParent",value:function(e,t,n){var r=e.m2Geom.m2File,o=r.attachLookups[t],i=r.attachments[o],a=i.bone,s=e.bonesMatrices[a],l=p.mat4.create();p.mat4.identity(l),p.mat4.multiply(l,l,e.placementMatrix),p.mat4.multiply(l,l,s),p.mat4.translate(l,l,[i.pos.x,i.pos.y,i.pos.z,0]);var u=p.mat4.create();p.mat4.invert(u,l),this.placementInvertMatrix=u,this.placementMatrix=l}},{key:"drawTransparentMeshes",value:function(){this.draw(!0,this.placementMatrix,this.diffuseColor)}},{key:"drawNonTransparentMeshes",value:function(){this.draw(!1,this.placementMatrix,this.diffuseColor)}},{key:"drawInstancedNonTransparentMeshes",value:function(e,t){this.drawInstanced(!1,e,t)}},{key:"drawInstancedTransparentMeshes",value:function(e,t){this.drawInstanced(!0,e,t)}}]),t}(c["default"]);t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(68),s=r(a),l=n(56),u=n(55),c=r(u),f=n(22),d=r(f),p=function(){function e(t){o(this,e);var n=this;n.sceneApi=t,n.wmoGroupArray=[],n.doodadsArray=[],n.drawGroup=[],n.drawDoodads=[],n.drawExterior=!1,n.exteriorPortals=[],n.groupDoodads=[]}return i(e,[{key:"getFileNameIdent",value:function(){return this.fileName}},{key:"hasPortals",value:function(){return this.wmoObj&&this.wmoObj.portalInfos&&this.wmoObj.portalInfos.length>0}},{key:"updateWorldGroupBBWithM2",value:function(){var e=this.currentDoodadSet;if(e)for(var t=0;t<this.wmoGroupArray.length;t++)if(this.wmoGroupArray[t]){var n=this.wmoGroupArray[t].wmoGroupFile.doodadRefs,r=this.worldGroupBorders[t];if(n)for(var o=0;o<n.length;o++){var i=n[o];if(!(i-e.index<0||i>e.index+e.number-1)){var a=this.doodadsArray[i-e.index];((64&this.wmoObj.groupInfos[t].flags)>0||(8&this.wmoObj.groupInfos[t].flags)>0)&&a.setUseLocalLighting(!1),a.aabb&&(r[0]=l.vec3.fromValues(Math.min(a.aabb[0][0],r[0][0]),Math.min(a.aabb[0][1],r[0][1]),Math.min(a.aabb[0][2],r[0][2])),r[1]=l.vec3.fromValues(Math.max(a.aabb[1][0],r[1][0]),Math.max(a.aabb[1][1],r[1][1]),Math.max(a.aabb[1][2],r[1][2])))}}}}},{key:"setDoodadGroupDrawing",value:function(e,t){var n=(this.wmoObj.groupInfos[e],this.currentDoodadSet);if(n&&this.wmoGroupArray[e]){var r=this.wmoGroupArray[e].wmoGroupFile.doodadRefs;if(r)for(var o=0;o<r.length;o++){var i=r[o];if(!(i-n.index<0||i>n.index+n.number-1)){var a=this.doodadsArray[i-n.index];a&&a.setIsRendered(t)}}}}},{key:"queryBspTree",value:function(e,t,n,r){if(t!=-1)if(4&n[t].planeType)r.push(t);else if(0==n[t].planeType){var o=c["default"].checkFrustum([[-1,0,0,n[t].fDist]],e,1),i=c["default"].checkFrustum([[1,0,0,-n[t].fDist]],e,1);o&&this.queryBspTree(e,n[t].children1,n,r),i&&this.queryBspTree(e,n[t].children2,n,r)}else if(1==n[t].planeType){var o=c["default"].checkFrustum([[0,-1,0,n[t].fDist]],e,1),i=c["default"].checkFrustum([[0,1,0,-n[t].fDist]],e,1);o&&this.queryBspTree(e,n[t].children1,n,r),i&&this.queryBspTree(e,n[t].children2,n,r)}else if(2==n[t].planeType){var o=c["default"].checkFrustum([[0,0,-1,n[t].fDist]],e,1),i=c["default"].checkFrustum([[0,0,1,-n[t].fDist]],e,1);o&&this.queryBspTree(e,n[t].children1,n,r),i&&this.queryBspTree(e,n[t].children2,n,r)}}},{key:"getTopAndBottomTriangleFromBsp",value:function(e,t,n){for(var r=t.nodes,o=-999999,i=999999,a=99999,s=0;s<n.length;s++)for(var u=r[n[s]],f=u.firstFace;f<u.firstFace+u.numFaces;f++){var d=t.indicies[3*t.mobr[f]+0],p=t.indicies[3*t.mobr[f]+1],h=t.indicies[3*t.mobr[f]+2],m=l.vec3.fromValues(t.verticles[3*d+0],t.verticles[3*d+1],t.verticles[3*d+2]),v=l.vec3.fromValues(t.verticles[3*p+0],t.verticles[3*p+1],t.verticles[3*p+2]),g=l.vec3.fromValues(t.verticles[3*h+0],t.verticles[3*h+1],t.verticles[3*h+2]),b=Math.min(m[0],v[0],g[0]),y=Math.min(m[1],v[1],g[1]),x=(Math.min(m[2],v[2],g[2]),Math.max(m[0],v[0],g[0])),w=Math.max(m[1],v[1],g[1]),_=(Math.max(m[2],v[2],g[2]),e[0]>b&&e[0]<x&&e[1]>y&&e[1]<w);if(_){var k=c["default"].calcZ(m,v,g,e[0],e[1]),M=l.vec3.fromValues(t.normals[3*d+0],t.normals[3*d+1],t.normals[3*d+2]),E=l.vec3.fromValues(t.normals[3*p+0],t.normals[3*p+1],t.normals[3*p+2]),A=l.vec3.fromValues(t.normals[3*h+0],t.normals[3*h+1],t.normals[3*h+2]),T=c["default"].getBarycentric(l.vec3.fromValues(e[0],e[1],k),m,v,g);if(!(T[0]<0||T[1]<0||T[2]<0)){var C=T[0]*M[2]+T[1]*E[2]+T[2]*A[2];if(C>0){var S=e[2]-k;S>0&&S<a&&(i=k)}else o=Math.max(k,o)}}}return{topZ:o,bottomZ:i}}},{key:"isInsideInterior",value:function(e){if(!this.wmoGroupArray||0==this.wmoGroupArray.length)return-1;var t=l.vec4.create();l.vec4.transformMat4(t,e,this.placementInvertMatrix);var n=t[0]>this.wmoObj.BoundBoxCorner1.x&&t[0]<this.wmoObj.BoundBoxCorner2.x&&t[1]>this.wmoObj.BoundBoxCorner1.y&&t[1]<this.wmoObj.BoundBoxCorner2.y&&t[2]>this.wmoObj.BoundBoxCorner1.z&&t[2]<this.wmoObj.BoundBoxCorner2.z;if(!n)return-1;for(var r=0,o=0,i=-1,a=[],s=0;s<this.wmoGroupArray.length;s++)if(this.wmoGroupArray[s]){var u=this.volumeWorldGroupBorders[s],c=this.wmoObj.groupInfos[s];if(0!=(8192&c.flags)){o++;var f=e[0]>u[0][0]&&e[0]<u[1][0]&&e[1]>u[0][1]&&e[1]<u[1][1]&&e[2]>u[0][2]&&e[2]<u[1][2];if(f){r++,i=s;var d=.4,p=l.vec3.fromValues(t[0]-d,t[1]-d,c.bb1.z-d),h=l.vec3.fromValues(t[0]+d,t[1]+d,c.bb2.z+d),m=0,v=this.wmoGroupArray[s].wmoGroupFile.nodes,g=[];this.queryBspTree([p,h],m,v,g);var b=this.getTopAndBottomTriangleFromBsp(t,this.wmoGroupArray[s].wmoGroupFile,g);if(!(b.bottomZ>99999&&b.topZ<-99999||b.bottomZ<99999&&t[2]<b.bottomZ||(b.bottomZ>b.topZ&&(t[2]>b.bottomZ?b.topZ=-99999:b.bottomZ=99999),b.topZ>-99999&&t[2]>b.topZ)))for(;m>=0&&0==(4&v[m].planeType);){0==v[m].planeType?m=t[0]<v[m].fDist?v[m].children1:v[m].children2:1==v[m].planeType?m=t[1]<v[m].fDist?v[m].children1:v[m].children2:2==v[m].planeType&&(m=t[2]<v[m].fDist?v[m].children1:v[m].children2),a.push({topBottom:b,groupId:s,bspList:g,nodeId:m})}}}}for(var y=999999,x=null,s=0;s<a.length;s++)if(a[s].topBottom.bottomZ<99999&&a[s].topBottom.topZ>-99999){var w=a[s].topBottom.topZ-a[s].topBottom.bottomZ;w<y&&(y=w,this.currentNodeId=g,this.currentGroupId=s,x={groupId:a[s].groupId,nodeId:a[s].nodeId})}else y>9999&&(x={groupId:a[s].groupId,nodeId:a[s].nodeId});return null!=x?x:(this.currentNodeId=-1,this.currentGroupId=-1,{groupId:-1,nodeId:-1})}},{key:"resetDrawnForAllGroups",value:function(e){for(var t=0;t<this.wmoGroupArray.length;t++){var n=this.wmoObj.groupInfos[t];0!=(8192&n.flags)&&e?this.drawGroup[t]=!0:this.drawGroup[t]=e}}},{key:"setIsRenderedForDoodads",value:function(){for(var e=0;e<this.wmoGroupArray.length;e++)this.drawDoodads[e]&&this.setDoodadGroupDrawing(e,this.drawDoodads[e])}},{key:"checkGroupFrustum",value:function(e,t,n,r){var o=this.worldGroupBorders[t],i=e[0]>o[0][0]&&e[0]<o[1][0]&&e[1]>o[0][1]&&e[1]<o[1][1]&&e[2]>o[0][2]&&e[2]<o[1][2],a=i||c["default"].checkFrustum(n,o,n.length,r),o=this.volumeWorldGroupBorders[t],i=e[0]>o[0][0]&&e[0]<o[1][0]&&e[1]>o[0][1]&&e[1]<o[1][1]&&e[2]>o[0][2]&&e[2]<o[1][2],s=i||c["default"].checkFrustum(n,o,n.length,r);return[a,s]}},{key:"checkFrustumCulling",value:function(e,t,n,r){if(this.volumeWorldGroupBorders){for(var o=0;o<this.doodadsArray.length;o++)this.doodadsArray[o]&&this.doodadsArray[o].setIsRendered(!1);for(var o=0;o<this.wmoGroupArray.length;o++)if(this.drawGroup[o]){var i=this.checkGroupFrustum(e,o,r);this.drawGroup[o]=i[1],this.drawDoodads[o]=i[0]}}}},{key:"update",value:function(){this.updateWorldGroupBB&&(this.updateWorldGroupBBWithM2(),this.updateWorldGroupBB=!1)}},{key:"needUpdateWorldGroupBB",value:function(){this.updateWorldGroupBB=!0}},{key:"loadGeom",value:function(e,t){var n=this;return n.sceneApi.resources.loadWmoGeom(t).then(function(t){n.wmoGroupArray[e]=t,t.loadTextures(n.wmoObj.momt)},function(){})}},{key:"loadDoodads",value:function(e){var t=this;if(t.wmoObj.modd){t.currentDoodadSet=t.wmoObj.mods[e];var n=t.wmoObj.mods[e],r=t.wmoObj.modd;this.doodadsArray=new Array(n.number);for(var o=0;o<n.number;o++){var i=r[n.index+o];this.doodadsArray[o]=this.loadDoodad(o,i)}}}},{key:"loadDoodad",value:function(e,t){var n=this,r=n.sceneApi.objects.loadWmoM2Obj(t,n.placementMatrix,!1);return r.setWmoObject(this),r}},{key:"load",value:function(e){var t=s["default"].defer(),n=this,r=e.fileName,o=e.doodadSet;this.fileName=r,n.createPlacementMatrix(e);var i=n.sceneApi.resources.loadWmoMain(r);return i.then(function(e){n.wmoObj=e,n.wmoGroupArray=new Array(e.nGroups),n.groupDoodads=new Array(e.nGroups),n.createPortalsVBO(),n.createWorldPortalVerticies();for(var i=new Array(e.nGroups),a=r.substr(0,r.lastIndexOf(".")),s=0;s<e.nGroups;s++){for(var l=s.toString();3!=l.length;)l="0"+l;i[s]=n.loadGeom(s,a+"_"+l+".wmo")}n.loadDoodads(o);n.createWorldGroupBB(),t.resolve(n)},function(){}),t.promise}},{key:"createWorldGroupBB",value:function(){for(var e=new Array(this.wmoGroupArray.length),t=new Array(this.wmoGroupArray.length),n=0;n<this.wmoGroupArray.length;n++){var r=this.wmoObj.groupInfos[n],o=r.bb1,i=r.bb2,a=l.vec4.fromValues(o.x,o.y,o.z,1),s=l.vec4.fromValues(i.x,i.y,i.z,1),u=c["default"].transformAABBWithMat4(this.placementMatrix,[a,s]);e[n]=u,t[n]=u.slice(0)}this.worldGroupBorders=e,this.volumeWorldGroupBorders=t}},{key:"createPlacementMatrix",value:function(e){var t=533.333333333,n=32*t-e.pos.x,r=e.pos.y,o=32*t-e.pos.z,i=l.mat4.create();l.mat4.identity(i),l.mat4.rotateX(i,i,l.glMatrix.toRadian(90)),l.mat4.rotateY(i,i,l.glMatrix.toRadian(90)),l.mat4.translate(i,i,[n,r,o]),l.mat4.rotateY(i,i,l.glMatrix.toRadian(e.rotation.y-270)),l.mat4.rotateZ(i,i,l.glMatrix.toRadian(-e.rotation.x)),l.mat4.rotateX(i,i,l.glMatrix.toRadian(e.rotation.z-90));var a=l.mat4.create();l.mat4.invert(a,i),this.placementInvertMatrix=a,this.placementMatrix=i}},{key:"createPortalsVBO",value:function(){var e=this.sceneApi.getGlContext();if(0!=this.wmoObj.nPortals){this.vertexVBO=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexVBO),e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.wmoObj.portalVerticles),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);for(var t=[],n=0;n<this.wmoObj.portalInfos.length;n++)for(var r=this.wmoObj.portalInfos[n],o=r.base_index,i=0;i<r.index_count-2;i++)t.push(o+0),t.push(o+i+1),t.push(o+i+2);this.indexVBO=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexVBO),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(t),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}}},{key:"createGroupDoodadsArrays",value:function(){}},{key:"createWorldPortalVerticies",value:function(){var e=this.wmoObj.portalVerticles;if(e){for(var t=new Array(e.length),n=0;n<this.wmoObj.portalInfos.length;n++){for(var r=this.wmoObj.portalInfos[n],o=r.base_index,i=r.plane,a=new Array(r.index_count),s=0;s<r.index_count;s++)a[s]=l.vec4.fromValues(e[3*(o+s)],e[3*(o+s)+1],e[3*(o+s)+2],1),l.vec4.transformMat4(a[s],a[s],this.placementMatrix);c["default"].sortVec3ArrayAgainstPlane(a,i),t[n]=a}this.worldPortalVerticles=t}else var t=new Array(0)}},{key:"draw",value:function(){var e=this,t=this.sceneApi.getGlContext(),n=this.sceneApi.shaders.getShaderUniforms();if(this.wmoObj){this.placementMatrix&&t.uniformMatrix4fv(n.uPlacementMat,!1,this.placementMatrix);var r=[255&this.wmoObj.ambColor,this.wmoObj.ambColor>>8&255,this.wmoObj.ambColor>>16&255,this.wmoObj.ambColor>>24&255];r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255;for(var o=0;o<this.wmoGroupArray.length;o++)if(this.wmoGroupArray[o]){if(!this.drawGroup[o]&&void 0!==this.drawGroup[o])continue;var i=null;d["default"].getRenderBSP()&&(i=this.currentGroupId==o?this.currentNodeId.map(function(t){return e.wmoGroupArray[o].wmoGroupFile.nodes[t]}):null),this.wmoGroupArray[o].draw(r,i)}}}},{key:"drawPortalBased",value:function(e){var t=this,n=this.sceneApi.getGlContext();this.sceneApi;if(this.wmoObj){var r=[255&this.wmoObj.ambColor,this.wmoObj.ambColor>>8&255,this.wmoObj.ambColor>>16&255,this.wmoObj.ambColor>>24&255];if(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255,e){this.sceneApi.shaders.activateWMOShader();var o=this.sceneApi.shaders.getShaderUniforms();this.placementMatrix&&n.uniformMatrix4fv(o.uPlacementMat,!1,this.placementMatrix);for(var i=0;i<this.interiorPortals.length;i++){var a=this.interiorPortals[i].groupId;this.interiorPortals[i].portalIndex;this.wmoGroupArray[a]&&this.wmoGroupArray[a].draw()}if(this.exteriorPortals.length>0)for(var i=0;i<this.wmoGroupArray.length;i++)(8&this.wmoObj.groupInfos[i].flags)>0&&this.drawGroup[i]&&this.wmoGroupArray[i].draw();this.sceneApi.shaders.deactivateWMOShader()}else{this.sceneApi.shaders.activateWMOShader();var o=this.sceneApi.shaders.getShaderUniforms();this.placementMatrix&&n.uniformMatrix4fv(o.uPlacementMat,!1,this.placementMatrix);for(var i=0;i<this.wmoGroupArray.length;i++)if(this.wmoGroupArray[i]){if(!this.drawGroup[i]&&void 0!==this.drawGroup[i])continue;var s=null;d["default"].getRenderBSP()&&(s=this.currentGroupId==i?this.currentNodeId.map(function(e){return t.wmoGroupArray[i].wmoGroupFile.nodes[e]}):null),this.wmoGroupArray[i].draw(r,s)}this.sceneApi.shaders.deactivateWMOShader()}}}},{key:"drawBB",value:function(){var e=this.sceneApi.getGlContext(),t=this.sceneApi.shaders.getShaderUniforms(),n=l.mat4.create();l.mat4.identity(n),e.uniformMatrix4fv(t.uPlacementMat,!1,new Float32Array(n));for(var r=0;r<this.wmoGroupArray.length;r++)if(this.wmoGroupArray[r]&&this.wmoGroupArray[r].wmoGroupFile&&(this.drawGroup[r]||void 0===this.drawGroup[r])){var o=this.volumeWorldGroupBorders[r][0],i=this.volumeWorldGroupBorders[r][1],a=[(o[0]+i[0])/2,(o[1]+i[1])/2,(o[2]+i[2])/2],s=[i[0]-a[0],i[1]-a[1],i[2]-a[2]];e.uniform3fv(t.uBBScale,new Float32Array(s)),e.uniform3fv(t.uBBCenter,new Float32Array(a)),e.uniform3fv(t.uColor,new Float32Array([.058,.058,.819607843])),e.drawElements(e.LINES,48,e.UNSIGNED_SHORT,0)}}},{key:"drawPortals",value:function(){if(this.wmoObj&&0!=this.wmoObj.nPortals){var e=this.sceneApi.getGlContext(),t=this.sceneApi.shaders.getShaderUniforms(),n=this.sceneApi.shaders.getShaderAttributes();e.bindBuffer(e.ARRAY_BUFFER,this.vertexVBO),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexVBO),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.vertexAttribPointer(n.aPosition,3,e.FLOAT,!1,0,0),this.placementMatrix&&e.uniformMatrix4fv(t.uPlacementMat,!1,this.placementMatrix),e.disable(e.CULL_FACE),e.depthMask(!1);for(var r=0,o=0;o<this.wmoObj.portalInfos.length;o++){var i=this.wmoObj.portalInfos[o];i.isFalse?e.uniform4fv(t.uColor,new Float32Array([.819607843,.058,.058,.3])):e.uniform4fv(t.uColor,new Float32Array([.058,.058,.819607843,.3])),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,2*r),r+=3*(i.index_count-2)}e.depthMask(!0),e.disable(e.BLEND)}}},{key:"drawPortalFrustumsBB",value:function(){var e=this.sceneApi.getGlContext(),t=this.sceneApi.shaders.getShaderUniforms();if(this.portalViewFrustums){e.disable(e.DEPTH_TEST),e.uniformMatrix4fv(t.uPlacementMat,!1,this.placementMatrix);for(var n=0;n<this.portalViewFrustums.length;n++)if(this.wmoGroupArray[n]&&this.wmoGroupArray[n].wmoGroupFile&&this.portalViewFrustums[n]){var r=this.portalViewFrustums[n],o=l.mat4.create();l.mat4.invert(o,r),e.uniformMatrix4fv(t.uInverseViewProjection,!1,new Float32Array(o)),e.drawElements(e.LINES,48,e.UNSIGNED_SHORT,0)}e.enable(e.DEPTH_TEST)}}},{key:"drawGroupM2Objects",value:function(e,t){var n=(this.wmoObj.groupInfos[e],this.currentDoodadSet);if(n&&this.wmoGroupArray[index]){var r=this.wmoGroupArray[index].wmoGroupFile.doodadRefs;if(r)for(var o=0;o<r.length;o++){var i=r[o];if(!t[i]&&!(i-n.index<0||i>n.index+n.number-1)){var a=this.doodadsArray[i-n.index];a&&a.getIsRendered()&&(a.draw(),t[i]=!0)}}}}},{key:"drawBspVerticles",value:function(){if(this.wmoObj){var e=this.sceneApi.getGlContext(),t=this.sceneApi.shaders.getShaderUniforms(),n=this.sceneApi.shaders.getShaderAttributes();if(e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.disable(e.BLEND),e.depthMask(!0),e.disable(e.CULL_FACE),e.disable(e.BLEND),this.currentGroupId>=0&&this.wmoGroupArray[this.currentGroupId]){var r=this.wmoGroupArray[this.currentGroupId].wmoGroupFile.nodes[this.currentNodeId];e.bindBuffer(e.ARRAY_BUFFER,this.wmoGroupArray[this.currentGroupId].combinedVBO),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.wmoGroupArray[this.currentGroupId].mobrVBO),e.vertexAttribPointer(n.aPosition,3,e.FLOAT,!1,0,0),e.uniform4fv(t.uColor,new Float32Array([.819607843,.819607843,.058,0])),r&&e.drawElements(e.TRIANGLES,3*r.numFaces,e.UNSIGNED_SHORT,3*r.firstFace*2)}e.depthMask(!0),e.disable(e.BLEND)}}}]),e}();t["default"]=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this.sceneApi=t,this.mdxObjectList=[],this.sceneObjNumMap={},this.lastUpdatedNumber=0}return r(e,[{key:"addMDXObject",value:function(e){this.sceneObjNumMap[e.sceneNumber]||(this.sceneObjNumMap[e.sceneNumber]=e,this.mdxObjectList.push(e))}},{key:"updatePlacementVBO",value:function(){var e=this.sceneApi.getGlContext(),t=this.placementVBO;t||(t=e.createBuffer(),this.maxAmountWritten=0);for(var n=0,r=[],o=0;o<this.mdxObjectList.length;o++){var i=this.mdxObjectList[o];if(i.getIsRendered()){for(var a=i.placementMatrix,s=i.getDiffuseColor(),l=0;l<16;l++)r[20*n+l]=a[l];for(var l=0;l<4;l++)r[20*n+16+l]=s[l];n++}}if(n>0)if(e.bindBuffer(e.ARRAY_BUFFER,t),n>this.maxAmountWritten){var u=new Float32Array(r);e.bufferData(e.ARRAY_BUFFER,u,e.DYNAMIC_DRAW),this.maxAmountWritten=n}else e.bufferSubData(e.ARRAY_BUFFER,0,new Float32Array(r));this.placementVBO=t,this.lastUpdatedNumber=n}},{key:"drawInstancedNonTransparentMeshes",value:function(e){if(this.mdxObjectList[0]){for(var t,n=0;n<this.mdxObjectList.length;n++)e[this.mdxObjectList[n].sceneNumber]=!0,this.mdxObjectList[n].getIsRendered()&&(t=this.mdxObjectList[n]);t.drawInstancedNonTransparentMeshes(this.lastUpdatedNumber,this.placementVBO)}}},{key:"drawInstancedTransparentMeshes",value:function(e){if(this.mdxObjectList[0]){for(var t,n=0;n<this.mdxObjectList.length;n++)e[this.mdxObjectList[n].sceneNumber]=!0,this.mdxObjectList[n].getIsRendered()&&(t=this.mdxObjectList[n]);t.drawInstancedTransparentMeshes(this.lastUpdatedNumber,this.placementVBO)}}}]),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(55),s=r(a),l=n(56),u=function(){function e(){o(this,e)}return i(e,[{key:"startTraversingFromInteriorWMO",value:function(e,t,n,r,o,i){var a=l.vec4.create();l.vec4.transformMat4(a,n,e.placementInvertMatrix);for(var s=new Array(e.doodadsArray.length),u=0;u<s.length;u++)s[u]=!1;for(var c=new Array(e.doodadsArray.length),u=0;u<c.length;u++)c[u]=99;for(var f=new Array(e.wmoGroupArray.length),u=0;u<f.length;u++)f[u]=!1;for(var d=new Array(e.wmoObj.portalInfos.length),u=0;u<d.length;u++)d[u]=!1;this.traverseDoodadsVis=s,this.checkedDoodadsVis=c,this.transverseVisitedGroups=f,this.transverseVisitedPortals=d,this.portalViewFrustums=new Array(e.wmoObj.portalInfos.length),this.exteriorPortals=new Array,this.interiorPortals=new Array,this.interiorPortals.push({groupId:t,portalIndex:-1,frustumPlanes:[i],level:0}),this.transverseGroupWMO(e,t,!0,n,a,r,o,[i],0);for(var u=0;u<s.length;u++)e.doodadsArray[u].setIsRendered(!!s[u]);if(this.exteriorPortals.length>0)for(var u=0;u<e.wmoGroupArray.length;u++)(8&e.wmoObj.groupInfos[u].flags)>0&&e.checkGroupFrustum(n,u,i)[1]&&(this.exteriorPortals.push({groupId:u,portalIndex:-1,frustumPlanes:[i],level:0}),this.transverseGroupWMO(e,u,!1,n,a,r,o,[i],0));for(var u=0;u<e.wmoGroupArray.length;u++)e.drawGroup[u]=f[u];e.exteriorPortals=this.exteriorPortals,e.interiorPortals=this.interiorPortals}},{key:"startTraversingFromExterior",value:function(e,t,n,r,o,i){var a=l.vec4.create();l.vec4.transformMat4(a,t,e.placementInvertMatrix);for(var s=new Array(e.wmoGroupArray.length),u=0;u<s.length;u++)s[u]=!1;for(var c=new Array(e.wmoObj.portalInfos.length),u=0;u<c.length;u++)c[u]=!1;this.transverseVisitedGroups=s,this.transverseVisitedPortals=c,this.exteriorPortals=new Array,this.interiorPortals=new Array;for(var u=0;u<e.wmoGroupArray.length;u++)(8&e.wmoObj.groupInfos[u].flags)>0&&e.checkGroupFrustum(t,u,o,i)[1]&&(this.exteriorPortals.push({groupId:u,portalIndex:-1,frustumPlanes:[o],level:0}),this.transverseGroupWMO(e,u,!1,t,a,n,r,[o],0));for(var u=0;u<e.wmoGroupArray.length;u++)e.drawGroup[u]=s[u];e.exteriorPortals=this.exteriorPortals,e.interiorPortals=this.interiorPortals}},{key:"checkAllDoodads",value:function(e,t){for(var n=new Array(e.doodadsArray.length),r=0;r<n.length;r++)n[r]=!1;for(var o=new Array(e.doodadsArray.length),r=0;r<o.length;r++)o[r]=99;this.traverseDoodadsVis=n,this.checkedDoodadsVis=o;for(var r=0;r<this.interiorPortals.length;r++){var i=this.interiorPortals[r];this.checkGroupDoodads(e,i.groupId,t,i.frustumPlanes,i.level)}for(var r=0;r<this.exteriorPortals.length;r++){var i=this.exteriorPortals[r];this.checkGroupDoodads(e,i.groupId,t,i.frustumPlanes,i.level)}for(var r=0;r<n.length;r++)e.doodadsArray[r].setIsRendered(!!n[r])}},{key:"setVisibleGroupDoodads",value:function(e,t){if(e.wmoGroupArray[t]){var n=e.wmoGroupArray[t].wmoGroupFile.doodadRefs,r=e.currentDoodadSet;if(n)for(var o=0;o<n.length;o++){var i=n[o];if(!(i-r.index<0||i>r.index+r.number-1)){var a=i-r.index;this.traverseDoodadsVis[a]=!0}}}}},{key:"checkGroupDoodads",value:function(e,t,n,r,o){if(e.wmoGroupArray[t]){var i=e.wmoGroupArray[t].wmoGroupFile.doodadRefs,a=e.currentDoodadSet;if(i)for(var s=0;s<i.length;s++){var l=i[s];if(!(l-a.index<0||l>a.index+a.number-1)){var u=l-a.index;if(!(this.checkedDoodadsVis[u]<o)){this.checkedDoodadsVis[u]=o;var c=e.doodadsArray[u],f=this.traverseDoodadsVis[u];if(!f){for(var d=!0,p=0;d&&p<r.length;p++)d=d&&c.checkFrustumCulling(n,r[p],r[p].length);this.traverseDoodadsVis[u]=f|d}}}}}}},{key:"transverseGroupWMO",value:function(e,t,n,r,o,i,a,u,c){e.drawGroup;if(this.transverseVisitedGroups[t]=!0,!(c>8)&&e.wmoGroupArray[t])for(var f=e.wmoGroupArray[t].wmoGroupFile.mogp.moprIndex,d=e.wmoGroupArray[t].wmoGroupFile.mogp.numItems,p=(e.wmoObj.portalVerticles,f);p<f+d;p++){var h=e.wmoObj.portalRelations[p],m=e.wmoObj.portalInfos[h.portal_index],v=h.group_index,g=m.plane;if(!this.transverseVisitedPortals[h.portal_index]&&(n||0!=(8192&e.wmoObj.groupInfos[v].flags))){var b=l.vec4.dot(l.vec4.fromValues(g.x,g.y,g.z,g.w),o);b+=.01*h.side;var y=h.side<0?b<=0:function(e){return 0};if(y&&!(m.index_count<4)){for(var x=e.worldPortalVerticles[h.portal_index],w=x.slice(0),_=0;_<w.length;_++)w[_]=l.vec4.clone(w[_]);for(var k=!0,_=0;k&&_<u.length;_++)k=k&&s["default"].planeCull(w,u[_]);if(k){s["default"].sortVec3ArrayAgainstPlane(w,g),this.transverseVisitedPortals[h.portal_index]=!0;for(var M=u.length,E=[],A=h.side<0,_=0;_<w.length;++_){var T=(_+1)%w.length,C=s["default"].createPlaneFromEyeAndVertexes(r,w[_],w[T]);A&&l.vec4.scale(C,C,-1),E.push(C)}(8192&e.wmoObj.groupInfos[v].flags)>0?(this.interiorPortals.push({groupId:v,portalIndex:h.portal_index,frustumPlanes:[E],level:c+1}),this.transverseGroupWMO(e,v,n,r,o,i,a,[E],c+1)):n&&(this.exteriorPortals.push({groupId:v,portalIndex:h.portal_index,frustumPlanes:[E],level:c+1}),this.transverseGroupWMO(e,v,!1,r,o,i,a,[E],c+1)),u.length=M}}}}}}]),e}();t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(77),s=r(a),l=n(79),u=r(l),c=n(56),f=[],d=function(){function e(t){o(this,e),this.objectMap={},this.sceneApi=t,this.lastPacketIndex=0,this.playPackets=!1}return i(e,[{key:"update",value:function(e,t){if(this.playPackets){this.serverTime+=e,this.clientTime+=e;for(var n=this.lastPacketIndex;n<f.length&&this.clientTime>f[n].tickcount;n++)this.processPacket(f[n]),this.lastPacketIndex=n+1}for(var r in this.objectMap)this.objectMap.hasOwnProperty(r)&&this.objectMap[r].update(e,t,this.serverTime)}},{key:"processPacket",value:function(e){if("SMSG_COMPRESSED_UPDATE_OBJECT"==e.opcode){for(var t=e.payload.updates,n=0;n<t.length;n++)if("UPDATE_TYPE_CREATE_FULL"==t[n].updateType){var r=t[n],o=r.updateFields,i=r.objectGuid;if(this.objectMap[i])continue;if(3==r.obj_type){var a=new s["default"](this.sceneApi);if(this.objectMap[i]=a,a.setSpeedWalk(r.speedWalk),a.setSpeedRun(r.speedRun),a.setSpeedRunBack(r.speedRunBack),a.setSpeedSwim(r.speedSwim),a.setSpeedSwimBack(r.speedSwimBack),a.setSpeedFly(r.speedFly),a.setSpeedFlyBack(r.speedFlyBack),a.setSpeedTurnRate(r.speedTurnRate),r.points){for(var l=new Array(r.points.length),f=0;f<l.length;f++){var d=r.points[f];l[f]=[d.x,d.y,d.z]}a.setMovingData(r.curr_time,r.total_time,r.movementflag,l)}if(a.setCurrentTime(r.timestamp),a.setPosition(c.vec3.fromValues(r.x,r.y,r.z)),a.setRotation(r.f),a.setDisplayId(o.UNIT_FIELD_DISPLAYID),o.hasOwnProperty("UNIT_FIELD_MOUNTDISPLAYID")&&a.setMountDisplayId(o.UNIT_FIELD_MOUNTDISPLAYID),o.hasOwnProperty("OBJECT_FIELD_SCALE_X")&&a.setScale(o.OBJECT_FIELD_SCALE_X),o.UNIT_VIRTUAL_ITEM_SLOT_DISPLAY)for(var p=0;p<o.UNIT_VIRTUAL_ITEM_SLOT_DISPLAY.length;p++)a.setVirtualItemSlot(o.UNIT_VIRTUAL_ITEM_SLOT_DISPLAY[p].index,o.UNIT_VIRTUAL_ITEM_SLOT_DISPLAY[p].value)}else if(5==r.obj_type){var h=new u["default"](this.sceneApi);this.objectMap[i]=h,h.setPosition(c.vec3.fromValues(t[n].static_x,r.static_y,r.static_z)),h.setRotation(r.static_f),h.setDisplayId(o.GAMEOBJECT_DISPLAYID);for(var m=[0,0,0,0],p=0;p<o.GAMEOBJECT_ROTATION.length;p++)m[o.GAMEOBJECT_ROTATION[p].index]=o.GAMEOBJECT_ROTATION[p].value;h.setRotationQuaternion(m),o.hasOwnProperty("OBJECT_FIELD_SCALE_X")&&h.setScale(o.OBJECT_FIELD_SCALE_X)}}}else if("SMSG_MONSTER_MOVE"==e.opcode){var v=e.payload,i=v.m_guid;if(!this.objectMap[i])return;var g=[];g.push([v.m_x,v.m_y,v.m_z]);var b=v.m_move_time;if(1!=v.m_stop_flag){if(0==(512&v.m_move_flag))for(var y=[.5*(v.m_x+v.m_end_x),.5*(v.m_y+v.m_end_y),.5*(v.m_z+v.m_end_z)],f=0;f<v.m_move_point_run.length;f++){var x=v.m_move_point_run[f],w=.25*((32767&x)<<53>>53),_=.25*((65535&x)>>11<<53>>53),k=.25*((65535&x)>>22<<54>>54);g.push([y[0]-w,y[1]-_,y[2]-k])}else for(var f=0;f<v.m_move_point_run.length;f++){var d=v.m_move_point_run[f];g.push([d.x,d.y,d.z])}g.push([v.m_end_x,v.m_end_y,v.m_end_z])}this.objectMap[i].setMovingData(0,b,v.m_move_flag,g)}}},{key:"startPlayingPackets",value:function(){this.serverTime=0,this.clientTime=f[0].tickcount-500,this.lastPacketIndex=0,this.playPackets=!0}},{key:"loadAllPacket",value:function(){for(var e=0;e<f.length;e++)this.processPacket(f[e])}}]),e}();t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){for(var t=e.length-1;t>0;t--)if("\\"==e[t]||"/"==e[t])return e.substr(0,t+1);return""}function l(e,t,n,r,o,i){for(var a=0;a<e.length;a++)if(e[a].race==t&&e[a].gender==n&&e[a].section==r&&e[a].type==o&&e[a].color==i)return e[a];return null}function u(e,t,n,r){for(var o=0;o<e.length;o++)if(e[o].race==t&&e[o].gender==n&&e[o].hairStyle==r)return e[o];return null}function c(e,t,n,r){for(var o=0;o<e.length;o++)if(e[o].race==t&&e[o].gender==n&&e[o].hairStyle==r)return e[o];return null}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(78),p=r(d),h=n(56),m=[1,3,2],v=0,g=2,b=[1,0,1],y=["","hu","or","dw","ni","sc","ta","gn","tr","go","be","dr","fo","na","br","sk","vr","tu","ft","wt","ns","it"],x=["m","f"],w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.sceneApi=e,n.currentTime=0,n.movementFlag=0,n.speedWalk=0,n.speedRun=0,n.speedRunBack=0,n.speedSwim=0,n.speedSwimBack=0,n.speedFly=0,n.speedFlyBack=0,n.speedTurnRate=0,n.isMoving=!1,n.objectModel=null,n.mountModel=null,n.items=new Array(3),n.helmet=null,n}return a(t,e),f(t,[{key:"setSpeedWalk",value:function(e){this.speedWalk=e}},{key:"setSpeedRun",value:function(e){this.speedRun=e}},{key:"setSpeedRunBack",value:function(e){this.speedRunBack=e}},{key:"setSpeedSwim",value:function(e){this.speedSwim=e}},{key:"setSpeedSwimBack",value:function(e){this.speedSwimBack=e}},{key:"setSpeedFly",value:function(e){this.speedFly=e}},{key:"setSpeedFlyBack",value:function(e){this.speedFlyBack=e}},{key:"setSpeedTurnRate",value:function(e){this.speedTurnRate=e}},{key:"getAnimationIdByMovementFlag",value:function(){var e=0;return e=(256&this.movementFlag)>0?5:4}},{key:"createModelFromDisplayId",value:function(e){var t=this.sceneApi.dbc.getCharSectionsDBC(),n=this.sceneApi.dbc.getCharHairGeosetsDBC(),r=this.sceneApi.dbc.getCharacterFacialHairStylesDBC(),o=this.sceneApi.dbc.getCreatureDisplayInfoDBC(),i=this.sceneApi.dbc.getCreatureDisplayInfoExtraDBC(),a=this.sceneApi.dbc.getCreatureModelDataDBC(),f=this.sceneApi.dbc.getItemDisplayInfoDBC(),d=o[e],p=d.modelScale;
this.displayIDScale=p;var h=a[d.model1].modelName,v=a[d.model1].modelScale;this.modelScale=v;var g=[];""!=d.skin1&&(g[11]=s(h)+d.skin1+".blp"),""!=d.skin2&&(g[12]=s(h)+d.skin2+".blp"),""!=d.skin3&&(g[13]=s(h)+d.skin3+".blp");for(var b=[],y=0;y<19;y++)b[y]=1;if(b[7]=1,d.displayExtra>0){var x=i[d.displayExtra];g[1]="Textures\\BakedNpcTextures\\"+x.skinTexture;var w=l(t,x.race,x.gender,3,x.hairType,x.hairStyle);null!=w&&(g[6]=w.texture1);var _=u(n,x.race,x.gender,x.hairType);null!=_&&0!=_.geoset&&(b[0]=_.geoset);var w=l(t,x.race,x.gender,2,x.faceHairStyle,x.hairStyle);null!=w&&(g[8]=w.texture1);var k=c(r,x.race,x.gender,x.faceHairStyle);if(null!=k)for(var y=0;y<3;y++)0!=k.geoset[y]&&(b[m[y]]=k.geoset[y]);var M=f[x.helmItem];M&&(this.helmet=this.createHelmetFromItemDisplayInfo(x.race,x.gender,M)),M=f[x.shoulderItem],M=f[x.shirtItem],M=f[x.cuirassItem],M&&(b[8]=1+M.geosetGroup_1),M=f[x.beltItem],M&&(b[18]=1+M.geosetGroup_3),M=f[x.legsItem],M&&b[8]>1&&(b[13]=1+M.geosetGroup_3),M=f[x.bootsItem],M&&(b[5]=1+M.geosetGroup_1),M=f[x.ringsItem],M=f[x.glovesItem],M&&(b[4]=1+M.geosetGroup_1),M=f[x.tabardItem],M&&1==b[8]&&(b[12]=1+M.geosetGroup_1),M=f[x.capeItem],M&&(g[2]="Item\\ObjectComponents\\Cape\\"+M.leftTextureModel+".BLP",b[15]=1+M.geosetGroup_1)}var E=this.sceneApi.objects.loadWorldM2Obj(h,b,g);return E}},{key:"createHelmetFromItemDisplayInfo",value:function(e,t,n){var r="Item\\ObjectComponents\\head\\",o="_"+y[e]+x[t],i=r+n.leftModel,a=i.split(".")[0];i=a+o+".m2";var s=[];n.leftTextureModel&&(s[2]=r+n.leftTextureModel+".blp");var l=this.sceneApi.objects.loadWorldM2Obj(i,null,s);return l}},{key:"update",value:function(e,t,n){var r=this.objectModel&&this.objectModel.m2Geom&&this.objectModel.m2Geom.m2File,o=r&&this.objectModel.bonesMatrices;if(this.isMoving){if(this.currentMovingTime+e>=this.totalMovingTime)this.setPosition(this.pointsArray[this.pointsArray.length-1]),this.isMoving=!1;else{for(var i=this.pointsTotalPath[this.pointsTotalPath.length-1],a=i/this.totalMovingTime*(this.currentMovingTime+e),s=this.pointsTotalPath[0],l=1;l<this.pointsArray.length;l++)if(a<this.pointsTotalPath[l]){var u=this.pointsArray[l-1],c=this.pointsArray[l],f=this.pointsTotalPath[l-1],d=this.pointsTotalPath[l],p=h.vec4.create();h.vec3.subtract(p,c,u),h.vec3.scale(p,p,(a-f)/(d-f));var s=h.vec3.create();h.vec3.add(s,u,p),h.vec3.normalize(p,p),p[1]<0?this.setRotation(2*Math.PI-Math.acos(p[0])):this.setRotation(Math.acos(p[0]));break}this.setPosition(s)}this.currentMovingTime+=e}var m=this.displayIDScale;if(this.scale>1e-4&&(m=this.displayIDScale*this.scale),this.mountModel&&null!=this.mountModel.m2Geom&&null!=this.mountModel.m2Geom.m2File&&r){if(this.isMoving){var v=this.getAnimationIdByMovementFlag();this.mountModel.setAnimationId(v,!1)}else this.mountModel.setAnimationId(0);this.mountModel.createPlacementMatrix(this.pos,this.f,m),this.mountModel.objectUpdate(e,t),this.mountModel.bonesMatrices&&(this.objectModel.createPlacementMatrixFromParent(this.mountModel,0,m),this.objectModel.setAnimationId(91,!1))}else if(r){if(this.isMoving){var v=this.getAnimationIdByMovementFlag();this.objectModel.setAnimationId(v,!1)}this.objectModel.createPlacementMatrix(this.pos,this.f,m)}if(r&&(this.items[0]&&this.items[0].m2Geom&&this.objectModel.setRightHandClosed(!0),this.items[1]&&this.items[1].m2Geom&&this.objectModel.setLeftHandClosed(!0)),this.objectModel.objectUpdate(e,t),r&&o&&this.helmet&&null!=this.helmet.m2Geom&&null!=this.helmet.m2Geom.m2File&&(this.helmet.createPlacementMatrixFromParent(this.objectModel,11,m),this.helmet.objectUpdate(e,t)),r&&o)for(var l=0;l<this.items.length;l++)this.items[l]&&this.items[l].m2Geom&&(this.items[l].createPlacementMatrixFromParent(this.objectModel,b[l],m),this.items[l].objectUpdate(e,t));this.currentTime+=e}},{key:"setMovingData",value:function(e,t,n,r){this.currentMovingTime=e,this.totalMovingTime=t,this.pointsArray=r;for(var o=0,i=new Array(this.pointsArray.length),a=this.pointsArray[0],s=0;s<this.pointsArray.length;s++){var l=a[0]-this.pointsArray[s][0],u=a[1]-this.pointsArray[s][1],c=a[2]-this.pointsArray[s][2];o+=Math.sqrt(l*l+u*u+c*c),i[s]=o,a=this.pointsArray[s]}this.pointsTotalPath=i,this.movementFlag=n,this.isMoving=!0}},{key:"setCurrentTime",value:function(e){this.currentTime=e}},{key:"setVirtualItemSlot",value:function(e,t){var n,r=this.sceneApi.dbc.getItemDisplayInfoDBC();0==e?n="item/objectcomponents/weapon/":1==e?n="item/objectcomponents/shield/":2==e&&(n="item/objectcomponents/weapon/");var o=r[t];if(o){var i;i=e==v||e==g?o.leftModel:o.leftModel,i=n+i;var a=[];o.leftTextureModel&&(a[2]=n+o.leftTextureModel+".blp");var s=this.sceneApi.objects.loadWorldM2Obj(i,null,a);this.items[e]=s}}},{key:"setMountDisplayId",value:function(e){var t=this.createModelFromDisplayId(e);this.mountModel=t}},{key:"setDisplayId",value:function(e){var t=this.createModelFromDisplayId(e);this.objectModel=t}},{key:"setEntry",value:function(e){this.entry=e,this.setDisplayId(0)}}]),t}(p["default"]);t["default"]=w},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,[{key:"setPosition",value:function(e){this.pos=e}},{key:"setRotation",value:function(e){this.f=e}},{key:"setScale",value:function(e){this.scale=e}}]),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(78),u=r(l),c=n(56),f=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.sceneApi=e,n.objectModel=null,n}return a(t,e),s(t,[{key:"setDisplayId",value:function(e){var t=this.sceneApi.dbc.getGameObjectDisplayInfoDBC(),n=t[e];if(n){var r=n.modelName;"mdx"==r.toLowerCase().split(".")[1]&&(this.objectModel=this.sceneApi.objects.loadWorldM2Obj(r,null,null))}}},{key:"setRotationQuaternion",value:function(e){var t=c.mat4.create();c.mat4.fromQuat(t,e),this.rotationMatrix=t}},{key:"update",value:function(e,t){var n=1;this.scale>1e-4&&(n=this.scale),this.objectModel&&this.objectModel.m2Geom&&this.objectModel.m2Geom.m2File&&(this.objectModel.createPlacementMatrix(this.pos,this.f,n,this.rotationMatrix),this.objectModel.objectUpdate(e,t))}}]),t}(u["default"]);t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=i["default"].defer(),n=(0,s["default"])(e);return n.then(function(n){var r=n.loadChunkAtOffset(0);if("MVER"!==r.chunkIdent)throw"Got bad WDT file "+e;r=n.loadChunkAtOffset(r.nextChunkOffset);for(var o={};""!=r.chunkIdent;){switch(r.chunkIdent){case"MAIN":for(var i={offs:0},a={},s=0;s<64;s++){for(var l={},c=0;c<64;c++)l[c]=r.readInt32(i),i.offs+=4;a[s]=l}o.tileTable=l;break;case"MPHD":var f={offs:0};o.flags=r.readUint8(f),o.isWMOMap=o.flags&!0;break;case"MWMO":var f={offs:0},d=null;r.chunkLen>0&&(d=r.readUint8Array(f,r.chunkLen)),o.mwmo=d;break;case"MODF":var f={offs:0},p={},h=(0,u["default"])(o.mwmo.buffer);p.nameId=r.readInt32(f),p.uniqueId=r.readInt32(f),p.pos=r.readVector3f(f),p.rotation=r.readVector3f(f),p.unkVector1=r.readVector3f(f),p.unkVector2=r.readVector3f(f),p.doodadSet=r.readUint16(f),p.nameSet=r.readUint16(f),p.flags=r.readInt32(f);var m=p.nameId;p.fileName=h.readString({offs:m},h.getLength()-m),o.modfChunk=p;break;default:$log.info("Unknown Chunk. Ident = "+r.chunkIdent+", file = "+e)}r=n.loadChunkAtOffset(r.nextChunkOffset)}t.resolve(o)},function(){t.reject()}),t.promise};var o=n(68),i=r(o),a=n(81),s=r(a),l=n(82),u=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){function n(e){var t=(0,i["default"])(e),n=null,r={getFileSize:function(){return t.getLength()},setSectionReaders:function(e){n=e},processChunkAtOffsWithSize:function(e,t,n){var r=this.loadChunkAtOffset(e,t);this.processChunk(r,n)},processChunkAtOffs:function(e,t){var n=this.loadChunkAtOffset(e);this.processChunk(n,t)},processChunk:function(e,t){var r=n.getHandler(e.chunkIdent);if(r&&0!==e.chunkLen)if("function"==typeof r)r(t,e,this);else for(var o=r[e.chunkIdent](t,e),i=this.loadChunkAtOffset(e.chunkOffset+o.offs);""!=i.chunkIdent;){var a=r.subChunks[i.chunkIdent];a&&a(t,i,this),i=this.loadChunkAtOffset(i.nextChunkOffset)}},processFile:function(e){for(var t=this.loadChunkAtOffset(0);""!=t.chunkIdent;)this.processChunk(t,e,n),t=this.loadChunkAtOffset(t.nextChunkOffset)},loadChunkAtOffset:function(n,r){var o={offs:n},a="",s=0,l=-1;o.offs+8<t.getLength()&&(a=t.reverseStr(t.readString(o,4)),s=t.readInt32(o),void 0!=r&&(s=r),l=o.offs);var u=null;s>0&&(u=(0,i["default"])(e,o.offs,s));var c=Object.create(u,{chunkIdent:{value:a},chunkLen:{value:s},chunkOffset:{value:n},chunkDataOffset:{value:l},nextChunkOffset:{value:n+8+s,writable:!0}});return c}};return r}return t?n(t):(0,s["default"])(e).then(function(e){return n(e)},function(e){return e})};var o=n(82),i=r(o),a=n(83),s=r(a)},function(e,t){"use strict";function n(e){var t,n="";for(t=e.length-1;t>=0;t--)n+=e.charAt(t);return n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t,i){var a;a=t&&i?new DataView(e,t,i):new DataView(e);var s;return s=t&&i?new Uint8Array(e,t,i):new Uint8Array(e),{getArrayBuffer:function(){return e},sliceArrayBuffer:function(t,n){return e.slice(t,n)},getLength:function(){return s.length},readInt8:function(e){var t=a.getInt8(e.offs);return e.offs+=1,t},readInt16:function(e){var t=a.getInt16(e.offs,r);return e.offs+=2,t},readInt32:function(e){var t=a.getInt32(e.offs,r);return e.offs+=4,t},readUint8:function(e){var t=a.getUint8(e.offs);return e.offs+=1,t},readUint16:function(e){var t=a.getUint16(e.offs,r);return e.offs+=2,t},readUint32:function(e){var t=a.getUint32(e.offs,r);return e.offs+=4,t},readFloat32:function(e){try{var t=a.getFloat32(e.offs,r);e.offs+=4}catch(n){}return t},readFloat64:function(e){var t=a.getFloat64(e.offs,r);return e.offs+=8,t},readVector4f:function(e){var t={};return t.x=this.readFloat32(e),t.y=this.readFloat32(e),t.z=this.readFloat32(e),t.w=this.readFloat32(e),t},readVector3f:function(e){var t={};return t.x=this.readFloat32(e),t.y=this.readFloat32(e),t.z=this.readFloat32(e),t},readVector2f:function(e){var t={};return t.x=this.readFloat32(e),t.y=this.readFloat32(e),t},readQuaternion:function(e){var t={};return t.imag=this.readVector3f(e),t.real=this.readFloat32(e),t},readUint8Array:function(e,t){var n=this.sliceArrayBuffer(a.byteOffset+e.offs,a.byteOffset+e.offs+t),r=new Uint8Array(n);return e.offs+=t,r},readInt8Array:function(e,t){for(var n=new Int8Array(t),r=0;r<t;r++)n[r]=this.readInt8(e);return n},readUint16Array:function(e,t){for(var n=[],r=0;r<t;r++)n[r]=this.readUint16(e);return n},readInt16Array:function(e,t){for(var n=[],r=0;r<t;r++)n[r]=this.readInt16(e);return n},readInt32Array:function(e,t){for(var n=[],r=0;r<t;r++)n[r]=this.readInt32(e);return n},readFloat32Array:function(e,t){for(var n=[],r=0;r<t;r++)n[r]=this.readFloat32(e);return n},readString:function(e,t){function n(e,t,n,r){for(var o=n;o<r;o++)if(e[o]==t)return o;return r}var r=e.offs,i=n(s,0,r,r+t),a=o.decode(s.subarray(r,i));return e.offs=i,a},readNZTString:function(e,t){var n=e.offs,r=n+t,i=o.decode(s.subarray(n,r));return e.offs=r,i},reverseStr:function(e){return n(e)}}};var r=!0,o=new TextDecoder("utf-8")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){d||(f.postMessage({opcode:"init",message:{archiveFile:i["default"].getArchiveFile(),fileReadMethod:i["default"].getFileReadMethod(),urlToLoadWoWFile:i["default"].getUrlToLoadWoWFile()}}),d=!0);var t={},n=new Promise(function(e,n){t.onResolve=function(t){e(t)}});return f.postMessage({opcode:"loadFile",messageId:u,message:e}),c[u]={defer:t,fileName:e},u++,n};var o=n(22),i=r(o),a=n(84),s=r(a),l=n(68),u=(r(l),0),c={},f=new s["default"];f.onmessage=function(e){var t=e.data.opcode,n=e.data.message,r=e.data.messageId;if("fileLoaded"==t){var o=c[r].defer;c[r].fileName;n&&o.onResolve(n),delete c[r]}};var d=!1},function(e,t,n){e.exports=function(){return n(85)('!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(1),o=r(i),a=n(23),s=r(a);s["default"].setScheduler(function(t){t()}),self.addEventListener("message",function(t){var e=t.data.opcode,n=t.data.message,r=t.data.messageId;if("init"==e){var i={getArchiveFile:function(){return n.archiveFile},getFileReadMethod:function(){return n.fileReadMethod},getUrlToLoadWoWFile:function(){return n.urlToLoadWoWFile}};self.fileLoader=(0,o["default"])(i,s["default"])}else if("loadFile"==e){var a=n;!function(t,e){var n=t.fileLoader(a);n.then(function(n){t.postMessage({opcode:"fileLoaded",messageId:e,message:n.buffer},[n.buffer])},function(){})}(self,r)}},!1)},function(t,n,r){(function(t){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){function e(e){r.size=t.byteLength,e()}function n(e,n,r,i){var o=t.slice(e,e+n),a=new Uint8Array(o);r(a)}var r=this;r.size=0,r.init=e,r.readUint8Array=n}function a(t,e){var n=new t.constructor(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function s(t){function e(t){i=new Uint8Array(0),t()}function n(t,e){i=a(i,t),e()}function r(t){t(i)}var i,o=this;o.init=e,o.writeUint8Array=n,o.getData=r}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(n,r){function i(){var e={};e.promise=new Promise(function(t,n){e.onResolve=function(e){t(e)},e.onReject=function(e){t(e)}}),f.push(e);var r=n.getArchiveFile();return f.length<=1&&t.zip.createReader(new o(r),function(t){t.getEntries(function(t){for(var e={},n=0;n<t.length;n++){var r=t[n].filename.trim().replace(/\\\\/g,"/").toLowerCase(),i=t[n];e[r]=i}for(var o=f.length,n=0;n<o;n++)f[n].onResolve(e);f=[]})},function(t){for(var e=f.length,n=0;n<e;n++)f[n].onReject(t);f=[]}),e.promise}function a(t){var e={};e.promise=new Promise(function(t,n){e.onResolve=function(e){t(e)},e.onReject=function(e){t(e)}}),t=t.replace(/\\u0000/g,""),t=t.toLowerCase(),t=t.replace(/\\\\/g,"/").toLowerCase();var n=null;return n=l[t],n?n.getData(new s,function(t){e.onResolve(t)}):e.onReject(null),e.promise}function c(t){if(t[t.length-1]==String.fromCharCode(0)&&(t=t.substr(0,t.length-1)),t&&(t=t.toLowerCase()),"http"==n.getFileReadMethod()){var r=n.getUrlToLoadWoWFile()+t;return u["default"].get(r,{responseType:"arraybuffer"}).then(function(t){return new Uint8Array(t.data)},function(t){console.log("axios error"+e)})}if("zip"==n.getFileReadMethod())return t&&(t=t.replace(/\\\\/g,"/")),l?a(t).then(function(t){return t},function(t){return t}):i().then(function(e){return l=e,a(t)},function(t,e,n){}).then(function(t){return t},function(t){return t})}var l,f=[];return c},r(2),r(3),r(4);var c=r(5),u=i(c);t.zip.useWebWorkers=!1,o.prototype=new t.zip.Reader,o.prototype.constructor=o,s.prototype=new t.zip.Writer,s.prototype.constructor=s}).call(n,function(){return this}())},function(t,e){(function(t){(function(){!function(t){"use strict";function e(){this.crc=-1}function n(){}function r(t,e,n){if(e<0||n<0||e+n>t.size)throw new RangeError("offset:"+e+", length:"+n+", size:"+t.size);return t.slice?t.slice(e,e+n):t.webkitSlice?t.webkitSlice(e,e+n):t.mozSlice?t.mozSlice(e,e+n):t.msSlice?t.msSlice(e,e+n):void 0}function i(t,e){var n,r;return n=new ArrayBuffer(t),r=new Uint8Array(n),e&&r.set(e,0),{buffer:n,array:r,view:new DataView(n)}}function o(){}function a(t){function e(e,n){var o=new Blob([t],{type:V});r=new c(o),r.init(function(){i.size=r.size,e()},n)}function n(t,e,n,i){r.readUint8Array(t,e,n,i)}var r,i=this;i.size=0,i.init=e,i.readUint8Array=n}function s(e){function n(t){for(var n=e.length;"="==e.charAt(n-1);)n--;o=e.indexOf(",")+1,a.size=Math.floor(.75*(n-o)),t()}function r(n,r,a){var s,c=i(r),u=4*Math.floor(n/3),l=4*Math.ceil((n+r)/3),f=t.atob(e.substring(u+o,l+o)),p=n-3*Math.floor(u/4);for(s=p;s<p+r;s++)c.array[s-p]=f.charCodeAt(s);a(c.array)}var o,a=this;a.size=0,a.init=n,a.readUint8Array=r}function c(t){function e(e){i.size=t.size,e()}function n(e,n,i,o){var a=new FileReader;a.onload=function(t){i(new Uint8Array(t.target.result))},a.onerror=o;try{a.readAsArrayBuffer(r(t,e,n))}catch(s){o(s)}}var i=this;i.size=0,i.init=e,i.readUint8Array=n}function u(){}function l(t){function e(t){i=new Blob([],{type:V}),t()}function n(t,e){i=new Blob([i,S?t:t.buffer],{type:V}),e()}function r(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=n,r.readAsText(i,t)}var i,o=this;o.init=e,o.writeUint8Array=n,o.getData=r}function f(e){function n(t){a+="data:"+(e||"")+";base64,",t()}function r(e,n){var r,i=s.length,o=s;for(s="",r=0;r<3*Math.floor((i+e.length)/3)-i;r++)o+=String.fromCharCode(e[r]);for(;r<e.length;r++)s+=String.fromCharCode(e[r]);o.length>2?a+=t.btoa(o):s=o,n()}function i(e){e(a+t.btoa(s))}var o=this,a="",s="";o.init=n,o.writeUint8Array=r,o.getData=i}function p(t){function e(e){i=new Blob([],{type:t}),e()}function n(e,n){i=new Blob([i,S?e:e.buffer],{type:t}),n()}function r(t){t(i)}var i,o=this;o.init=e,o.writeUint8Array=n,o.getData=r}function h(t,e,n,r,i,o,a,s,c,u){function l(){t.removeEventListener("message",f,!1),s(d,_)}function f(e){var n=e.data,i=n.data,s=n.error;if(s)return s.toString=function(){return"Error: "+this.message},void c(s);if(n.sn===y)switch("number"==typeof n.codecTime&&(t.codecTime+=n.codecTime),"number"==typeof n.crcTime&&(t.crcTime+=n.crcTime),n.type){case"append":i?(d+=i.length,r.writeUint8Array(i,function(){p()},u)):p();break;case"flush":_=n.crc,i?(d+=i.length,r.writeUint8Array(i,function(){l()},u)):l();break;case"progress":a&&a(h+n.loaded,o);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",n)}}function p(){h=v*M,h<=o?n.readUint8Array(i+h,Math.min(M,o-h),function(n){a&&a(h,o);var r=0===h?e:{sn:y};r.type="append",r.data=n;try{t.postMessage(r,[n.buffer])}catch(i){t.postMessage(r)}v++},c):t.postMessage({sn:y,type:"flush"})}var h,d,_,v=0,y=e.sn;d=0,t.addEventListener("message",f,!1),p()}function d(t,n,r,i,o,a,s,c,u,l){function f(){var e;if(p=h*M,p<o)n.readUint8Array(i+p,Math.min(M,o-p),function(e){var n;try{n=t.append(e,function(t){s&&s(p+t,o)})}catch(i){return void u(i)}n?(d+=n.length,r.writeUint8Array(n,function(){h++,setTimeout(f,1)},l),v&&y.append(n)):(h++,setTimeout(f,1)),_&&y.append(e),s&&s(p,o)},u);else{try{e=t.flush()}catch(a){return void u(a)}e?(v&&y.append(e),d+=e.length,r.writeUint8Array(e,function(){c(d,y.get())},l)):c(d,y.get())}}var p,h=0,d=0,_="input"===a,v="output"===a,y=new e;f()}function _(e,n,r,i,o,a,s,c,u,l,f){var p=s?"output":"none";if(t.zip.useWebWorkers){var _={sn:n,codecClass:"Inflater",crcType:p};h(e,_,r,i,o,a,u,c,l,f)}else d(new t.zip.Inflater,r,i,o,a,p,u,c,l,f)}function v(e,n,r,i,o,a,s,c,u){var l="input";if(t.zip.useWebWorkers){var f={sn:n,options:{level:o},codecClass:"Deflater",crcType:l};h(e,f,r,i,0,r.size,s,a,c,u)}else d(new t.zip.Deflater,r,i,0,r.size,l,s,a,c,u)}function y(e,r,i,o,a,s,c,u,l,f,p){var _="input";if(t.zip.useWebWorkers&&c){var v={sn:r,codecClass:"NOOP",crcType:_};h(e,v,i,o,a,s,l,u,f,p)}else d(new n,i,o,a,s,_,l,u,f,p)}function m(t){var e,n,r="",i=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(e=0;e<t.length;e++)n=255&t.charCodeAt(e),r+=n>127?i[n-128]:String.fromCharCode(n);return r}function g(t){return decodeURIComponent(escape(t))}function b(t){var e,n="";for(e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n}function w(t){var e=(4294901760&t)>>16,n=65535&t;try{return new Date(1980+((65024&e)>>9),((480&e)>>5)-1,31&e,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(r){}}function x(t,e,n,r,i){return t.version=e.view.getUint16(n,!0),t.bitFlag=e.view.getUint16(n+2,!0),t.compressionMethod=e.view.getUint16(n+4,!0),t.lastModDateRaw=e.view.getUint32(n+6,!0),t.lastModDate=w(t.lastModDateRaw),1===(1&t.bitFlag)?void i(O):((r||8!=(8&t.bitFlag))&&(t.crc32=e.view.getUint32(n+10,!0),t.compressedSize=e.view.getUint32(n+14,!0),t.uncompressedSize=e.view.getUint32(n+18,!0)),4294967295===t.compressedSize||4294967295===t.uncompressedSize?void i(U):(t.filenameLength=e.view.getUint16(n+22,!0),void(t.extraFieldLength=e.view.getUint16(n+24,!0))))}function k(e,n,r){function o(){}function a(t){function n(n,o){e.readUint8Array(e.size-n,n,function(e){for(var n=e.length-i;n>=0;n--)if(80===e[n]&&75===e[n+1]&&5===e[n+2]&&6===e[n+3])return void t(new DataView(e.buffer,n,i));o()},function(){r(D)})}var i=22;if(e.size<i)return void r(R);var o=65536,a=i+o;n(i,function(){n(Math.min(a,e.size),function(){r(R)})})}var s=0;o.prototype.getData=function(t,n,o,a){function c(t){var e=i(4);return e.view.setUint32(0,t),p.crc32==e.view.getUint32(0)}function u(e,i){a&&!c(i)?r(P):t.getData(function(t){n(t)})}function l(t){r(t||z)}function f(t){r(t||I)}var p=this;e.readUint8Array(p.offset,30,function(n){var c,h=i(n.length,n);return 1347093252!=h.view.getUint32(0)?void r(R):(x(p,h,4,!1,r),c=p.offset+30+p.filenameLength+p.extraFieldLength,void t.init(function(){0===p.compressionMethod?y(p._worker,s++,e,t,c,p.compressedSize,a,u,o,l,f):_(p._worker,s++,e,t,c,p.compressedSize,a,u,o,l,f)},f))},l)};var c={getEntries:function(t){var n=this._worker;a(function(a){var s,c;return s=a.getUint32(16,!0),c=a.getUint16(8,!0),s<0||s>=e.size?void r(R):void e.readUint8Array(s,e.size-s,function(e){var a,s,u,l,f=0,p=[],h=i(e.length,e);for(a=0;a<c;a++){if(s=new o,s._worker=n,1347092738!=h.view.getUint32(f))return void r(R);x(s,h,f+6,!0,r),s.commentLength=h.view.getUint16(f+32,!0),s.directory=16==(16&h.view.getUint8(f+38)),s.offset=h.view.getUint32(f+42,!0),u=b(h.array.subarray(f+46,f+46+s.filenameLength)),s.filename=2048===(2048&s.bitFlag)?g(u):m(u),s.directory||"/"!=s.filename.charAt(s.filename.length-1)||(s.directory=!0),l=b(h.array.subarray(f+46+s.filenameLength+s.extraFieldLength,f+46+s.filenameLength+s.extraFieldLength+s.commentLength)),s.comment=2048===(2048&s.bitFlag)?g(l):m(l),p.push(s),f+=46+s.filenameLength+s.extraFieldLength+s.commentLength}t(p)},function(){r(D)})})},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null),t&&t()},_worker:null};t.zip.useWebWorkers?T("inflater",function(t){c._worker=t,n(c)},function(t){r(t)}):n(c)}function C(t){return unescape(encodeURIComponent(t))}function E(t){var e,n=[];for(e=0;e<t.length;e++)n.push(t.charCodeAt(e));return n}function j(e,n,r,o){function a(t){r(t||L)}function s(t){r(t||z)}var c={},u=[],l=0,f=0,p={add:function(t,n,p,h,d){function _(n){var r;x=d.lastModDate||new Date,b=i(26),c[t]={headerArray:b.array,directory:d.directory,filename:w,offset:l,comment:E(C(d.comment||""))},b.view.setUint32(0,335546376),d.version&&b.view.setUint8(0,d.version),o||0===d.level||d.directory||b.view.setUint16(4,2048),b.view.setUint16(6,(x.getHours()<<6|x.getMinutes())<<5|x.getSeconds()/2,!0),b.view.setUint16(8,(x.getFullYear()-1980<<4|x.getMonth()+1)<<5|x.getDate(),!0),b.view.setUint16(22,w.length,!0),r=i(30+w.length),r.view.setUint32(0,1347093252),r.array.set(b.array,4),r.array.set(w,30),l+=r.array.length,e.writeUint8Array(r.array,n,a)}function m(t,r){var o=i(16);l+=t||0,o.view.setUint32(0,1347094280),"undefined"!=typeof r&&(b.view.setUint32(10,r,!0),o.view.setUint32(4,r,!0)),n&&(o.view.setUint32(8,t,!0),b.view.setUint32(14,t,!0),o.view.setUint32(12,n.size,!0),b.view.setUint32(18,n.size,!0)),e.writeUint8Array(o.array,function(){l+=16,p()},a)}function g(){return d=d||{},t=t.trim(),d.directory&&"/"!=t.charAt(t.length-1)&&(t+="/"),c.hasOwnProperty(t)?void r(B):(w=E(C(t)),u.push(t),void _(function(){n?o||0===d.level?y(k,f++,n,e,0,n.size,!0,m,h,s,a):v(k,f++,n,e,d.level,m,h,s,a):m()},a))}var b,w,x,k=this._worker;n?n.init(g,s):g()},close:function(t){this._worker&&(this._worker.terminate(),this._worker=null);var n,r,o,s=0,f=0;for(r=0;r<u.length;r++)o=c[u[r]],s+=46+o.filename.length+o.comment.length;for(n=i(s+22),r=0;r<u.length;r++)o=c[u[r]],n.view.setUint32(f,1347092738),n.view.setUint16(f+4,5120),n.array.set(o.headerArray,f+6),n.view.setUint16(f+32,o.comment.length,!0),o.directory&&n.view.setUint8(f+38,16),n.view.setUint32(f+42,o.offset,!0),n.array.set(o.filename,f+46),n.array.set(o.comment,f+46+o.filename.length),f+=46+o.filename.length+o.comment.length;n.view.setUint32(f,1347093766),n.view.setUint16(f+8,u.length,!0),n.view.setUint16(f+10,u.length,!0),n.view.setUint32(f+12,s,!0),n.view.setUint32(f+16,l,!0),e.writeUint8Array(n.array,function(){e.getData(t)},a)},_worker:null};t.zip.useWebWorkers?T("deflater",function(t){p._worker=t,n(p)},function(t){r(t)}):n(p)}function F(t){var e=document.createElement("a");return t.map(function(t){return e.href=t,e.href})}function T(e,n,r){function i(t){var e=t.data;return e.error?(s.terminate(),void r(e.error)):void("importScripts"===e.type&&(s.removeEventListener("message",i),s.removeEventListener("error",o),n(s)))}function o(t){s.terminate(),r(t)}if(null!==t.zip.workerScripts&&null!==t.zip.workerScriptsPath)return void r(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));var a;if(t.zip.workerScripts){if(a=t.zip.workerScripts[e],!Array.isArray(a))return void r(new Error("zip.workerScripts."+e+" is not an array!"));a=F(a)}else a=H[e].slice(0),a[0]=(t.zip.workerScriptsPath||"")+a[0];var s=new Worker(a[0]);s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:a.slice(1)}),s.addEventListener("message",i),s.addEventListener("error",o)}function A(t){console.error(t)}var S,R="File format is not recognized.",P="CRC failed.",O="File contains encrypted entry.",U="File is using Zip64 (4gb+ file size).",D="Error while reading zip file.",L="Error while writing zip file.",I="Error while writing file data.",z="Error while reading file data.",B="File already exists.",M=524288,V="text/plain";try{S=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(N){}e.prototype.append=function(t){for(var e=0|this.crc,n=this.table,r=0,i=0|t.length;r<i;r++)e=e>>>8^n[255&(e^t[r])];this.crc=e},e.prototype.get=function(){return~this.crc},e.prototype.table=function(){var t,e,n,r=[];for(t=0;t<256;t++){for(n=t,e=0;e<8;e++)1&n?n=n>>>1^3988292384:n>>>=1;r[t]=n}return r}(),n.prototype.append=function(t,e){return t},n.prototype.flush=function(){},a.prototype=new o,a.prototype.constructor=a,s.prototype=new o,s.prototype.constructor=s,c.prototype=new o,c.prototype.constructor=c,u.prototype.getData=function(t){t(this.data)},l.prototype=new u,l.prototype.constructor=l,f.prototype=new u,f.prototype.constructor=f,p.prototype=new u,p.prototype.constructor=p;var H={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};t.zip={Reader:o,Writer:u,BlobReader:c,Data64URIReader:s,TextReader:a,BlobWriter:p,Data64URIWriter:f,TextWriter:l,createReader:function(t,e,n){n=n||A,t.init(function(){k(t,e,n)},n)},createWriter:function(t,e,n,r){n=n||A,r=!!r,t.init(function(){j(t,e,n,r)},n)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}(this)}).call(t)}).call(e,function(){return this}())},function(t,e){(function(t){(function(){!function(t){"use strict";function e(){function t(t,e,n,r,u,l,f,h,_,y,m){var g,b,w,x,k,C,E,j,T,A,S,R,P,O,U;A=0,k=n;do i[t[e+A]]++,A++,k--;while(0!==k);if(i[0]==n)return f[0]=-1,h[0]=0,c;for(j=h[0],C=1;C<=F&&0===i[C];C++);for(E=C,j<C&&(j=C),k=F;0!==k&&0===i[k];k--);for(w=k,j>k&&(j=k),h[0]=j,O=1<<C;C<k;C++,O<<=1)if((O-=i[C])<0)return p;if((O-=i[k])<0)return p;for(i[k]+=O,s[1]=C=0,A=1,P=2;0!==--k;)s[P]=C+=i[A],P++,A++;k=0,A=0;do 0!==(C=t[e+A])&&(m[s[C]++]=k),A++;while(++k<n);for(n=s[w],s[0]=k=0,A=0,x=-1,R=-j,a[0]=0,S=0,U=0;E<=w;E++)for(g=i[E];0!==g--;){for(;E>R+j;){if(x++,R+=j,U=w-R,U=U>j?j:U,(b=1<<(C=E-R))>g+1&&(b-=g+1,P=E,C<U))for(;++C<U&&!((b<<=1)<=i[++P]);)b-=i[P];if(U=1<<C,y[0]+U>v)return p;a[x]=S=y[0],y[0]+=U,0!==x?(s[x]=k,o[0]=C,o[1]=j,C=k>>>R-j,o[2]=S-a[x-1]-C,_.set(o,3*(a[x-1]+C))):f[0]=S}for(o[1]=E-R,A>=n?o[0]=192:m[A]<r?(o[0]=m[A]<256?0:96,o[2]=m[A++]):(o[0]=l[m[A]-r]+16+64,o[2]=u[m[A++]-r]),b=1<<E-R,C=k>>>R;C<U;C+=b)_.set(o,3*(S+C));for(C=1<<E-1;0!==(k&C);C>>>=1)k^=C;for(k^=C,T=(1<<R)-1;(k&T)!=s[x];)x--,R-=j,T=(1<<R)-1}return 0!==O&&1!=w?d:c}function e(t){var e;for(n||(n=[],r=[],i=new Int32Array(F+1),o=[],a=new Int32Array(F),s=new Int32Array(F+1)),r.length<t&&(r=[]),e=0;e<t;e++)r[e]=0;for(e=0;e<F+1;e++)i[e]=0;for(e=0;e<3;e++)o[e]=0;a.set(i.subarray(0,F),0),s.set(i.subarray(0,F+1),0)}var n,r,i,o,a,s,u=this;u.inflate_trees_bits=function(i,o,a,s,c){var u;return e(19),n[0]=0,u=t(i,0,19,19,null,null,a,o,s,n,r),u==p?c.msg="oversubscribed dynamic bit lengths tree":u!=d&&0!==o[0]||(c.msg="incomplete dynamic bit lengths tree",u=p),u},u.inflate_trees_dynamic=function(i,o,a,s,u,l,f,_,v){var y;return e(288),n[0]=0,y=t(a,0,i,257,k,C,l,s,_,n,r),y!=c||0===s[0]?(y==p?v.msg="oversubscribed literal/length tree":y!=h&&(v.msg="incomplete literal/length tree",y=p),y):(e(288),y=t(a,i,o,0,E,j,f,u,_,n,r),y!=c||0===u[0]&&i>257?(y==p?v.msg="oversubscribed distance tree":y==d?(v.msg="incomplete distance tree",y=p):y!=h&&(v.msg="empty distance tree with lengths",y=p),y):c)}}function n(){function t(t,e,n,r,i,o,a,s){var l,f,h,d,v,y,m,g,b,w,x,k,C,E,j,F;m=s.next_in_index,g=s.avail_in,v=a.bitb,y=a.bitk,b=a.write,w=b<a.read?a.read-b-1:a.end-b,x=_[t],k=_[e];do{for(;y<20;)g--,v|=(255&s.read_byte(m++))<<y,y+=8;if(l=v&x,f=n,h=r,F=3*(h+l),0!==(d=f[F]))for(;;){if(v>>=f[F+1],y-=f[F+1],0!==(16&d)){for(d&=15,C=f[F+2]+(v&_[d]),v>>=d,y-=d;y<15;)g--,v|=(255&s.read_byte(m++))<<y,y+=8;for(l=v&k,f=i,h=o,F=3*(h+l),d=f[F];;){if(v>>=f[F+1],y-=f[F+1],0!==(16&d)){for(d&=15;y<d;)g--,v|=(255&s.read_byte(m++))<<y,y+=8;if(E=f[F+2]+(v&_[d]),v>>=d,y-=d,w-=C,b>=E)j=b-E,b-j>0&&2>b-j?(a.window[b++]=a.window[j++],a.window[b++]=a.window[j++],C-=2):(a.window.set(a.window.subarray(j,j+2),b),b+=2,j+=2,C-=2);else{j=b-E;do j+=a.end;while(j<0);if(d=a.end-j,C>d){if(C-=d,b-j>0&&d>b-j){do a.window[b++]=a.window[j++];while(0!==--d)}else a.window.set(a.window.subarray(j,j+d),b),b+=d,j+=d,d=0;j=0}}if(b-j>0&&C>b-j){do a.window[b++]=a.window[j++];while(0!==--C)}else a.window.set(a.window.subarray(j,j+C),b),b+=C,j+=C,C=0;break}if(0!==(64&d))return s.msg="invalid distance code",C=s.avail_in-g,C=y>>3<C?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,p;l+=f[F+2],l+=v&_[d],F=3*(h+l),d=f[F]}break}if(0!==(64&d))return 0!==(32&d)?(C=s.avail_in-g,C=y>>3<C?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,u):(s.msg="invalid literal/length code",C=s.avail_in-g,C=y>>3<C?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,p);if(l+=f[F+2],l+=v&_[d],F=3*(h+l),0===(d=f[F])){v>>=f[F+1],y-=f[F+1],a.window[b++]=f[F+2],w--;break}}else v>>=f[F+1],y-=f[F+1],a.window[b++]=f[F+2],w--}while(w>=258&&g>=10);return C=s.avail_in-g,C=y>>3<C?y>>3:C,g+=C,m-=C,y-=C<<3,a.bitb=v,a.bitk=y,s.avail_in=g,s.total_in+=m-s.next_in_index,s.next_in_index=m,a.write=b,c}var e,n,r,i,o=this,a=0,s=0,l=0,h=0,d=0,v=0,y=0,m=0,g=0,b=0;o.init=function(t,o,a,s,c,u){e=T,y=t,m=o,r=a,g=s,i=c,b=u,n=null},o.proc=function(o,w,x){var k,C,E,j,F,z,B,M=0,V=0,N=0;for(N=w.next_in_index,j=w.avail_in,M=o.bitb,V=o.bitk,F=o.write,z=F<o.read?o.read-F-1:o.end-F;;)switch(e){case T:if(z>=258&&j>=10&&(o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,x=t(y,m,r,g,i,b,o,w),N=w.next_in_index,j=w.avail_in,M=o.bitb,V=o.bitk,F=o.write,z=F<o.read?o.read-F-1:o.end-F,x!=c)){e=x==u?D:I;break}l=y,n=r,s=g,e=A;case A:for(k=l;V<k;){if(0===j)return o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,j--,M|=(255&w.read_byte(N++))<<V,V+=8}if(C=3*(s+(M&_[k])),M>>>=n[C+1],V-=n[C+1],E=n[C],0===E){h=n[C+2],e=U;break}if(0!==(16&E)){d=15&E,a=n[C+2],e=S;break}if(0===(64&E)){l=E,s=C/3+n[C+2];break}if(0!==(32&E)){e=D;break}return e=I,w.msg="invalid literal/length code",x=p,o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);case S:for(k=d;V<k;){if(0===j)return o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,j--,M|=(255&w.read_byte(N++))<<V,V+=8}a+=M&_[k],M>>=k,V-=k,l=m,n=i,s=b,e=R;case R:for(k=l;V<k;){if(0===j)return o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,j--,M|=(255&w.read_byte(N++))<<V,V+=8}if(C=3*(s+(M&_[k])),M>>=n[C+1],V-=n[C+1],E=n[C],0!==(16&E)){d=15&E,v=n[C+2],e=P;break}if(0===(64&E)){l=E,s=C/3+n[C+2];break}return e=I,w.msg="invalid distance code",x=p,o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);case P:for(k=d;V<k;){if(0===j)return o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,j--,M|=(255&w.read_byte(N++))<<V,V+=8}v+=M&_[k],M>>=k,V-=k,e=O;case O:for(B=F-v;B<0;)B+=o.end;for(;0!==a;){if(0===z&&(F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z&&(o.write=F,x=o.inflate_flush(w,x),F=o.write,z=F<o.read?o.read-F-1:o.end-F,F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z)))return o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);o.window[F++]=o.window[B++],z--,B==o.end&&(B=0),a--}e=T;break;case U:if(0===z&&(F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z&&(o.write=F,x=o.inflate_flush(w,x),F=o.write,z=F<o.read?o.read-F-1:o.end-F,F==o.end&&0!==o.read&&(F=0,z=F<o.read?o.read-F-1:o.end-F),0===z)))return o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);x=c,o.window[F++]=h,z--,e=T;break;case D:if(V>7&&(V-=8,j++,N--),o.write=F,x=o.inflate_flush(w,x),F=o.write,z=F<o.read?o.read-F-1:o.end-F,o.read!=o.write)return o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);e=L;case L:return x=u,o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);case I:return x=p,o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x);default:return x=f,o.bitb=M,o.bitk=V,w.avail_in=j,w.total_in+=N-w.next_in_index,w.next_in_index=N,o.write=F,o.inflate_flush(w,x)}},o.free=function(){}}function r(t,r){var i,o=this,a=B,s=0,l=0,h=0,y=[0],m=[0],g=new n,b=0,w=new Int32Array(3*v),x=0,k=new e;o.bitk=0,o.bitb=0,o.window=new Uint8Array(r),o.end=r,o.read=0,o.write=0,o.reset=function(t,e){e&&(e[0]=x),a==W&&g.free(t),a=B,o.bitk=0,o.bitb=0,o.read=o.write=0},o.reset(t,null),o.inflate_flush=function(t,e){var n,r,i;return r=t.next_out_index,i=o.read,n=(i<=o.write?o.write:o.end)-i,n>t.avail_out&&(n=t.avail_out),0!==n&&e==d&&(e=c),t.avail_out-=n,t.total_out+=n,t.next_out.set(o.window.subarray(i,i+n),r),r+=n,i+=n,i==o.end&&(i=0,o.write==o.end&&(o.write=0),n=o.write-i,n>t.avail_out&&(n=t.avail_out),0!==n&&e==d&&(e=c),t.avail_out-=n,t.total_out+=n,t.next_out.set(o.window.subarray(i,i+n),r),r+=n,i+=n),t.next_out_index=r,o.read=i,e},o.proc=function(t,n){var r,d,v,x,C,E,j,F;for(x=t.next_in_index,C=t.avail_in,d=o.bitb,v=o.bitk,E=o.write,j=E<o.read?o.read-E-1:o.end-E;;)switch(a){case B:for(;v<3;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}switch(r=7&d,b=1&r,r>>>1){case 0:d>>>=3,v-=3,r=7&v,d>>>=r,v-=r,a=M;break;case 1:var T=[],A=[],S=[[]],R=[[]];e.inflate_trees_fixed(T,A,S,R),g.init(T[0],A[0],S[0],0,R[0],0),d>>>=3,v-=3,a=W;break;case 2:d>>>=3,v-=3,a=N;break;case 3:return d>>>=3,v-=3,a=X,t.msg="invalid block type",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n)}break;case M:for(;v<32;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if((~d>>>16&65535)!=(65535&d))return a=X,t.msg="invalid stored block lengths",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);s=65535&d,d=v=0,a=0!==s?V:0!==b?$:B;break;case V:if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);if(0===j&&(E==o.end&&0!==o.read&&(E=0,j=E<o.read?o.read-E-1:o.end-E),0===j&&(o.write=E,n=o.inflate_flush(t,n),E=o.write,j=E<o.read?o.read-E-1:o.end-E,E==o.end&&0!==o.read&&(E=0,j=E<o.read?o.read-E-1:o.end-E),0===j)))return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);if(n=c,r=s,r>C&&(r=C),r>j&&(r=j),o.window.set(t.read_buf(x,r),E),x+=r,C-=r,E+=r,j-=r,0!==(s-=r))break;a=0!==b?$:B;break;case N:for(;v<14;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if(l=r=16383&d,(31&r)>29||(r>>5&31)>29)return a=X,t.msg="too many length or distance symbols",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);if(r=258+(31&r)+(r>>5&31),!i||i.length<r)i=[];else for(F=0;F<r;F++)i[F]=0;d>>>=14,v-=14,h=0,a=H;case H:for(;h<4+(l>>>10);){for(;v<3;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}i[z[h++]]=7&d,d>>>=3,v-=3}for(;h<19;)i[z[h++]]=0;if(y[0]=7,r=k.inflate_trees_bits(i,y,m,w,t),r!=c)return n=r,n==p&&(i=null,a=X),o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);h=0,a=q;case q:for(;;){if(r=l,h>=258+(31&r)+(r>>5&31))break;var P,O;for(r=y[0];v<r;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if(r=w[3*(m[0]+(d&_[r]))+1],O=w[3*(m[0]+(d&_[r]))+2],O<16)d>>>=r,v-=r,i[h++]=O;else{for(F=18==O?7:O-14,P=18==O?11:3;v<r+F;){if(0===C)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);n=c,C--,d|=(255&t.read_byte(x++))<<v,v+=8}if(d>>>=r,v-=r,P+=d&_[F],d>>>=F,v-=F,F=h,r=l,F+P>258+(31&r)+(r>>5&31)||16==O&&F<1)return i=null,a=X,t.msg="invalid bit length repeat",n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);O=16==O?i[F-1]:0;do i[F++]=O;while(0!==--P);h=F}}m[0]=-1;var U=[],D=[],L=[],I=[];if(U[0]=9,D[0]=6,r=l,r=k.inflate_trees_dynamic(257+(31&r),1+(r>>5&31),i,U,D,L,I,w,t),r!=c)return r==p&&(i=null,a=X),n=r,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);g.init(U[0],D[0],w,L[0],w,I[0]),a=W;case W:if(o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,(n=g.proc(o,t,n))!=u)return o.inflate_flush(t,n);if(n=c,g.free(t),x=t.next_in_index,C=t.avail_in,d=o.bitb,v=o.bitk,E=o.write,j=E<o.read?o.read-E-1:o.end-E,0===b){a=B;break}a=$;case $:if(o.write=E,n=o.inflate_flush(t,n),E=o.write,j=E<o.read?o.read-E-1:o.end-E,o.read!=o.write)return o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);a=Q;case Q:return n=u,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);case X:return n=p,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n);default:return n=f,o.bitb=d,o.bitk=v,t.avail_in=C,t.total_in+=x-t.next_in_index,t.next_in_index=x,o.write=E,o.inflate_flush(t,n)}},o.free=function(t){o.reset(t,null),o.window=null,w=null},o.set_dictionary=function(t,e,n){o.window.set(t.subarray(e,e+n),0),o.read=o.write=n},o.sync_point=function(){return a==M?1:0}}function i(){function t(t){return t&&t.istate?(t.total_in=t.total_out=0,t.msg=null,t.istate.mode=it,t.istate.blocks.reset(t,null),c):f}var e=this;e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,c},e.inflateInit=function(n,i){return n.msg=null,e.blocks=null,i<8||i>15?(e.inflateEnd(n),f):(e.wbits=i,n.istate.blocks=new r(n,1<<i),t(n),c)},e.inflate=function(t,e){var n,r;if(!t||!t.istate||!t.next_in)return f;for(e=e==m?d:c,n=d;;)switch(t.istate.mode){case J:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,(15&(t.istate.method=t.read_byte(t.next_in_index++)))!=K){t.istate.mode=at,t.msg="unknown compression method",t.istate.marker=5;break}if((t.istate.method>>4)+8>t.istate.wbits){t.istate.mode=at,t.msg="invalid window size",t.istate.marker=5;break}t.istate.mode=Y;case Y:if(0===t.avail_in)return n;if(n=e,t.avail_in--,t.total_in++,r=255&t.read_byte(t.next_in_index++),((t.istate.method<<8)+r)%31!==0){t.istate.mode=at,t.msg="incorrect header check",t.istate.marker=5;break}if(0===(r&G)){t.istate.mode=it;break}t.istate.mode=Z;case Z:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need=(255&t.read_byte(t.next_in_index++))<<24&4278190080,t.istate.mode=tt;case tt:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.read_byte(t.next_in_index++))<<16&16711680,t.istate.mode=et;case et:if(0===t.avail_in)return n;n=e,t.avail_in--,t.total_in++,t.istate.need+=(255&t.read_byte(t.next_in_index++))<<8&65280,t.istate.mode=nt;case nt:return 0===t.avail_in?n:(n=e,t.avail_in--,t.total_in++,t.istate.need+=255&t.read_byte(t.next_in_index++),t.istate.mode=rt,l);case rt:return t.istate.mode=at,t.msg="need dictionary",t.istate.marker=0,f;case it:if(n=t.istate.blocks.proc(t,n),n==p){t.istate.mode=at,t.istate.marker=0;break}if(n==c&&(n=e),n!=u)return n;n=e,t.istate.blocks.reset(t,t.istate.was),t.istate.mode=ot;case ot:return u;case at:return p;default:return f}},e.inflateSetDictionary=function(t,e,n){var r=0,i=n;return t&&t.istate&&t.istate.mode==rt?(i>=1<<t.istate.wbits&&(i=(1<<t.istate.wbits)-1,r=n-i),t.istate.blocks.set_dictionary(e,r,i),t.istate.mode=it,c):f},e.inflateSync=function(e){var n,r,i,o,a;if(!e||!e.istate)return f;if(e.istate.mode!=at&&(e.istate.mode=at,e.istate.marker=0),0===(n=e.avail_in))return d;for(r=e.next_in_index,i=e.istate.marker;0!==n&&i<4;)e.read_byte(r)==st[i]?i++:i=0!==e.read_byte(r)?0:4-i,r++,n--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=n,e.istate.marker=i,4!=i?p:(o=e.total_in,a=e.total_out,t(e),e.total_in=o,e.total_out=a,e.istate.mode=it,c)},e.inflateSyncPoint=function(t){return t&&t.istate&&t.istate.blocks?t.istate.blocks.sync_point():f}}function o(){}function a(){var t=this,e=new o,n=512,r=y,i=new Uint8Array(n),a=!1;e.inflateInit(),e.next_out=i,t.append=function(t,o){var s,l,f=[],p=0,h=0,_=0;if(0!==t.length){e.next_in_index=0,e.next_in=t,e.avail_in=t.length;do{if(e.next_out_index=0,e.avail_out=n,0!==e.avail_in||a||(e.next_in_index=0,a=!0),s=e.inflate(r),a&&s===d){if(0!==e.avail_in)throw new Error("inflating: bad input")}else if(s!==c&&s!==u)throw new Error("inflating: "+e.msg);if((a||s===u)&&e.avail_in===t.length)throw new Error("inflating: bad input");e.next_out_index&&(e.next_out_index===n?f.push(new Uint8Array(i)):f.push(new Uint8Array(i.subarray(0,e.next_out_index)))),_+=e.next_out_index,o&&e.next_in_index>0&&e.next_in_index!=p&&(o(e.next_in_index),p=e.next_in_index)}while(e.avail_in>0||0===e.avail_out);return l=new Uint8Array(_),\nf.forEach(function(t){l.set(t,h),h+=t.length}),l}},t.flush=function(){e.inflateEnd()}}var s=15,c=0,u=1,l=2,f=-2,p=-3,h=-4,d=-5,_=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],v=1440,y=0,m=4,g=9,b=5,w=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],x=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=15;e.inflate_trees_fixed=function(t,e,n,r){return t[0]=g,e[0]=b,n[0]=w,r[0]=x,c};var T=0,A=1,S=2,R=3,P=4,O=5,U=6,D=7,L=8,I=9,z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=0,M=1,V=2,N=3,H=4,q=5,W=6,$=7,Q=8,X=9,G=32,K=8,J=0,Y=1,Z=2,tt=3,et=4,nt=5,rt=6,it=7,ot=12,at=13,st=[0,0,255,255];o.prototype={inflateInit:function(t){var e=this;return e.istate=new i,t||(t=s),e.istate.inflateInit(e,t)},inflate:function(t){var e=this;return e.istate?e.istate.inflate(e,t):f},inflateEnd:function(){var t=this;if(!t.istate)return f;var e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync:function(){var t=this;return t.istate?t.istate.inflateSync(t):f},inflateSetDictionary:function(t,e){var n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):f},read_byte:function(t){var e=this;return e.next_in.subarray(t,t+1)[0]},read_buf:function(t,e){var n=this;return n.next_in.subarray(t,t+e)}};var ct=t.zip||t;ct.Inflater=ct._jzlib_Inflater=a}(this)}).call(t)}).call(e,function(){return this}())},function(t,e){(function(t){(function(){!function(t){"use strict";function e(t){t.scripts&&t.scripts.length>0&&importScripts.apply(void 0,t.scripts),postMessage({type:"importScripts"})}function n(e){var n=t[e.codecClass],r=e.sn;if(u[r])throw Error("duplicated sn");u[r]={codec:new n(e.options),crcInput:"input"===e.crcType,crcOutput:"output"===e.crcType,crc:new a},postMessage({type:"newTask",sn:r})}function r(t){var e=t.sn,r=t.type,i=t.data,o=u[e];!o&&t.codecClass&&(n(t),o=u[e]);var a,s="append"===r,c=l();if(s)try{a=o.codec.append(i,function(t){postMessage({type:"progress",sn:e,loaded:t})})}catch(f){throw delete u[e],f}else delete u[e],a=o.codec.flush();var p=l()-c;c=l(),i&&o.crcInput&&o.crc.append(i),a&&o.crcOutput&&o.crc.append(a);var h=l()-c,d={type:r,sn:e,codecTime:p,crcTime:h},_=[];a&&(d.data=a,_.push(a.buffer)),s||!o.crcInput&&!o.crcOutput||(d.crc=o.crc.get());try{postMessage(d,_)}catch(v){postMessage(d)}}function i(t,e,n){var r={type:t,sn:e,error:o(n)};postMessage(r)}function o(t){return{message:t.message,stack:t.stack}}function a(){this.crc=-1}function s(){}if(t.zWorkerInitialized)throw new Error("z-worker.js should be run only once");t.zWorkerInitialized=!0,addEventListener("message",function(t){var e=t.data,n=e.type,r=e.sn,o=c[n];if(o)try{o(e)}catch(a){i(n,r,a)}});var c={importScripts:e,newTask:n,append:r,flush:r},u={},l=t.performance?t.performance.now.bind(t.performance):Date.now;a.prototype.append=function(t){for(var e=0|this.crc,n=this.table,r=0,i=0|t.length;r<i;r++)e=e>>>8^n[255&(e^t[r])];this.crc=e},a.prototype.get=function(){return~this.crc},a.prototype.table=function(){var t,e,n,r=[];for(t=0;t<256;t++){for(n=t,e=0;e<8;e++)1&n?n=n>>>1^3988292384:n>>>=1;r[t]=n}return r}(),t.NOOP=s,s.prototype.append=function(t,e){return t},s.prototype.flush=function(){}}(this)}).call(t)}).call(e,function(){return this}())},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";function r(t){this.defaults=o.merge({},t),this.interceptors={request:new s,response:new s}}var i=n(7),o=n(8),a=n(9),s=n(18),c=n(19),u=n(20),l=n(21),f=n(14);r.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),t=o.merge(i,this.defaults,{method:"get"},t),t.baseURL&&!c(t.url)&&(t.url=u(t.baseURL,t.url)),t.withCredentials=t.withCredentials||this.defaults.withCredentials,t.data=f(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n};var p=new r(i),h=t.exports=l(r.prototype.request,p);h.create=function(t){return new r(t)},h.defaults=p.defaults,h.all=function(t){return Promise.all(t)},h.spread=n(22),h.interceptors=p.interceptors,o.forEach(["delete","get","head"],function(t){r.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))},h[t]=l(r.prototype[t],p)}),o.forEach(["post","put","patch"],function(t){r.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))},h[t]=l(r.prototype[t],p)})},function(t,e,n){"use strict";var r=n(8),i=/^\\)\\]\\}\',?\\n/,o={"Content-Type":"application/x-www-form-urlencoded"};t.exports={transformRequest:[function(t,e){return r.isFormData(t)?t:r.isArrayBuffer(t)?t:r.isArrayBufferView(t)?t.buffer:!r.isObject(t)||r.isFile(t)||r.isBlob(t)?t:(r.isUndefined(e)||(r.forEach(e,function(t,n){"content-type"===n.toLowerCase()&&(e["Content-Type"]=t)}),r.isUndefined(e["Content-Type"])&&(e["Content-Type"]="application/json;charset=utf-8")),JSON.stringify(t))}],transformResponse:[function(t){if("string"==typeof t){t=t.replace(i,"");try{t=JSON.parse(t)}catch(e){}}return t}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:r.merge(o),post:r.merge(o),put:r.merge(o)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"}},function(t,e){"use strict";function n(t){return"[object Array]"===y.call(t)}function r(t){return"[object ArrayBuffer]"===y.call(t)}function i(t){return"[object FormData]"===y.call(t)}function o(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function s(t){return"number"==typeof t}function c(t){return"undefined"==typeof t}function u(t){return null!==t&&"object"==typeof t}function l(t){return"[object Date]"===y.call(t)}function f(t){return"[object File]"===y.call(t)}function p(t){return"[object Blob]"===y.call(t)}function h(t){return t.replace(/^\\s*/,"").replace(/\\s*$/,"")}function d(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function _(t,e){if(null!==t&&"undefined"!=typeof t)if("object"==typeof t||n(t)||(t=[t]),n(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(null,t[o],o,t)}function v(){function t(t,n){"object"==typeof e[n]&&"object"==typeof t?e[n]=v(e[n],t):e[n]=t}for(var e={},n=0,r=arguments.length;n<r;n++)_(arguments[n],t);return e}var y=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:r,isFormData:i,isArrayBufferView:o,isString:a,isNumber:s,isObject:u,isUndefined:c,isDate:l,isFile:f,isBlob:p,isStandardBrowserEnv:d,forEach:_,merge:v,trim:h}},function(t,e,n){(function(e){"use strict";t.exports=function(t){return new Promise(function(r,i){try{var o;"function"==typeof t.adapter?o=t.adapter:"undefined"!=typeof XMLHttpRequest?o=n(11):"undefined"!=typeof e&&(o=n(11)),"function"==typeof o&&o(r,i,t)}catch(a){i(a)}})}}).call(e,n(10))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){_&&h&&(_=!1,h.length?d=h.concat(d):v=-1,d.length&&s())}function s(){if(!_){var t=i(a);_=!0;for(var e=d.length;e;){for(h=d,d=[];++v<e;)h&&h[v].run();v=-1,e=d.length}h=null,_=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var l,f,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var h,d=[],_=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||_||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(8),i=n(12),o=n(13),a=n(14),s=n(15),c=window.btoa||n(16);t.exports=function(t,e,u){var l=u.data,f=u.headers;r.isFormData(l)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(!window.XDomainRequest||"withCredentials"in p||s(u.url)||(p=new window.XDomainRequest),u.auth){var h=u.auth.username||"",d=u.auth.password||"";f.Authorization="Basic "+c(h+":"+d)}if(p.open(u.method.toUpperCase(),i(u.url,u.params,u.paramsSerializer),!0),p.timeout=u.timeout,p.onload=function(){if(p){var n="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,r=["text",""].indexOf(u.responseType||"")!==-1?p.responseText:p.response,i={data:a(r,n,u.transformResponse),status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:u};(i.status>=200&&i.status<300||!("status"in p)&&i.responseText?t:e)(i),p=null}},p.onerror=function(){e(new Error("Network Error")),p=null},r.isStandardBrowserEnv()){var _=n(17),v=u.withCredentials||s(u.url)?_.read(u.xsrfCookieName):void 0;v&&(f[u.xsrfHeaderName]=v)}if("setRequestHeader"in p&&r.forEach(f,function(t,e){"undefined"==typeof l&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)}),u.withCredentials&&(p.withCredentials=!0),u.responseType)try{p.responseType=u.responseType}catch(y){if("json"!==p.responseType)throw y}r.isArrayBuffer(l)&&(l=new DataView(l)),p.send(l)}},function(t,e,n){"use strict";function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(8);t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}return o&&(t+=(t.indexOf("?")===-1?"?":"&")+o),t}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t){var e,n,i,o={};return t?(r.forEach(t.split("\\n"),function(t){i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e&&(o[e]=o[e]?o[e]+", "+n:n)}),o):o}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?function(){function t(t){var e=t;return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(n){var i=r.isString(n)?t(n):n;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},function(t,e){"use strict";function n(t){this.message=t}function r(t){for(var e,r,o=String(t),a="",s=0,c=i;o.charAt(0|s)||(c="=",s%1);a+=c.charAt(63&e>>8-s%1*8)){if(r=o.charCodeAt(s+=.75),r>255)throw new n("INVALID_CHARACTER_ERR: DOM Exception 5");e=e<<8|r}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=r},function(t,e,n){"use strict";var r=n(8);t.exports=r.isStandardBrowserEnv()?function(){return{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,e,n){"use strict";function r(){this.handlers=[]}var i=n(8);r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(t)}},function(t,e){"use strict";t.exports=function(t,e){return t.replace(/\\/+$/,"")+"/"+e.replace(/^\\/+/,"")}},function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){(function(e,n,r){/* @preserve\n\t * The MIT License (MIT)\n\t * \n\t * Copyright (c) 2013-2015 Petka Antonov\n\t * \n\t * Permission is hereby granted, free of charge, to any person obtaining a copy\n\t * of this software and associated documentation files (the "Software"), to deal\n\t * in the Software without restriction, including without limitation the rights\n\t * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\t * copies of the Software, and to permit persons to whom the Software is\n\t * furnished to do so, subject to the following conditions:\n\t * \n\t * The above copyright notice and this permission notice shall be included in\n\t * all copies or substantial portions of the Software.\n\t * \n\t * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\t * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n\t * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\t * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\t * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\t * THE SOFTWARE.\n\t * \n\t */\n!function(e){t.exports=e()}(function(){var t,i,o;return function a(t,e,n){function r(o,s){if(!e[o]){if(!t[o]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module \'"+o+"\'");throw u.code="MODULE_NOT_FOUND",u}var l=e[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return r(n?n:e)},l,l.exports,a,t,e,n)}return e[o].exports}for(var i="function"==typeof _dereq_&&_dereq_,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function o(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function a(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var c;try{throw new Error}catch(u){c=u}var l=t("./schedule"),f=t("./queue"),p=t("./util");i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n")}},p.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?a.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=a,i.prototype.settlePromises=s),i.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=c},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(u),u instanceof t){var p={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:u};f._then(e,a,void 0,l,p),u._then(s,c,void 0,l,p),l._setOnCancel(u)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method \'"+s.toString(n)+"\'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var a,s=t("./util"),c=s.canEvaluate;s.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(c){var r=a(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,c=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(c){var u=s._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(c instanceof f)return o(n).call(u,c)}else if("function"==typeof f){var p=o(f).call(u,c);if(p===a)return p;if(p)return o(n).call(u,c)}else if(r.isObject(c)){for(var h=i(f),d=0;d<h.length;++d){var _=h[d];if(f[_]!=c[_])continue t}return o(n).call(u,c)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,a=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){if(i)return new e}function r(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=c,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+B.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?B.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function c(){return this._onCancelField}function u(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new P(this._peekContext())}function _(t,e){if(M(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=C(t);B.notEnumerableProp(t,"stack",r.message+"\\n"+r.stack.join("\\n")),B.notEnumerableProp(t,"__stackCleaned__",!0)}}}function v(t,e,n,r,i){if(void 0===t&&null!==e&&K){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\\n"),c=x(s),u=c.length-1;u>=0;--u){var l=c[u];if(!N.test(l)){var f=l.match(H);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(c.length>0)for(var p=c[0],u=0;u<s.length;++u)if(s[u]===p){u>0&&(a="\\n"+s[u-1]);break}}var h="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(h,!0,e)}}function y(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),m(n)}function m(t,e,r){if(at.warnings){var i,o=new z(t);if(e)r._attachExtraTrace(o);else if(at.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=C(o);o.stack=a.message+"\\n"+a.stack.join("\\n")}et("warning",o)||E(o,"",!0)}}function g(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\\n");return n<e.length&&(e[n]=e[n].join("\\n")),t+"\\n"+e.join("\\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var c=r[s];if(e[i]!==c)break;e.pop(),i--}e=r}}function x(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||q.test(r),o=i&&rt(r);i&&!o&&($&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function k(t){for(var e=t.stack.replace(/\\s+$/g,"").split("\\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||q.test(r))break}return n>0&&(e=e.slice(n)),e}function C(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?k(t):["    (No stack trace)"],{message:n,stack:x(e)}}function E(t,e,n){if("undefined"!=typeof console){var r;if(B.isObject(t)){var i=t.stack;r=e+W(i,t)}else r=e+String(t);"function"==typeof D?D(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function j(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){I.throwLater(o)}"unhandledRejection"===t?et(t,n,r)||i||E(n,"Unhandled rejection "):et(t,r)}function F(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():B.toString(t);var n=/\\[object [a-zA-Z0-9$_]+\\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+T(e)+">, no stack trace)"}function T(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function A(){return"function"==typeof ot}function S(t){var e=t.match(it);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function R(t,e){if(A()){for(var n,r,i=t.stack.split("\\n"),o=e.stack.split("\\n"),a=-1,s=-1,c=0;c<i.length;++c){var u=S(i[c]);if(u){n=u.fileName,a=u.line;break}}for(var c=0;c<o.length;++c){var u=S(o[c]);if(u){r=u.fileName,s=u.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(rt=function(t){if(V.test(t))return!0;var e=S(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}}function P(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ot(this,P),e>32&&this.uncycle()}var O,U,D,L=n._getDomain,I=n._async,z=t("./errors").Warning,B=t("./util"),M=B.canAttachTrace,V=/[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/,N=/\\((?:timers\\.js):\\d+:\\d+\\)/,H=/[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/,q=null,W=null,$=!1,Q=!(0==B.env("BLUEBIRD_DEBUG")),X=!(0==B.env("BLUEBIRD_WARNINGS")||!Q&&!B.env("BLUEBIRD_WARNINGS")),G=!(0==B.env("BLUEBIRD_LONG_STACK_TRACES")||!Q&&!B.env("BLUEBIRD_LONG_STACK_TRACES")),K=0!=B.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(X||!!B.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),I.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){j("rejectionHandled",O,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),j("unhandledRejection",U,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return m(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=L();U="function"==typeof t?null===e?t:B.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=L();O="function"==typeof t?null===e?t:B.domainBind(e,t):void 0};var J=function(){};n.longStackTraces=function(){if(I.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n");if(!at.longStackTraces&&A()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;at.longStackTraces=!0,J=function(){if(I.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),I.enableTrampoline(),at.longStackTraces=!1},n.prototype._captureStackTrace=d,n.prototype._attachExtraTrace=_,r.activateLongStackTraces(),I.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return at.longStackTraces&&A()};var Y=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return B.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!B.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return B.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!B.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),B.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!B.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),Z=function(){return B.isNode?function(){return e.emit.apply(e,arguments)}:B.global?function(t){var e="on"+t.toLowerCase(),n=B.global[e];return!!n&&(n.apply(B.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},et=function(t){var e=!1;try{e=Z.apply(null,arguments)}catch(n){I.throwLater(n),e=!0}var r=!1;try{r=Y(t,tt[t].apply(null,arguments))}catch(n){I.throwLater(n),r=!0}return r||e};n.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&J()),"warnings"in t){var e=t.warnings;at.warnings=!!e,K=at.warnings,B.isObject(e)&&"wForgottenReturn"in e&&(K=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!at.cancellation){if(I.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=c,n.prototype._setOnCancel=u,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,nt=f,at.cancellation=!0}"monitoring"in t&&(t.monitoring&&!at.monitoring?(at.monitoring=!0,n.prototype._fireEvent=et):!t.monitoring&&at.monitoring&&(at.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var nt=p,rt=function(){return!1},it=/[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;B.inherits(P,Error),r.CapturedTrace=P,P.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var a=e[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var c=r>0?e[r-1]:this;s<t-1?(c._parent=e[s+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var u=c._length+1,l=r-2;l>=0;--l)e[l]._length=u,u++;return}}}},P.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=C(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(x(i.stack.split("\\n"))),i=i._parent;w(r),b(r),B.notEnumerableProp(t,"stack",g(n,r)),B.notEnumerableProp(t,"__stackCleaned__",!0)}};var ot=function(){var t=/^\\s*at\\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():F(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,q=t,W=e;var n=Error.captureStackTrace;return rt=function(t){return V.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\\n")[0].indexOf("stackDetection@")>=0)return q=/@/,W=e,$=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(W=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?F(e):e.toString()},null):(q=t,W=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(D=function(t){console.warn(t)},B.isNode&&e.stderr.isTTY?D=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\\n")}:B.isNode||"string"!=typeof(new Error).stack||(D=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:X,longStackTraces:!1,cancellation:!1,monitoring:!1};return G&&n.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return nt},boundValueFunction:function(){return h},checkForgottenReturns:v,setBounds:R,warn:m,deprecated:y,CapturedTrace:P,fireDomEvent:Y,fireGlobalEvent:Z}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,a,s=t("./es5"),c=s.freeze,u=t("./util"),l=u.inherits,f=u.notEnumerableProp,p=r("Warning","warning"),h=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(v){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<y.length;++m)"function"==typeof Array.prototype[y[m]]&&(_.prototype[y[m]]=Array.prototype[y[m]]);s.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var g=0;_.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\\n"+t+"AggregateError of:\\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\\n"),e+=r+"\\n"}return g--,e},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=c({CancellationError:h,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},c=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return a}},p=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:p,keys:s,names:s,defineProperty:u,getDescriptor:c,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return c.call(this,this.promise._target()._settledValue())}function s(t){if(!o(this,t))return f.e=t,f}function c(t){var r=this.promise,c=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?c.call(r._boundValue()):c.call(r._boundValue(),t);if(void 0!==u){r._setReturnedNonUndefined();var p=n(u,r);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var h=new l("late cancellation observer");return r._attachExtraTrace(h),f.e=h,f}p.isPending()&&p._attachCancellationCallback(new i(this))}return p._then(a,s,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var u=t("./util"),l=e.CancellationError,f=u.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,c,c)},e.prototype.tap=function(t){return this._passThrough(t,1,c)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=h(n[o])(t);if(r._popContext(),a===p){r._pushContext();var s=e.reject(p.e);return r._popContext(),s}var c=i(a,r);if(c instanceof e)return c}return null}function c(t,n,i,o){if(a.cancellation()){var s=new e(r),c=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return c}),s._captureStackTrace(),s._setOnCancel(this)}else{var u=this._promise=new e(r);u._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var u=t("./errors"),l=u.TypeError,f=t("./util"),p=f.errorObj,h=f.tryCatch,d=[];f.inherits(c,o),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=h(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=h(this._generator["throw"]).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},c.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(t){var n=this._promise;if(t===p)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n".replace("%s",r)+"From coroutine:\\n"+this._stack.split("\\n").slice(1,-7).join("\\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n");var n=Object(e).yieldHandler,r=c,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r((void 0),(void 0),n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));d.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n");\nvar r=new c(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=u();this._callback=null===i?e:l.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function c(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+l.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("\'concurrency\' must be a number but it is "+l.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new s(t,n,a,o).promise()}var u=e._getDomain,l=t("./util"),f=l.tryCatch,p=l.errorObj,h=e._async;l.inherits(s,n),s.prototype._asyncInit=function(){this._init$(void 0,-2)},s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,c=this._limit;if(n<0){if(n=n*-1-1,r[n]=t,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var u=this._promise,l=this._callback,h=u._boundValue();u._pushContext();var d=f(l).call(h,t,n,o),_=u._popContext();if(a.checkForgottenReturns(d,_,null!==s?"Promise.filter":"Promise.map",u),d===p)return this._reject(d.e),!0;var v=i(d,this._promise);if(v instanceof e){v=v._target();var y=v._bitField;if(0===(50397184&y))return c>=1&&this._inFlight++,r[n]=v,v._proxy(this,(n+1)*-1),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(v._reason()),!0):(this._cancel(),!0);d=v._value()}r[n]=d}var m=++this._totalResolved;return m>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return c(this,t,e,null)},e.map=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];c=a.isArray(u)?s(t).apply(l,u):s(t).call(l,u)}else c=s(t)();var f=r._popContext();return o.checkForgottenReturns(c,f,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new u(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}var a=t("./util"),s=a.maybeWrapAsError,c=t("./errors"),u=c.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=s(e).apply(n._boundValue(),[null].concat(t));i===c&&a.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?s(e).call(r,null):s(e).call(r,null,t);i===c&&a.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=s(e).call(n._boundValue(),t);i===c&&a.throwLater(i.e)}var o=t("./util"),a=e._async,s=o.tryCatch,c=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){function r(){}function i(t,e){if("function"!=typeof e)throw new g("expecting a function but got "+d.classString(e));if(t.constructor!==o)throw new g("the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n")}function o(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==w&&(i(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function c(t){var e=new o(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var u,l=function(){return new g("circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n")},f=function(){return new o.PromiseInspection(this._target())},p=function(t){return o.reject(new g(t))},h={},d=t("./util");u=d.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},d.notEnumerableProp(o,"_getDomain",u);var _=t("./es5"),v=t("./async"),y=new v;_.defineProperty(o,"_async",{value:y});var m=t("./errors"),g=o.TypeError=m.TypeError;o.RangeError=m.RangeError;var b=o.CancellationError=m.CancellationError;o.TimeoutError=m.TimeoutError,o.OperationalError=m.OperationalError,o.RejectionError=m.OperationalError,o.AggregateError=m.AggregateError;var w=function(){},x={},k={},C=t("./thenables")(o,w),E=t("./promise_array")(o,w,C,p,r),j=t("./context")(o),F=j.create,T=t("./debuggability")(o,j),A=(T.CapturedTrace,t("./finally")(o,C)),S=t("./catch_filter")(k),R=t("./nodeback"),P=d.errorObj,O=d.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!d.isObject(o))return p("expecting an object but got A catch statement predicate "+d.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,S(r,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},o.prototype.then=function(t,e){if(T.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+d.classString(t);arguments.length>1&&(n+=", "+d.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+d.classString(t)):this.all()._then(t,void 0,void 0,x,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},o.prototype.error=function(t){return this.caught(d.originatesFromRejection,t)},o.getNewLibraryCopy=n.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(w);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=O(t)(R(e,n));return r===P&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new E(t).promise()},o.cast=function(t){var e=C(t);return e instanceof o||(e=new o(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new g("expecting a function but got "+d.classString(t));return y.setScheduler(t)},o.prototype._then=function(t,e,n,r,i){var a=void 0!==i,s=a?i:new o(w),c=this._target(),l=c._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=u();if(0!==(50397184&l)){var p,h,_=c._settlePromiseCtx;0!==(33554432&l)?(h=c._rejectionHandler0,p=t):0!==(16777216&l)?(h=c._fulfillmentHandler0,p=e,c._unsetRejectionIsUnhandled()):(_=c._settlePromiseLateCancellationObserver,h=new b("late cancellation observer"),c._attachExtraTrace(h),p=e),y.invoke(_,c,{handler:null===f?p:"function"==typeof p&&d.domainBind(f,p),promise:s,receiver:r,value:h})}else c._addCallbacks(t,e,s,r,f);return s},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){y.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==h)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(e,n,r,i,null)},o.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},o.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:d.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:d.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:d.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:d.domainBind(i,e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=C(t,this);if(!(n instanceof o))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0===(50397184&i)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&i))this._fulfill(r._value());else if(0!==(16777216&i))this._reject(r._reason());else{var c=new b("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}},o.prototype._rejectCallback=function(t,e,n){var r=d.ensureErrorObject(t),i=r===t;if(!i&&!n&&T.warnings()){var o="a promise was rejected with a non-error: "+d.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},o.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===x?n&&"number"==typeof n.length?o=O(t).apply(this._boundValue(),n):(o=P,o.e=new g("cannot .spread() a non-array: "+d.classString(n))):o=O(t).call(e,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===k?r._reject(n):o===P?r._rejectCallback(o.e,!1):(T.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,n,i){var a=t instanceof o,s=this._bitField,c=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof A&&n.isFinallyHandler()?(n.cancelPromise=t,O(e).call(n,i)===P&&t._reject(P.e)):e===f?t._fulfill(f.call(n)):n instanceof r?n._promiseCancelled(t):a||t instanceof E?t._cancel():n.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof r?n._isResolved()||(0!==(33554432&s)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):a&&(c&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof o?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():y.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?y.fatalError(t,d.isNode):void((65535&e)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){T.deprecated("Promise.defer","new Promise");var t=new o(w);return{promise:t,resolve:a,reject:s}},d.notEnumerableProp(o,"_makeSelfResolutionError",l),t("./method")(o,w,C,p,T),t("./bind")(o,w,C,T),t("./cancel")(o,E,p,T),t("./direct_resolve")(o),t("./synchronous_inspection")(o),t("./join")(o,E,C,w,y,u),o.Promise=o,o.version="3.4.6",t("./map.js")(o,E,p,C,w,T),t("./call_get.js")(o),t("./using.js")(o,p,C,F,w,T),t("./timers.js")(o,w,T),t("./generators.js")(o,p,w,C,r,T),t("./nodeify.js")(o),t("./promisify.js")(o,w),t("./props.js")(o,E,C,p),t("./race.js")(o,w,C,p),t("./reduce.js")(o,E,p,C,w,T),t("./settle.js")(o,E,T),t("./some.js")(o,E,p),t("./filter.js")(o,w),t("./each.js")(o,w),t("./any.js")(o),d.toFastProperties(o),d.toFastProperties(o.prototype),c({a:1}),c({b:2}),c({c:3}),c(1),c(function(){}),c(void 0),c(!1),c(new o(w)),T.setBounds(v.firstLineError,d.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function u(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var s=o._bitField;if(this._values=o,0===(50397184&s))return this._promise._setAsyncGuaranteed(),o._then(u,this._reject,void 0,this,n);if(0===(33554432&s))return 0!==(16777216&s)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=c.asArray(o),null===o){var l=i("expecting an array or an iterable object but got "+c.classString(o)).reason();return void this._promise._rejectCallback(l,!1)}return 0===o.length?void(n===-5?this._resolveEmptyArray():this._resolve(a(n))):void this._iterate(o)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var c=r(t[s],i);c instanceof e?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0===(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!==(33554432&a)?this._promiseFulfilled(c._value(),s):0!==(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!x.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=h.getDataPropertyOrDefault(t,e+n,b);return!!r&&i(r)}function a(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new m("Cannot promisify an API that has normal methods with \'%s\'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n".replace("%s",e))}}function s(t,e,n,r){for(var s=h.inheritedDataKeys(t),c=[],u=0;u<s.length;++u){var l=s[u],f=t[l],p=r===k||k(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,p)||c.push(l,f)}return a(c,e,n),c}function c(t,r,i,o,a,s){function c(){var i=r;r===p&&(i=this);var o=new e(n);o._captureStackTrace();var a="string"==typeof l&&this!==u?this[l]:t,c=d(o,s);try{a.apply(i,_(arguments,c))}catch(f){o._rejectCallback(v(f),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var u=function(){return this}(),l=t;return"string"==typeof l&&(t=o),h.notEnumerableProp(c,"__isPromisified__",!0),c}function u(t,e,n,r,i){for(var o=new RegExp(C(e)+"$"),a=s(t,e,o,n),c=0,u=a.length;c<u;c+=2){var l=a[c],f=a[c+1],d=l+e;if(r===E)t[d]=E(l,p,l,f,e,i);else{var _=r(f,function(){return E(l,p,l,f,e,i)});h.notEnumerableProp(_,"__isPromisified__",!0),t[d]=_}}return h.toFastProperties(t),t}function l(t,e,n){return E(t,e,void 0,t,null,n)}var f,p={},h=t("./util"),d=t("./nodeback"),_=h.withAppended,v=h.maybeWrapAsError,y=h.canEvaluate,m=t("./errors").TypeError,g="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],x=new RegExp("^(?:"+w.join("|")+")$"),k=function(t){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},C=function(t){return t.replace(/([$])/,"\\\\$")},E=y?f:c;e.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+h.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?p:e.context,o=!!e.multiArgs,a=l(t,n,o);return h.copyDescriptors(t,a,r),a},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=g);var i=e.filter;"function"!=typeof i&&(i=k);var o=e.promisifier;if("function"!=typeof o&&(o=E),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n");for(var a=h.inheritedDataKeys(t),s=0;s<a.length;++s){var c=t[a[s]];"constructor"!==a[s]&&h.isClass(c)&&(u(c.prototype,r,i,o,n),u(c,r,i,o,n))}return u(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=f(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function a(t){var n,a=r(t);return u(a)?(n=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof e&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n")}var s,c=t("./util"),u=c.isObject,l=t("./es5");"function"==typeof Map&&(s=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),p=function(t){for(var e=new s,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};c.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=p(this._values);else{r={};for(var i=this.length(),o=0,a=this.length();o<a;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return a(this)},e.props=function(t){return a(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var c=r(t);if(c instanceof e)return s(c);if(t=a.asArray(t),null===t)return i("expecting an array or an iterable object but got "+a.classString(t));var u=new e(n);void 0!==o&&u._propagateFrom(o,3);for(var l=u._fulfill,f=u._reject,p=0,h=t.length;p<h;++p){var d=t[p];(void 0!==d||p in t)&&e.cast(d)._then(l,f,void 0,u,null)}return u}var a=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t,n,r,i){this.constructor$(t);var a=p();this._fn=null===a?n:h.domainBind(a,n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function u(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+h.classString(e));var o=new s(t,e,n,i);return o.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var s=r._popContext();return a.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var p=e._getDomain,h=t("./util"),d=h.tryCatch;h.inherits(s,n),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},s.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(c,c,void 0,n,this)},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],29:[function(t,i,o){"use strict";var a,s=t("./util"),c=function(){throw new Error("No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n")},u=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var l=n.setImmediate,f=e.nextTick;a=s.isRecentNode?function(t){l.call(n,t)}:function(t){f.call(e,t)}}else if("function"==typeof u&&"function"==typeof u.resolve){var p=u.resolve();a=function(t){p.then(t)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof r?function(t){r(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:c:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();i.exports=a},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,a=t("./util");a.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var a=t("./util"),s=t("./errors").RangeError,c=t("./errors").AggregateError,u=a.isArray,l={};a.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=u(this._values);\n!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new c,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===u){r&&r._pushContext();var c=e.reject(i.e);return r&&r._popContext(),c}if("function"==typeof i){if(a(t)){var c=new e(n);return t._then(c._fulfill,c._reject,void 0,c,null),c}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return u.e=e,u}}function a(t){try{return f.call(t,"_promise0")}catch(e){return!1}}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function a(t){s&&(s._rejectCallback(t,f,!0),s=null)}var s=new e(n),l=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var f=!0,p=c.tryCatch(r).call(t,o,a);return f=!1,s&&p===u&&(s._rejectCallback(p.e,!0,!0),s=null),l}var c=t("./util"),u=c.errorObj,l=c.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var s=t("./util"),c=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var u=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var a,s;return void 0!==o?(a=e.resolve(o)._then(u,null,null,t,void 0),r.cancellation()&&o instanceof e&&a._setOnCancel(o)):(a=new e(n),s=setTimeout(function(){a._fulfill()},+t),r.cancellation()&&a._setOnCancel(new i(s)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new c("operation timed out"):new c(e),s.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,s,c=new i(setTimeout(function(){n.isPending()&&f(n,e,s)},t));return r.cancellation()?(s=this.then(),n=s._then(o,a,void 0,c,void 0),n._setOnCancel(c)):n=this._then(o,a,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){function s(t){setTimeout(function(){throw t},0)}function c(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(a>=u)return l._fulfill();var o=c(t[a++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(f){return s(f)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var a=0,u=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function p(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function h(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),_=t("./errors").TypeError,v=t("./util").inherits,y=d.errorObj,m=d.tryCatch,g={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():g},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==g?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},v(f,l),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},h.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var c=new h(t),f=0;f<t;++f){var _=o[f];if(l.isDisposer(_)){var v=_;_=_.promise(),_._setDisposable(v)}else{var g=r(_);g instanceof e&&(_=g._then(p,null,null,{resources:c,index:f},void 0))}c[f]=_}for(var b=new Array(c.length),f=0;f<b.length;++f)b[f]=e.resolve(c[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}x._pushContext(),i=m(i);var r=s?i.apply(void 0,t):i(t),o=x._popContext();return a.checkForgottenReturns(r,o,"Promise.using",x),r}),x=w.lastly(function(){var t=new e.PromiseInspection(w);return u(c,t)});return c.promise=x,x._setOnCancel(c),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new _}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";function o(){try{var t=R;return R=null,t.apply(this,arguments)}catch(e){return S.e=e,S}}function a(t){return R=t,o}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function c(t){return"function"==typeof t||"object"==typeof t&&null!==t}function u(t){return s(t)?new Error(m(t)):t}function l(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function f(t,e,n){if(!T.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function p(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return T.defineProperty(t,e,r),t}function h(t){throw t}function d(t){try{if("function"==typeof t){var e=T.names(t.prototype),n=T.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=D.test(t+"")&&T.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function _(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function v(t){return L.test(t)}function y(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function m(t){try{return t+""}catch(e){return"[no string representation]"}}function g(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{p(t,"isOperational",!0)}catch(e){}}function w(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function x(t){return g(t)&&T.propertyIsWritable(t,"stack")}function k(t){return{}.toString.call(t)}function C(t,e,n){for(var r=T.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{T.defineProperty(e,o,T.getDescriptor(t,o))}catch(a){}}}function E(t,e){return M?{NODE_ENV:"production"}[t]:e}function j(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(e){}}function F(t,e){return t.bind(e)}var T=t("./es5"),A="undefined"==typeof navigator,S={e:{}},R,P="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof n?n:void 0!==this?this:null,O=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},U=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(T.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(a){return r}for(var s=0;s<o.length;++s){var c=o[s];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}t=T.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),D=/this\\s*\\.\\s*\\S+\\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,I=function(){return"stack"in new Error?function(t){return x(t)?t:new Error(m(t))}:function(t){if(x(t))return t;try{throw new Error(m(t))}catch(e){return e}}}(),z=function(t){return T.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var B="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};z=function(t){return T.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?B(t):null}}var M="undefined"!=typeof e&&"[object process]"===k(e).toLowerCase(),V={isClass:d,isIdentifier:v,inheritedDataKeys:U,getDataPropertyOrDefault:f,thrower:h,isArray:T.isArray,asArray:z,notEnumerableProp:p,isPrimitive:s,isObject:c,isError:g,canEvaluate:A,errorObj:S,tryCatch:a,inherits:O,withAppended:l,maybeWrapAsError:u,toFastProperties:_,filledRange:y,toString:m,canAttachTrace:x,ensureErrorObject:I,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:k,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:M,env:E,global:P,getNativePromise:j,domainBind:F};V.isRecentNode=V.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),V.isNode&&V.toFastProperties(e);try{throw new Error}catch(N){V.lastLineError=N}r.exports=V},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,n(10),function(){return this}(),n(24).setImmediate)},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(10).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,c={},u=0;e.setTimeout=function(){return new i(a.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(a.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=u++,r=!(arguments.length<2)&&s.call(arguments,1);return c[n]=!0,o(function(){c[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete c[t]}}).call(e,n(24).setImmediate,n(24).clearImmediate)}]);\n//# sourceMappingURL=dffe4040bf26fd64ddbc.worker.js.map',n.p+"dffe4040bf26fd64ddbc.worker.js");
}},function(e,t){var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var r;try{var o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;r=new o,r.append(e),r=r.getBlob()}catch(i){r=new Blob([e])}return new Worker(n.createObjectURL(r))}catch(i){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(i){return new Worker(t)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=[],r=256,o=0;o<e.mcnkObjs.length;o++){var i=e.mcnkObjs[o],a=i.alphaArray,s=i.textureLayers,l=new Array(16384);if(n.push(l),s)for(var u=0;u<s.length;u++){var c=s[u].alphaMap,f=64*u,d=0,p=0;if((512&s[u].flags)>0)for(;p<4096;){var h=128&a[c],m=127&a[c];c++;for(var v=0;v<m&&4096!=p;v++)l[f++]=a[c],d++,p++,d>=64&&(f=f+r-64,d=0,p++),h||c++;h&&c++}else if((4&t.flags)>0||(128&t.flags)>0)for(var g=0;g<64;g++)for(var b=0;b<64;b++)l[f]=a[c],f+=1,d+=1,p+=1,c++,d>=64&&(f=f+r-64,d=0);else for(var g=0;g<64;g++)for(var b=0;b<32;b++)l[f]=17*((240&a[c])>>4),l[f+1]=17*(15&a[c]),f+=2,d+=2,p+=2,c++,d>=64&&(f=f+r-64,d=0)}}return n}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(87),l=r(s),u=n(88),c=r(u),f=function(){function e(t,n){o(this,e),this.sceneApi=t,this.gl=t.getGlContext(),this.wdtFile=n,this.combinedVBO=null,this.textureArray=new Array(255);for(var r=0;r<256;r++)this.textureArray[r]=[]}return a(e,[{key:"assign",value:function(e){this.adtFile=e}},{key:"loadTextures",value:function(){for(var e=this.gl,t=this.adtFile.mcnkObjs,n=0;n<t.length;n++){var r=t[n];if(r.textureLayers&&r.textureLayers.length>0)for(var o=0;o<r.textureLayers.length;o++)this.loadTexture(n,o,r.textureLayers[o].textureName)}for(var a=(t.length,4),s=64,l=a*s,u=s,c=i(this.adtFile,this.wdtFile),f=[],n=0;n<t.length;n++){var d=e.createTexture();e.bindTexture(e.TEXTURE_2D,d),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,l,u,0,e.ALPHA,e.UNSIGNED_BYTE,new Uint8Array(c[n])),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),f.push(d)}this.alphaTextures=f}},{key:"loadTexture",value:function(e,t,n){var r=this;this.sceneApi.resources.loadTexture(n).then(function(n){r.textureArray[e][t]=n},function(){})}},{key:"createTriangleStrip",value:function(){function e(e,t,n){var r=[4369,8738,17476,34952],o=[15,240,3840,61440];return 0!=(e&r[t]&o[n])}function t(e,t){var n=9*(t+1>>>1)+8*(t>>>1)+e;return n}for(var n=this.adtFile.mcnkObjs,r=[],o=[],i=0;i<n.length;i++){var a=n[i],s=a.holes;o.push(r.length);for(var l=!0,u=0;u<4;u++)for(var c=0;c<4;c++)if(!e(s,u,c))for(var f=2*u,d=4*c,p=0;p<2;p++){l?l=!1:r.push(t(f,d+2*p));for(var h=0;h<3;h++)r.push(t(f+h,d+2*p)),r.push(t(f+h,d+2*p+2));r.push(t(f+2,d+2*p+2))}}o.push(r.length);var m={strips:r,stripOffsets:o};this.triangleStrip=m}},{key:"createVBO",value:function(){var e=this.gl,t=(this.adtFile,[]);this.indexOffset=t.length;for(var n=0;n<145;n++)t.push(n);this.heightOffset=t.length;for(var r=this.adtFile.mcnkObjs,n=0;n<r.length;n++)for(var o=0;o<145;o++)t.push(r[n].heights[o]);this.combinedVbo=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.combinedVbo),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t),e.STATIC_DRAW),this.stripVBO=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.stripVBO),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(this.triangleStrip.strips),e.STATIC_DRAW)}},{key:"draw",value:function(e){var t=this.gl,n=this.triangleStrip.stripOffsets,r=this.sceneApi.shaders.getShaderUniforms(),o=this.sceneApi.shaders.getShaderAttributes(),i=this.sceneApi.getBlackPixelTexture();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.stripVBO),t.bindBuffer(t.ARRAY_BUFFER,this.combinedVbo),t.vertexAttribPointer(o.aIndex,1,t.FLOAT,!1,0,4*this.indexOffset);for(var a=this.adtFile.mcnkObjs,s=0;s<256;s++)if(e[s]){var l=a[s];if(t.vertexAttribPointer(o.aHeight,1,t.FLOAT,!1,0,4*(this.heightOffset+145*s)),t.uniform3f(r.uPos,l.pos.x,l.pos.y,l.pos.z),this.textureArray[s]&&this.textureArray[s][0]){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.textureArray[s][0].texture),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.alphaTextures[s]);for(var u=1;u<this.textureArray[s].length;u++)t.activeTexture(t.TEXTURE1+u),this.textureArray[s][u]&&this.textureArray[s][u].texture?t.bindTexture(t.TEXTURE_2D,this.textureArray[s][u].texture):t.bindTexture(t.TEXTURE_2D,i);for(var u=this.textureArray[s].length;u<4;u++)t.activeTexture(t.TEXTURE1+u),t.bindTexture(t.TEXTURE_2D,i);var c=0==s?0:n[s+1]-n[s];t.drawElements(t.TRIANGLE_STRIP,c,t.UNSIGNED_SHORT,2*n[s])}}}}]),e}(),d=function p(e){o(this,p);var t=this,n=(0,l["default"])(function(e){return(0,c["default"])(e)},function(t){var n=new f(e,e.getCurrentWdt());return n.assign(t),n.createTriangleStrip(),n.createVBO(),n.loadTextures(),n});t.loadAdt=function(e){return n.get(e)},t.unLoadAdt=function(e){n.remove(e)}};t["default"]=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t["default"]=function(e,t){return new l(e,t)};var a=n(68),s=r(a),l=function(){function e(t,n){o(this,e),this.cache={},this.queueForLoad={},this.load=t,this.process=n}return i(e,[{key:"get",value:function(e){var t=s["default"].defer(),n=this,r=this.getCached(e);if(r)return t.resolve(r),t.promise;var o=this.queueForLoad[e];return void 0===o&&(o=[],this.load(e).then(function(t){var r=n.process(t);n.put(e,r),n.resolve(e)},function(t){n.reject(e)})),o.push(t),this.queueForLoad[e]=o,t.promise}},{key:"resolve",value:function(e){for(var t=this.queueForLoad[e],n=0;n<t.length;n++){var r=this.getCached(e);t[n].resolve(r)}this.queueForLoad[e]=void 0}},{key:"reject",value:function(e,t){for(var n=this.queueForLoad[e],r=0;r<n.length;r++)n[r].reject(t);this.queueForLoad[e]=void 0}},{key:"put",value:function(e,t){var n={obj:t,counter:1};this.cache[e]=n}},{key:"getCached",value:function(e){var t=this.cache[e];if(void 0!==t)return t.counter+=1,t.obj}},{key:"remove",value:function(e){var t=this.cache[e];t&&(t.counter-=1,t.counter<=0&&(cache[e]=null,t.obj.destroy()))}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t["default"]=function(e){function t(e){for(var t=0;t<e.mcnkObjs.length;t++){var n=e.mcnkObjs[t],r=e.mtex;if(n.textureLayers)for(var o=0;o<n.textureLayers.length;o++){var i=n.textureLayers[o].textureID,a=r[i];n.textureLayers[o].textureName=a}}}var n=s["default"].defer(),r=(0,u["default"])(e);return r.then(function(e){var r={};e.setSectionReaders(h),e.processFile(r),t(r),n.resolve(r)},function(){n.reject()}),n.promise};var a=n(68),s=r(a),l=n(81),u=r(l),c=n(82),f=r(c),d={MVER:function(e,t){if("MVER"!==t.chunkIdent)throw"Got bad group ADT file "+filename;t.readInt32({offs:0})},MHDR:function(e,t,n){var r={offs:0},o=(t.readUint32(r),t.readUint32(r)),i=t.readUint32(r),a=t.readUint32(r),s=t.readUint32(r),l=t.readUint32(r),u=t.readUint32(r),c=t.readUint32(r),f=t.readUint32(r);t.readUint32(r),t.readUint32(r),t.readUint32(r),t.readUint32(r),t.readUint32(r),t.readUint32(r),t.readUint32(r);n.processChunkAtOffs(t.chunkDataOffset+o,e),n.processChunkAtOffs(t.chunkDataOffset+i,e),n.processChunkAtOffs(t.chunkDataOffset+a,e),n.processChunkAtOffs(t.chunkDataOffset+s,e),n.processChunkAtOffs(t.chunkDataOffset+l,e),n.processChunkAtOffs(t.chunkDataOffset+u,e),n.processChunkAtOffs(t.chunkDataOffset+c,e),n.processChunkAtOffs(t.chunkDataOffset+f,e),t.nextChunkOffset=n.getFileSize()},MCIN:function(e,t,n){for(var r={offs:0},o=[],i=0;i<256;i++){var a={};a.offsetMCNK=t.readUint32(r),a.size=t.readUint32(r),a.flags=t.readUint32(r),a.asyncId=t.readUint32(r);var s={};n.processChunkAtOffs(a.offsetMCNK,s),o.push(s)}e.mcnkObjs=o},MCNK:function(e,t,n){var r={offs:0};e.flags=t.readUint32(r),e.ix=t.readUint32(r),e.iy=t.readUint32(r),e.nLayers=t.readUint32(r),e.nDoodadRefs=t.readUint32(r);var o=t.readUint32(r),i=t.readUint32(r),a=t.readUint32(r),s=(t.readUint32(r),t.readUint32(r));e.sizeAlpha=t.readUint32(r);t.readUint32(r);e.sizeShadow=t.readUint32(r),e.areaid=t.readUint32(r),e.nMapObjRefs=t.readUint32(r),e.holes=t.readUint32(r),e.s1=t.readUint16(r),e.s2=t.readUint16(r),e.d1=t.readUint32(r),e.d2=t.readUint32(r),e.d3=t.readUint32(r),e.predTex=t.readUint32(r);t.readUint32(r),t.readUint32(r),t.readUint32(r),t.readUint32(r),t.readUint32(r);e.pos=t.readVector3f(r),e.textureId=t.readUint32(r),e.props=t.readUint32(r),e.effectId=t.readUint32(r),n.processChunkAtOffs(t.chunkOffset+o,e),n.processChunkAtOffs(t.chunkOffset+i,e),n.processChunkAtOffs(t.chunkOffset+a,e),n.processChunkAtOffsWithSize(t.chunkOffset+s,e.sizeAlpha,e)},MCVT:function(e,t,n){var r={offs:0},o=t.readFloat32Array(r,145);e.heights=o},MCNR:function(e,t,n){for(var r={offs:0},o=[],i=0;i<145;i++){var a=t.readInt8(r)/127,s=t.readInt8(r)/127,l=t.readInt8(r)/127;o.push(a),o.push(s),o.push(l)}e.normales=o},MCLY:function(e,t,n){for(var r={offs:0},o=t.chunkLen>>4,i=[],a=0;a<o;a++){var s={};s.textureID=t.readInt32(r),s.flags=t.readInt32(r),s.alphaMap=t.readInt32(r),s.detailTex=t.readInt32(r),i.push(s)}e.textureLayers=i},MCAL:function(e,t,n){var r={offs:0},o=t.readUint8Array(r,t.chunkLen);e.alphaArray=o},MTEX:function(e,t){for(var n={offs:0},r=[];n.offs<t.chunkLen;){var o=t.readString(n,t.chunkLen-n.offs);n.offs+=1,r.push(o)}e.mtex=r},MMDX:function(e,t){var n={offs:0},r=null;t.chunkLen>0&&(r=t.readUint8Array(n,t.chunkLen)),e.mmdx=r},MMID:function(e,t){var n={offs:0},r=null;t.chunkLen>0&&(r=t.readInt32Array(n,t.chunkLen>>2)),e.mmid=r},MWMO:function(e,t){var n={offs:0},r=null;t.chunkLen>0&&(r=t.readUint8Array(n,t.chunkLen)),e.mwmo=r},MWID:function(e,t){var n={offs:0},r=null;t.chunkLen>0&&(r=t.readInt32Array(n,t.chunkLen>>2)),e.mwid=r},MDDF:function(e,t){var n=[],r={offs:0},o=t.chunkLen/36;if(o>0)var i=(0,f["default"])(e.mmdx.buffer);for(var a=0;a<o;a++){var s={};s.nameID=t.readInt32(r),s.uniqueId=t.readInt32(r),s.pos=t.readVector3f(r),s.rotation=t.readVector3f(r),s.scale=t.readInt32(r);var l=e.mmid[s.nameID];s.fileName=i.readString({offs:l},i.getLength()-l),n.push(s)}e.mddf=n},MODF:function(e,t){var n={offs:0},r=[],o=t.chunkLen/64;if(o>0)var i=(0,f["default"])(e.mwmo.buffer);for(var a=0;a<o;a++){var s={};s.nameId=t.readInt32(n),s.uniqueId=t.readInt32(n),s.pos=t.readVector3f(n),s.rotation=t.readVector3f(n),s.bb1=t.readVector3f(n),s.bb2=t.readVector3f(n),s.doodadSet=t.readUint16(n),s.nameSet=t.readUint16(n),s.flags=t.readInt32(n);var l=e.mwid[s.nameId];s.fileName=i.readString({offs:l},i.getLength()-l),r.push(s)}e.wmoObjs=r}},p=function(){function e(){o(this,e)}return i(e,[{key:"getHandler",value:function(e){return d[e]}}]),e}(),h=new p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(87),s=r(a),l=n(90),u=r(l),c=function(){function e(t){o(this,e),this.sceneApi=t,this.gl=t.getGlContext(),this.combinedVBO=null,this.vao=null,this.textureArray=[]}return i(e,[{key:"assign",value:function(e){this.m2File=e}},{key:"loadTextures",value:function(){for(var e=this.m2File.textureDefinition,t=0;t<e.length;t++)this.loadTexture(t,e[t].textureName)}},{key:"loadTexture",value:function(e,t){var n=this;this.sceneApi.resources.loadTexture(t).then(function(t){n.textureArray[e]=t},function(){})}},{key:"createVBO",value:function(){var e=this.gl,t=this.m2File;this.vertexVBO=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexVBO),e.bufferData(e.ARRAY_BUFFER,t.vertexes,e.STATIC_DRAW)}},{key:"createVAO",value:function(e){var t=(this.gl,this.sceneApi.shaders.getShaderAttributes(),this.sceneApi.extensions.getVaoExt());if(t){var n=t.createVertexArrayOES();t.bindVertexArrayOES(n),this.sceneApi.shaders.activateM2Shader(),this.sceneApi.shaders.activateM2ShaderAttribs(),this.setupAttributes(e),t.bindVertexArrayOES(null),this.sceneApi.shaders.deactivateM2Shader(),this.vao=n}}},{key:"setupPlacementAttribute",value:function(e){var t=this.gl,n=this.sceneApi.shaders.getShaderAttributes();t.bindBuffer(t.ARRAY_BUFFER,e),t.vertexAttribPointer(n.aPlacementMat+0,4,t.FLOAT,!1,80,0),t.vertexAttribPointer(n.aPlacementMat+1,4,t.FLOAT,!1,80,16),t.vertexAttribPointer(n.aPlacementMat+2,4,t.FLOAT,!1,80,32),t.vertexAttribPointer(n.aPlacementMat+3,4,t.FLOAT,!1,80,48),t.vertexAttribPointer(n.aDiffuseColor,4,t.FLOAT,!1,80,64)}},{key:"setupAttributes",value:function(e){var t=this.gl,n=this.sceneApi.shaders.getShaderAttributes();t.bindBuffer(t.ARRAY_BUFFER,this.vertexVBO),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexVBO),t.vertexAttribPointer(n.aPosition,3,t.FLOAT,!1,48,0),t.vertexAttribPointer(n.boneWeights,4,t.UNSIGNED_BYTE,!0,48,12),t.vertexAttribPointer(n.bones,4,t.UNSIGNED_BYTE,!1,48,16),n.aNormal&&t.vertexAttribPointer(n.aNormal,3,t.FLOAT,!1,48,20),t.vertexAttribPointer(n.aTexCoord,2,t.FLOAT,!1,48,32),t.vertexAttribPointer(n.aTexCoord2,2,t.FLOAT,!1,48,40)}},{key:"setupUniforms",value:function(e,t,n,r){var o=this.gl,i=this.sceneApi.shaders.getShaderUniforms();this.m2File;e&&o.uniformMatrix4fv(i.uPlacementMat,!1,e),t&&o.uniformMatrix4fv(i.uBoneMatrixes,!1,t),n&&o.uniform4fv(i.uDiffuseColor,n),r?o.uniform1i(i.isTransparent,1):o.uniform1i(i.isTransparent,0)}},{key:"bindVao",value:function(){var e=this.sceneApi.extensions.getVaoExt();return!(!this.vao||!e)&&(e.bindVertexArrayOES(this.vao),!0)}},{key:"unbindVao",value:function(){var e=this.sceneApi.extensions.getVaoExt();this.vao&&e&&e.bindVertexArrayOES(null)}},{key:"drawMesh",value:function(e,t,n,r,o,i,a,s,l){var u=this.gl,c=this.m2File,f=this.sceneApi.extensions.getInstancingExt(),d=this.sceneApi.getBlackPixelTexture(),p=n.skinFile.header,h=this.sceneApi.shaders.getShaderUniforms();this.sceneApi.shaders.getShaderAttributes();if(u.uniformMatrix4fv(h.uTextMat1,!1,i),u.uniformMatrix4fv(h.uTextMat2,!1,a),u.uniform4fv(h.uColor,r),u.uniform1f(h.uTransparency,o),u.uniform1i(h.uPixelShader,s),t.isRendered&&t.texUnit1Texture){u.depthMask(!0);var m=p.texs[t.texUnit1TexIndex].renderFlagIndex,v=c.renderFlags[m];switch(u.uniform1i(h.uBlendMode,v.blend),v.blend){case 0:u.disable(u.BLEND),u.uniform1f(h.uAlphaTest,-1);break;case 1:u.disable(u.BLEND),u.uniform1f(h.uAlphaTest,.903921569);break;case 2:u.uniform1f(h.uAlphaTest,-1),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA);break;case 3:u.uniform1f(h.uAlphaTest,-1),u.enable(u.BLEND),u.blendFunc(u.SRC_COLOR,u.ONE);break;case 4:u.uniform1f(h.uAlphaTest,.00392157),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE);break;case 6:u.uniform1f(h.uAlphaTest,.00392157),u.enable(u.BLEND),u.blendFunc(u.DST_COLOR,u.SRC_COLOR);break;default:u.uniform1f(h.uAlphaTest,-1),u.enable(u.BLEND),u.blendFunc(u.DST_COLOR,u.SRC_COLOR)}(1&v.flags)>0?u.uniform1i(h.uUseDiffuseColor,0):u.uniform1i(h.uUseDiffuseColor,1),(2&v.flags)>0?u.uniform1i(h.uUnFogged,1):u.uniform1i(h.uUnFogged,0),(4&v.flags)>0?u.disable(u.CULL_FACE):u.enable(u.CULL_FACE),(8&v.flags)>0,(16&v.flags)>0?u.depthMask(!1):u.depthMask(!0),t.isEnviromentMapping?u.uniform1i(h.isEnviroment,1):u.uniform1i(h.isEnviroment,0),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,t.texUnit1Texture.texture),t.xWrapTex1?u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT):u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),t.yWrapTex1?u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT):u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),null!=t.texUnit2Texture?(u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,t.texUnit2Texture.texture),t.xWrapTex2?u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT):u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),t.yWrapTex2?u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT):u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE)):(u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,d)),e=t.meshIndex,l==-1?u.drawElements(u.TRIANGLES,p.subMeshes[e].nTriangles,u.UNSIGNED_SHORT,2*p.subMeshes[e].StartTriangle):f.drawElementsInstancedANGLE(u.TRIANGLES,p.subMeshes[e].nTriangles,u.UNSIGNED_SHORT,2*p.subMeshes[e].StartTriangle,l),null!=t.texUnit2Texture&&(u.activeTexture(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE0)),u.depthMask(!0),u.disable(u.BLEND)}}}]),e}(),f=function d(e){o(this,d);var t=this,n=(0,s["default"])(function(e){return(0,u["default"])(e)},function(t){var n=new c(e);return n.assign(t),n.createVBO(),n.loadTextures(),n});t.loadM2=function(e){return n.get(e)},t.unLoadM2=function(e){n.remove(e)}};t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t={offs:0},n=(e.readNZTString(t,4),e.readInt32(t)),r=p[n];if(void 0==r){var o="Unknown MDX file version = "+n+", filepath = "+filePath;throw $log.error(o),o}var i={};try{i=e.parseSectionDefinition(i,r,e,t)}catch(a){throw a}return i}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t["default"]=function(e){var t=(0,c["default"])(e),n=t.then(function(t){var n={offs:0},r=t.readNZTString(n,4);if("MD20"!=r&&"MD21"!=r){var o="Unknown MDX file ident = "+r+", filepath = "+e;throw $log.error(o),o}if("MD21"==r){var a={},s=chunkedLoader(e,t.getArrayBuffer());return s.setSectionReaders(m),s.processFile(a),a}var u=l["default"].defer();u.promise;return a=i(t),a.fileName=e,a},function(e){return e});return n};var s=n(68),l=r(s),u=n(91),c=r(u),f={name:"header",type:"layout",layout:[{name:"MNameLen",type:"int32"},{name:"MNameOffs",type:"int32"},{name:"ModelType",type:"int32"},{name:"nGlobalSequences",type:"int32"},{name:"ofsGlobalSequences",type:"int32"},{name:"nAnimations",type:"int32"},{name:"ofsAnimations",type:"int32"},{name:"nAnimationLookup",type:"int32"},{name:"ofsAnimationLookup",type:"int32"},{name:"nBones",type:"int32"},{name:"ofsBones",type:"int32"},{name:"nKeyBoneLookup",type:"int32"},{name:"ofsKeyBoneLookup",type:"int32"},{name:"nVertexes",type:"int32"},{name:"ofsVertexes",type:"int32"},{name:"nViews",type:"int32"},{name:"nColors",type:"int32"},{name:"ofsColors",type:"int32"},{name:"nTextures",type:"int32"},{name:"ofsTextures",type:"int32"},{name:"nTransparency",type:"int32"},{name:"ofsTransparency",type:"int32"},{name:"nTexAnims",type:"int32"},{name:"ofsTexAnims",type:"int32"},{name:"nTexReplace",type:"int32"},{name:"ofsTexReplace",type:"int32"},{name:"nRenderFlags",type:"int32"},{name:"ofsRenderFlags",type:"int32"},{name:"nBoneLookupTable",type:"int32"},{name:"ofsBoneLookupTable",type:"int32"},{name:"nTexLookup",type:"int32"},{name:"ofsTexLookup",type:"int32"},{name:"nTexUnits",type:"int32"},{name:"ofsTexUnits",type:"int32"},{name:"nTransLookup",type:"int32"},{name:"ofsTransLookup",type:"int32"},{name:"nTexAnimLookup",type:"int32"},{name:"ofsTexAnimLookup",type:"int32"},{name:"BoundingCorner1",type:"vector3f"},{name:"BoundingCorner2",type:"vector3f"},{name:"BoundingRadius",type:"float32"},{name:"Corner1",type:"vector3f"},{name:"Corner2",type:"vector3f"},{name:"Radius",type:"float32"},{name:"nBoundingTriangles",type:"int32"},{name:"ofsBoundingTriangles",type:"int32"},{name:"nBoundingVertices",type:"int32"},{name:"ofsBoundingVertices",type:"int32"},{name:"nBoundingNormals",type:"int32"},{name:"ofsBoundingNormals",type:"int32"},{name:"nAttachments",type:"int32"},{name:"ofsAttachments",type:"int32"},{name:"nAttachLookup",type:"int32"},{name:"ofsAttachLookup",type:"int32"},{name:"nNumEvents",type:"int32"},{name:"ofsNumEvents",type:"int32"},{name:"nLights",type:"int32"},{name:"ofsLights",type:"int32"},{name:"nCameras",type:"int32"},{name:"ofsCameras",type:"int32"},{name:"nCameraLookup",type:"int32"},{name:"ofsCameraLookup",type:"int32"},{name:"nRibbonEmitters",type:"int32"},{name:"ofsRibbonEmitters",type:"int32"},{name:"nParticleEmitters",type:"int32"},{name:"ofsParticleEmitters",type:"int32"},{name:"nBlendOverrides",type:"int32"},{name:"ofsBlendOverrides",type:"int32"},{name:"vertexes",offset:"ofsVertexes",type:"uint8Array",len:function(e){return 48*e.nVertexes}},{name:"vertexesDebug",offset:"ofsVertexes",count:"nVertexes",type:"layout",layout:[{name:"pos",type:"vector3f"},{name:"bonesWeight",type:"uint8Array",len:4},{name:"bones",type:"uint8Array",len:4},{name:"normal",type:"vector3f"},{name:"textureX",type:"float32"},{name:"textureY",type:"float32"},{name:"unk1",type:"int32"},{name:"unk2",type:"int32"}]},{name:"textureDefinition",offset:"ofsTextures",count:"nTextures",type:"layout",layout:[{name:"texType",type:"uint32"},{name:"flags",type:"uint32"},{name:"filenameLen",type:"uint32"},{name:"ofsFilename",type:"uint32"},{name:"textureName",offset:"ofsFilename",len:"filenameLen",type:"string"}]},{name:"globalSequences",offset:"ofsGlobalSequences",count:"nGlobalSequences",type:"uint32"},{name:"animations",offset:"ofsAnimations",count:"nAnimations",type:"layout",layout:[{name:"animation_id",type:"uint16"},{name:"sub_animation_id",type:"uint16"},{name:"length",type:"uint32"},{name:"moving_speed",type:"float32"},{name:"flags",type:"uint32"},{name:"probability",type:"int16"},{name:"_padding",type:"uint16"},{name:"minimum_repetitions",type:"uint32"},{name:"maximum_repetitions",type:"uint32"},{name:"blend_time",type:"uint32"},{name:"boundingCorner1",type:"vector3f"},{name:"boundingCorner2",type:"vector3f"},{name:"bound_radius",type:"float32"},{name:"next_animation",type:"int16"},{name:"aliasNext",type:"uint16"}]},{name:"texLookup",offset:"ofsTexLookup",count:"nTexLookup",type:"uint16"},{name:"colors",offset:"ofsColors",count:"nColors",type:"layout",layout:[{name:"color",type:"ablock",valType:"vector3f"},{name:"alpha",type:"ablock",valType:"int16"}]},{name:"transparencies",offset:"ofsTransparency",count:"nTransparency",type:"layout",layout:[{name:"values",type:"ablock",valType:"int16"}]},{name:"bones",offset:"ofsBones",count:"nBones",type:"layout",layout:[{name:"key_bone_id",type:"int32"},{name:"flags",type:"uint32"},{name:"parent_bone",type:"int16"},{name:"submesh_id",type:"uint16"},{name:"unk1",type:"uint16"},{name:"unk2",type:"uint16"},{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"uint16Array",len:4},{name:"scale",type:"ablock",valType:"vector3f"},{name:"pivot",type:"vector3f"}]},{name:"texAnimLookup",offset:"ofsTexAnimLookup",count:"nTexAnimLookup",type:"int16"},{name:"blendOverrides",offset:"ofsBlendOverrides",count:"nBlendOverrides",type:"int16",condition:function(e){return(8&e.ModelType)>0}},{name:"texAnims",offset:"ofsTexAnims",count:"nTexAnims",type:"layout",layout:[{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"vector4f",len:4},{name:"scale",type:"ablock",valType:"vector3f"}]},{name:"transLookup",offset:"ofsTransLookup",count:"nTransLookup",type:"int16"},{name:"texReplace",offset:"ofsTexReplace",count:"nTexReplace",type:"uint16"},{name:"textUnitLookup",offset:"ofsTexUnits",count:"nTexUnits",type:"uint16"},{name:"renderFlags",offset:"ofsRenderFlags",count:"nRenderFlags",type:"layout",layout:[{name:"flags",type:"uint16"},{name:"blend",type:"uint16"}]},{name:"attachments",offset:"ofsAttachments",count:"nAttachments",type:"layout",layout:[{name:"id",type:"uint32"},{name:"bone",type:"uint16"},{name:"unk",type:"uint16"},{name:"pos",type:"vector3f"},{name:"animate_attached",type:"ablock",valType:"uint8"}]},{name:"attachLookups",offset:"ofsAttachLookup",count:"nAttachLookup",type:"int16"},{name:"animationLookup",offset:"ofsAnimationLookup",count:"nAnimationLookup",type:"int16"},{name:"keyBoneLookup",offset:"ofsKeyBoneLookup",count:"nKeyBoneLookup",type:"int16"},{name:"boneLookupTable",offset:"ofsBoneLookupTable",count:"nBoneLookupTable",type:"int16"}]},d={name:"header",type:"layout",layout:[{name:"MNameLen",type:"int32"},{name:"MNameOffs",type:"int32"},{name:"ModelType",type:"int32"},{name:"nGlobalSequences",type:"int32"},{name:"ofsGlobalSequences",type:"int32"},{name:"nAnimations",type:"int32"},{name:"ofsAnimations",type:"int32"},{name:"nC",type:"int32"},{name:"ofsC",type:"int32"},{name:"nBones",type:"int32"},{name:"ofsBones",type:"int32"},{name:"nF",type:"int32"},{name:"ofsF",type:"int32"},{name:"nVertexes",type:"int32"},{name:"ofsVertexes",type:"int32"},{name:"nViews",type:"int32"},{name:"nColors",type:"int32"},{name:"ofsColors",type:"int32"},{name:"nTextures",type:"int32"},{name:"ofsTextures",type:"int32"},{name:"nTransparency",type:"int32"},{name:"ofsTransparency",type:"int32"},{name:"nTexAnims",type:"int32"},{name:"ofsTexAnims",type:"int32"},{name:"nTexReplace",type:"int32"},{name:"ofsTexReplace",type:"int32"},{name:"nRenderFlags",type:"int32"},{name:"ofsRenderFlags",type:"int32"},{name:"nGroupBoneIDs",type:"int32"},{name:"ofsGroupBoneIDs",type:"int32"},{name:"nTexLookup",type:"int32"},{name:"ofsTexLookup",type:"int32"},{name:"nTexUnits",type:"int32"},{name:"ofsTexUnits",type:"int32"},{name:"nTransLookup",type:"int32"},{name:"ofsTransLookup",type:"int32"},{name:"nTexAnimLookup",type:"int32"},{name:"ofsTexAnimLookup",type:"int32"},{name:"BoundingCorner1",type:"vector3f"},{name:"BoundingCorner2",type:"vector3f"},{name:"BoundingRadius",type:"float32"},{name:"Corner1",type:"vector3f"},{name:"Corner2",type:"vector3f"},{name:"Radius",type:"float32"},{name:"nBoundingTriangles",type:"int32"},{name:"ofsBoundingTriangles",type:"int32"},{name:"nBoundingVertices",type:"int32"},{name:"ofsBoundingVertices",type:"int32"},{name:"nBoundingNormals",type:"int32"},{name:"ofsBoundingNormals",type:"int32"},{name:"nAttachments",type:"int32"},{name:"ofsAttachments",type:"int32"},{name:"nP",type:"int32"},{name:"ofsP",type:"int32"},{name:"nNumEvents",type:"int32"},{name:"ofsNumEvents",type:"int32"},{name:"nLights",type:"int32"},{name:"ofsLights",type:"int32"},{name:"nCameras",type:"int32"},{name:"ofsCameras",type:"int32"},{name:"nCameraLookup",type:"int32"},{name:"ofsCameraLookup",type:"int32"},{name:"nRibbonEmitters",type:"int32"},{name:"ofsRibbonEmitters",type:"int32"},{name:"nParticleEmitters",type:"int32"},{name:"ofsParticleEmitters",type:"int32"},{name:"vertexes",offset:"ofsVertexes",type:"uint8Array",len:function(e){return 48*e.nVertexes}},{name:"vertexesDebug",offset:"ofsVertexes",count:"nVertexes",type:"layout",layout:[{name:"pos",type:"vector3f"},{name:"bonesWeight",type:"uint8Array",len:4},{name:"bones",type:"uint8Array",len:4},{name:"normal",type:"vector3f"},{name:"textureX",type:"float32"},{name:"textureY",type:"float32"},{name:"unk1",type:"int32"},{name:"unk2",type:"int32"}]},{name:"textureDefinition",offset:"ofsTextures",count:"nTextures",type:"layout",layout:[{name:"texType",type:"uint32"},{name:"flags",type:"uint32"},{name:"filenameLen",type:"uint32"},{name:"ofsFilename",type:"uint32"},{name:"textureName",offset:"ofsFilename",len:"filenameLen",type:"string"}]},{name:"globalSequences",offset:"ofsGlobalSequences",count:"nGlobalSequences",type:"uint32"},{name:"animations",offset:"ofsAnimations",count:"nAnimations",type:"layout",layout:[{name:"animation_id",type:"uint16"},{name:"sub_animation_id",type:"uint16"},{name:"length",type:"uint32"},{name:"moving_speed",type:"float32"},{name:"flags",type:"uint32"},{name:"probability",type:"int16"},{name:"_padding",type:"uint16"},{name:"minimum_repetitions",type:"uint32"},{name:"maximum_repetitions",type:"uint32"},{name:"blend_time",type:"uint32"},{name:"boundingCorner1",type:"vector3f"},{name:"boundingCorner2",type:"vector3f"},{name:"bound_radius",type:"float32"},{name:"next_animation",type:"int16"},{name:"aliasNext",type:"uint16"}]},{name:"texLookup",offset:"ofsTexLookup",count:"nTexLookup",type:"uint16"},{name:"colors",offset:"ofsColors",count:"nColors",type:"layout",layout:[{name:"color",type:"ablock",valType:"vector3f"},{name:"alpha",type:"ablock",valType:"int16"}]},{name:"transparencies",offset:"ofsTransparency",count:"nTransparency",type:"layout",layout:[{name:"values",type:"ablock",valType:"int16"}]},{name:"bones",offset:"ofsBones",count:"nBones",type:"layout",layout:[{name:"key_bone_id",type:"int32"},{name:"flags",type:"uint32"},{name:"parent_bone",type:"int16"},{name:"submesh_id",type:"uint16"},{name:"unk1",type:"uint16"},{name:"unk2",type:"uint16"},{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"int16Array",len:4},{name:"scale",type:"ablock",valType:"vector3f"},{name:"pivot",type:"vector3f"}]},{name:"texAnimLookup",offset:"ofsTexAnimLookup",count:"nTexAnimLookup",type:"int16"},{name:"texAnims",offset:"ofsTexAnims",count:"nTexAnims",type:"layout",layout:[{name:"translation",type:"ablock",valType:"vector3f"},{name:"rotation",type:"ablock",valType:"int16Array",len:4},{name:"scale",type:"ablock",valType:"vector3f"}]},{name:"transLookup",offset:"ofsTransLookup",count:"nTransLookup",type:"int16"},{name:"texReplace",offset:"ofsTexReplace",count:"nTexReplace",type:"uint16"},{name:"textUnitLookup",offset:"ofsTexUnits",count:"nTexUnits",type:"uint16"},{name:"renderFlags",offset:"ofsRenderFlags",count:"nRenderFlags",type:"layout",layout:[{name:"flags",type:"uint16"},{name:"blend",type:"uint16"}]}]},p={264:f,272:f,274:d},h=function(){function e(){o(this,e)}return a(e,[{key:"getHandler",value:function(e){return handlerTable[e]}}]),e}(),m=new h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t["default"]=function(e,t){function n(e){function t(){this.loadDataAtOffset=function(t,n){return(0,l["default"])(e,t,n)},this.readType=function(e,t,n,r){var o,i=this,a=t.type;switch(a){case"int8":o=e.readInt8(n);break;case"int16":o=e.readInt16(n);break;case"int32":o=e.readInt32(n);break;case"uint8":o=e.readUint8(n);break;case"uint16":o=e.readUint16(n);break;case"uint32":o=e.readUint32(n);break;case"int32Array":o=e.readInt32Array(n,r);break;case"uint8Array":o=e.readUint8Array(n,r);break;case"uint16Array":o=e.readUint16Array(n,r);break;case"int16Array":o=e.readInt16Array(n,r);break;case"int32Array":o=e.readInt32Array(n,r);break;case"vector3f":o=e.readVector3f(n);break;case"vector4f":o=e.readVector4f(n);break;case"float32":o=e.readFloat32(n);break;case"string":o=void 0!=r?e.readNZTString(n,r):e.readString(n,9999);
break;case"ablock":o={},o.interpolation_type=e.readUint16(n),o.global_sequence=e.readInt16(n);var s=e.readInt32(n),l=e.readInt32(n);s=s<0?0:s,o.timestampsPerAnimation=new Array(s);for(var u={offs:l},c=0;c<s;c++){var f=e.readUint32(u),d=e.readUint32(u);o.timestampsPerAnimation[c]=new Array(f);for(var p={offs:d},h=0;h<f;h++)o.timestampsPerAnimation[c][h]=e.readUint32(p)}var m=e.readInt32(n),v=e.readInt32(n);m=m<=0?0:m,o.valuesPerAnimation=new Array(m);for(var g={offs:v},c=0;c<m;c++){var b=e.readUint32(g),y=e.readUint32(g);o.valuesPerAnimation[c]=new Array(b);for(var p={offs:y},h=0;h<b;h++)o.valuesPerAnimation[c][h]=i.readType(e,{type:t.valType,len:t.len},p,t.len)}break;case"layout":var x=t.layout,w={};if(!x instanceof Array)throw"layout is not array";for(var c=0;c<x.length;c++){var _=x[c].name;w[_]=this.parseSectionDefinition(w,x[c],e,n)}return w;default:$log.info("Unknown type in layout. type = ",a)}return o},this.parseSectionDefinition=function(e,t,n,r){var o;o="string"==typeof t.offset?e[t.offset]:t.offset;var i=t.len;if("string"==typeof t.len?i=e[i]:"function"==typeof t.len&&(i=t.len(e)),!t.condition||t.condition(e)){r&&o?r={offs:o}:o?r={offs:o}:r||(r={offs:0});var a,s=[],l=1,u=void 0!==t.count;u&&(l=e[t.count]);for(var c=0;c<l;c++)a=this.readType(n,t,r,i),s.push(a);var f;return f=u?s:s[0]}}}var n=(0,l["default"])(e);t.prototype=n;var r=new t;return r}if(t){var r=n(t);return r}return(0,a["default"])(e).then(function(t){if("object"!=("undefined"==typeof t?"undefined":o(t))||!(t instanceof ArrayBuffer))return void $log.log("Failed to load file = "+e);var r=n(t);return r.filePath=e,r},function(e){return e})};var i=n(83),a=r(i),s=n(82),l=r(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(87),s=r(a),l=n(93),u=r(l),c=function(){function e(t){o(this,e),this.gl=t.getGlContext(),this.indexVBO=null,this.fixedAlready=!1}return i(e,[{key:"assign",value:function(e){this.skinFile=e}},{key:"fixShaderIdBasedOnBlendOverride",value:function(e){for(var t=this.skinFile.header,n=0;n<t.texs.length;n++){var r=t.texs[n];if(!((32768&r.shaderId)>0)){var o=(8&e.ModelType)>0,i=e.renderFlags[r.renderFlagIndex],a=i.blend;if(o){for(var s=r.op_count,l=r.shaderId,u=[0,0],c=0,f=0;f<=s;f++){var d=e.blendOverrides[l+f];0==f&&0==a&&(d=0);var p=e.textUnitLookup[r.textureUnitNum+f];u[f]=d,p>2&&(u[f]=8|d),1==p&&f+1==s&&(c|=16384)}c|=65535&u[1]|u[0]<<4&65535,r.shaderId=c}else{var p=e.textUnitLookup[r.textureUnitNum],c=0!=a?1:0;p>2&&(c|=8),c<<=4,1==p&&(c=16384|c),r.shaderId=c}}}}},{key:"fixShaderIdBasedOnLayer",value:function(e){for(var t=this.skinFile.header,n=!1,r=-1,o=null,i=0,a=0;a<t.nTex;a++){var s=t.texs[a],l=s.renderFlagIndex;if(l!=r){r=l;var u=e.renderFlags[l],c=7&s.shaderId;if(0==s.layer&&(s.op_count>=1&&0==u.blend&&(s.shader_id&=65423),o=s),1==(255&i)){var f=u.blend;if((2==f||1==f)&&1==s.op_count&&0==(1&(255&u.flags^255&e.renderFlags[o.renderFlagIndex].flags))&&s.textureIndex==o.textureIndex&&e.transLookup[o.transpIndex]==e.transLookup[s.transpIndex]){s.shader_id=32768,o.shader_id=32769,i=65280&i|3;continue}i=65280&i}if((255&i)<2&&(0!=u.blend||2!=s.op_count||4!=c&&6!=c||0==e.textUnitLookup[s.textureUnitNum]&&e.textUnitLookup[s.textureUnitNum+1]>2&&(i=65280&i|1)),i>>8!=0){if(i>>8==1){var d=u.blend;if(4!=d&&6!=u||1!=s.op_count||e.textUnitLookup[s.textureUnitNum]<=2);else if(e.transLookup[o.transpIndex]==e.transLookup[s.transpIndex]){s.shader_id=32768,o.shader_id=4!=u.blend?14:32770,i=255&i|512;continue}}else{if(i>>8!=2)continue;var d=u.blend;if(2!=d&&1!=u||1!=s.op_count||0==(1&(255&u.flags^255&e.renderFlags[o.renderFlagIndex].flags))||(255&s.textureIndex)!=(255&o.textureIndex));else if(e.transLookup[o.transpIndex]==e.transLookup[s.transpIndex]){s.shader_id=32768,o.shader_id=(32770==o.shader_id?2:0)-32767&65535,i=255&i|768;continue}}i=255&i}0==u.blend&&1==s.op_count&&0==e.textUnitLookup[s.textureUnitNum]&&(i=255&i|256)}else n=!0}if(n)for(var r=-1,a=0;a<t.nTex;a++){var s=t.texs[a],p=s.renderFlagIndex;p==r?(s.shader_id=t.texs[a-1].shader_id,s.op_count=t.texs[a-1].op_count,s.textureIndex=t.texs[a-1].textureIndex,s.textureUnitNum=t.texs[a-1].textureUnitNum):r=p}}},{key:"fixData",value:function(e){this.fixedAlready||(this.fixShaderIdBasedOnBlendOverride(e),this.fixShaderIdBasedOnLayer(e),this.fixedAlready=!0)}},{key:"createVBO",value:function(){for(var e=this.gl,t=(this.skinFile,this.skinFile.header),n=new Array(t.triangles.length),r=0;r<n.length;r++)n[r]=t.indexes[t.triangles[r]];this.indexVBO=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexVBO),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(n),e.STATIC_DRAW)}}]),e}(),f=function(){function e(t){o(this,e),this.cache=(0,s["default"])(function(e){return(0,u["default"])(e,!0)},function(e){var n=new c(t);return n.assign(e),n.createVBO(),n})}return i(e,[{key:"loadSkin",value:function(e){return this.cache.get(e)}},{key:"unLoadSkin",value:function(e){this.cache.remove(e)}}]),e}();t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=(i["default"].defer(),(0,s["default"])(e)),n=t.then(function(t){var n={offs:0},r=t.readNZTString(n,4);if("SKIN"!=r){var o="Unknown SKIN file ident = "+r+", filepath = "+e;throw $log.error(o),o}var i={header:{}};return i.header=t.parseSectionDefinition(i,l,t,n),i.fileName=e,i},function(e){return e});return n};var o=n(68),i=r(o),a=n(91),s=r(a),l={name:"header",type:"layout",layout:[{name:"nIndex",type:"int32"},{name:"ofsIndex",type:"int32"},{name:"nTris",type:"int32"},{name:"ofsTris",type:"int32"},{name:"nProps",type:"int32"},{name:"ofsProps",type:"int32"},{name:"nSub",type:"int32"},{name:"ofsSub",type:"int32"},{name:"nTex",type:"int32"},{name:"ofsTex",type:"int32"},{name:"LOD",type:"int32"},{name:"indexes",offset:"ofsIndex",len:"nIndex",type:"uint16Array"},{name:"triangles",offset:"ofsTris",len:"nTris",type:"uint16Array"},{name:"subMeshes",offset:"ofsSub",count:"nSub",type:"layout",layout:[{name:"meshID",type:"int32"},{name:"vStart",type:"uint16"},{name:"vCount",type:"uint16"},{name:"StartTriangle",type:"uint16"},{name:"nTriangles",type:"uint16"},{name:"nBones",type:"uint16"},{name:"OfsBoneList",type:"uint16"},{name:"boneInfluences",type:"uint16"},{name:"rootBone",type:"uint16"},{name:"pos",type:"vector3f"},{name:"unkPos",type:"vector3f"},{name:"unkFloat",type:"float32"}]},{name:"texs",offset:"ofsTex",count:"nTex",type:"layout",layout:[{name:"flags",type:"uint16"},{name:"shaderId",type:"int16"},{name:"submeshIndex",type:"uint16"},{name:"submesh_index2",type:"uint16"},{name:"colorIndex",type:"int16"},{name:"renderFlagIndex",type:"uint16"},{name:"layer",type:"uint16"},{name:"op_count",type:"uint16"},{name:"textureIndex",type:"uint16"},{name:"textureUnitNum",type:"uint16"},{name:"transpIndex",type:"uint16"},{name:"textureAnim",type:"uint16"}]}]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(87),s=r(a),l=n(95),u=function(){function e(t,n){o(this,e),this.gl=n.getGlContext(),this.sceneApi=n,this.combinedVBO=null,this.indexVBO=null,this.wmoGroupFile=t,this.textureArray=[]}return i(e,[{key:"loadTextures",value:function(e){this.momt=e,this.textureArray.length=this.wmoGroupFile.renderBatches.length;for(var t=0;t<this.wmoGroupFile.renderBatches.length;t++){var n,r=this.wmoGroupFile.renderBatches[t];n=(2&r.flags)>0?256*r.unk[11]+r.unk[10]:r.tex,this.loadTexture(t,0,e[n].textureName1),this.loadTexture(t,1,e[n].textureName2)}}},{key:"loadTexture",value:function(e,t,n){var r=this;n&&this.sceneApi.resources.loadTexture(n).then(function(n){r.textureArray[e]||(r.textureArray[e]=[]),r.textureArray[e][t]=n},function(){})}},{key:"createVBO",value:function(){var e=this.gl,t=this.wmoGroupFile,n=function(e,t,n,r,o,i){var a=4*e.length+4*t.length+4*n.length;r&&(a+=4*r.length),o&&(a+=4*o.length),i&&(a+=4*i.length);var s=0,l=new Uint8Array(a);return l.set(new Uint8Array(new Float32Array(e).buffer),0),s+=4*e.length,l.set(new Uint8Array(new Float32Array(t).buffer),s),s+=4*t.length,l.set(new Uint8Array(new Float32Array(n).buffer),s),s+=4*n.length,r&&(l.set(new Uint8Array(new Float32Array(r).buffer),s),s+=4*r.length),o&&o.buffer&&(l.set(new Uint8Array(o.buffer),s),s+=4*o.length),i&&i.buffer&&(l.set(new Uint8Array(i.buffer),s),s+=4*i.length),l},r=n(t.verticles,t.normals,t.textCoords,t.textCoords2,t.colorVerticles,t.colorVerticles2);if(this.combinedVBO=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.combinedVBO),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW),this.positionOffset=0,this.normalOffset=this.positionOffset+t.verticles.length,this.textOffset=this.normalOffset+t.normals.length,this.textOffset2=this.textOffset+t.textCoords.length,this.colorOffset=this.textOffset2+t.textCoords2.length,this.colorOffset2=this.colorOffset+(t.colorVerticles&&t.colorVerticles.length>0)?t.colorVerticles.length/4:0,this.indexVBO=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexVBO),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(t.indicies),e.STATIC_DRAW),t.mobr){this.mobrVBO=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.mobrVBO);for(var o=new Array(3*t.mobr.length),i=0;i<t.mobr.length;i++)o[3*i+0]=t.indicies[3*t.mobr[i]+0],o[3*i+1]=t.indicies[3*t.mobr[i]+1],o[3*i+2]=t.indicies[3*t.mobr[i]+2];e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Int16Array(o),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}}},{key:"draw",value:function(e,t){var n=this.gl,r=this.sceneApi.shaders.getShaderUniforms(),o=this.sceneApi.shaders.getShaderAttributes(),i=this.sceneApi.getBlackPixelTexture(),a=this.wmoGroupFile,s=(8192&a.mogp.Flags)>0;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexVBO),n.bindBuffer(n.ARRAY_BUFFER,this.combinedVBO),n.enableVertexAttribArray(o.aPosition),n.vertexAttribPointer(o.aPosition,3,n.FLOAT,!1,0,0),void 0!==o.aNormal&&n.vertexAttribPointer(o.aNormal,3,n.FLOAT,!1,0,4*this.normalOffset),n.vertexAttribPointer(o.aTexCoord,2,n.FLOAT,!1,0,4*this.textOffset),o.aTexCoord2&&(a.textCoords2&&a.textCoords2.length>0?(n.enableVertexAttribArray(o.aTexCoord2),n.vertexAttribPointer(o.aTexCoord2,2,n.FLOAT,!1,0,4*this.textOffset2)):(n.disableVertexAttribArray(o.aTexCoord2),n.vertexAttrib2f(o.aTexCoord2,1,1))),o.aColor&&(s&&a.colorVerticles&&a.colorVerticles.length>1?(n.enableVertexAttribArray(o.aColor),n.vertexAttribPointer(o.aColor,4,n.UNSIGNED_BYTE,!0,0,4*this.colorOffset)):(n.disableVertexAttribArray(o.aColor),n.vertexAttrib4f(o.aColor,1,1,1,1))),o.aColor2&&(s&&a.colorVerticles2&&a.colorVerticles2.length>0?(n.enableVertexAttribArray(o.aColor2),n.vertexAttribPointer(o.aColor2,4,n.UNSIGNED_BYTE,!0,0,4*this.colorOffset2)):(n.disableVertexAttribArray(o.aColor2),n.vertexAttrib4f(o.aColor2,1,1,1,1))),n.activeTexture(n.TEXTURE0),n.uniform1f(r.uAlphaTest,-1);for(var l=0;l<a.renderBatches.length;l++){var u,c=a.renderBatches[l];u=(2&c.flags)>0?256*c.unk[11]+c.unk[10]:c.tex;var f=this.momt[u].color1,d=[255&f,f>>8&255,f>>16&255,f>>24&255];if(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255,e=[1,1,1,1],n.uniform4fv(r.uMeshColor1,new Float32Array(e)),0!=this.momt[u].blendMode){var p=.878431;(128&this.momt[u].flags1)>0,(1&this.momt[u].flags1)>0&&(p=.1),n.uniform1f(r.uAlphaTest,p)}else n.uniform1f(r.uAlphaTest,-1);(4&this.momt[u].flags1)>0?n.disable(n.CULL_FACE):n.enable(n.CULL_FACE);var h=this.textureArray[l];if(n.activeTexture(n.TEXTURE0),h&&h[0]?n.bindTexture(n.TEXTURE_2D,h[0].texture):n.bindTexture(n.TEXTURE_2D,i),h&&h[1]?(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,h[1].texture)):(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,i)),t){for(var m=c.startIndex/3,v=c.count/3,g=m+v,b=[],y=0;y<t.length;y++)b=b.concat(this.wmoGroupFile.mobr.slice(t[y].firstFace,t[y].firstFace+t[y].numFaces-1));b=b.sort(function(e,t){return e<t?-1:1}).filter(function(e,t,n){return!t||e!=n[t-1]});for(var x=0;m<g;){for(;b[x]<m;)x++;for(;m==b[x];)m++,x++;v=g-m,m<b[x]&&m+v>b[x]&&(v=b[x]-m),n.drawElements(n.TRIANGLES,3*v,n.UNSIGNED_SHORT,3*m*2),m+=v}}else n.drawElements(n.TRIANGLES,c.count,n.UNSIGNED_SHORT,2*c.startIndex);h&&h[1]&&(n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,null),n.activeTexture(n.TEXTURE0))}n.uniform1f(r.uAlphaTest,-1)}},{key:"destroy",value:function(){var e=this.gl;this.texture&&e.deleteTexture(this.texture),this.texture=null}}]),e}(),c=function(){function e(t){o(this,e),this.cache=(0,s["default"])(function(e){return(0,l.wmoGroupLoader)(e,!0)},function(e){var n=new u(e,t);return n.createVBO(),n})}return i(e,[{key:"loadWmoGeom",value:function(e){return this.cache.get(e)}},{key:"unLoadWmoGeom",value:function(e){this.cache.remove(e)}}]),e}();t["default"]=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){function n(){var t={MVER:function(n,o){if("MVER"!==o.chunkIdent)throw"Got bad group WMO file "+e;var i=o.readInt32({offs:0});17==i&&(t=r)}};this.getHandler=function(e){return t[e]}}var r=(f["default"].defer(),{MOGP:{MOGP:function(e,t){var n={offs:0},r={};return r.GroupName=t.readInt32(n),r.dGroupName=t.readInt32(n),r.Flags=t.readUint32(n),r.BoundBoxCorner1=t.readVector3f(n),r.BoundBoxCorner2=t.readVector3f(n),r.moprIndex=t.readInt16(n),r.numItems=t.readInt16(n),r.numBatchesA=t.readInt16(n),r.numBatchesB=t.readInt16(n),r.numBatchesC=t.readInt16(n),r.Indeces=t.readUint8Array(n,4),r.Unk1=t.readInt32(n),r.groupID=t.readInt32(n),r.Unk2=t.readInt32(n),r.Unk3=t.readInt32(n),n.offs+=10,e.mogp=r,n},subChunks:{MOPY:function(e,t){t.length/2},MOVI:function(e,t){var n=t.chunkLen/2;e.indicies=t.readUint16Array({offs:0},n)},MOVT:function(e,n){if(t)e.verticles=n.readFloat32Array({offs:0},n.chunkLen/4);else{var r=n.chunkLen/12;e.verticles=n.readVector3f({offs:0},r)}},MONR:function(e,n){var r=n.chunkLen/12;t?e.normals=n.readFloat32Array({offs:0},n.chunkLen/4):e.normals=n.readVector3f({offs:0},r)},MOTV:function(e,n){var r,o=n.chunkLen/8;r=t?n.readFloat32Array({offs:0},n.chunkLen/4):n.readVector2f({offs:0},o),e.firstMotvLoaded?e.secondMotvLoaded?e.textCoords3=r:(e.textCoords2=r,e.secondMotvLoaded=!0):(e.textCoords=r,e.firstMotvLoaded=!0)},MOCV:function(e,t){var n=(t.chunkLen/4,t.readUint8Array({offs:0},t.chunkLen));void 0==e.colorVerticles?e.colorVerticles=n:e.colorVerticles2=n},MODR:function(e,t){var n={offs:0},r=t.chunkLen/2,o=t.readUint16Array(n,r);e.doodadRefs=o},MOBA:function(e,t){for(var n={offs:0},r=t.chunkLen/24,o=[],i=0;i<Math.floor(r);i++){var a={};a.unk=t.readUint8Array(n,12),a.startIndex=t.readUint32(n),a.count=t.readUint16(n),a.minIndex=t.readInt16(n),a.maxIndex=t.readInt16(n),a.flags=t.readInt8(n),a.tex=t.readUint8(n),o.push(a)}e.renderBatches=o},MOBN:function(e,t){for(var n={offs:0},r=t.chunkLen/16,o=new Array(r),i=0;i<r;i++){var a={};a.planeType=t.readUint16(n),a.children1=t.readInt16(n),a.children2=t.readInt16(n),a.numFaces=t.readUint16(n),a.firstFace=t.readUint32(n),a.fDist=t.readFloat32(n),o[i]=a}e.nodes=o},MOBR:function(e,t){var n={offs:0},r=t.chunkLen/2;e.mobr=t.readUint16Array(n,r)}}}}),o=(0,s["default"])(e),i=o.then(function(e){var t={colorVerticles2:[],textCoords2:[]};return e.setSectionReaders(new n),e.processFile(t),t},function(e){return e});return i}function i(e){function t(){var t={MVER:function(r,o){if("MVER"!==o.chunkIdent)throw"Got bad WMO file "+e;var i=o.readInt32({offs:0});17==i&&(t=n)}};this.getHandler=function(e){return t[e]}}var n={MOHD:function(e,t){var n={offs:0};e.nTextures=t.readInt32(n),e.nGroups=t.readInt32(n),e.nPortals=t.readInt32(n),e.nLights=t.readInt32(n),e.nModels=t.readInt32(n),e.nDoodads=t.readInt32(n),e.nDoodadSets=t.readInt32(n),e.ambColor=t.readUint32(n),e.unk1=t.readInt32(n),e.BoundBoxCorner1=t.readVector3f(n),e.BoundBoxCorner2=t.readVector3f(n),e.WMOId=t.readInt32(n)},MOGI:function(e,t){for(var n={offs:0},r=[],o=0;o<e.nGroups;o++){var i={};i.flags=t.readUint32(n),i.bb1=t.readVector3f(n),i.bb2=t.readVector3f(n),i.nameoffset=t.readInt32(n),r.push(i)}e.groupInfos=r},MLIQ:function(e,t){},MOPV:function(e,t){var n=t.chunkLen/4;e.portalVerticles=t.readFloat32Array({offs:0},n)},MOPT:function(e,t){for(var n={offs:0},r=t.chunkLen/20,o=new Array(r),i=0;i<r;i++){var a={};a.base_index=t.readUint16(n),a.index_count=t.readUint16(n),a.plane=t.readVector4f(n),o[i]=a}e.portalInfos=o},MOPR:function(e,t){for(var n={offs:0},r=t.chunkLen/8,o=new Array(r),i=0;i<r;i++){var a={};a.portal_index=t.readUint16(n),a.group_index=t.readUint16(n),a.side=t.readInt16(n),a.unk=t.readInt16(n),o[i]=a}e.portalRelations=o},MOLT:function(e,t){for(var n={offs:0},r=(t.chunkLen/e.nLights,[]),o=0;o<e.nLights;o++){var i={};i.lightType=t.readUint8(n),i.type=t.readUint8(n),i.useAtten=t.readUint8(n),i.pad=t.readUint8(n),i.color=t.readUint32(n),i.position=t.readVector3f(n),i.intensity=t.readFloat32(n),i.attenStart=t.readFloat32(n),i.attenEnd=t.readFloat32(n),i.unk1=t.readFloat32(n),i.unk2=t.readFloat32(n),i.unk3=t.readFloat32(n),i.unk4=t.readFloat32(n),r.push(i)}e.lights=r},MOMT:function(e,t){for(var n={offs:0},r=[],o=e.motx,i=0;i<e.nTextures;i++){var a={};a.flags1=t.readUint32(n),a.shader=t.readUint32(n),a.blendMode=t.readUint32(n),a.namestart1=t.readInt32(n),a.color1=t.readUint32(n),a.flags_1=t.readInt32(n),a.namestart2=t.readInt32(n),a.color2=t.readUint32(n),a.flags_2=t.readInt32(n),a.color_3=t.readUint32(n),a.unk=t.readInt32(n),a.dx=t.readInt32Array(n,5),a.textureName1=(0,u["default"])(o.buffer).readString({offs:a.namestart1},o.length),a.textureName2=(0,u["default"])(o.buffer).readString({offs:a.namestart2},o.length),r.push(a)}e.momt=r},MOTX:function(e,t){var n={offs:0},r=t.readUint8Array(n,t.chunkLen);e.motx=r},MODN:function(e,t){var n={offs:0},r=t.readUint8Array(n,t.chunkLen);e.modn=r},MODS:function(e,t){for(var n={offs:0},r=[],o=0;o<e.nDoodadSets;o++){var i={};i.name=t.readNZTString(n,20),i.index=t.readInt32(n),i.number=t.readInt32(n),i.unused=t.readInt32(n),r.push(i)}e.mods=r},MODD:function(e,t){for(var n={offs:0},r=e.modn,o=t.chunkLen/40,i=new Array(o),a=0;a<o;a++){var s={};s.nameIndex=t.readInt32(n),s.nameIndex=16777215&s.nameIndex,s.modelName=(0,u["default"])(r.buffer).readString({offs:s.nameIndex},r.length-s.nameIndex),s.pos=t.readVector3f(n),s.rotation=t.readQuaternion(n),s.scale=t.readFloat32(n),s.color=t.readUint32(n),i[a]=s}e.modd=i},MFOG:function(e,t){var n={offs:0},r={};r.flag=t.readInt32(n),r.pos=t.readVector3f(n),r.smaller_radius=t.readFloat32(n),r.larger_radius=t.readFloat32(n),r.fog_end=t.readFloat32(n),r.fog_startScalar=t.readFloat32(n),r.fog_color=t.readUint32(n),r.fog_colorF=[(255&r.fog_color)/255,(r.fog_color>>8&255)/255,(r.fog_color>>16&255)/255,(r.fog_color>>24&255)/255],r.underwater_fog_end=t.readFloat32(n),r.underwater_fog_startScalar=t.readFloat32(n),r.underwater_fog_color=t.readUint32(n),r.underwater_fog_colorF=[(255&r.underwater_fog_color)/255,(r.underwater_fog_color>>8&255)/255,(r.underwater_fog_color>>16&255)/255,(r.underwater_fog_color>>24&255)/255],e.mfog=r}},r=(0,s["default"])(e),o=r.then(function(e){var n={};return e.setSectionReaders(new t),e.processFile(n),n},function(){});return o}Object.defineProperty(t,"__esModule",{value:!0}),t.wmoGroupLoader=t.wmoLoader=void 0;var a=n(81),s=r(a),l=n(82),u=r(l),c=n(68),f=r(c);t.wmoLoader=i,t.wmoGroupLoader=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(87),s=r(a),l=n(95),u=function(){function e(t){o(this,e);this.cache=(0,s["default"])(function(e){return(0,l.wmoLoader)(e)},function(e){return e})}return i(e,[{key:"loadWmoMain",value:function(e){return this.cache.get(e)}},{key:"unLoadWmoMain",value:function(e){this.cache.remove(e)}}]),e}();t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(87),s=r(a),l=n(98),u=r(l),c=n(99),f=r(c),d=function(){function e(t){o(this,e),this.sceneApi=t,this.texture=null}return i(e,[{key:"loadFromMipmaps",value:function(e,t){var n=this.sceneApi.getGlContext(),r=this.sceneApi.extensions.getAnisotropicExt(),o=this.sceneApi.extensions.getComprTextExt();this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture);var i=null;if(o)switch(t){case"S3TC_RGB_DXT1":i=o.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case"S3TC_RGBA_DXT1":i=o.COMPRESSED_RGBA_S3TC_DXT1_EXT;break;case"S3TC_RGBA_DXT3":i=o.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case"S3TC_RGBA_DXT5":i=o.COMPRESSED_RGBA_S3TC_DXT5_EXT}var a=!(void 0!=o&&void 0!=o.COMPRESSED_RGB_S3TC_DXT1_EXT&&void 0!=o&&void 0!=o.COMPRESSED_RGBA_S3TC_DXT1_EXT),s=!(void 0!=o&&void 0!=o.COMPRESSED_RGBA_S3TC_DXT3_EXT),l=!(void 0!=o&&void 0!=o.COMPRESSED_RGBA_S3TC_DXT5_EXT),u=!1;switch(t){case"S3TC_RGB_DXT1":case"S3TC_RGBA_DXT1":for(var c=0;c<e.length;c++)if(a){var d=f["default"].decodeDXT1toBitmap32(e[c].texture,e[c].width,e[c].height);n.texImage2D(n.TEXTURE_2D,c,n.RGBA,e[c].width,e[c].height,0,n.RGBA,n.UNSIGNED_BYTE,d.decData)}else n.compressedTexImage2D(n.TEXTURE_2D,c,i,e[c].width,e[c].height,0,e[c].texture);break;case"S3TC_RGBA_DXT3":for(var c=0;c<e.length;c++)if(s){var d=f["default"].decodeDXT3toBitmap32(e[c].texture,e[c].width,e[c].height);n.texImage2D(n.TEXTURE_2D,c,n.RGBA,e[c].width,e[c].height,0,n.RGBA,n.UNSIGNED_BYTE,d.decData)}else n.compressedTexImage2D(n.TEXTURE_2D,c,i,e[c].width,e[c].height,0,e[c].texture);break;case"S3TC_RGBA_DXT5":for(var c=0;c<e.length;c++)if(l){var d=f["default"].decodeDXT5toBitmap32(e[c].texture,e[c].width,e[c].height);n.texImage2D(n.TEXTURE_2D,c,n.RGBA,e[c].width,e[c].height,0,n.RGBA,n.UNSIGNED_BYTE,d.decData)}else n.compressedTexImage2D(n.TEXTURE_2D,c,i,e[c].width,e[c].height,0,e[c].texture);break;case"BGRA":for(var c=0;c<e.length;c++)n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e[c].width,e[c].height,0,n.RGBA,n.UNSIGNED_BYTE,e[c].texture)}if(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),r){var p=n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT);n.texParameterf(n.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,p)}u&&(n.generateMipmap(n.TEXTURE_2D),0!=n.getError()),n.bindTexture(n.TEXTURE_2D,null)}},{key:"destroy",value:function(){var e=this.gl;this.texture&&e.deleteTexture(this.texture),this.texture=null}}]),e}(),p=function(){function e(t){o(this,e);this.cache=(0,s["default"])(function(e){return(0,u["default"])(e)},function(e){var n=new d(t);return n.loadFromMipmaps(e.mipmaps,e.textureFormat),n.fileName=e.fileName,n})}return i(e,[{key:"loadTexture",value:function(e){var t=e.toLowerCase();return this.cache.get(t)}},{key:"unLoadTexture",value:function(e){this.cache.remove(e)}}]),e}();t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=(0,i["default"])(e),n=t.then(function(e){var t={offs:0},n=e.readNZTString(t,4);if("BLP2"!=n){var r="Unknown BLP file ident = "+n+", filepath = ";throw $log.error(r),r}var o={header:{}},o=e.parseSectionDefinition(o,a,e,t);o.fileName=e.filePath;var i=o.width,s=o.height;switch(o.preferredFormat){case 0:o.alphaChannelBitDepth>0?o.textureFormat="S3TC_RGBA_DXT1":o.textureFormat="S3TC_RGB_DXT1";break;case 1:o.textureFormat="S3TC_RGBA_DXT3";break;case 3:o.textureFormat="BGRA";break;case 4:o.textureFormat="PalARGB1555DitherFloydSteinberg";break;case 5:o.textureFormat="PalARGB4444DitherFloydSteinberg";break;case 7:o.textureFormat="S3TC_RGBA_DXT5";break;case 8:o.textureFormat="BGRA";break;case 9:o.textureFormat="PalARGB2565DitherFloydSteinberg"}for(var l=[],u=0;u<15&&(0!=o.lengths[u]&&0!=o.offsets[u]);u++){var c=e.readUint8Array({offs:o.offsets[u]},o.lengths[u]);if(1==o.colorEncoding&&8==o.preferredFormat){var f=c;c=new Uint8Array(i*s*4);for(var d=0;d<i*s;d++){var p=f[d],h=o.palette[4*p+0],m=o.palette[4*p+1],v=o.palette[4*p+2],g=f[i*s+d];c[4*d+0]=v,c[4*d+1]=m,c[4*d+2]=h,c[4*d+3]=g}}var b=c.length;if("S3TC_RGBA_DXT5"!=o.textureFormat&&"S3TC_RGBA_DXT3"!=o.textureFormat||(b=Math.floor((i+3)/4)*Math.floor((s+3)/4)*16),"S3TC_RGB_DXT1"!=o.textureFormat&&"S3TC_RGBA_DXT1"!=o.textureFormat||(b=Math.floor((i+3)/4)*Math.floor((s+3)/4)*8),c.length!=b){for(var y=new Uint8Array(b),d=0;d<c.length;d++)y[d]=c[d];c=y}l.push({texture:c,width:i,height:s}),s=Math.floor(s/2),i=Math.floor(i/2),s=0==s?1:s,i=0==i?1:i}return o.mipmaps=l,o},function(e){return e});return n};var o=n(91),i=r(o),a={name:"header",type:"layout",layout:[{name:"version",type:"int32"},{name:"colorEncoding",type:"uint8"},{name:"alphaChannelBitDepth",type:"uint8"},{name:"preferredFormat",type:"uint8"},{name:"mipmap_level_and_flags",type:"uint8"},{name:"width",type:"int32"},{name:"height",type:"int32"},{name:"offsets",type:"int32Array",len:16},{name:"lengths",type:"int32Array",len:16},{name:"palette",type:"uint8Array",len:1024}]}},function(e,t){"use strict"},function(e,t,n){"use strict";function r(e,t){function n(e){var t=String.fromCharCode(e.keyCode||e.charCode);switch(t){case"W":p=1;break;case"S":p=-1;break;case"A":h=-1;break;case"D":h=1;break;case"Q":m=1;break;case"K":v=!v;break;case"E":m=-1}}function r(e){var t=String.fromCharCode(e.keyCode||e.charCode);switch(t){case"W":p=0;break;case"S":p=0;break;case"A":h=0;break;case"D":h=0;break;case"Q":m=0;break;case"E":m=0}}function i(e){0===e.button&&(g=1,b=e.pageX,y=e.pageY)}function a(e){g=1,b=e.pageX,y=e.pageY}function s(e){var t=e.touches[0].pageX,n=e.touches[0].pageY;1===g&&(x+=(t-b)/4,w+=(n-y)/4,w<-100?w=-100:w>100&&(w=100),b=t,y=n)}function l(e){0===e.button&&(g=0)}function u(e){if(M){var t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;x+=t/4,w+=n/4,w<-89.99999?w=-89.99999:w>89.99999&&(w=89.99999)}else 1===g&&(x+=(e.pageX-b)/4,w+=(e.pageY-y)/4,w<-89.99999?w=-89.99999:w>89.99999&&(w=89.99999),b=e.pageX,y=e.pageY)}function c(e){g=0}function f(e){return e*(Math.PI/180)}var d=[0,0,0],p=0,h=0,m=0,v=!1,g=0,b=0,y=0,x=0,w=0,_=t;_.cameraSpeed=.02;var k="pointerLockElement"in t||"mozPointerLockElement"in t||"webkitPointerLockElement"in t;if(k){e.addEventListener("click",function(){e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()},!1);var M=!1,E=function(n){M=t.pointerLockElement===e||t.mozPointerLockElement===e||t.webkitPointerLockElement===e};t.addEventListener("pointerlockchange",E,!1),t.addEventListener("mozpointerlockchange",E,!1),t.addEventListener("webkitpointerlockchange",E,!1)}e.addEventListener("mousemove",u,!1),e.addEventListener("touchmove",s,!1),e.addEventListener("mousedown",i,!1),e.addEventListener("touchstart",a,!1),e.addEventListener("mouseup",l,!1),e.addEventListener("touchend",l,!1),e.addEventListener("mouseout",c,!1);var A;return t.addEventListener("mousedown",function(e){A=e.target},!1),t.addEventListener("keydown",function(t){A==e&&n(t)},!1),t.addEventListener("keyup",function(t){A==e&&r(t)},!1),{tick:function(e){var t=[1,0,0],n=_.cameraSpeed,r=e;t=o.vec3.rotateY(t,t,[0,0,0],f(w)),t=o.vec3.rotateZ(t,t,[0,0,0],f(-x)),o.vec3.normalize(t,t);var i=[];if(0!==h){var a=[];o.vec3.rotateZ(a,t,[0,0,0],f(-90)),a[2]=0,o.vec3.normalize(a,a),o.vec3.scale(a,a,r*n*h),o.vec3.add(d,d,a)}if(0!==p){var s=[];o.vec3.copy(s,t),o.vec3.scale(s,s,r*n*p),o.vec3.add(d,d,s)}return 0!==m&&(d[2]=d[2]+r*n*m),o.vec3.add(i,d,t),{lookAtVec3:i,cameraVec3:d,staticCamera:v}},setCameraPos:function(e,t,n){d=[e,t,n]}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(56)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/AnimationData.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};r.id=t.readInt32(n,0),r.name=t.readText(n,1),r.weaponFlags=t.readInt32(n,2),r.bodyFlags=t.readInt32(n,3),r.flags=t.readInt32(n,4),r.fallbackID=t.readInt32(n,5),r.behaviorID=t.readInt32(n,6),r.behaviorTier=t.readInt32(n,7),u[r.id]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=i["default"].defer(),n=20;return(0,s["default"])(e).then(function(e){function r(e,t){var r=n+e*(4*l)+4*t;return{offs:r}}function o(e,t){var n=r(e,t),o=i.readUint32(n),a=d+o;return{offs:a}}var i=(0,u["default"])(e),a={offs:0},s=(i.readString(a,4),i.readInt32(a)),l=i.readInt32(a),c=i.readInt32(a),f=i.readInt32(a),d=n+s*(4*l),p={fileSize:e.byteLength,getRowCount:function(){return s},getColCount:function(){return l},getRowSize:function(){return c},readInt32:function(e,t){var n=r(e,t);return i.readInt32(n)},readFloat32:function(e,t){var n=r(e,t);return i.readFloat32(n)},readUInt32:function(e,t){var n=r(e,t);return i.readUint32(n)},readText:function(e,t){var n=o(e,t);return i.readString(n,f)}};t.resolve(p)},function(){t.reject(null)}),t.promise};var o=n(68),i=r(o),a=n(83),s=r(a),l=n(82),u=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/CharacterFacialHairStyles.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};r.race=t.readInt32(n,0),r.gender=t.readInt32(n,1),r.hairStyle=t.readInt32(n,2),r.geoset=[];for(var o=0;o<5;o++)r.geoset[o]=t.readInt32(n,3+o);u[n]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/CharacterFacialHairStyles.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};t.readInt32(n,0);r.race=t.readInt32(n,1),r.gender=t.readInt32(n,2),r.hairStyle=t.readInt32(n,3),r.geoset=t.readInt32(n,4),r.unk=t.readInt32(n,5),u[n]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/CharSections.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){
var r={};t.readInt32(n,0);r.race=t.readInt32(n,1),r.gender=t.readInt32(n,2),r.section=t.readInt32(n,3),r.texture1=t.readText(n,4),r.texture2=t.readText(n,5),r.texture3=t.readText(n,6),r.unk=t.readInt32(n,7),r.type=t.readInt32(n,8),r.color=t.readInt32(n,9),u[n]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u={};var t=(0,l["default"])("DBFilesClient/CreatureDisplayInfo.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={},o=t.readInt32(n,0);r.model1=t.readInt32(n,1),r.sound=t.readInt32(n,2),r.displayExtra=t.readInt32(n,3),r.modelScale=t.readFloat32(n,4),r.opacity=t.readInt32(n,5),r.skin1=t.readText(n,6),r.skin2=t.readText(n,7),r.skin3=t.readText(n,8),u[o]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/Light.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};r.id=t.readInt32(n,0),r.mapId=t.readInt32(n,1),r.x=t.readFloat32(n,2),r.y=t.readFloat32(n,3),r.z=t.readFloat32(n,4),r.falloffStart=t.readFloat32(n,5),r.falloffEnd=t.readFloat32(n,6),r.skyAndFog=t.readInt32(n,7),r.sunset=t.readInt32(n,8),r.other=t.readInt32(n,9),r.death=t.readInt32(n,10),r.unk1=t.readInt32(n,11),r.unk2=t.readInt32(n,12),r.unk3=t.readInt32(n,13),u[r.id]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/LightParams.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};try{r.id=t.readInt32(n,0),r.highlightSky=t.readInt32(n,1),r.lightSkyboxID=t.readFloat32(n,2),r.cloudTypeID=t.readFloat32(n,3),r.glow=t.readFloat32(n,4),r.waterShallowAlpha=t.readFloat32(n,5),r.waterDeepAlpha=t.readFloat32(n,6),r.oceanShallowAlpha=t.readFloat32(n,7),r.oceanDeepAlpha=t.readFloat32(n,8),u[r.id]=r}catch(o){console.log(o)}}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/LightFloatBand.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};r.id=t.readInt32(n,0),r.noOfEntries=t.readInt32(n,1),r.times=[];for(var o=0;o<r.noOfEntries;o++)r.times.push(t.readInt32(n,1+o));r.values=[];for(var o=0;o<r.noOfEntries;o++)r.values.push(t.readFloat32(n,18+o));u[r.id]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u=[];var t=(0,l["default"])("DBFilesClient/LightIntBand.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};r.id=t.readInt32(n,0),r.noOfEntries=t.readInt32(n,1),r.times=[];for(var o=0;o<r.noOfEntries;o++)r.times.push(t.readInt32(n,1+o));r.values=[];for(var o=0;o<r.noOfEntries;o++)r.values.push(t.readInt32(n,18+o));r.floatValues=[];for(var o=0;o<r.noOfEntries;o++)r.floatValues.push([(255&r.values[o])/255,(r.values[o]>>8&255)/255,(r.values[o]>>16&255)/255,(r.values[o]>>24&255)/255]);u[r.id]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u={};var t=(0,l["default"])("DBFilesClient/CreatureDisplayInfoExtra.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={},o=t.readInt32(n,0);r.race=t.readInt32(n,1),r.gender=t.readInt32(n,2),r.skin=t.readInt32(n,3),r.face=t.readInt32(n,4),r.hairType=t.readInt32(n,5),r.hairStyle=t.readInt32(n,6),r.faceHairStyle=t.readInt32(n,7),r.helmItem=t.readInt32(n,8),r.shoulderItem=t.readInt32(n,9),r.shirtItem=t.readInt32(n,10),r.cuirassItem=t.readInt32(n,11),r.beltItem=t.readInt32(n,12),r.legsItem=t.readInt32(n,13),r.bootsItem=t.readInt32(n,14),r.ringsItem=t.readInt32(n,15),r.glovesItem=t.readInt32(n,16),r.tabardItem=t.readInt32(n,17),r.capeItem=t.readInt32(n,18),r.CanEquip=t.readInt32(n,19),r.skinTexture=t.readText(n,20),u[o]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u={};var t=(0,l["default"])("DBFilesClient/CreatureModelData.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={},o=t.readInt32(n,0);r.unk=t.readInt32(n,1),r.modelName=t.readText(n,2),r.modelScale=t.readFloat32(n,3),r.minCorner={x:t.readFloat32(n,18),y:t.readFloat32(n,19),z:t.readFloat32(n,20)},r.maxCorner={x:t.readFloat32(n,21),y:t.readFloat32(n,22),z:t.readFloat32(n,23)},u[o]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u={};var t=(0,l["default"])("DBFilesClient/GameObjectDisplayInfo.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={},o=t.readInt32(n,0);r.modelName=t.readText(n,1),u[o]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u={};var t=(0,l["default"])("DBFilesClient/ItemDisplayInfo.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={},o=t.readInt32(n,0);r.leftModel=t.readText(n,1),r.rightModel=t.readText(n,2),r.leftTextureModel=t.readText(n,3),r.rightTextureModel=t.readText(n,4),r.inventoryIcon1=t.readText(n,5),r.inventoryIcon2=t.readText(n,6),r.geosetGroup_1=t.readInt32(n,7),r.geosetGroup_2=t.readInt32(n,8),r.geosetGroup_3=t.readInt32(n,9),r.flags=t.readInt32(n,10),r.spellVisualID=t.readInt32(n,11),r.groupSoundIndex=t.readInt32(n,12),r.helmetGeosetVis_1=t.readInt32(n,13),r.helmetGeosetVis_2=t.readInt32(n,14),r.texture_1=t.readText(n,15),r.texture_2=t.readText(n,16),r.texture_3=t.readText(n,17),r.texture_4=t.readText(n,18),r.texture_5=t.readText(n,19),r.texture_6=t.readText(n,20),r.texture_7=t.readText(n,21),r.texture_8=t.readText(n,22),r.itemVisual=t.readInt32(n,23),r.particleColorId=t.readInt32(n,24),u[o]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=a["default"].defer();if(null===u){u={};var t=(0,l["default"])("DBFilesClient/Map.dbc");t.then(function(t){for(var n=0;n<t.getRowCount();n++){var r={};r.id=t.readInt32(n,0),r.wdtName=t.readText(n,1),r.mapName=t.readText(n,5),u[r.id]=r}e.resolve(u)},function(t){e.reject()})}else e.resolve(u);return e.promise}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(68),a=r(i),s=n(102),l=r(s),u=null},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(13),i=r(o),a=n(117),s=r(a);n(1),n(119),n(118);var l=i["default"].module("main.directives.fileDownloader",[s["default"],"uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html"]);l.directive("fileDownloader",[function(){return{restrict:"E",scope:{url:"=",loadedFile:"=loadedFile",fileProgress:"="},link:function(e,t,n){function r(t){t.lengthComputable&&(e.fileProgress=t.loaded/t.total*100,e.$apply())}e.fileProgress=0;var o=new XMLHttpRequest;o.onprogress=r,o.responseType="arraybuffer",o.open("GET",e.url,!0),o.onreadystatechange=function(t){4==o.readyState&&(e.loadedFile=o.response,e.$apply())},o.send()}}}])},function(e,t,n){n(118),n(119),n(120),n(121);var r="ui.bootstrap.module.progressbar";angular.module(r,["ui.bootstrap.progressbar","uib/template/progressbar/progressbar.html","uib/template/progressbar/progress.html","uib/template/progressbar/bar.html"]),e.exports=r},function(e,t){angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}])},function(e,t){angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}])},function(e,t){angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}])},function(e,t){angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){function r(){return angular.isDefined(e.maxParam)?e.maxParam:n.max}var o=this,i=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=r(),this.addBar=function(e,t,n){i||t.css({transition:"none"}),this.bars.push(e),e.max=r(),e.title=n&&angular.isDefined(n.title)?n.title:"progressbar",e.$watch("value",function(t){e.recalculatePercentage()}),e.recalculatePercentage=function(){var t=o.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);t>100&&(e.percent-=t-100)},e.$on("$destroy",function(){t=null,o.removeBar(e)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){o.bars.forEach(function(e){e.max=r(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]),{title:n.title})}}})}]);
//# sourceMappingURL=main.js.map